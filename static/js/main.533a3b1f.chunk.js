(this["webpackJsonp@meddbriefer/data-entry"]=this["webpackJsonp@meddbriefer/data-entry"]||[]).push([[0],{31:function(e){e.exports=JSON.parse('{"name":"blank-trauma","scenarioType":"trauma","info":{"instructorInformation":null,"patientInformation":{"moulage":null,"position":null,"actions":null},"dispatchInfo":null,"sceneAssessment":null},"assessmentFindings":{"assess-scene-safety":null,"assess-injury-mechanism":null,"assess-num-patients":null,"request-addl-help":null,"verbalizes-patient-condition":null,"determines-loc":null,"determines-life-threats":null,"assess-airway":null,"assess-breathing":null,"assess-ventilation":null,"assess-pulse":null,"assess-skin":null,"assess-bleeding":null,"assess-mouth-nose-face":null,"assess-scape-ears":null,"assess-perrl":null,"assess-trachea":null,"assess-jugular":null,"assess-spine":null,"inspects-chest":null,"palpate-chest":null,"auscultate-chest":null,"assess-abdomen":null,"assess-pelvis":null,"assess-genitalia":null,"assess-left-leg":null,"assess-right-leg":null,"assess-left-arm":null,"assess-right-arm":null,"assess-posterior-thorax":null,"assess-lumbar-buttocks":null},"initialVitalSigns":{"BP":null,"P":null,"R":null,"Skin":null,"Spo2":null,"ETCO2":null,"GCS":null,"Glucose":null,"Pain":null,"Temp":null},"SAMPLE":{"S":null,"A":null,"M":null,"P":null,"L":null,"E":null},"reassessmentVitals":{"BP":{"goodVitals":null,"badVitals":null},"P":{"goodVitals":null,"badVitals":null},"R":{"goodVitals":null,"badVitals":null},"Skin":{"goodVitals":null,"badVitals":null},"Spo2":{"goodVitals":null,"badVitals":null},"ETCO2":{"goodVitals":null,"badVitals":null},"GCS":{"goodVitals":null,"badVitals":null},"Glucose":{"goodVitals":null,"badVitals":null},"Pain":{"goodVitals":null,"badVitals":null},"Temp":{"goodVitals":null,"badVitals":null}},"interventions":{"stabilizes-spine":null,"manages-airway":null,"oxygen-therapy":null,"manage-breathing-injury":null,"control-bleeding":null,"control-shock":null,"transport-priority":null}}')},32:function(e){e.exports=JSON.parse('[{"id":"scene-size-up","type":"heading","label":"Scene Size-Up"},{"id":"assess-scene-safety","type":"assessment","label":"Determines the scene/situation is safe"},{"id":"assess-injury-mechanism","type":"assessment","label":"Determines the mechanism of injury/nature of illness"},{"id":"assess-num-patients","type":"assessment","label":"Determines the number of patients"},{"id":"request-addl-help","type":"assessment","label":"Requests additional help if necessary"},{"id":"stabilizes-spine","type":"intervention","label":"Stabilizes or directs assistant to stabilize the cervical spine, as indicated"},{"id":"general-assessment","type":"heading","label":"General Impression and LOC"},{"id":"verbalizes-patient-condition","type":"assessment","label":"Verbalizes general impression of the patient"},{"id":"determines-loc","type":"assessment","label":"Determines responsiveness/level of consciousness"},{"id":"determines-life-threats","type":"assessment","label":"Determines chief complaint/apparent life-threats"},{"id":"airway","type":"heading","label":"Airway"},{"id":"assess-airway","type":"assessment","label":"Opens and assesses airway"},{"id":"manages-airway","type":"intervention","label":"Inserts adjunct as indicated"},{"id":"breathing","type":"heading","label":"Breathing"},{"id":"assess-breathing","type":"assessment","label":"Assess breathing"},{"id":"assess-ventilation","type":"assessment","label":"Assess adequate ventilation"},{"id":"oxygen-therapy","type":"intervention","label":"Initiates appropriate oxygen therapy"},{"id":"manage-breathing-injury","type":"intervention","label":"Manages any injury which may compromise breathing/ventilation"},{"id":"circulation","type":"heading","label":"Circulation"},{"id":"assess-pulse","type":"assessment","label":"Checks pulse"},{"id":"assess-skin","type":"assessment","label":"Assess skin [either skin color, temperature, or condition]"},{"id":"assess-bleeding","type":"assessment","label":"Assesses for major bleeding"},{"id":"control-bleeding","type":"intervention","label":"Manages major bleeding if present"},{"id":"control-shock","type":"intervention","label":"Initiates shock management"},{"id":"transport-decision","type":"heading","label":"Transport Priority"},{"id":"transport-priority","type":"intervention","label":"Identifies priority patients/makes transport decision based upon calculated GCS"},{"id":"history-taking","type":"heading","label":"History Taking"},{"id":"obtains-vitals","type":"assessment","label":"Obtains, or directs assistant to obtain, baseline vital signs"},{"id":"attempt-obtain-sample","type":"assessment","label":"Attempts to obtain SAMPLE history"},{"id":"head","type":"heading","label":"Head"},{"id":"assess-mouth-nose-face","type":"assessment","label":"Inspects mouth, nose, and assesses facial area"},{"id":"assess-scape-ears","type":"assessment","label":"Inspects and palpates scalp and ears"},{"id":"assess-perrl","type":"assessment","label":"Assesses eyes for PERRL"},{"id":"neck","type":"heading","label":"Neck"},{"id":"assess-trachea","type":"assessment","label":"Checks position of trachea"},{"id":"assess-jugular","type":"assessment","label":"Checks jugular veins"},{"id":"assess-spine","type":"assessment","label":"Palpates cervical spine"},{"id":"chest","type":"heading","label":"Chest"},{"id":"inspects-chest","type":"assessment","label":"Inspects chest"},{"id":"palpate-chest","type":"assessment","label":"Palpates chest"},{"id":"auscultate-chest","type":"assessment","label":"Auscultates chest"},{"id":"abdomen-pelvis","type":"heading","label":"Abdomen/pelvis"},{"id":"assess-abdomen","type":"assessment","label":"Inspects & palpates abdomen"},{"id":"assess-pelvis","type":"assessment","label":"Assesses pelvis"},{"id":"assess-genitalia","type":"assessment","label":"Verbalizes assessment of genitalia/perineum as needed"},{"id":"lower-extremities","type":"heading","label":"Lower extremities"},{"id":"assess-right-leg","type":"assessment","label":"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on right lower extremity"},{"id":"assess-left-leg","type":"assessment","label":"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on left lower extremity"},{"id":"upper-extremities","type":"heading","label":"Upper extremities"},{"id":"assess-right-arm","type":"assessment","label":"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on right upper extremity"},{"id":"assess-left-arm","type":"assessment","label":"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on left upper extremity"},{"id":"posterior-thorax-lumbar-buttocks","type":"heading","label":"Posterior thorax, lumbar, and buttocks"},{"id":"assess-posterior-thorax","type":"assessment","label":"Inspects and palpates posterior thorax"},{"id":"assess-lumbar-buttocks","type":"assessment","label":"Inspects and palpates lumbar and buttocks area"}]')},41:function(e,t,s){},42:function(e,t,s){},43:function(e,t,s){},49:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s(29),i=s.n(a),c=s(11),r=s(6),l=s(18),o=(s(41),s(42),s(43),s(1)),u=function(){var e=Object(n.useContext)(l.AuthContext),t=e.currentUser,s=e.signOutUser,a=Object(r.k)(),i=Object(r.l)();return Object(o.jsxs)("div",{className:"title-bar",children:[Object(o.jsx)("h1",{children:"MedDBriefer"}),"/"!==i.pathname&&Object(o.jsx)("button",{type:"button",className:"back-bttn",onClick:function(){return a.goBack()},children:"Back"}),t&&Object(o.jsx)("button",{type:"button",className:"sign-out-bttn",onClick:function(){return s()},children:"Sign out"})]})},d=function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),e.children]})},p=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)("div",{className:"nav-wrapper",children:[Object(o.jsx)(c.Link,{to:"/scenarios",children:Object(o.jsx)("div",{className:"home-nav-button",children:"Scenario Forms"})}),Object(o.jsx)(c.Link,{to:"/scenario-groups",children:Object(o.jsx)("div",{className:"home-nav-button",children:"Scenario Assignments"})})]})]})},b=s(5),j=s.n(b),m=s(8),h=s(17),f=s(12),x=s.n(f),O=s(23),y=(s(46),s(50),O.a.apps.length?O.a.app():O.a.initializeApp({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"})),g=(y.auth(),y.firestore()),v=function(){var e=Object(m.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenarios").doc(t).get();case 2:return s=e.sent,e.abrupt("return",null!=s.data());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenario-assignments").doc(t).get();case 2:return s=e.sent,e.abrupt("return",null!=s.data());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(j.a.mark((function e(t,s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenarios").doc(t).set(s);case 2:alert("Succesfully published '".concat(t,"'."));case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenarios").where("name","!=","blank-trauma").get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenarios").doc(t).get();case 2:return s=e.sent,e.abrupt("return",s.data());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenarios").doc(t).delete();case 2:return console.log("'".concat(t,"' permanently deleted.")),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(j.a.mark((function e(t,s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenario-assignments").doc(t).set(s);case 2:console.log("Grouping '".concat(t,"' successfully published."));case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenario-assignments").get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(m.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenario-assignments").doc(t).get();case 2:return s=e.sent,e.abrupt("return",s.data());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("scenario-assignments").doc(t).delete();case 2:console.log("'".concat(t,"' group permanently deleted."));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=s(31),E=function(e){var t=e.active,s=e.scenario,n=e.edit,a=s.info,i="patientInformation";return Object(o.jsxs)("div",{id:"basic-info",className:x()("info-wrapper",{"scenario-view-hidden":!t}),children:[Object(o.jsx)("h1",{children:"Basic Information:"}),Object(o.jsxs)("label",{children:["Scenario Title:",Object(o.jsx)("input",{id:"name",type:"text",defaultValue:n?s.name:""})]}),Object(o.jsxs)("label",{children:["Instructor Info:",Object(o.jsx)("textarea",{id:"info-instructorInformation",defaultValue:a.instructorInformation})]}),Object(o.jsxs)("label",{children:["Dispatch Info:",Object(o.jsx)("textarea",{id:"info-dispatchInfo",defaultValue:a.dispatchInfo})]}),Object(o.jsxs)("label",{children:["Scene assessment:",Object(o.jsx)("textarea",{id:"info-sceneAssessment",defaultValue:a.sceneAssessment})]}),Object(o.jsxs)("label",{children:["Maximum time for scenario:",Object(o.jsx)("input",{id:"info-maxTime",type:"number",placeholder:"minutes",defaultValue:a.maxTime})]}),Object(o.jsx)("h2",{children:"Patient Info:"}),Object(o.jsxs)("div",{id:"pt-info",children:[Object(o.jsxs)("label",{children:["Moulage:",Object(o.jsx)("input",{type:"text",id:"info-".concat(i,"-moulage"),defaultValue:a.patientInformation.moulage})]}),Object(o.jsxs)("label",{children:["Position:",Object(o.jsx)("input",{type:"text",id:"info-".concat(i,"-position"),defaultValue:a.patientInformation.position})]}),Object(o.jsxs)("label",{children:["Actions:",Object(o.jsx)("input",{type:"text",id:"info-".concat(i,"-actions"),defaultValue:a.patientInformation.actions})]})]})]})},R=function(e){var t=e.item;return Object(o.jsx)("div",{className:"list-item header-item",children:t.label})},F=function(e){var t,s=e.item,n=e.scenario.interventions;return Object(o.jsxs)("label",{children:["'".concat(s.label,"':"),Object(o.jsxs)("select",{id:"interventions-".concat(s.id),children:[Object(o.jsx)("option",{hidden:!0,children:null===(t=n[s.id])||void 0===t?void 0:t.toUpperCase()}),Object(o.jsx)("option",{value:"na",children:"NA"}),Object(o.jsx)("option",{value:"say",children:"SAY"}),Object(o.jsx)("option",{value:"do",children:"DO"})]})]})},M=function(e){var t=e.item,s=e.scenario.assessmentFindings;return Object(o.jsxs)("label",{children:["'".concat(t.label,"':"),Object(o.jsx)("input",{type:"text",id:"assessmentFindings-".concat(t.id),placeholder:"leave blank if N/A or unremarkable",defaultValue:s[t.id]})]})},T=function(e){var t=e.item,s=e.scenario;return"heading"===t.type?Object(o.jsx)(R,{item:t}):Object(o.jsx)("div",{className:"step-item",children:"assessment"===t.type?Object(o.jsx)(M,{item:t,scenario:s}):Object(o.jsx)(F,{item:t,scenario:s})})},G=s(32),B=function(e){var t=e.active,s=e.scenario;return Object(o.jsxs)("div",{id:"scenario-steps",className:x()({"scenario-view-hidden":!t}),children:[Object(o.jsx)("h1",{children:"Scenario Items"}),G.map((function(e){return Object(o.jsx)(T,{item:e,scenario:s},e.id)}))]})},D=function(e){var t=e.scenario,s=e.header,n=e.type;return Object(o.jsxs)("div",{className:"vital-wrapper",children:[Object(o.jsxs)("h1",{children:[" ","".concat(s," Vitals:")," "]}),Object(o.jsxs)("div",{className:"vitals-box",children:[Object(o.jsx)(z,{label:"BP",type:n,scenario:t}),Object(o.jsx)(z,{label:"P",type:n,scenario:t}),Object(o.jsx)(z,{label:"R",type:n,scenario:t}),Object(o.jsx)(z,{label:"Skin",type:n,scenario:t}),Object(o.jsx)(z,{label:"Spo2",type:n,scenario:t}),Object(o.jsx)(z,{label:"ETCO2",type:n,scenario:t}),Object(o.jsx)(z,{label:"GCS",type:n,scenario:t}),Object(o.jsx)(z,{label:"Glucose",type:n,scenario:t}),Object(o.jsx)(z,{label:"Pain",type:n,scenario:t}),Object(o.jsx)(z,{label:"Temp",type:n,scenario:t})]})]})};function z(e){var t=e.scenario,s=e.label,n=e.type,a="init"===n?"initialVitalSigns":"reassessmentVitals",i="initialVitalSigns"===a?null:n,c=i?"".concat(a,"-").concat(s,"-").concat(i):"".concat(a,"-").concat(s);return Object(o.jsxs)("label",{children:[s,":",Object(o.jsx)("input",{id:"".concat(c),type:"text",defaultValue:i?t[a][s][i]:t[a][s]})]})}var q=function(e){var t=e.active,s=e.scenario;return Object(o.jsxs)("div",{className:x()("info-box vitals",{"scenario-view-hidden":!t}),children:[Object(o.jsx)(D,{type:"init",header:"Initial",scenario:s}),Object(o.jsx)(D,{type:"goodVitals",header:"Good Reassessment",scenario:s}),Object(o.jsx)(D,{type:"badVitals",header:"Bad Reassessment",scenario:s})]})},U=function(e){var t=e.active,s=e.scenario.SAMPLE;return Object(o.jsxs)("div",{className:x()("info-box",{"scenario-view-hidden":!t}),id:"sample",children:[Object(o.jsx)("h1",{children:"SAMPLE:"}),Object(o.jsxs)("div",{className:"sample",children:[Object(o.jsxs)("label",{children:["S:",Object(o.jsx)("input",{type:"text",id:"SAMPLE-S",defaultValue:s.S})]}),Object(o.jsxs)("label",{children:["A:",Object(o.jsx)("input",{type:"text",id:"SAMPLE-A",defaultValue:s.A})]}),Object(o.jsxs)("label",{children:["M:",Object(o.jsx)("input",{type:"text",id:"SAMPLE-M",defaultValue:s.M})]}),Object(o.jsxs)("label",{children:["P:",Object(o.jsx)("input",{type:"text",id:"SAMPLE-P",defaultValue:s.P})]}),Object(o.jsxs)("label",{children:["L:",Object(o.jsx)("input",{type:"text",id:"SAMPLE-L",defaultValue:s.L})]}),Object(o.jsxs)("label",{children:["E:",Object(o.jsx)("input",{type:"text",id:"SAMPLE-E",defaultValue:s.E})]})]})]})},J=function(e){var t=e.match.params.scenarioId,s=Object(n.useState)(),a=Object(h.a)(s,2),i=a[0],c=a[1],l=Object(n.useState)("basic-info"),u=Object(h.a)(l,2),d=u[0],p=u[1],b=function(e){return e===d},f=!!t,O=Object(n.useRef)(null),y=Object(r.k)();return Object(n.useEffect)((function(){f?V(t).then((function(e){c(e)})).catch((function(e){console.log(e)})):c(C)}),[t,f]),Object(o.jsxs)("div",{className:"scenario-form-wrapper",children:[Object(o.jsxs)("nav",{id:"tab-selector",children:[Object(o.jsx)("div",{className:x()("tab-button",{"active-tab":b("basic-info")}),onClick:function(){return p("basic-info")},children:"Info"}),Object(o.jsx)("div",{className:x()("tab-button",{"active-tab":b("sample")}),onClick:function(){return p("sample")},children:"Sample"}),Object(o.jsx)("div",{className:x()("tab-button",{"active-tab":b("vitals")}),onClick:function(){return p("vitals")},children:"Vitals"}),Object(o.jsx)("div",{className:x()("tab-button",{"active-tab":b("steplist")}),onClick:function(){return p("steplist")},children:"Steplist"}),Object(o.jsx)("button",{type:"submit",id:"submit-next",onClick:function(){return function(){return g.apply(this,arguments)}()},children:"Submit \u2192"})]}),Object(o.jsx)("form",{id:"scenario-form",className:"scenario-form",ref:O,children:i?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(E,{active:b("basic-info"),scenario:i,edit:f}),Object(o.jsx)(U,{active:b("sample"),scenario:i}),Object(o.jsx)(q,{active:b("vitals"),scenario:i}),Object(o.jsx)(B,{active:b("steplist"),scenario:i})]}):Object(o.jsx)("p",{children:"Loading..."})})]});function g(){return(g=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.current,e.t0=null==t.name.value||""===t.name.value.trim(),e.t0){e.next=9;break}return e.next=5,v(t.name.value);case 5:if(e.t1=e.sent,!e.t1){e.next=8;break}e.t1=!f;case 8:e.t0=e.t1;case 9:if(!e.t0){e.next=13;break}alert("Scenario needs a new name!"),e.next=14;break;case 13:window.confirm("Any empty items will be filled with default information. Submit?")?(t=k(t),f&&t.name!==i.name&&I(i.name),w(t.name,t),y.goBack()):console.log("Submit cancelled.");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){console.log("Processing...");for(var t,s,n,a=Object.keys(e).length,c=JSON.parse(JSON.stringify(i||{})),r=0;r<a;r++){var l;if(null===(l=e[r])||void 0===l?void 0:l.value)switch(t=e[r].value,"assessmentFindings"===(n=(s=e[r].id).split("-"))[0]?n=[n[0],s.split("assessmentFindings-").slice(1).toString()]:"interventions"===n[0]&&(n=[n[0],s.split("interventions-").slice(1).toString()]),n.length){case 1:c[n[0]]=t;break;case 2:c[n[0]][n[1]]=t;break;case 3:c[n[0]][n[1]][n[2]]=t;break;default:console.log("Path length error:",n.length)}}return c}},H=function(e){var t,s=e.item,n=e.remove,a=e.index;return Object(o.jsxs)("div",{className:"list-scenario-item",children:[Object(o.jsx)("h1",{id:"title",children:s.name}),Object(o.jsx)("p",{children:s.scenarioType}),Object(o.jsxs)("p",{children:["Info: ",null!==(t=s.info.instructorInformation)&&void 0!==t?t:"Not given."]}),Object(o.jsx)(c.Link,{to:"/scenario/".concat(s.name),className:"action-bttn",children:"Edit"}),Object(o.jsx)("button",{type:"button",className:"action-bttn",onClick:function(){return n(a)},children:"Delete"})]})},K=function(){var e=Object(n.useState)(),t=Object(h.a)(e,2),s=t[0],a=t[1],i=Object(o.jsx)("p",{children:"Loading..."}),r=0;return Object(n.useEffect)((function(){S().then((function(e){a(e)})).catch((function(e){console.log(e)}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)("div",{className:"scenario-list",children:[Object(o.jsx)("h1",{id:"scenario-list-title",children:"Scenario List"}),Object(o.jsx)(c.Link,{to:"/scenario/",className:"new-scenario-bttn list-scenario-item",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"+"}),Object(o.jsx)("p",{children:"Create a New Scenario"})]})}),s?s.map((function(e){return e&&Object(o.jsx)(H,{item:e,remove:l,index:r++},"".concat(e.name,"-list"))})):i]})]});function l(e){return d.apply(this,arguments)}function d(){return(d=Object(m.a)(j.a.mark((function e(t){var n,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s[t].name,!window.confirm("Are you sure you want to delete this scenario? This cannot be undone!")){e.next=9;break}return e.next=4,I(n);case 4:(i=s.slice()).splice(t,1),a(i),e.next=10;break;case 9:console.log("Delete of",n,"cancelled");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},W=function(e){var t=e.match.params.groupId,s=Object(n.useState)(null),a=Object(h.a)(s,2),i=a[0],c=a[1],l=Object(n.useState)(null),d=Object(h.a)(l,2),p=d[0],b=d[1],f=t,x=!!t,O=Object(n.useRef)(null),y=Object(n.useRef)(null),g=Object(n.useRef)(null),v=Object(r.k)();Object(n.useEffect)((function(){S().then((function(e){c(e),t?P(t).then((function(e){b(e)})).catch((function(e){return console.log(e)})):b([])})).catch((function(){return console.log("Scenario loaded error")}))}),[t]);var w=function(){for(var e=y.current.children,t={},s=0;s<e.length;s++)e[s].children[0].checked&&(t[e[s].children[0].value]={id:e[s].children[0].value,order:parseInt(e[s].children[1].children[0].value)||null});return console.log(t),t},V=function(){var e=Object(m.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.current.value,s=w(),console.log(s),e.t0=""===t.trim(),e.t0){e.next=11;break}return e.next=7,k(t);case 7:if(e.t1=e.sent,!e.t1){e.next=10;break}e.t1=!x;case 10:e.t0=e.t1;case 11:if(!e.t0){e.next=14;break}return alert("Group needs a title!"),e.abrupt("return");case 14:return x&&f!==t&&L(f),e.next=17,N(t,{title:t,orderRequired:g.current.checked,assignments:s});case 17:alert("Published ".concat(O.current.value)),v.push("/scenario-groups");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)("div",{className:"scenario-assignment",children:[Object(o.jsx)("h1",{children:"Create Scenario Assignment"}),p?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("label",{className:"assignment-title",children:["Assignment title: ",Object(o.jsx)("input",{type:"text",ref:O,defaultValue:t})]}),Object(o.jsx)("div",{className:"assignment-list",ref:y,children:i.map((function(e){var t;return Object(o.jsxs)("label",{className:"assignment-check-item",children:[Object(o.jsx)("input",{type:"checkbox",value:e.name,defaultChecked:p.assignments&&null!=p.assignments[e.name]}),e.name,Object(o.jsxs)("span",{children:["# ",Object(o.jsx)("input",{type:"number",defaultValue:p.assignments&&(null===(t=p.assignments[e.name])||void 0===t?void 0:t.order)})]})]},e.name)}))}),Object(o.jsxs)("label",{className:"required-bttn",children:["Order required: ",Object(o.jsx)("input",{type:"checkbox",ref:g,defaultChecked:null===p||void 0===p?void 0:p.orderRequired})]})]}):Object(o.jsx)("p",{children:"Loading..."}),Object(o.jsx)("button",{type:"button",onClick:function(){return V()},children:"Submit"})]})]})},Q=function(e){var t=e.item,s=e.remove;return Object(o.jsxs)("div",{className:"scenario-assignment-list-item",children:[Object(o.jsx)("p",{children:t.title}),Object(o.jsx)(c.Link,{to:"/scenario-group/".concat(t.title),className:"action-bttn",children:"Edit"}),Object(o.jsx)("button",{type:"button",className:"action-bttn",onClick:function(){return s(t)},children:"Delete"})]})},Z=function(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),s=t[0],a=t[1];return Object(n.useEffect)((function(){A().then((function(e){a(e)})).catch((function(e){console.log(e)}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)("div",{className:"scenario-assignment-list",children:[Object(o.jsx)("h1",{children:"Scenario Assignments"}),Object(o.jsx)(c.Link,{to:"/scenario-group/",className:"new-group-bttn scenario-assignment-list-item",children:Object(o.jsx)("p",{children:"Create new assignment +"})}),s&&s.map((function(e){return Object(o.jsx)(Q,{item:e,remove:i},e.title)}))]})]});function i(e){return r.apply(this,arguments)}function r(){return(r=Object(m.a)(j.a.mark((function e(t){var n,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.title,window.confirm("Are you sure you want to permanetly delete this group? This cannot be undone!")?(L(n),(i=s.slice()).splice(i.indexOf(t),1),a(i)):console.log("Delete of ".concat(n," cancelled."));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},X=function(){return Object(o.jsx)(l.AuthProvider,{children:Object(o.jsx)(c.HashRouter,{children:Object(o.jsxs)(r.g,{children:[Object(o.jsx)(r.d,{exact:!0,path:"/",component:p}),Object(o.jsx)(l.StaffRoute,{exact:!0,path:"/scenarios",authFlowLayout:d,component:K}),Object(o.jsx)(l.StaffRoute,{exact:!0,path:"/scenario/",authFlowLayout:d,component:J}),Object(o.jsx)(l.StaffRoute,{exact:!0,path:"/scenario/:scenarioId",authFlowLayout:d,component:J}),Object(o.jsx)(l.StaffRoute,{exact:!0,path:"/scenario-groups",authFlowLayout:d,component:Z}),Object(o.jsx)(l.StaffRoute,{exact:!0,path:"/scenario-group/",authFlowLayout:d,component:W}),Object(o.jsx)(l.StaffRoute,{exact:!0,path:"/scenario-group/:groupId",authFlowLayout:d,component:W})]})})})};i.a.render(Object(o.jsx)(X,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.533a3b1f.chunk.js.map