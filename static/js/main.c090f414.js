/*! For license information please see main.c090f414.js.LICENSE.txt */
!function(){var e={5270:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},4180:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},1232:function(e,t,n){var r=n(5270);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8111:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},2954:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},85:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3061:function(e,t,n){var r=n(742),i=n(1549);function a(t,n,o){return i()?(e.exports=a=Reflect.construct,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},5198:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3041:function(e,t,n){var r=n(6487);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},4564:function(e,t,n){var r=n(2588),i=n(1549),a=n(6983);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},1260:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3772:function(e,t,n){var r=n(6458);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},2588:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},270:function(e,t,n){var r=n(742);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},1477:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},1549:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},1557:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},981:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},7365:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1359:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},417:function(e,t,n){var r=n(1260);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},6983:function(e,t,n){var r=n(8921).default,i=n(8111);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6132:function(e,t,n){var r=n(8921).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=f;var d={};function p(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==n&&a.call(b,s)&&(y=b);var w=m.prototype=p.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=m,l(w,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},742:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1068:function(e,t,n){var r=n(4180),i=n(981),a=n(6487),o=n(7365);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},6458:function(e,t,n){var r=n(2588);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},5109:function(e,t,n){var r=n(4180),i=n(1557),a=n(6487),o=n(7365);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5182:function(e,t,n){var r=n(1232),i=n(1557),a=n(6487),o=n(1359);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8921:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6487:function(e,t,n){var r=n(5270);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8240:function(e,t,n){var r=n(2588),i=n(742),a=n(1477),o=n(3061);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},19:function(e,t,n){var r,i,a=n(3061).default,o=n(5109).default,s=n(3772).default,u=n(2588).default,c=n(417).default,l=n(1260).default,f=n(6132).default,h=n(5182).default,d=n(2954).default,p=n(3041).default,v=n(1068).default,m=n(8111).default,y=n(270).default,g=n(4564).default,b=n(8240).default,w=n(85).default,k=n(5198).default;self,e.exports=(r=n(969),i=n(4618),function(){var e={132:function(e,t,n){var r=n(921).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var d={};function p(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==n&&a.call(b,s)&&(y=b);var w=m.prototype=p.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=m,l(w,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},921:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},162:function(e,t,n){e.exports=n(132)()},779:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},985:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(609),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".zH0ATq9xk8Ocy59iwuNB1A\\=\\=,.BK8ZunOOj2-Ddam9ICxbng\\=\\=,.q4ilOBYFey-xHSP4K0REWA\\=\\=,.mUfr9TUnz8yJe41RIRlttQ\\=\\=,.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\={width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width: 576px){.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:540px}}@media(min-width: 768px){.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:720px}}@media(min-width: 992px){.mUfr9TUnz8yJe41RIRlttQ\\=\\=,.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:960px}}@media(min-width: 1200px){.q4ilOBYFey-xHSP4K0REWA\\=\\=,.mUfr9TUnz8yJe41RIRlttQ\\=\\=,.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:1140px}}.mU-9cBIi0-EXo5ESixuFEg\\=\\={display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.EfJF4aZ6QSdtizcGN1NtUQ\\=\\={margin-right:0;margin-left:0}.EfJF4aZ6QSdtizcGN1NtUQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=,.EfJF4aZ6QSdtizcGN1NtUQ\\=\\=>[class*=col-]{padding-right:0;padding-left:0}.U9pRm4BQiJBKv9MF4kAOKg\\=\\=,.ADYG\\+5p47kIEEH\\+yaXfy\\+g\\=\\=,.Db7w4RNONNwOnXowhIc8ng\\=\\=,.KJqaUhm8U0JsiYrD0Dxblw\\=\\=,._7mb0qz1gMBy5z3XE0MeR-A\\=\\=,.NtjNTxvO1eYDpJhzFSeJdw\\=\\=,._1Am5jpu2gSLbN3MT90ZpMA\\=\\=,.DXWl7vZG6Q1KwkWGUtJJow\\=\\=,.ZfbQVYuXDPgq2Cbch0k9UQ\\=\\=,.Jse2AIcAqQ-L735eOc6uYw\\=\\=,.qOSStLd0Hyd1qwpBfZxanA\\=\\=,._5avH3rVLZIii2JnGlH0m5Q\\=\\=,.mNn2fcJWYjkLtm-z6\\+bUVg\\=\\=,.lIzKgcg1REtDI9W1yCgcFw\\=\\=,.jnUU00B2-e9Wk5Nl\\+60mRQ\\=\\=,.mFyyeCKxpl8rS-wFzA1g3Q\\=\\=,.nMyj2gB5dgB1xHYwFVKq4A\\=\\=,.HWrIN7KCnt6SMcNMOEF-4A\\=\\=,.r6GfaPfTE4kyvZyJwdSBMQ\\=\\=,.rCheKtb6rNIH-zaXJpP6ug\\=\\=,._4TecnWoAdQL52Hg5pH6YaA\\=\\=,.mOssnXALpF8Hv5w9NvNA3A\\=\\=,.Tb3cUMCgwjG7rE1A9qO8NQ\\=\\=,._4bJUxD5N-qoDPvcpKja5rg\\=\\=,.aeLEVJFdHekIqk7vG2\\+LIA\\=\\=,.gcFAuaAKhVU\\+ZBDUs1B8NA\\=\\=,.GCfQVWfgvTZkudPSiKZapQ\\=\\=,.yL\\+-V3goVEWF4G56\\+fVSpw\\=\\=,.SAndS2rmgn1LM\\+xmrxMo3A\\=\\=,._3PoNYmEqLWaXkJqkWZuvpQ\\=\\=,.SSiAlLFwrQ-y2DsVPMR0\\+g\\=\\=,._0lyCk8Uqg\\+qv7dLIZnRIWw\\=\\=,.X61LVxdi46rBO\\+LqBAhW2w\\=\\=,.VutkSlfeGDl2CwGQeHEpiQ\\=\\=,.d2kC-cPROhgE2OS-VS9PWQ\\=\\=,.GAJHJb613QL1SKCvoX0rsA\\=\\=,.BvzDSniNJ-7POTt9dEWr7Q\\=\\=,.sxPnszhNCUxZNdkijnQv0w\\=\\=,.a\\+\\+6cr2IATxiR7HKXNyO-Q\\=\\=,.pC930OZ5M9ghgdsDRkSXpg\\=\\=,.sLgPvZpzYdERNGMmZDwBzg\\=\\=,.I1TjO4uXfBOZEQOj7LcH0Q\\=\\=,._0J2p1-4a4eeXHwfVNDXvyA\\=\\=,.ETgzICBgGqZZFbad3zd1iQ\\=\\=,._04z29a\\+pKI3n6S-JAvn7vw\\=\\=,.PzbxnJWUR8XrC6Xnte7ZYQ\\=\\=,.pv2I-4hHHe69Bxg9\\+0ZZsQ\\=\\=,._9RXcLzg\\+pZo3Cwrz83yRSw\\=\\=,.lPJUQqA3bLFaLX8D3BSPMg\\=\\=,.PJi-RjGoDTE3MS3r\\+VtOoQ\\=\\=,._81Sa1FQ1MemO7HT-Mj3VyQ\\=\\=,.SxQkADEuBayutwrCVJP-KQ\\=\\=,.fjhYf6QMOHJa0Tl6AEkczA\\=\\=,.EYU2Y32cbOUClbxlN10kCg\\=\\=,.jAlxb6sBoFTdSfqoBr3HFw\\=\\=,._37Ydx7aBIOywekZNlGZUxw\\=\\=,.ZipjHnzKjAMLD7S4P-AIeA\\=\\=,.uNq-eqcqSUkVVXsPzLt97A\\=\\=,.tFr78IcjpHYvtsP2UGZ6-w\\=\\=,.iy3Vywm2uTIwh0tDGAvf1w\\=\\=,.N\\+ugCnCSYMF3TpbGoOBERg\\=\\=,.JAJ6xO7RZVdaB\\+2XIVCOxQ\\=\\=,.ShEKWNabwH8Jiq0aPAfN8Q\\=\\=,.tOFwG0RlEsJUJhNSe-Sblw\\=\\=,.WN6ttuUog3lg8jvvQ4cHnw\\=\\=,.My8y6StUKr1a4IefPihaIg\\=\\=,.LkQvrAMt0HB3hleLf6FujQ\\=\\=,._73LK2iWnPaC1uWqHN6l--Q\\=\\=,._2IzytlEVczYfyYudEqtbLA\\=\\=,.pXwA5ZATshjIVHaCFAoC5w\\=\\={position:relative;width:100%;padding-right:15px;padding-left:15px}.ZipjHnzKjAMLD7S4P-AIeA\\=\\={flex-basis:0;flex-grow:1;max-width:100%}._4jF-pZrYRU6Av-QsmuTIoQ\\=\\=>*{flex:0 0 100%;max-width:100%}.R72GQKP0n3w9xwNdzveibw\\=\\=>*{flex:0 0 50%;max-width:50%}.nXnDuLdkdE3JhvyD\\+yjoAA\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.RTOc8Zo7QfihVsI1pKkGcw\\=\\=>*{flex:0 0 25%;max-width:25%}.d0dcZAFUFoUwaLUBiJqTAw\\=\\=>*{flex:0 0 20%;max-width:20%}.kBZdc341EMhrLP6KTcr0wg\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.uNq-eqcqSUkVVXsPzLt97A\\=\\={flex:0 0 auto;width:auto;max-width:100%}.pXwA5ZATshjIVHaCFAoC5w\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}._2IzytlEVczYfyYudEqtbLA\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}._73LK2iWnPaC1uWqHN6l--Q\\=\\={flex:0 0 25%;max-width:25%}.LkQvrAMt0HB3hleLf6FujQ\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.My8y6StUKr1a4IefPihaIg\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.WN6ttuUog3lg8jvvQ4cHnw\\=\\={flex:0 0 50%;max-width:50%}.tOFwG0RlEsJUJhNSe-Sblw\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}.ShEKWNabwH8Jiq0aPAfN8Q\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.JAJ6xO7RZVdaB\\+2XIVCOxQ\\=\\={flex:0 0 75%;max-width:75%}.N\\+ugCnCSYMF3TpbGoOBERg\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.iy3Vywm2uTIwh0tDGAvf1w\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.tFr78IcjpHYvtsP2UGZ6-w\\=\\={flex:0 0 100%;max-width:100%}.WKuFcyCXuPYICOGEhhMwLQ\\=\\={order:-1}.N-RzRr40jscXtETJP8KuJw\\=\\={order:13}.TSm0mNR8CEFobhinPZKclw\\=\\={order:0}.FUsxhXGjb10TSa3Q1OeIEA\\=\\={order:1}.CcnXiq3YdJ5Mc8tmYXDKjQ\\=\\={order:2}.VvTHV9Sp3WOOrEG\\+bbBHIg\\=\\={order:3}.fGmd9zdgeH9y9bTqgSASYg\\=\\={order:4}.KsyNGTvTtJyuS8itLTAWQA\\=\\={order:5}.tA3iMlJoORtzTiQUFLUj-Q\\=\\={order:6}.oMG0KfzsuOB6kuESdlFOnQ\\=\\={order:7}._4p-DrXY6JwvSB8\\+yO30oYA\\=\\={order:8}.tTXJyFXsikqQBEdLXwXHMg\\=\\={order:9}.M75j9GZQVmcTUgT6Tzm9xQ\\=\\={order:10}._58Qd5Zc0U9qFM\\+zZyERTpg\\=\\={order:11}.Ckj4TxOlaor\\+iIdASsSlVA\\=\\={order:12}.lEqPtcY-25RvziMU2YkUtg\\=\\={margin-left:8.33333333%}.WiA6vQ\\+1GQbP9nzPwB-EPg\\=\\={margin-left:16.66666667%}.PAg1cAhlXQ8D6eJKHhYpSQ\\=\\={margin-left:25%}.HW4nEQZ05OWVt1kGJqAJ-g\\=\\={margin-left:33.33333333%}.Wlhs\\+rTCYoX51TIHe3bidw\\=\\={margin-left:41.66666667%}._6\\+gTrepIdhGPt6coZ-uwrw\\=\\={margin-left:50%}.HBg9tKrTBK9lRdIUZhA5dQ\\=\\={margin-left:58.33333333%}.CL4TAeMKNzNmBDUywFY1FA\\=\\={margin-left:66.66666667%}.BTKFSb6Ztdi4dCMUWyU1GA\\=\\={margin-left:75%}.czIBE83sUNj0t0nn8RwAMA\\=\\={margin-left:83.33333333%}.MZ\\+IxDjTPO4KR76LMblytg\\=\\={margin-left:91.66666667%}@media(min-width: 576px){._0J2p1-4a4eeXHwfVNDXvyA\\=\\={flex-basis:0;flex-grow:1;max-width:100%}.FurzvDUR-yfZR2Z4zpmIyA\\=\\=>*{flex:0 0 100%;max-width:100%}.lejzo3ztsD9B3TYp6-pvrA\\=\\=>*{flex:0 0 50%;max-width:50%}.mk4VwKQccIrL8Q8ar\\+oxlQ\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}._3VNRmc7hfJjVcGZFUW6drA\\=\\=>*{flex:0 0 25%;max-width:25%}.SCq4uKZoNIrxa09ICZTlHA\\=\\=>*{flex:0 0 20%;max-width:20%}.o1aMqSJ6XI9e6oOLaieK2A\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.ETgzICBgGqZZFbad3zd1iQ\\=\\={flex:0 0 auto;width:auto;max-width:100%}._37Ydx7aBIOywekZNlGZUxw\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.jAlxb6sBoFTdSfqoBr3HFw\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}.EYU2Y32cbOUClbxlN10kCg\\=\\={flex:0 0 25%;max-width:25%}.fjhYf6QMOHJa0Tl6AEkczA\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.SxQkADEuBayutwrCVJP-KQ\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}._81Sa1FQ1MemO7HT-Mj3VyQ\\=\\={flex:0 0 50%;max-width:50%}.PJi-RjGoDTE3MS3r\\+VtOoQ\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}.lPJUQqA3bLFaLX8D3BSPMg\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}._9RXcLzg\\+pZo3Cwrz83yRSw\\=\\={flex:0 0 75%;max-width:75%}.pv2I-4hHHe69Bxg9\\+0ZZsQ\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.PzbxnJWUR8XrC6Xnte7ZYQ\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}._04z29a\\+pKI3n6S-JAvn7vw\\=\\={flex:0 0 100%;max-width:100%}.LI0wpjZDUZJ7oMqYcDe5xw\\=\\={order:-1}.ql\\+O5GiYVdEYYaKVZNJDBA\\=\\={order:13}.Uqf4DXjM4gcvwgCUPIxA6Q\\=\\={order:0}.MB0jUrmzOfv0uP\\+UzgdkbQ\\=\\={order:1}.tBqR6yZ\\+QO7fKr\\+Kxe1j1A\\=\\={order:2}.TNZ7zbUt2UIZDe8AXOyoGQ\\=\\={order:3}.xw8mj28PS8bKzBrOT93bGg\\=\\={order:4}.X2UAoPDs-BPMBH-f3qUyow\\=\\={order:5}.nGW1viwjAvrYu9acBLRuOw\\=\\={order:6}.EnIre1kxZZGzNik3lxTooA\\=\\={order:7}.ckwdSst6vmCf7XKvmYY5MA\\=\\={order:8}.umpD8t224q279uPZhAJNBA\\=\\={order:9}.vbjIU6e0jNJsVRpxrANGzw\\=\\={order:10}.sL0yP3AXUICEIxKqGii1IA\\=\\={order:11}.qnB1DngbM-Hd-rDEiN5Bbg\\=\\={order:12}.EeaIgznKZRMJkq6Fg0Kk4A\\=\\={margin-left:0}.ME4b2v7Z-kqJ-32B0PH7qQ\\=\\={margin-left:8.33333333%}.lNQJI5cLpysYZsVDuqxNiA\\=\\={margin-left:16.66666667%}.yWCRH\\+rhQGo0YxPppCieYA\\=\\={margin-left:25%}.kMIT3obV6QyoBp84jtm7TA\\=\\={margin-left:33.33333333%}.vsScYeqJ1-C\\+Wgs06RaNEA\\=\\={margin-left:41.66666667%}.zFefln1X4wrPIb0EyWu92A\\=\\={margin-left:50%}._5wz\\+7bgY0wJh3H1hQozsaw\\=\\={margin-left:58.33333333%}.\\-937NutyXcyxhjCZdq161g\\=\\={margin-left:66.66666667%}.cRoN9Ic6bhJvDdsUkX1-LA\\=\\={margin-left:75%}.pjkIJScP4whIlflo9KwtnQ\\=\\={margin-left:83.33333333%}.EM7l5T7-itZbasUPca48oQ\\=\\={margin-left:91.66666667%}}@media(min-width: 768px){.SAndS2rmgn1LM\\+xmrxMo3A\\=\\={flex-basis:0;flex-grow:1;max-width:100%}.jLYjZI8-mArtFP5HzW5tSw\\=\\=>*{flex:0 0 100%;max-width:100%}.oqmKYRbM5MgIxv7KKNlE6A\\=\\=>*{flex:0 0 50%;max-width:50%}.GD\\+1sydl\\+uDcrvDYtRiO-g\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.zbHrHrFJEP\\+9XR3zy87jiA\\=\\=>*{flex:0 0 25%;max-width:25%}.THAJKoXiPadCIQffoSQ0CA\\=\\=>*{flex:0 0 20%;max-width:20%}.VjxUnsPzh-Y9W9Vl2nEWmA\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}._3PoNYmEqLWaXkJqkWZuvpQ\\=\\={flex:0 0 auto;width:auto;max-width:100%}.I1TjO4uXfBOZEQOj7LcH0Q\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.sLgPvZpzYdERNGMmZDwBzg\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}.pC930OZ5M9ghgdsDRkSXpg\\=\\={flex:0 0 25%;max-width:25%}.a\\+\\+6cr2IATxiR7HKXNyO-Q\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.sxPnszhNCUxZNdkijnQv0w\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.BvzDSniNJ-7POTt9dEWr7Q\\=\\={flex:0 0 50%;max-width:50%}.GAJHJb613QL1SKCvoX0rsA\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}.d2kC-cPROhgE2OS-VS9PWQ\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.VutkSlfeGDl2CwGQeHEpiQ\\=\\={flex:0 0 75%;max-width:75%}.X61LVxdi46rBO\\+LqBAhW2w\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}._0lyCk8Uqg\\+qv7dLIZnRIWw\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.SSiAlLFwrQ-y2DsVPMR0\\+g\\=\\={flex:0 0 100%;max-width:100%}.zyF8dGNWtizHs6wxaDa0lw\\=\\={order:-1}.MUdV-NNGrxqJGY9dojwMGA\\=\\={order:13}.ZhO8FQI8n7DahzSRioaYHQ\\=\\={order:0}.RiDaqGCgOmhxrLgRmGza1A\\=\\={order:1}.N5sXAl4p0DdGb84UDPcOLg\\=\\={order:2}.aYoBbxdjrTjeywDe7Z-j9Q\\=\\={order:3}.Oiz24HvFwgTic5u62UY1Ng\\=\\={order:4}.zTSOk8jqXdsKd\\+URq2KYdg\\=\\={order:5}.CFm-rRaI1fHd1K3H7Vrw4w\\=\\={order:6}.cqEO0mSnWB41u6Goz11F-Q\\=\\={order:7}._1urxupvb6xqjqETtMWwOvQ\\=\\={order:8}.qxXEOgoQtVzA2\\+679geL7Q\\=\\={order:9}.nvBR59QQIXuAmTMuTnHfMg\\=\\={order:10}.d22KpQSBrwSOSI52Zu7\\+Cg\\=\\={order:11}._7glQlcqYGSwKk6sFOIBhvg\\=\\={order:12}.\\-0zZhhxyf2z0gn7wMTKxnw\\=\\={margin-left:0}._4gYJIaemAbMABe5AnrwhbA\\=\\={margin-left:8.33333333%}.cv93WXmw4oWc26NOshkGeg\\=\\={margin-left:16.66666667%}._0y6dwF5qRuZS1wZKagPa6Q\\=\\={margin-left:25%}.tnayob3\\+VHiegJLKcVDvTw\\=\\={margin-left:33.33333333%}.tht9wCiMTOaXuRO4d7m0JA\\=\\={margin-left:41.66666667%}.tgsoM1RUfxtag9E7kL5snQ\\=\\={margin-left:50%}.VULn0vuOgoC1F7mOP\\+CGmA\\=\\={margin-left:58.33333333%}.EsA8OW5ujDZsPztQj6FPtg\\=\\={margin-left:66.66666667%}.nQC9vUWkrfNCVyj2qOVCkQ\\=\\={margin-left:75%}.w7bN9NO2UZiqkuqP7M6J8w\\=\\={margin-left:83.33333333%}._4bxCDyoME4ZoHM77fUGO-A\\=\\={margin-left:91.66666667%}}@media(min-width: 992px){.jnUU00B2-e9Wk5Nl\\+60mRQ\\=\\={flex-basis:0;flex-grow:1;max-width:100%}._6wXj2dZ8v1eEey2fp9boow\\=\\=>*{flex:0 0 100%;max-width:100%}._7lbPfmPU0yUL2kQqDer73Q\\=\\=>*{flex:0 0 50%;max-width:50%}.kdIcM3Qs9GhNVo-lKHz6Ow\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.zxxD3emDYe-YOQP5ID8I-A\\=\\=>*{flex:0 0 25%;max-width:25%}.IU8kip4-12hORu5P47EBUg\\=\\=>*{flex:0 0 20%;max-width:20%}.NULIhDCknUwrL6QwT-RD6Q\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.mFyyeCKxpl8rS-wFzA1g3Q\\=\\={flex:0 0 auto;width:auto;max-width:100%}.yL\\+-V3goVEWF4G56\\+fVSpw\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.GCfQVWfgvTZkudPSiKZapQ\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}.gcFAuaAKhVU\\+ZBDUs1B8NA\\=\\={flex:0 0 25%;max-width:25%}.aeLEVJFdHekIqk7vG2\\+LIA\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}._4bJUxD5N-qoDPvcpKja5rg\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.Tb3cUMCgwjG7rE1A9qO8NQ\\=\\={flex:0 0 50%;max-width:50%}.mOssnXALpF8Hv5w9NvNA3A\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}._4TecnWoAdQL52Hg5pH6YaA\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.rCheKtb6rNIH-zaXJpP6ug\\=\\={flex:0 0 75%;max-width:75%}.r6GfaPfTE4kyvZyJwdSBMQ\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.HWrIN7KCnt6SMcNMOEF-4A\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.nMyj2gB5dgB1xHYwFVKq4A\\=\\={flex:0 0 100%;max-width:100%}.MXJ0m-mhbkBaNtZtWy2JuQ\\=\\={order:-1}.jLnBd10eoFPeZmp1uVsKjw\\=\\={order:13}.ekqULi75ViAs\\+nUXnLlKzA\\=\\={order:0}.frH4RdUlpw3C5E0-eBCC6A\\=\\={order:1}.fC3JIGKv-rCrMihlBJ2pIQ\\=\\={order:2}.AVwvm5XOJmClHPQ\\+T2GRIw\\=\\={order:3}.zNzTgYDRRis8BjwNdKCq8A\\=\\={order:4}.IpSRnhqjon0dk5Z\\+EYJ5XQ\\=\\={order:5}.DAwPWuKsniz1dhiKKVpbrg\\=\\={order:6}.iQSbThHNdH2Tdn9wXiP\\+Tg\\=\\={order:7}.srZXqZcmQumDLUA6WNruLg\\=\\={order:8}.F0o1BdjoJpd\\+Zqa1QpFJWw\\=\\={order:9}._3isOFHnYRdAK7\\+04uBB3NA\\=\\={order:10}.iPjGEB-lnyQzeSJ3W1cNWg\\=\\={order:11}.VMnmhFS2a5bwMEaw0kcIOQ\\=\\={order:12}.xOzLsSID\\+fZxbcnzliRVCw\\=\\={margin-left:0}.sJCIu3mJ9uv0tj\\+a0ooLBw\\=\\={margin-left:8.33333333%}._9vzEt2RDRJ1BsDIVrrV5\\+g\\=\\={margin-left:16.66666667%}.dwN5tW6AJKsHPPj93SSzpA\\=\\={margin-left:25%}.js58c7TZ886lHWyNOJS42Q\\=\\={margin-left:33.33333333%}.R1EW5gv61NZXyTM7Rri6mw\\=\\={margin-left:41.66666667%}.pCNW1qOEx2K20iT4PI6oww\\=\\={margin-left:50%}.Y9zBz8LGYj2dQenR5z\\+svg\\=\\={margin-left:58.33333333%}._895tgbys\\+843keWZG4wDJg\\=\\={margin-left:66.66666667%}.hSRItx7Gn3c6jAAJYPv1NQ\\=\\={margin-left:75%}._7Yc8TJHtf7DPKZFJlgFqMw\\=\\={margin-left:83.33333333%}.lfuiWt3GO05NiZbjJ6sIQg\\=\\={margin-left:91.66666667%}}@media(min-width: 1200px){.U9pRm4BQiJBKv9MF4kAOKg\\=\\={flex-basis:0;flex-grow:1;max-width:100%}.u4QyHeij\\+r9piU9qea-G4g\\=\\=>*{flex:0 0 100%;max-width:100%}.l-pFvz9e7SHKwB2zT9NztA\\=\\=>*{flex:0 0 50%;max-width:50%}.sEEWRjZuR2O4pKb93mFMBg\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.\\+RCPajoCDt8j9Hsp13RMkg\\=\\=>*{flex:0 0 25%;max-width:25%}.\\+GrLhtYim3pqY2a9m6PIdw\\=\\=>*{flex:0 0 20%;max-width:20%}.B6bQBuJRtB9P0N1vLcfnLg\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.ADYG\\+5p47kIEEH\\+yaXfy\\+g\\=\\={flex:0 0 auto;width:auto;max-width:100%}.lIzKgcg1REtDI9W1yCgcFw\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.mNn2fcJWYjkLtm-z6\\+bUVg\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}._5avH3rVLZIii2JnGlH0m5Q\\=\\={flex:0 0 25%;max-width:25%}.qOSStLd0Hyd1qwpBfZxanA\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.Jse2AIcAqQ-L735eOc6uYw\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.ZfbQVYuXDPgq2Cbch0k9UQ\\=\\={flex:0 0 50%;max-width:50%}.DXWl7vZG6Q1KwkWGUtJJow\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}._1Am5jpu2gSLbN3MT90ZpMA\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.NtjNTxvO1eYDpJhzFSeJdw\\=\\={flex:0 0 75%;max-width:75%}._7mb0qz1gMBy5z3XE0MeR-A\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.KJqaUhm8U0JsiYrD0Dxblw\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.Db7w4RNONNwOnXowhIc8ng\\=\\={flex:0 0 100%;max-width:100%}.YwWqx3jNUeTiCy6ab1NvwQ\\=\\={order:-1}.pADA0Zr-7yvueKNn8hNSUg\\=\\={order:13}.MGTsNCvcCF7a5bntzZ-dFg\\=\\={order:0}.imRpazHdrADOA4JO4\\+1hfQ\\=\\={order:1}.MhWYoHzuOsN8oMfHZvlNKQ\\=\\={order:2}.yuKbQ2BqW4\\+2ngt8Q3MNSA\\=\\={order:3}.Z1Cs3h19uaOxne6ZhkT1mg\\=\\={order:4}._4l1OZXmmOjYt43ZMhIVXrg\\=\\={order:5}._0j2Qa3MZEDnGc9d8ACwQlw\\=\\={order:6}.QTp7gdQhj\\+ZPtkZfCkYPGQ\\=\\={order:7}.KqbdWIRkmyRLoeqp6g4zBw\\=\\={order:8}.WA\\+x7GU7FgtM7Lb6RbkCBw\\=\\={order:9}.H96AFgnR3\\+750AlDEhvACQ\\=\\={order:10}.VMJYIpjlQIRxILOyCwjRlw\\=\\={order:11}.THCBM5DJ0MGEuKjhUwgpRA\\=\\={order:12}.RElUj6kBIA3KUbeP-Ey7jg\\=\\={margin-left:0}.m0vkzLSuYKPoNqhazIJGtA\\=\\={margin-left:8.33333333%}.jHQ9y5Wyqmu\\+7d2lebgLEA\\=\\={margin-left:16.66666667%}.HCSI03\\+-In5d0I5ASg4MPg\\=\\={margin-left:25%}.\\+pLIehF4BhymLPMD3DEv5Q\\=\\={margin-left:33.33333333%}.JBEZ-AVXBGmxAkROkg-HpA\\=\\={margin-left:41.66666667%}.tU1kY5iHxgC5X9KOD6DCnw\\=\\={margin-left:50%}.I7tPhu6MopGW0TMNeJSQXA\\=\\={margin-left:58.33333333%}.\\+80lB3s5RxYsPY\\+-F8Zvaw\\=\\={margin-left:66.66666667%}._2yxroUmDuUWS6bqhFE6E4g\\=\\={margin-left:75%}._2N2FYyk09ksCkW70LYcgcg\\=\\={margin-left:83.33333333%}.Oswg-phWUCLywjKIi66TNA\\=\\={margin-left:91.66666667%}}.rxb-u7L8A-K7OqGYZW3mEg\\=\\={display:block;width:100%;height:calc(1.5em + 0.75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.rxb-u7L8A-K7OqGYZW3mEg\\=\\={transition:none}}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=::-ms-expand{background-color:rgba(0,0,0,0);border:0}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=::placeholder{color:#6c757d;opacity:1}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:disabled,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=[readonly]{background-color:#e9ecef;opacity:1}input[type=date].rxb-u7L8A-K7OqGYZW3mEg\\=\\=,input[type=time].rxb-u7L8A-K7OqGYZW3mEg\\=\\=,input[type=datetime-local].rxb-u7L8A-K7OqGYZW3mEg\\=\\=,input[type=month].rxb-u7L8A-K7OqGYZW3mEg\\=\\={appearance:none}select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:-moz-focusring{color:rgba(0,0,0,0);text-shadow:0 0 0 #495057}select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:focus::-ms-value{color:#495057;background-color:#fff}.ItAE4BISMwOknrbg0zTW6A\\=\\=,.FQ2oMW0oMyvNjnw28P6SSA\\=\\={display:block;width:100%}.L44tdlGXEblIDOcHaUwOdg\\=\\={padding-top:calc(0.375rem + 1px);padding-bottom:calc(0.375rem + 1px);margin-bottom:0;font-size:inherit;line-height:1.5}._9h55f\\+rR1p9NXt8AOqDFKg\\=\\={padding-top:calc(0.5rem + 1px);padding-bottom:calc(0.5rem + 1px);font-size:1.25rem;line-height:1.5}._2U3Vlw7d5ETuC9xdyFRr8w\\=\\={padding-top:calc(0.25rem + 1px);padding-bottom:calc(0.25rem + 1px);font-size:0.875rem;line-height:1.5}.wh-T\\+fF5UyFigyoA5tghrw\\=\\={display:block;width:100%;padding:.375rem 0;margin-bottom:0;font-size:1rem;line-height:1.5;color:#212529;background-color:rgba(0,0,0,0);border:solid rgba(0,0,0,0);border-width:1px 0}.wh-T\\+fF5UyFigyoA5tghrw\\=\\=.ZRdFRRmmdJsAOwBY\\+RWMtg\\=\\=,.wh-T\\+fF5UyFigyoA5tghrw\\=\\=.sIVGOcqPE2FeSC9GjjXWRw\\=\\={padding-right:0;padding-left:0}.ZRdFRRmmdJsAOwBY\\+RWMtg\\=\\={height:calc(1.5em + 0.5rem + 2px);padding:.25rem .5rem;font-size:0.875rem;line-height:1.5;border-radius:.2rem}.sIVGOcqPE2FeSC9GjjXWRw\\=\\={height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=[size],select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=[multiple]{height:auto}textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\={height:auto}.\\+o0szHLHnQSOFsifiUvdJw\\=\\={margin-bottom:1rem}._1A9mluCA-srn7qq4AWMtAg\\=\\={display:block;margin-top:.25rem}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\={display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=,.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>[class*=col-]{padding-right:5px;padding-left:5px}.tF3rjXkFRbBtfcpC6cW2sg\\=\\={position:relative;display:block;padding-left:1.25rem}.\\+wxdJMEiONNcuJirfptaKg\\=\\={position:absolute;margin-top:.3rem;margin-left:-1.25rem}.\\+wxdJMEiONNcuJirfptaKg\\=\\=[disabled]~.HgyDHyHFbSZ00SBAYkBcqw\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=:disabled~.HgyDHyHFbSZ00SBAYkBcqw\\=\\={color:#6c757d}.HgyDHyHFbSZ00SBAYkBcqw\\=\\={margin-bottom:0}.AotIqR-zGtBkUw8C-V5CYQ\\=\\={display:inline-flex;align-items:center;padding-left:0;margin-right:.75rem}.AotIqR-zGtBkUw8C-V5CYQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\={position:static;margin-top:0;margin-right:.3125rem;margin-left:0}.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\={display:none;width:100%;margin-top:.25rem;font-size:80%;color:#28a745}._0lwTqF-2CN1XZSfX-c66dg\\=\\={position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:0.875rem;line-height:1.5;color:#fff;background-color:rgba(40,167,69,.9);border-radius:.25rem}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=>._0lwTqF-2CN1XZSfX-c66dg\\=\\=,.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>[class*=col-]>._0lwTqF-2CN1XZSfX-c66dg\\=\\={left:5px}.oT3PsQO1Im41bPXPrim8DQ\\=\\= :valid~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= :valid~._0lwTqF-2CN1XZSfX-c66dg\\=\\=,.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~._0lwTqF-2CN1XZSfX-c66dg\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={border-color:#28a745;padding-right:calc(1.5em + 0.75rem) !important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(0.375em + 0.1875rem) center;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid:focus,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid,select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={padding-right:3rem !important;background-position:right 1.5rem center}.oT3PsQO1Im41bPXPrim8DQ\\=\\= textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid,textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={padding-right:calc(1.5em + 0.75rem);background-position:top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:valid,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={border-color:#28a745;padding-right:calc(0.75em + 2.3125rem) !important;background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") right .75rem center/8px 10px no-repeat,#fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\") center right 1.75rem/calc(0.75em + 0.375rem) calc(0.75em + 0.375rem) no-repeat}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:valid:focus,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:valid~.HgyDHyHFbSZ00SBAYkBcqw\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.HgyDHyHFbSZ00SBAYkBcqw\\=\\={color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:valid~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:valid~._0lwTqF-2CN1XZSfX-c66dg\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~._0lwTqF-2CN1XZSfX-c66dg\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\={color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#34ce57;background-color:#34ce57}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:valid~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:valid:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}._3L3JuseiUgFLMEJfoT-ZnQ\\=\\={display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.LlnsAlWVkYbU3Fg7FPceeA\\=\\={position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:0.875rem;line-height:1.5;color:#fff;background-color:rgba(220,53,69,.9);border-radius:.25rem}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=>.LlnsAlWVkYbU3Fg7FPceeA\\=\\=,.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>[class*=col-]>.LlnsAlWVkYbU3Fg7FPceeA\\=\\={left:5px}.oT3PsQO1Im41bPXPrim8DQ\\=\\= :invalid~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= :invalid~.LlnsAlWVkYbU3Fg7FPceeA\\=\\=,.hNeMhnkgc117eUaEbh4zoA\\=\\=~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.hNeMhnkgc117eUaEbh4zoA\\=\\=~.LlnsAlWVkYbU3Fg7FPceeA\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={border-color:#dc3545;padding-right:calc(1.5em + 0.75rem) !important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(0.375em + 0.1875rem) center;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid:focus,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid,select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={padding-right:3rem !important;background-position:right 1.5rem center}.oT3PsQO1Im41bPXPrim8DQ\\=\\= textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid,textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={padding-right:calc(1.5em + 0.75rem);background-position:top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:invalid,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={border-color:#dc3545;padding-right:calc(0.75em + 2.3125rem) !important;background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") right .75rem center/8px 10px no-repeat,#fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\") center right 1.75rem/calc(0.75em + 0.375rem) calc(0.75em + 0.375rem) no-repeat}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:invalid:focus,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:invalid~.HgyDHyHFbSZ00SBAYkBcqw\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.HgyDHyHFbSZ00SBAYkBcqw\\=\\={color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:invalid~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:invalid~.LlnsAlWVkYbU3Fg7FPceeA\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.LlnsAlWVkYbU3Fg7FPceeA\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\={color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#e4606d;background-color:#e4606d}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:invalid~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:invalid:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\={display:flex;flex-flow:row wrap;align-items:center}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .tF3rjXkFRbBtfcpC6cW2sg\\=\\={width:100%}@media(min-width: 576px){.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= label{display:flex;align-items:center;justify-content:center;margin-bottom:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .\\+o0szHLHnQSOFsifiUvdJw\\=\\={display:flex;flex:0 0 auto;flex-flow:row wrap;align-items:center;margin-bottom:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\={display:inline-block;width:auto;vertical-align:middle}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .wh-T\\+fF5UyFigyoA5tghrw\\=\\={display:inline-block}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=,.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={width:auto}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .tF3rjXkFRbBtfcpC6cW2sg\\=\\={display:flex;align-items:center;justify-content:center;width:auto;padding-left:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\={position:relative;flex-shrink:0;margin-top:0;margin-right:.25rem;margin-left:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .f2aVZSjfPLXxX0hroVfxsw\\=\\={align-items:center;justify-content:center}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\={margin-bottom:0}}._7DhMpfk4OxfouraFzxZobA\\=\\={display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;user-select:none;background-color:rgba(0,0,0,0);border:1px solid rgba(0,0,0,0);padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){._7DhMpfk4OxfouraFzxZobA\\=\\={transition:none}}._7DhMpfk4OxfouraFzxZobA\\=\\=:hover{color:#212529;text-decoration:none}._7DhMpfk4OxfouraFzxZobA\\=\\=:focus,._7DhMpfk4OxfouraFzxZobA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}._7DhMpfk4OxfouraFzxZobA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,._7DhMpfk4OxfouraFzxZobA\\=\\=:disabled{opacity:.65}._7DhMpfk4OxfouraFzxZobA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=){cursor:pointer}a._7DhMpfk4OxfouraFzxZobA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,fieldset:disabled a._7DhMpfk4OxfouraFzxZobA\\=\\={pointer-events:none}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\={color:#fff;background-color:#007bff;border-color:#007bff}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:focus,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#0062cc;border-color:#005cbf}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\={color:#fff;background-color:#6c757d;border-color:#6c757d}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:focus,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#5a6268;border-color:#545b62;box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#545b62;border-color:#4e555b}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.EPNGsPeCovJGoxMetqFJQQ\\=\\={color:#fff;background-color:#28a745;border-color:#28a745}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:focus,.EPNGsPeCovJGoxMetqFJQQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.EPNGsPeCovJGoxMetqFJQQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.EPNGsPeCovJGoxMetqFJQQ\\=\\=:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.EPNGsPeCovJGoxMetqFJQQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#1e7e34;border-color:#1c7430}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.EPNGsPeCovJGoxMetqFJQQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\={color:#fff;background-color:#17a2b8;border-color:#17a2b8}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:hover{color:#fff;background-color:#138496;border-color:#117a8b}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:focus,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#117a8b;border-color:#10707f}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.Zx2kVQEYuquPXRqSIpsEFw\\=\\={color:#212529;background-color:#ffc107;border-color:#ffc107}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:focus,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#d39e00;border-color:#c69500}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.Q8F2TgYeYq2mCTJxv85RXA\\=\\={color:#fff;background-color:#dc3545;border-color:#dc3545}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:hover{color:#fff;background-color:#c82333;border-color:#bd2130}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:focus,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#c82333;border-color:#bd2130;box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:disabled{color:#fff;background-color:#dc3545;border-color:#dc3545}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#bd2130;border-color:#b21f2d}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\={color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:focus,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#dae0e5;border-color:#d3d9df}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.O42tOC04CFqDBZRWGBCOeA\\=\\={color:#fff;background-color:#343a40;border-color:#343a40}.O42tOC04CFqDBZRWGBCOeA\\=\\=:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.O42tOC04CFqDBZRWGBCOeA\\=\\=:focus,.O42tOC04CFqDBZRWGBCOeA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.O42tOC04CFqDBZRWGBCOeA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.O42tOC04CFqDBZRWGBCOeA\\=\\=:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.O42tOC04CFqDBZRWGBCOeA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#1d2124;border-color:#171a1d}.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.O42tOC04CFqDBZRWGBCOeA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.q-4DlIgrmjx3kf1py-1abg\\=\\={color:#007bff;border-color:#007bff}.q-4DlIgrmjx3kf1py-1abg\\=\\=:hover{color:#fff;background-color:#007bff;border-color:#007bff}.q-4DlIgrmjx3kf1py-1abg\\=\\=:focus,.q-4DlIgrmjx3kf1py-1abg\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.q-4DlIgrmjx3kf1py-1abg\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.q-4DlIgrmjx3kf1py-1abg\\=\\=:disabled{color:#007bff;background-color:rgba(0,0,0,0)}.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.q-4DlIgrmjx3kf1py-1abg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#007bff;border-color:#007bff}.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.q-4DlIgrmjx3kf1py-1abg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}._05T6SZ7OWl7vRSOO7xrYiw\\=\\={color:#6c757d;border-color:#6c757d}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:hover{color:#fff;background-color:#6c757d;border-color:#6c757d}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:focus,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:disabled{color:#6c757d;background-color:rgba(0,0,0,0)}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#6c757d;border-color:#6c757d}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.qv1D8bEG4LzZnYjnq2b5ew\\=\\={color:#28a745;border-color:#28a745}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:hover{color:#fff;background-color:#28a745;border-color:#28a745}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:focus,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:disabled{color:#28a745;background-color:rgba(0,0,0,0)}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#28a745;border-color:#28a745}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\={color:#17a2b8;border-color:#17a2b8}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:focus,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:disabled{color:#17a2b8;background-color:rgba(0,0,0,0)}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#17a2b8;border-color:#17a2b8}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.KCGFP69cNeODQ0PHCegveA\\=\\={color:#ffc107;border-color:#ffc107}.KCGFP69cNeODQ0PHCegveA\\=\\=:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.KCGFP69cNeODQ0PHCegveA\\=\\=:focus,.KCGFP69cNeODQ0PHCegveA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.KCGFP69cNeODQ0PHCegveA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.KCGFP69cNeODQ0PHCegveA\\=\\=:disabled{color:#ffc107;background-color:rgba(0,0,0,0)}.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.KCGFP69cNeODQ0PHCegveA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#ffc107;border-color:#ffc107}.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.KCGFP69cNeODQ0PHCegveA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\={color:#dc3545;border-color:#dc3545}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:focus,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:disabled{color:#dc3545;background-color:rgba(0,0,0,0)}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#dc3545;border-color:#dc3545}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.Js-WmbBYwSirASj7wEuy\\+g\\=\\={color:#f8f9fa;border-color:#f8f9fa}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:focus,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:disabled{color:#f8f9fa;background-color:rgba(0,0,0,0)}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.JwHCAjljftUQwvI1i5XAAQ\\=\\={color:#343a40;border-color:#343a40}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:hover{color:#fff;background-color:#343a40;border-color:#343a40}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:focus,.JwHCAjljftUQwvI1i5XAAQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.JwHCAjljftUQwvI1i5XAAQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.JwHCAjljftUQwvI1i5XAAQ\\=\\=:disabled{color:#343a40;background-color:rgba(0,0,0,0)}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.JwHCAjljftUQwvI1i5XAAQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#343a40;border-color:#343a40}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.JwHCAjljftUQwvI1i5XAAQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\={font-weight:400;color:#007bff;text-decoration:none}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=:hover{color:#0056b3;text-decoration:underline}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=:focus,.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={text-decoration:underline}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=:disabled,.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\={color:#6c757d;pointer-events:none}.Fajh0V-v4F6Q-PwZe1cZoQ\\=\\={padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.YY6aIAYg8S6JwUbr-E562Q\\=\\={padding:.25rem .5rem;font-size:0.875rem;line-height:1.5;border-radius:.2rem}.FcmMgdBtpHnxrQGHHnSPXg\\=\\={display:block;width:100%}.FcmMgdBtpHnxrQGHHnSPXg\\=\\=+.FcmMgdBtpHnxrQGHHnSPXg\\=\\={margin-top:.5rem}input[type=submit].FcmMgdBtpHnxrQGHHnSPXg\\=\\=,input[type=reset].FcmMgdBtpHnxrQGHHnSPXg\\=\\=,input[type=button].FcmMgdBtpHnxrQGHHnSPXg\\=\\={width:100%}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\={position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\={position:relative;flex:1 1 auto;width:1%;min-width:0;margin-bottom:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\={margin-left:-1px}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:focus,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:focus,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={z-index:3}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:focus{z-index:4}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(:first-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\={display:flex;align-items:center}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=::after{border-top-right-radius:0;border-bottom-right-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:first-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-top-left-radius:0;border-bottom-left-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(:last-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:not(:last-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=::after{border-top-right-radius:0;border-bottom-right-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:nth-last-child(n+3),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:nth-last-child(n+3),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:nth-last-child(n+3) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:nth-last-child(n+3) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=::after{border-top-right-radius:0;border-bottom-right-radius:0}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\={display:flex}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\={position:relative;z-index:2}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=:focus,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=:focus{z-index:3}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\=,.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\={margin-left:-1px}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\={margin-right:-1px}.Bkfnry-3z7YRjVHIVe8UKw\\=\\={margin-left:-1px}.BN3hSiKNUdNLiOqTdEiApg\\=\\={display:flex;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.BN3hSiKNUdNLiOqTdEiApg\\=\\= input[type=radio],.BN3hSiKNUdNLiOqTdEiApg\\=\\= input[type=checkbox]{margin-top:0}.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(textarea),.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={height:calc(1.5em + 1rem + 2px)}.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\={padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(textarea),._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={height:calc(1.5em + 0.5rem + 2px)}._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\={padding:.25rem .5rem;font-size:0.875rem;line-height:1.5;border-radius:.2rem}.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={padding-right:1.75rem}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:not(:last-child)>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:not(:last-child)>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:nth-last-child(n+3)>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:nth-last-child(n+3)>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:last-child>._7DhMpfk4OxfouraFzxZobA\\=\\=:not(:last-child):not(.qNFyvqcuyPtURI6K5WGoLw\\=\\=),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:last-child>.BN3hSiKNUdNLiOqTdEiApg\\=\\=:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:not(:first-child)>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:not(:first-child)>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:first-child>._7DhMpfk4OxfouraFzxZobA\\=\\=:not(:first-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:first-child>.BN3hSiKNUdNLiOqTdEiApg\\=\\=:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.yuj2uLs234H7Xz2K-P2TbA\\=\\={font-family:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace !important}.L7d7M850X3xmUNgyceHeJw\\=\\={text-align:justify !important}.PZSho4c4AKJI2rtC2IVj6w\\=\\={white-space:normal !important}.Jxn-0a3xL-9z7NUrjJXWcw\\=\\={white-space:nowrap !important}.Om-3pLcwRfYcXmuOSsMGtg\\=\\={overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.GpWt5UXD\\+IsVQ6UAiv4GXw\\=\\={text-align:left !important}.bk31fiJMnWC8ljHXfOg8uw\\=\\={text-align:right !important}._7aPdUS7Hp-TNDkl4teRH3A\\=\\={text-align:center !important}@media(min-width: 576px){.DYcH-Hr\\+av7fw5dNBeug6g\\=\\={text-align:left !important}.VhEr\\+3hopXIjjd2\\+p2u9ew\\=\\={text-align:right !important}.aay8\\+my4Qeao1AnGsDcTNQ\\=\\={text-align:center !important}}@media(min-width: 768px){.K51lUdrnXqdzsGhV6ISyMQ\\=\\={text-align:left !important}.YrUAQlZaSa7xmX2M3Mo0vA\\=\\={text-align:right !important}.G8RImYg8AgxW9bPx0mherQ\\=\\={text-align:center !important}}@media(min-width: 992px){._6xXDYvZp37J61XGBJrL4cA\\=\\={text-align:left !important}.Nj1BKIJRoQHZt1NE9ir2rg\\=\\={text-align:right !important}.dlwGFduUtEKf38Q0Sr6xhA\\=\\={text-align:center !important}}@media(min-width: 1200px){.KyApiAwpBv5eWHexM8reKQ\\=\\={text-align:left !important}.sdx\\+7vZ4csj4qmyPvRxlmA\\=\\={text-align:right !important}.YLX3CO-BUM0O\\+olzyJDqqQ\\=\\={text-align:center !important}}.vGm0FBnb2vrpMcwseJX1Sg\\=\\={text-transform:lowercase !important}.NH8koI0uB\\+W7oUMz6SDslw\\=\\={text-transform:uppercase !important}._0E6aiCk-AUTrAvijvcTMPQ\\=\\={text-transform:capitalize !important}._5JJWKvTCZBkIgsBJ6xEKHg\\=\\={font-weight:300 !important}.GZPWGjB9PBICJ5MOxhPnPQ\\=\\={font-weight:lighter !important}.FQXQD7M8ilfaEtB4r\\+mEaA\\=\\={font-weight:400 !important}.xA5Bo9d-kKW-aKLdqgZPTg\\=\\={font-weight:700 !important}.D16qkTGc9zvxs2ADjLjhdQ\\=\\={font-weight:bolder !important}.CqvXhEZd7zeQ5S0Zv7lC2w\\=\\={font-style:italic !important}.sESr--F\\+0poK9MmwZWNSRg\\=\\={color:#fff !important}.GNuz2eMKK6Cc\\+G3WQodHxQ\\=\\={color:#007bff !important}a.GNuz2eMKK6Cc\\+G3WQodHxQ\\=\\=:hover,a.GNuz2eMKK6Cc\\+G3WQodHxQ\\=\\=:focus{color:#0056b3 !important}.AZNK6fiRWvuZ\\+wr\\+z6BclQ\\=\\={color:#6c757d !important}a.AZNK6fiRWvuZ\\+wr\\+z6BclQ\\=\\=:hover,a.AZNK6fiRWvuZ\\+wr\\+z6BclQ\\=\\=:focus{color:#494f54 !important}.NDsKA2w\\+x-5gmLmzWexnNA\\=\\={color:#28a745 !important}a.NDsKA2w\\+x-5gmLmzWexnNA\\=\\=:hover,a.NDsKA2w\\+x-5gmLmzWexnNA\\=\\=:focus{color:#19692c !important}.R2tK5v05mMik6eCGYiTVlw\\=\\={color:#17a2b8 !important}a.R2tK5v05mMik6eCGYiTVlw\\=\\=:hover,a.R2tK5v05mMik6eCGYiTVlw\\=\\=:focus{color:#0f6674 !important}.ie0whLQiaM25kaZsHslAtw\\=\\={color:#ffc107 !important}a.ie0whLQiaM25kaZsHslAtw\\=\\=:hover,a.ie0whLQiaM25kaZsHslAtw\\=\\=:focus{color:#ba8b00 !important}.bX7UUq1o0-hYYUFRRKmuOQ\\=\\={color:#dc3545 !important}a.bX7UUq1o0-hYYUFRRKmuOQ\\=\\=:hover,a.bX7UUq1o0-hYYUFRRKmuOQ\\=\\=:focus{color:#a71d2a !important}.CyL9WzEIAfkagwiOM1IlUQ\\=\\={color:#f8f9fa !important}a.CyL9WzEIAfkagwiOM1IlUQ\\=\\=:hover,a.CyL9WzEIAfkagwiOM1IlUQ\\=\\=:focus{color:#cbd3da !important}.PLKo7Ilf3zacq0VBzB-Jxw\\=\\={color:#343a40 !important}a.PLKo7Ilf3zacq0VBzB-Jxw\\=\\=:hover,a.PLKo7Ilf3zacq0VBzB-Jxw\\=\\=:focus{color:#121416 !important}.ui7xy1Y2hEZvWSBKUIlU-Q\\=\\={color:#212529 !important}.aJI844EjQ8v31GqRrq-7tA\\=\\={color:#6c757d !important}.GNj55Y0RFs3SfvcjNYoM4w\\=\\={color:rgba(0,0,0,.5) !important}.vYVLqZRAa2cmQQXGo8SkvQ\\=\\={color:rgba(255,255,255,.5) !important}._1iLFqmUJ2s3bBbPxXesZ2Q\\=\\={font:0/0 a;color:rgba(0,0,0,0);text-shadow:none;background-color:rgba(0,0,0,0);border:0}.bQe-KiqF9GA7e4yc3pQSkw\\=\\={text-decoration:none !important}.eei0tK\\+VG2L4NMWIE\\+LhKg\\=\\={word-break:break-word !important;word-wrap:break-word !important}.uUZyBviaNlCvBh3i2RHZlA\\=\\={color:inherit !important}",""]),i.locals={container:"zH0ATq9xk8Ocy59iwuNB1A==","container-fluid":"BK8ZunOOj2-Ddam9ICxbng==","container-xl":"q4ilOBYFey-xHSP4K0REWA==","container-lg":"mUfr9TUnz8yJe41RIRlttQ==","container-md":"ke3k75UR4dBgTMb6giE66Q==","container-sm":"uyeG4-dQxFimMxWq+Fit2w==",row:"mU-9cBIi0-EXo5ESixuFEg==","no-gutters":"EfJF4aZ6QSdtizcGN1NtUQ==",col:"ZipjHnzKjAMLD7S4P-AIeA==","col-xl":"U9pRm4BQiJBKv9MF4kAOKg==","col-xl-auto":"ADYG+5p47kIEEH+yaXfy+g==","col-xl-12":"Db7w4RNONNwOnXowhIc8ng==","col-xl-11":"KJqaUhm8U0JsiYrD0Dxblw==","col-xl-10":"_7mb0qz1gMBy5z3XE0MeR-A==","col-xl-9":"NtjNTxvO1eYDpJhzFSeJdw==","col-xl-8":"_1Am5jpu2gSLbN3MT90ZpMA==","col-xl-7":"DXWl7vZG6Q1KwkWGUtJJow==","col-xl-6":"ZfbQVYuXDPgq2Cbch0k9UQ==","col-xl-5":"Jse2AIcAqQ-L735eOc6uYw==","col-xl-4":"qOSStLd0Hyd1qwpBfZxanA==","col-xl-3":"_5avH3rVLZIii2JnGlH0m5Q==","col-xl-2":"mNn2fcJWYjkLtm-z6+bUVg==","col-xl-1":"lIzKgcg1REtDI9W1yCgcFw==","col-lg":"jnUU00B2-e9Wk5Nl+60mRQ==","col-lg-auto":"mFyyeCKxpl8rS-wFzA1g3Q==","col-lg-12":"nMyj2gB5dgB1xHYwFVKq4A==","col-lg-11":"HWrIN7KCnt6SMcNMOEF-4A==","col-lg-10":"r6GfaPfTE4kyvZyJwdSBMQ==","col-lg-9":"rCheKtb6rNIH-zaXJpP6ug==","col-lg-8":"_4TecnWoAdQL52Hg5pH6YaA==","col-lg-7":"mOssnXALpF8Hv5w9NvNA3A==","col-lg-6":"Tb3cUMCgwjG7rE1A9qO8NQ==","col-lg-5":"_4bJUxD5N-qoDPvcpKja5rg==","col-lg-4":"aeLEVJFdHekIqk7vG2+LIA==","col-lg-3":"gcFAuaAKhVU+ZBDUs1B8NA==","col-lg-2":"GCfQVWfgvTZkudPSiKZapQ==","col-lg-1":"yL+-V3goVEWF4G56+fVSpw==","col-md":"SAndS2rmgn1LM+xmrxMo3A==","col-md-auto":"_3PoNYmEqLWaXkJqkWZuvpQ==","col-md-12":"SSiAlLFwrQ-y2DsVPMR0+g==","col-md-11":"_0lyCk8Uqg+qv7dLIZnRIWw==","col-md-10":"X61LVxdi46rBO+LqBAhW2w==","col-md-9":"VutkSlfeGDl2CwGQeHEpiQ==","col-md-8":"d2kC-cPROhgE2OS-VS9PWQ==","col-md-7":"GAJHJb613QL1SKCvoX0rsA==","col-md-6":"BvzDSniNJ-7POTt9dEWr7Q==","col-md-5":"sxPnszhNCUxZNdkijnQv0w==","col-md-4":"a++6cr2IATxiR7HKXNyO-Q==","col-md-3":"pC930OZ5M9ghgdsDRkSXpg==","col-md-2":"sLgPvZpzYdERNGMmZDwBzg==","col-md-1":"I1TjO4uXfBOZEQOj7LcH0Q==","col-sm":"_0J2p1-4a4eeXHwfVNDXvyA==","col-sm-auto":"ETgzICBgGqZZFbad3zd1iQ==","col-sm-12":"_04z29a+pKI3n6S-JAvn7vw==","col-sm-11":"PzbxnJWUR8XrC6Xnte7ZYQ==","col-sm-10":"pv2I-4hHHe69Bxg9+0ZZsQ==","col-sm-9":"_9RXcLzg+pZo3Cwrz83yRSw==","col-sm-8":"lPJUQqA3bLFaLX8D3BSPMg==","col-sm-7":"PJi-RjGoDTE3MS3r+VtOoQ==","col-sm-6":"_81Sa1FQ1MemO7HT-Mj3VyQ==","col-sm-5":"SxQkADEuBayutwrCVJP-KQ==","col-sm-4":"fjhYf6QMOHJa0Tl6AEkczA==","col-sm-3":"EYU2Y32cbOUClbxlN10kCg==","col-sm-2":"jAlxb6sBoFTdSfqoBr3HFw==","col-sm-1":"_37Ydx7aBIOywekZNlGZUxw==","col-auto":"uNq-eqcqSUkVVXsPzLt97A==","col-12":"tFr78IcjpHYvtsP2UGZ6-w==","col-11":"iy3Vywm2uTIwh0tDGAvf1w==","col-10":"N+ugCnCSYMF3TpbGoOBERg==","col-9":"JAJ6xO7RZVdaB+2XIVCOxQ==","col-8":"ShEKWNabwH8Jiq0aPAfN8Q==","col-7":"tOFwG0RlEsJUJhNSe-Sblw==","col-6":"WN6ttuUog3lg8jvvQ4cHnw==","col-5":"My8y6StUKr1a4IefPihaIg==","col-4":"LkQvrAMt0HB3hleLf6FujQ==","col-3":"_73LK2iWnPaC1uWqHN6l--Q==","col-2":"_2IzytlEVczYfyYudEqtbLA==","col-1":"pXwA5ZATshjIVHaCFAoC5w==","row-cols-1":"_4jF-pZrYRU6Av-QsmuTIoQ==","row-cols-2":"R72GQKP0n3w9xwNdzveibw==","row-cols-3":"nXnDuLdkdE3JhvyD+yjoAA==","row-cols-4":"RTOc8Zo7QfihVsI1pKkGcw==","row-cols-5":"d0dcZAFUFoUwaLUBiJqTAw==","row-cols-6":"kBZdc341EMhrLP6KTcr0wg==","order-first":"WKuFcyCXuPYICOGEhhMwLQ==","order-last":"N-RzRr40jscXtETJP8KuJw==","order-0":"TSm0mNR8CEFobhinPZKclw==","order-1":"FUsxhXGjb10TSa3Q1OeIEA==","order-2":"CcnXiq3YdJ5Mc8tmYXDKjQ==","order-3":"VvTHV9Sp3WOOrEG+bbBHIg==","order-4":"fGmd9zdgeH9y9bTqgSASYg==","order-5":"KsyNGTvTtJyuS8itLTAWQA==","order-6":"tA3iMlJoORtzTiQUFLUj-Q==","order-7":"oMG0KfzsuOB6kuESdlFOnQ==","order-8":"_4p-DrXY6JwvSB8+yO30oYA==","order-9":"tTXJyFXsikqQBEdLXwXHMg==","order-10":"M75j9GZQVmcTUgT6Tzm9xQ==","order-11":"_58Qd5Zc0U9qFM+zZyERTpg==","order-12":"Ckj4TxOlaor+iIdASsSlVA==","offset-1":"lEqPtcY-25RvziMU2YkUtg==","offset-2":"WiA6vQ+1GQbP9nzPwB-EPg==","offset-3":"PAg1cAhlXQ8D6eJKHhYpSQ==","offset-4":"HW4nEQZ05OWVt1kGJqAJ-g==","offset-5":"Wlhs+rTCYoX51TIHe3bidw==","offset-6":"_6+gTrepIdhGPt6coZ-uwrw==","offset-7":"HBg9tKrTBK9lRdIUZhA5dQ==","offset-8":"CL4TAeMKNzNmBDUywFY1FA==","offset-9":"BTKFSb6Ztdi4dCMUWyU1GA==","offset-10":"czIBE83sUNj0t0nn8RwAMA==","offset-11":"MZ+IxDjTPO4KR76LMblytg==","row-cols-sm-1":"FurzvDUR-yfZR2Z4zpmIyA==","row-cols-sm-2":"lejzo3ztsD9B3TYp6-pvrA==","row-cols-sm-3":"mk4VwKQccIrL8Q8ar+oxlQ==","row-cols-sm-4":"_3VNRmc7hfJjVcGZFUW6drA==","row-cols-sm-5":"SCq4uKZoNIrxa09ICZTlHA==","row-cols-sm-6":"o1aMqSJ6XI9e6oOLaieK2A==","order-sm-first":"LI0wpjZDUZJ7oMqYcDe5xw==","order-sm-last":"ql+O5GiYVdEYYaKVZNJDBA==","order-sm-0":"Uqf4DXjM4gcvwgCUPIxA6Q==","order-sm-1":"MB0jUrmzOfv0uP+UzgdkbQ==","order-sm-2":"tBqR6yZ+QO7fKr+Kxe1j1A==","order-sm-3":"TNZ7zbUt2UIZDe8AXOyoGQ==","order-sm-4":"xw8mj28PS8bKzBrOT93bGg==","order-sm-5":"X2UAoPDs-BPMBH-f3qUyow==","order-sm-6":"nGW1viwjAvrYu9acBLRuOw==","order-sm-7":"EnIre1kxZZGzNik3lxTooA==","order-sm-8":"ckwdSst6vmCf7XKvmYY5MA==","order-sm-9":"umpD8t224q279uPZhAJNBA==","order-sm-10":"vbjIU6e0jNJsVRpxrANGzw==","order-sm-11":"sL0yP3AXUICEIxKqGii1IA==","order-sm-12":"qnB1DngbM-Hd-rDEiN5Bbg==","offset-sm-0":"EeaIgznKZRMJkq6Fg0Kk4A==","offset-sm-1":"ME4b2v7Z-kqJ-32B0PH7qQ==","offset-sm-2":"lNQJI5cLpysYZsVDuqxNiA==","offset-sm-3":"yWCRH+rhQGo0YxPppCieYA==","offset-sm-4":"kMIT3obV6QyoBp84jtm7TA==","offset-sm-5":"vsScYeqJ1-C+Wgs06RaNEA==","offset-sm-6":"zFefln1X4wrPIb0EyWu92A==","offset-sm-7":"_5wz+7bgY0wJh3H1hQozsaw==","offset-sm-8":"-937NutyXcyxhjCZdq161g==","offset-sm-9":"cRoN9Ic6bhJvDdsUkX1-LA==","offset-sm-10":"pjkIJScP4whIlflo9KwtnQ==","offset-sm-11":"EM7l5T7-itZbasUPca48oQ==","row-cols-md-1":"jLYjZI8-mArtFP5HzW5tSw==","row-cols-md-2":"oqmKYRbM5MgIxv7KKNlE6A==","row-cols-md-3":"GD+1sydl+uDcrvDYtRiO-g==","row-cols-md-4":"zbHrHrFJEP+9XR3zy87jiA==","row-cols-md-5":"THAJKoXiPadCIQffoSQ0CA==","row-cols-md-6":"VjxUnsPzh-Y9W9Vl2nEWmA==","order-md-first":"zyF8dGNWtizHs6wxaDa0lw==","order-md-last":"MUdV-NNGrxqJGY9dojwMGA==","order-md-0":"ZhO8FQI8n7DahzSRioaYHQ==","order-md-1":"RiDaqGCgOmhxrLgRmGza1A==","order-md-2":"N5sXAl4p0DdGb84UDPcOLg==","order-md-3":"aYoBbxdjrTjeywDe7Z-j9Q==","order-md-4":"Oiz24HvFwgTic5u62UY1Ng==","order-md-5":"zTSOk8jqXdsKd+URq2KYdg==","order-md-6":"CFm-rRaI1fHd1K3H7Vrw4w==","order-md-7":"cqEO0mSnWB41u6Goz11F-Q==","order-md-8":"_1urxupvb6xqjqETtMWwOvQ==","order-md-9":"qxXEOgoQtVzA2+679geL7Q==","order-md-10":"nvBR59QQIXuAmTMuTnHfMg==","order-md-11":"d22KpQSBrwSOSI52Zu7+Cg==","order-md-12":"_7glQlcqYGSwKk6sFOIBhvg==","offset-md-0":"-0zZhhxyf2z0gn7wMTKxnw==","offset-md-1":"_4gYJIaemAbMABe5AnrwhbA==","offset-md-2":"cv93WXmw4oWc26NOshkGeg==","offset-md-3":"_0y6dwF5qRuZS1wZKagPa6Q==","offset-md-4":"tnayob3+VHiegJLKcVDvTw==","offset-md-5":"tht9wCiMTOaXuRO4d7m0JA==","offset-md-6":"tgsoM1RUfxtag9E7kL5snQ==","offset-md-7":"VULn0vuOgoC1F7mOP+CGmA==","offset-md-8":"EsA8OW5ujDZsPztQj6FPtg==","offset-md-9":"nQC9vUWkrfNCVyj2qOVCkQ==","offset-md-10":"w7bN9NO2UZiqkuqP7M6J8w==","offset-md-11":"_4bxCDyoME4ZoHM77fUGO-A==","row-cols-lg-1":"_6wXj2dZ8v1eEey2fp9boow==","row-cols-lg-2":"_7lbPfmPU0yUL2kQqDer73Q==","row-cols-lg-3":"kdIcM3Qs9GhNVo-lKHz6Ow==","row-cols-lg-4":"zxxD3emDYe-YOQP5ID8I-A==","row-cols-lg-5":"IU8kip4-12hORu5P47EBUg==","row-cols-lg-6":"NULIhDCknUwrL6QwT-RD6Q==","order-lg-first":"MXJ0m-mhbkBaNtZtWy2JuQ==","order-lg-last":"jLnBd10eoFPeZmp1uVsKjw==","order-lg-0":"ekqULi75ViAs+nUXnLlKzA==","order-lg-1":"frH4RdUlpw3C5E0-eBCC6A==","order-lg-2":"fC3JIGKv-rCrMihlBJ2pIQ==","order-lg-3":"AVwvm5XOJmClHPQ+T2GRIw==","order-lg-4":"zNzTgYDRRis8BjwNdKCq8A==","order-lg-5":"IpSRnhqjon0dk5Z+EYJ5XQ==","order-lg-6":"DAwPWuKsniz1dhiKKVpbrg==","order-lg-7":"iQSbThHNdH2Tdn9wXiP+Tg==","order-lg-8":"srZXqZcmQumDLUA6WNruLg==","order-lg-9":"F0o1BdjoJpd+Zqa1QpFJWw==","order-lg-10":"_3isOFHnYRdAK7+04uBB3NA==","order-lg-11":"iPjGEB-lnyQzeSJ3W1cNWg==","order-lg-12":"VMnmhFS2a5bwMEaw0kcIOQ==","offset-lg-0":"xOzLsSID+fZxbcnzliRVCw==","offset-lg-1":"sJCIu3mJ9uv0tj+a0ooLBw==","offset-lg-2":"_9vzEt2RDRJ1BsDIVrrV5+g==","offset-lg-3":"dwN5tW6AJKsHPPj93SSzpA==","offset-lg-4":"js58c7TZ886lHWyNOJS42Q==","offset-lg-5":"R1EW5gv61NZXyTM7Rri6mw==","offset-lg-6":"pCNW1qOEx2K20iT4PI6oww==","offset-lg-7":"Y9zBz8LGYj2dQenR5z+svg==","offset-lg-8":"_895tgbys+843keWZG4wDJg==","offset-lg-9":"hSRItx7Gn3c6jAAJYPv1NQ==","offset-lg-10":"_7Yc8TJHtf7DPKZFJlgFqMw==","offset-lg-11":"lfuiWt3GO05NiZbjJ6sIQg==","row-cols-xl-1":"u4QyHeij+r9piU9qea-G4g==","row-cols-xl-2":"l-pFvz9e7SHKwB2zT9NztA==","row-cols-xl-3":"sEEWRjZuR2O4pKb93mFMBg==","row-cols-xl-4":"+RCPajoCDt8j9Hsp13RMkg==","row-cols-xl-5":"+GrLhtYim3pqY2a9m6PIdw==","row-cols-xl-6":"B6bQBuJRtB9P0N1vLcfnLg==","order-xl-first":"YwWqx3jNUeTiCy6ab1NvwQ==","order-xl-last":"pADA0Zr-7yvueKNn8hNSUg==","order-xl-0":"MGTsNCvcCF7a5bntzZ-dFg==","order-xl-1":"imRpazHdrADOA4JO4+1hfQ==","order-xl-2":"MhWYoHzuOsN8oMfHZvlNKQ==","order-xl-3":"yuKbQ2BqW4+2ngt8Q3MNSA==","order-xl-4":"Z1Cs3h19uaOxne6ZhkT1mg==","order-xl-5":"_4l1OZXmmOjYt43ZMhIVXrg==","order-xl-6":"_0j2Qa3MZEDnGc9d8ACwQlw==","order-xl-7":"QTp7gdQhj+ZPtkZfCkYPGQ==","order-xl-8":"KqbdWIRkmyRLoeqp6g4zBw==","order-xl-9":"WA+x7GU7FgtM7Lb6RbkCBw==","order-xl-10":"H96AFgnR3+750AlDEhvACQ==","order-xl-11":"VMJYIpjlQIRxILOyCwjRlw==","order-xl-12":"THCBM5DJ0MGEuKjhUwgpRA==","offset-xl-0":"RElUj6kBIA3KUbeP-Ey7jg==","offset-xl-1":"m0vkzLSuYKPoNqhazIJGtA==","offset-xl-2":"jHQ9y5Wyqmu+7d2lebgLEA==","offset-xl-3":"HCSI03+-In5d0I5ASg4MPg==","offset-xl-4":"+pLIehF4BhymLPMD3DEv5Q==","offset-xl-5":"JBEZ-AVXBGmxAkROkg-HpA==","offset-xl-6":"tU1kY5iHxgC5X9KOD6DCnw==","offset-xl-7":"I7tPhu6MopGW0TMNeJSQXA==","offset-xl-8":"+80lB3s5RxYsPY+-F8Zvaw==","offset-xl-9":"_2yxroUmDuUWS6bqhFE6E4g==","offset-xl-10":"_2N2FYyk09ksCkW70LYcgcg==","offset-xl-11":"Oswg-phWUCLywjKIi66TNA==","form-control":"rxb-u7L8A-K7OqGYZW3mEg==","form-control-file":"ItAE4BISMwOknrbg0zTW6A==","form-control-range":"FQ2oMW0oMyvNjnw28P6SSA==","col-form-label":"L44tdlGXEblIDOcHaUwOdg==","col-form-label-lg":"_9h55f+rR1p9NXt8AOqDFKg==","col-form-label-sm":"_2U3Vlw7d5ETuC9xdyFRr8w==","form-control-plaintext":"wh-T+fF5UyFigyoA5tghrw==","form-control-sm":"ZRdFRRmmdJsAOwBY+RWMtg==","form-control-lg":"sIVGOcqPE2FeSC9GjjXWRw==","form-group":"+o0szHLHnQSOFsifiUvdJw==","form-text":"_1A9mluCA-srn7qq4AWMtAg==","form-row":"GN9T3HyWyk9cpPD8-6uyDQ==","form-check":"tF3rjXkFRbBtfcpC6cW2sg==","form-check-input":"+wxdJMEiONNcuJirfptaKg==","form-check-label":"HgyDHyHFbSZ00SBAYkBcqw==","form-check-inline":"AotIqR-zGtBkUw8C-V5CYQ==","valid-feedback":"oQ-TB6lObxU2S+fa+BBRrQ==","valid-tooltip":"_0lwTqF-2CN1XZSfX-c66dg==","was-validated":"oT3PsQO1Im41bPXPrim8DQ==","is-valid":"ajliVsAF8sWm2B73BP+iJA==","custom-select":"ZuKAot8IvK4eAXR7cQ+3zA==","custom-control-input":"TTjFeu5yhte+p5CUD9uvcg==","custom-control-label":"b+PoZPET9E6+CPNs+UKGZw==","custom-file-input":"H5LpTHh6+g956FJIUi4mPA==","custom-file-label":"GhoPRWJkNpP3HCEW5ayyjA==","invalid-feedback":"_3L3JuseiUgFLMEJfoT-ZnQ==","invalid-tooltip":"LlnsAlWVkYbU3Fg7FPceeA==","is-invalid":"hNeMhnkgc117eUaEbh4zoA==","form-inline":"f5++B2i9PaJzqmEeNPVf0Q==","input-group":"XOv3kMqDSkg3Y+97ivNVxA==","custom-control":"f2aVZSjfPLXxX0hroVfxsw==",btn:"_7DhMpfk4OxfouraFzxZobA==",focus:"uqv5w+4O2NvycwwYLiZHiA==",disabled:"SnxkU79OvQ6Qoh01xCyRhg==","btn-primary":"tPk7d3Wa5J5-DN5k4W6xUA==",active:"alM3BwVgAI-A6mAZVmsIsA==",show:"InkBQhrykVDp8OlXdbXOTA==","dropdown-toggle":"qNFyvqcuyPtURI6K5WGoLw==","btn-secondary":"v8-NuLXZ7PwaK3vfW-hNcQ==","btn-success":"EPNGsPeCovJGoxMetqFJQQ==","btn-info":"aF+xAcqI1C+9nTUZ6-aedg==","btn-warning":"Zx2kVQEYuquPXRqSIpsEFw==","btn-danger":"Q8F2TgYeYq2mCTJxv85RXA==","btn-light":"yiFLb+WfiFN-0ldzJLypNQ==","btn-dark":"O42tOC04CFqDBZRWGBCOeA==","btn-outline-primary":"q-4DlIgrmjx3kf1py-1abg==","btn-outline-secondary":"_05T6SZ7OWl7vRSOO7xrYiw==","btn-outline-success":"qv1D8bEG4LzZnYjnq2b5ew==","btn-outline-info":"_3k+u5-+dHHCwNNaF+gdr7w==","btn-outline-warning":"KCGFP69cNeODQ0PHCegveA==","btn-outline-danger":"yQ-JWLaAqJss7VCiTW4UGQ==","btn-outline-light":"Js-WmbBYwSirASj7wEuy+g==","btn-outline-dark":"JwHCAjljftUQwvI1i5XAAQ==","btn-link":"uqHE7cPi+zWbQjDQFFuf2A==","btn-lg":"Fajh0V-v4F6Q-PwZe1cZoQ==","btn-sm":"YY6aIAYg8S6JwUbr-E562Q==","btn-block":"FcmMgdBtpHnxrQGHHnSPXg==","custom-file":"dmo6hDMuxzHaXdzCjK+Pqg==","has-validation":"gw-mW16UpBopunX8JWVJfA==","input-group-prepend":"kYr-KvAjw+7gonh4ikkDTQ==","input-group-append":"Bkfnry-3z7YRjVHIVe8UKw==","input-group-text":"BN3hSiKNUdNLiOqTdEiApg==","input-group-lg":"nW1Y7vcxx1R4tfBEEVtNUw==","input-group-sm":"_6y5KNXyyb3fvJ8qevfnNhQ==","text-monospace":"yuj2uLs234H7Xz2K-P2TbA==","text-justify":"L7d7M850X3xmUNgyceHeJw==","text-wrap":"PZSho4c4AKJI2rtC2IVj6w==","text-nowrap":"Jxn-0a3xL-9z7NUrjJXWcw==","text-truncate":"Om-3pLcwRfYcXmuOSsMGtg==","text-left":"GpWt5UXD+IsVQ6UAiv4GXw==","text-right":"bk31fiJMnWC8ljHXfOg8uw==","text-center":"_7aPdUS7Hp-TNDkl4teRH3A==","text-sm-left":"DYcH-Hr+av7fw5dNBeug6g==","text-sm-right":"VhEr+3hopXIjjd2+p2u9ew==","text-sm-center":"aay8+my4Qeao1AnGsDcTNQ==","text-md-left":"K51lUdrnXqdzsGhV6ISyMQ==","text-md-right":"YrUAQlZaSa7xmX2M3Mo0vA==","text-md-center":"G8RImYg8AgxW9bPx0mherQ==","text-lg-left":"_6xXDYvZp37J61XGBJrL4cA==","text-lg-right":"Nj1BKIJRoQHZt1NE9ir2rg==","text-lg-center":"dlwGFduUtEKf38Q0Sr6xhA==","text-xl-left":"KyApiAwpBv5eWHexM8reKQ==","text-xl-right":"sdx+7vZ4csj4qmyPvRxlmA==","text-xl-center":"YLX3CO-BUM0O+olzyJDqqQ==","text-lowercase":"vGm0FBnb2vrpMcwseJX1Sg==","text-uppercase":"NH8koI0uB+W7oUMz6SDslw==","text-capitalize":"_0E6aiCk-AUTrAvijvcTMPQ==","font-weight-light":"_5JJWKvTCZBkIgsBJ6xEKHg==","font-weight-lighter":"GZPWGjB9PBICJ5MOxhPnPQ==","font-weight-normal":"FQXQD7M8ilfaEtB4r+mEaA==","font-weight-bold":"xA5Bo9d-kKW-aKLdqgZPTg==","font-weight-bolder":"D16qkTGc9zvxs2ADjLjhdQ==","font-italic":"CqvXhEZd7zeQ5S0Zv7lC2w==","text-white":"sESr--F+0poK9MmwZWNSRg==","text-primary":"GNuz2eMKK6Cc+G3WQodHxQ==","text-secondary":"AZNK6fiRWvuZ+wr+z6BclQ==","text-success":"NDsKA2w+x-5gmLmzWexnNA==","text-info":"R2tK5v05mMik6eCGYiTVlw==","text-warning":"ie0whLQiaM25kaZsHslAtw==","text-danger":"bX7UUq1o0-hYYUFRRKmuOQ==","text-light":"CyL9WzEIAfkagwiOM1IlUQ==","text-dark":"PLKo7Ilf3zacq0VBzB-Jxw==","text-body":"ui7xy1Y2hEZvWSBKUIlU-Q==","text-muted":"aJI844EjQ8v31GqRrq-7tA==","text-black-50":"GNj55Y0RFs3SfvcjNYoM4w==","text-white-50":"vYVLqZRAa2cmQQXGo8SkvQ==","text-hide":"_1iLFqmUJ2s3bBbPxXesZ2Q==","text-decoration-none":"bQe-KiqF9GA7e4yc3pQSkw==","text-break":"eei0tK+VG2L4NMWIE+LhKg==","text-reset":"uUZyBviaNlCvBh3i2RHZlA=="};var a=i},609:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},62:function(e,t,n){"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var f=o(l),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==f?(a[f].references++,a[f].updater(h)):a.push({identifier:l,updater:v(h,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,p=0;function v(e,t){var n,r,i;if(t.singleton){var a=p++;n=d||(d=u(t)),r=f.bind(null,n,a,!1),i=f.bind(null,n,a,!0)}else n=u(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},156:function(e){"use strict";e.exports=r},128:function(e){"use strict";e.exports=i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var x={};return function(){"use strict";var e,t;n.r(x),n.d(x,{AuthContext:function(){return rx},AuthFlow:function(){return Ex},AuthProvider:function(){return dx},PrivateRoute:function(){return Cx},StaffRoute:function(){return Ox}});var r={};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){_(a,r,i,o,s,"next",e)}function s(e){_(a,r,i,o,s,"throw",e)}o(void 0)}))}}n.r(r),n.d(r,{FirebaseError:function(){return B},SDK_VERSION:function(){return We},_DEFAULT_ENTRY_NAME:function(){return Pe},_addComponent:function(){return je},_addOrOverwriteComponent:function(){return Me},_apps:function(){return Re},_clearComponents:function(){return qe},_components:function(){return Le},_getProvider:function(){return Fe},_registerComponent:function(){return Ue},_removeServiceInstance:function(){return Ve},deleteApp:function(){return He},getApp:function(){return Ke},getApps:function(){return Ge},initializeApp:function(){return Qe},onLog:function(){return Xe},registerVersion:function(){return Je},setLogLevel:function(){return Ze}});var T=n(162),S=n.n(T),A=n(156),N=n.n(A),C=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},P=function(e){return function(e){var t=C(e);return D.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function O(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=O(e[n],t[n]));return e}var R=function(){function e(){var t=this;w(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return k(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function L(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(L())}function M(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function U(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function F(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function V(){var e=L();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function q(){return"object"==typeof indexedDB}var B=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),z.prototype.create),a}return k(n)}(b(Error)),z=function(){function e(t,n,r){w(this,e),this.service=t,this.serviceName=n,this.errors=r}return k(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(W,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new B(n,a,t)}}]),e}(),W=/\{\$([^}]+)}/g;function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(G(s)&&G(u)){if(!K(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function G(e){return null!==e&&"object"==typeof e}function H(e){for(var t=[],n=function(){var e=v(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Y(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=v(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function J(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function X(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(t,n){var r=this;w(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return k(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=$),void 0===r.error&&(r.error=$),void 0===r.complete&&(r.complete=$);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $(){}function ee(e){return e&&e._delegate?e._delegate:e}var te,ne=function(){function e(t,n,r){w(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return k(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),re="[DEFAULT]",ie=function(){function e(t,n){w(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return k(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new R;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(e){}var t,n=p(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(e){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=p(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=v(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(e){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===re?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(n){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:re:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),ae=function(){function e(t){w(this,e),this.name=t,this.providers=new Map}return k(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ie(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),oe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(te||(te={}));var se,ue,ce={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,fe=(l(e={},te.DEBUG,"log"),l(e,te.VERBOSE,"log"),l(e,te.INFO,"info"),l(e,te.WARN,"warn"),l(e,te.ERROR,"error"),e),he=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=fe[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},de=function(){function e(t){w(this,e),this.name=t,this._logLevel=le,this._logHandler=he,this._userLogHandler=null,oe.push(this)}return k(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in te))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?ce[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.DEBUG].concat(t)),this._logHandler.apply(this,[this,te.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.VERBOSE].concat(t)),this._logHandler.apply(this,[this,te.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.INFO].concat(t)),this._logHandler.apply(this,[this,te.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.WARN].concat(t)),this._logHandler.apply(this,[this,te.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.ERROR].concat(t)),this._logHandler.apply(this,[this,te.ERROR].concat(t))}}]),e}(),pe=new WeakMap,ve=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,be={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||me.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ke(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function we(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(Ie(this),n),ke(pe.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ke(t.apply(Ie(this),n))}:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=(n=t).call.apply(n,[Ie(this),e].concat(i));return me.set(o,e.sort?e.sort():[e]),ke(o)}:(e instanceof IDBTransaction&&function(e){if(!ve.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ve.set(e,t)}}(e),n=e,(se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return n instanceof e}))?new Proxy(e,be):e);var t,n}function ke(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ke(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&pe.set(t,e)})).catch((function(){})),ge.set(t,e),t}(e);if(ye.has(e))return ye.get(e);var t=we(e);return t!==e&&(ye.set(e,t),ge.set(t,e)),t}var xe,Ie=function(e){return ge.get(e)},_e=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Te=new Map;function Se(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Te.get(t))return Te.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ee.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||_e.includes(n))){var a=function(){var e=d(f().mark((function e(t){var a,o,s,u,c,l,h=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Te.set(t,a),a}}}be=c(c({},xe=be),{},{get:function(e,t,n){return Se(e,t)||xe.get(e,t,n)},has:function(e,t){return!!Se(e,t)||xe.has(e,t)}});var Ae=function(){function e(t){w(this,e),this.container=t}return k(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}(),Ne="@firebase/app",Ce="0.7.25",De=new de("@firebase/app"),Pe="[DEFAULT]",Oe=(l(t={},Ne,"fire-core"),l(t,"@firebase/app-compat","fire-core-compat"),l(t,"@firebase/analytics","fire-analytics"),l(t,"@firebase/analytics-compat","fire-analytics-compat"),l(t,"@firebase/app-check","fire-app-check"),l(t,"@firebase/app-check-compat","fire-app-check-compat"),l(t,"@firebase/auth","fire-auth"),l(t,"@firebase/auth-compat","fire-auth-compat"),l(t,"@firebase/database","fire-rtdb"),l(t,"@firebase/database-compat","fire-rtdb-compat"),l(t,"@firebase/functions","fire-fn"),l(t,"@firebase/functions-compat","fire-fn-compat"),l(t,"@firebase/installations","fire-iid"),l(t,"@firebase/installations-compat","fire-iid-compat"),l(t,"@firebase/messaging","fire-fcm"),l(t,"@firebase/messaging-compat","fire-fcm-compat"),l(t,"@firebase/performance","fire-perf"),l(t,"@firebase/performance-compat","fire-perf-compat"),l(t,"@firebase/remote-config","fire-rc"),l(t,"@firebase/remote-config-compat","fire-rc-compat"),l(t,"@firebase/storage","fire-gcs"),l(t,"@firebase/storage-compat","fire-gcs-compat"),l(t,"@firebase/firestore","fire-fst"),l(t,"@firebase/firestore-compat","fire-fst-compat"),l(t,"fire-js","fire-js"),l(t,"firebase","fire-js-all"),t),Re=new Map,Le=new Map;function je(e,t){try{e.container.addComponent(t)}catch(I){De.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),I)}}function Me(e,t){e.container.addOrOverwriteComponent(t)}function Ue(e){var t=e.name;if(Le.has(t))return De.debug("There were multiple attempts to register component ".concat(t,".")),!1;Le.set(t,e);var n,r=p(Re.values());try{for(r.s();!(n=r.n()).done;)je(n.value,e)}catch(i){r.e(i)}finally{r.f()}return!0}function Fe(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe;Fe(e,t).clearInstance(n)}function qe(){Le.clear()}var Be=new z("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."}),ze=function(){function e(t,n,r){var i=this;w(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ne("app",(function(){return i}),"PUBLIC"))}return k(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}]),e}(),We="9.8.2";function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw Be.create("bad-app-name",{appName:String(r)});var i=Re.get(r);if(i){if(K(e,i.options)&&K(n,i.config))return i;throw Be.create("duplicate-app",{appName:r})}var a,o=new ae(r),s=p(Le.values());try{for(s.s();!(a=s.n()).done;){var u=a.value;o.addComponent(u)}}catch(l){s.e(l)}finally{s.f()}var c=new ze(e,n,o);return Re.set(r,c),c}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=Re.get(e);if(!t)throw Be.create("no-app",{appName:e});return t}function Ge(){return Array.from(Re.values())}function He(e){return Ye.apply(this,arguments)}function Ye(){return Ye=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=Re.has(n),!e.t0){e.next=7;break}return Re.delete(n),e.next=6,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Je(e,t,n){var r,i=null!==(r=Oe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void De.warn(s.join(" "))}Ue(new ne("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Xe(e,t){if(null!==e&&"function"!=typeof e)throw Be.create("invalid-log-argument");!function(e,t){var n,r=p(oe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ce[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:te[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ze(e){var t;t=e,oe.forEach((function(e){e.setLogLevel(t)}))}var $e="firebase-heartbeat-store",et=null;function tt(){return et||(et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=ke(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(ke(s.result),e.oldVersion,e.newVersion,ke(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore($e)}}).catch((function(e){throw Be.create("storage-open",{originalErrorMessage:e.message})}))),et}function nt(e,t){return rt.apply(this,arguments)}function rt(){return rt=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tt();case 3:return r=e.sent.transaction($e,"readwrite"),i=r.objectStore($e),e.next=7,i.put(n,it(t));case 7:return e.abrupt("return",r.done);case 10:throw e.prev=10,e.t0=e.catch(0),Be.create("storage-set",{originalErrorMessage:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),rt.apply(this,arguments)}function it(e){return"".concat(e.name,"!").concat(e.options.appId)}var at=function(){function e(t){var n=this;w(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new st(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return k(e,[{key:"triggerHeartbeat",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=ot(),e.t0=null===this._heartbeatsCache,!e.t0){e.next=6;break}return e.next=5,this._heartbeatsCachePromise;case 5:this._heartbeatsCache=e.sent;case 6:if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((function(e){return e.date===n}))){e.next=8;break}return e.abrupt("return",(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHeartbeatsHeader",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===this._heartbeatsCache,!e.t0){e.next=4;break}return e.next=4,this._heartbeatsCachePromise;case 4:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=6;break}return e.abrupt("return","");case 6:if(t=ot(),n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=p(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ut(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ut(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done&&"break"!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=P(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=14;break}return this._heartbeatsCache.heartbeats=i,e.next=12,this._storage.overwrite(this._heartbeatsCache);case 12:e.next=15;break;case 14:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function ot(){return(new Date).toISOString().substring(0,10)}var st=function(){function e(t){w(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return k(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!q()&&new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((function(){return!0})).catch((function(){return!1})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"read",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.t1=e.sent,!e.t1){e.next=7;break}return e.next=6,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tt();case 3:return e.abrupt("return",e.sent.transaction($e).objectStore($e).get(it(t)));case 6:throw e.prev=6,e.t0=e.catch(0),Be.create("storage-get",{originalErrorMessage:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()(this.app);case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0={heartbeats:[]};case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"overwrite",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(!e.sent){e.next=7;break}return e.next=5,this.read();case 5:return r=e.sent,e.abrupt("return",nt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"add",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(!e.sent){e.next=7;break}return e.next=5,this.read();case 5:return r=e.sent,e.abrupt("return",nt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function ut(e){return P(JSON.stringify({version:2,heartbeats:e})).length}Ue(new ne("platform-logger",(function(e){return new Ae(e)}),"PRIVATE")),Ue(new ne("heartbeat",(function(e){return new at(e)}),"PRIVATE")),Je(Ne,Ce,""),Je(Ne,Ce,"esm2017"),Je("fire-js","");var ct=function(){function e(t,n){var r=this;w(this,e),this._delegate=t,this.firebase=n,je(t,new ne("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return k(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),He(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){je(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Me(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),lt=new z("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ft=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=Qe(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Q(t,i.name))return t[i.name];var a=new e(i,n);return t[i.name]=a,a},app:i,registerVersion:Je,setLogLevel:Ze,onLog:Xe,apps:null,SDK_VERSION:We,INTERNAL:{registerComponent:function(t){var r=t.name,a=r.replace("-compat","");if(Ue(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[a])throw lt.create("invalid-app-argument",{appName:r});return e[a]()};void 0!==t.serviceProps&&O(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this._getService.bind(this,r).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!Q(t,e=e||Pe))throw lt.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,n}(ct);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){O(t,e)},createSubscribe:X,ErrorFactory:z,deepExtend:O}),t}(),ht=new de("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var dt=self.firebase.SDK_VERSION;dt&&dt.indexOf("LITE")>=0&&ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var pt=ft;function vt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Je("@firebase/app-compat","0.1.26",void 0),pt.registerVersion("firebase","9.8.2","app-compat"),Object.create,Object.create;var mt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},yt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gt=new z("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new de("@firebase/auth");function wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bt.logLevel<=te.ERROR&&bt.error.apply(bt,["Auth (".concat(We,"): ").concat(e)].concat(n))}function kt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Et.apply(void 0,[e].concat(n))}function xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Et.apply(void 0,[e].concat(n))}function It(e,t,n){var r=Object.assign(Object.assign({},yt()),l({},t,n));return new z("auth","Firebase",r).create(t,{appName:e.name})}function _t(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&kt(e,"argument-error"),It(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return gt.create.apply(gt,[e].concat(n))}function Tt(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw Et.apply(void 0,[t].concat(r))}function St(e){var t="INTERNAL ASSERTION FAILED: "+e;throw wt(t),new Error(t)}function At(e,t){e||St(t)}var Nt=new Map;function Ct(e){At(e instanceof Function,"Expected a class definition");var t=Nt.get(e);return t?(At(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nt.set(e,t),t)}function Dt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Rt=function(){function e(t,n){w(this,e),this.shortDelay=t,this.longDelay=n,At(n>t,"Short delay should be less than long delay!"),this.isMobile=j()||F()}return k(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||U()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Lt(e,t){At(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var jt=function(){function e(){w(this,e)}return k(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void St("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void St("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void St("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Mt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ut=new Rt(3e4,6e4);function Ft(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Vt(e,t,n,r){return qt.apply(this,arguments)}function qt(){return qt=d(f().mark((function e(t,n,r,i){var a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Bt(t,a,d(f().mark((function e(){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=H(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=5,t._getAdditionalHeaders();case 5:return u=e.sent,e.abrupt("return",(u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),jt.fetch()(Kt(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a))));case 7:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),qt.apply(this,arguments)}function Bt(e,t,n){return zt.apply(this,arguments)}function zt(){return zt=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Mt),n),e.prev=2,a=new Gt(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Ht(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=15;break}return e.abrupt("return",s);case 15:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=v(c,2),h=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=18;break}throw Ht(t,"credential-already-in-use",s);case 18:if("EMAIL_EXISTS"!==h){e.next=20;break}throw Ht(t,"email-already-in-use",s);case 20:if("USER_DISABLED"!==h){e.next=22;break}throw Ht(t,"user-disabled",s);case 22:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=25;break}throw It(t,p,d);case 25:kt(t,p),e.next=33;break;case 28:if(e.prev=28,e.t0=e.catch(2),!(e.t0 instanceof B)){e.next=32;break}throw e.t0;case 32:kt(t,"network-request-failed");case 33:case"end":return e.stop()}}),e,null,[[2,28]])}))),zt.apply(this,arguments)}function Wt(e,t,n,r){return Qt.apply(this,arguments)}function Qt(){return Qt=d(f().mark((function e(t,n,r,i){var a,o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Vt(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&kt(t,"multi-factor-auth-required",{_serverResponse:o}),o));case 5:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}function Kt(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Lt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Gt=function(){function e(t){var n=this;w(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(xt(n.auth,"network-request-failed"))}),Ut.get())}))}return k(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ht(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=xt(e,t,r);return i.customData._tokenResponse=n,i}function Yt(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Jt(e){return 1e3*Number(e)}function Xt(e){var t=e.split("."),n=v(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return wt("JWT malformed, contained fewer than 3 sections"),null;try{var o=function(e){try{return D.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(i);return o?JSON.parse(o):(wt("Failed to decode base64 JWT payload"),null)}catch(e){return wt("Caught error parsing JWT payload as JSON",e),null}}function Zt(e,t){return $t.apply(this,arguments)}function $t(){return $t=d(f().mark((function e(t,n){var r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof B&&function(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),$t.apply(this,arguments)}var en=function(){function e(t){w(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return k(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",void("auth/network-request-failed"===e.t0.code&&this.schedule(!0)));case 8:this.schedule();case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),tn=function(){function e(t,n){w(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return k(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Yt(this.lastLoginAt),this.creationTime=Yt(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function nn(e){return rn.apply(this,arguments)}function rn(){return rn=d(f().mark((function e(t){var n,r,i,a,o,s,u,c,l,p,v,m,y;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Zt(t,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r,{idToken:i}));case 6:Tt(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=vt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=t.providerData,l=s,u=[].concat(h(c.filter((function(e){return!l.some((function(t){return t.providerId===e.providerId}))}))),h(l)),p=t.isAnonymous,v=!(t.email&&o.passwordHash||(null==u?void 0:u.length)),m=!!p&&v,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new tn(o.createdAt,o.lastLoginAt),isAnonymous:m},Object.assign(t,y);case 13:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}var an=function(){function e(){w(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return k(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Tt(e.idToken,"internal-error"),Tt(void 0!==e.idToken,"internal-error"),Tt(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=Xt(e);return Tt(t,"internal-error"),Tt(void 0!==t.exp,"internal-error"),Tt(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=d(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Tt(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired){e.next=13;break}if(!this.refreshToken){e.next=9;break}return e.next=6,this.refresh(t,this.refreshToken);case 6:e.t1=this.accessToken,e.next=10;break;case 9:e.t1=null;case 10:e.t0=e.t1,e.next=14;break;case 13:e.t0=this.accessToken;case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(t,{},d(f().mark((function e(){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=H({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Kt(t,a,"/v1/token","key=".concat(o)),e.next=7,t._getAdditionalHeaders();case 7:return u=e.sent,e.abrupt("return",(u["Content-Type"]="application/x-www-form-urlencoded",jt.fetch()(s,{method:"POST",headers:u,body:r})));case 9:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return St("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Tt("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Tt("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Tt("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function on(e,t){Tt("string"==typeof e||void 0===e,"internal-error",{appName:t})}var sn=function(){function e(t){w(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=vt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new tn(a.createdAt||void 0,a.lastLoginAt||void 0)}return k(e,[{key:"getIdToken",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Tt(n=e.sent,this.auth,"internal-error"),e.t0=this.accessToken!==n,!e.t0){e.next=10;break}return this.accessToken=n,e.next=9,this.auth._persistUserIfCurrent(this);case 9:this.auth._notifyListenersIfCurrent(this);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getIdTokenResult",value:function(e){return function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ee(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Tt((a=Xt(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,s=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Yt(Jt(a.auth_time)),issuedAtTime:Yt(Jt(a.iat)),expirationTime:Yt(Jt(a.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this,e)}},{key:"reload",value:function(){return function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(t),e.next=3,nn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this)}},{key:"_assign",value:function(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=d(f().mark((function e(t){var n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e.t0=n,!e.t0){e.next=7;break}return e.next=7,nn(this);case 7:return e.next=9,this.auth._persistUserIfCurrent(this);case 9:r&&this.auth._notifyListenersIfCurrent(this);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Zt(this,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,w=n.emailVerified,k=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;Tt(b&&I,t,"internal-error");var _=an.fromJSON(this.name,I);Tt("string"==typeof b,t,"internal-error"),on(f,t.name),on(h,t.name),Tt("boolean"==typeof w,t,"internal-error"),Tt("boolean"==typeof k,t,"internal-error"),on(d,t.name),on(p,t.name),on(v,t.name),on(m,t.name),on(y,t.name),on(g,t.name);var E=new e({uid:b,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:k,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=d(f().mark((function t(n,r){var i,a,o,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new an).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,nn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}(),un=function(){function e(){w(this,e),this.type="NONE",this.storage={}}return k(e,[{key:"_isAvailable",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_set",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();un.type="NONE";var cn=un;function ln(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var fn=function(){function e(t,n,r){w(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ln(this.userKey,a.apiKey,o),this.fullPersistenceKey=ln("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return k(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?sn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:return this.persistence=t,e.abrupt("return",n?this.setCurrentUser(n):void 0);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=d(f().mark((function t(n,r){var i,a,o,s,u,c,l,h,v,m,y,g=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=g.length>2&&void 0!==g[2]?g[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ct(cn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ct(cn),s=ln(i,n.config.apiKey,n.name),u=null,c=p(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=28;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(v=t.sent)){t.next=22;break}return m=sn._fromJSON(n,v),h!==o&&(u=m),o=h,t.abrupt("break",28);case 22:t.next=26;break;case 24:t.prev=24,t.t0=t.catch(14);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(10),c.e(t.t1);case 33:return t.prev=33,c.f(),t.finish(33);case 36:if(y=a.filter((function(e){return e._shouldAllowMigration})),!o._shouldAllowMigration||!y.length){t.next=48;break}if(o=y[0],t.t3=u,!t.t3){t.next=43;break}return t.next=43,o._set(s,u.toJSON());case 43:return t.next=45,Promise.all(r.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 45:t.t2=new e(o,n,i),t.next=49;break;case 48:t.t2=new e(o,n,i);case 49:return t.abrupt("return",t.t2);case 50:case"end":return t.stop()}}),t,null,[[10,30,33,36],[14,24]])})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}();function hn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gn(t))return"Blackberry";if(bn(t))return"Webos";if(pn(t))return"Safari";if((t.includes("chrome/")||vn(t))&&!t.includes("edge/"))return"Chrome";if(yn(t))return"Android";var n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);return 2===(null==r?void 0:r.length)?r[1]:"Other"}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/firefox\//i.test(e)}function pn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/crios\//i.test(e)}function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iemobile/i.test(e)}function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/android/i.test(e)}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/blackberry/i.test(e)}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/webos/i.test(e)}function wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iphone|ipad|ipod/i.test(e)}function kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return wn(e)||yn(e)||bn(e)||gn(e)||/windows phone/i.test(e)||mn(e)}function xn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=hn(L());break;case"Worker":t="".concat(hn(L()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(We,"/").concat(r)}var In=function(){function e(t){w(this,e),this.auth=t,this.queue=[]}return k(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(e){r(e)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=p(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=p(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(t){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),_n=function(){function e(t,n,r){w(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tn(this),this.idTokenSubscription=new Tn(this),this.beforeStateQueue=new In(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return k(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ct(t)),this._initializationPromise=this.queue(d(f().mark((function r(){var i,a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!n._deleted,!r.t0){r.next=6;break}return r.next=4,fn.create(n,e);case 4:n.persistenceManager=r.sent,r.t0=!n._deleted;case 6:if(!r.t0){r.next=19;break}if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t1=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,n._deleted||(n._isInitialized=!0);case 19:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,!this.currentUser&&!t){e.next=19;break}if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=13;break}return this._currentUser._assign(t),e.next=10,this.currentUser.getIdToken();case 10:e.t1=void e.sent,e.next=16;break;case 13:return e.next=15,this._updateCurrentUser(t,!0);case 15:e.t1=void e.sent;case 16:e.t0=e.t1,e.next=20;break;case 19:e.t0=void 0;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeCurrentUser",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=13;break}return e.next=7,this.getOrInitRedirectPersistenceManager();case 7:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==i?void 0:i._redirectEventId,e.next=11,this.tryRedirectSignIn(t);case 11:u=e.sent,o&&o!==s||!(null==u?void 0:u.user)||(i=u.user,a=!0);case 13:if(i){e.next=15;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 15:if(i._redirectEventId){e.next=26;break}if(!a){e.next=25;break}return e.prev=17,e.next=20,this.beforeStateQueue.runMiddleware(i);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(17),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 25:return e.abrupt("return",i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null));case 26:return Tt(this._popupRedirectResolver,this,"argument-error"),e.next=29,this.getOrInitRedirectPersistenceManager();case 29:return e.abrupt("return",this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i));case 30:case"end":return e.stop()}}),e,this,[[17,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"tryRedirectSignIn",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===e.t0.code){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateCurrentUser",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?ee(t):null,e.abrupt("return",(n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_updateCurrentUser",value:function(){var e=d(f().mark((function e(t){var n,r=this,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],this._deleted){e.next=8;break}if(t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.t0=n,e.t0){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signOut",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(e.t0=this.redirectPersistenceManager||this._popupRedirectResolver,!e.t0){e.next=6;break}return e.next=6,this._setRedirectUser(null);case 6:return e.abrupt("return",this._updateCurrentUser(null,!0));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ct(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new z("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Tt(n=t&&Ct(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,fn.create(this,[Ct(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_redirectUserForId",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._isInitialized,!e.t0){e.next=4;break}return e.next=4,this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 4:return e.abrupt("return",(null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)===t?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===t?this.redirectUser:null);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_persistUserIfCurrent",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Tt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xn(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"X-Client-Version":this.clientVersion},this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return r=e.sent,e.abrupt("return",(r&&(n["X-Firebase-Client"]=r),n));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function En(e){return ee(e)}var Tn=function(){function e(t){var n=this;w(this,e),this.auth=t,this.observer=null,this.addObserver=X((function(e){return n.observer=e}))}return k(e,[{key:"next",get:function(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Sn(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function An(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Nn=function(){function e(t,n){w(this,e),this.providerId=t,this.signInMethod=n}return k(e,[{key:"toJSON",value:function(){return St("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return St("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return St("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return St("not implemented")}}]),e}();function Cn(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:resetPassword",Ft(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Pn(e,t){return On.apply(this,arguments)}function On(){return On=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),On.apply(this,arguments)}function Rn(e,t){return Ln.apply(this,arguments)}function Ln(){return Ln=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:sendOobCode",Ft(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}var jn=function(e){y(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return w(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return k(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithPassword",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithEmailLink",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{email:this._email,oobCode:this._password}));case 5:kt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_linkToIdToken",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Pn(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithEmailLink",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:kt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Nn);function Mn(e,t){return Un.apply(this,arguments)}function Un(){return Un=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithIdp",Ft(t,n)));case 1:case"end":return e.stop()}}),e)}))),Un.apply(this,arguments)}var Fn=function(e){y(n,e);var t=g(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return k(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Mn(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Mn(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Mn(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=vt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Nn),Vn={USER_NOT_FOUND:"user-not-found"},qn=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this,"phone","phone")).params=e,r}return k(n,[{key:"_getIdTokenResponse",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithPhoneNumber",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(t,"POST","/v1/accounts:signInWithPhoneNumber",Ft(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ht(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithPhoneNumber",Ft(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),Vn));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Nn),Bn=function(){function e(t){var n,r,i,a,o,s;w(this,e);var u=Y(J(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Tt(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return k(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Y(J(e)).link,n=t?Y(J(t)).deep_link_id:null,r=Y(J(e)).deep_link_id;return(r?Y(J(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(t){return null}}}]),e}(),zn=function(){function e(){w(this,e),this.providerId=e.PROVIDER_ID}return k(e,null,[{key:"credential",value:function(e,t){return jn._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Bn.parseLink(t);return Tt(n,"argument-error"),jn._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();zn.PROVIDER_ID="password",zn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Wn=function(){function e(t){w(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return k(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Qn=function(e){y(n,e);var t=g(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).scopes=[],e}return k(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(Wn),Kn=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Tt(e.idToken||e.accessToken,"argument-error"),Fn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return Tt("providerId"in t&&"signInMethod"in t,"argument-error"),Fn._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!(i||a||r||o))return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(t){return null}}}]),n}(Qn),Gn=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.call(this,"facebook.com")}return k(n,null,[{key:"credential",value:function(e){return Fn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(t){return null}}}]),n}(Qn);Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gn.PROVIDER_ID="facebook.com";var Hn=function(e){y(n,e);var t=g(n);function n(){var e;return w(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return k(n,null,[{key:"credential",value:function(e,t){return Fn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(t){return null}}}]),n}(Qn);Hn.GOOGLE_SIGN_IN_METHOD="google.com",Hn.PROVIDER_ID="google.com";var Yn=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.call(this,"github.com")}return k(n,null,[{key:"credential",value:function(e){return Fn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(t){return null}}}]),n}(Qn);Yn.GITHUB_SIGN_IN_METHOD="github.com",Yn.PROVIDER_ID="github.com";var Jn=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return k(n,[{key:"_getIdTokenResponse",value:function(e){return Mn(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Mn(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Mn(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Nn),Xn=function(e){y(n,e);var t=g(n);function n(e){return w(this,n),Tt(e.startsWith("saml."),"argument-error"),t.call(this,e)}return k(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Jn.fromJSON(e);return Tt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Jn._create(r,n)}catch(t){return null}}}]),n}(Wn),Zn=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.call(this,"twitter.com")}return k(n,null,[{key:"credential",value:function(e,t){return Fn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(t){return null}}}]),n}(Qn);function $n(e,t){return er.apply(this,arguments)}function er(){return er=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signUp",Ft(t,n)));case 1:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}Zn.TWITTER_SIGN_IN_METHOD="twitter.com",Zn.PROVIDER_ID="twitter.com";var tr=function(){function e(t){w(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return k(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=d(f().mark((function t(n,r,i){var a,o,s,u=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>3&&void 0!==u[3]&&u[3],t.next=3,sn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=nr(i),t.abrupt("return",new e({user:o,providerId:s,_tokenResponse:i,operationType:r}));case 6:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"_forOperation",value:function(){var t=d(f().mark((function t(n,r,i){var a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=nr(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()}]),e}();function nr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var rr=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o,s;return w(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(m(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return k(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(B);function ir(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw rr._fromErrorAndOperation(e,n,t,r);throw n}))}function ar(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function or(e,t){return sr.apply(this,arguments)}function sr(){return sr=d(f().mark((function e(t,n){var r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Zt,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",tr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function ur(e,t,n){return cr.apply(this,arguments)}function cr(){return cr=d(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",Tt(ar(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}}),e)}))),cr.apply(this,arguments)}function lr(e,t){return fr.apply(this,arguments)}function fr(){return fr=d(f().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=2,e.next=5,Zt(t,ir(i,a,n,t),r);case 5:return Tt((o=e.sent).idToken,i,"internal-error"),Tt(s=Xt(o.idToken),i,"internal-error"),u=s.sub,e.abrupt("return",(Tt(t.uid===u,i,"user-mismatch"),tr._forOperation(t,a,o)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&kt(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),fr.apply(this,arguments)}function hr(e,t){return dr.apply(this,arguments)}function dr(){return dr=d(f().mark((function e(t,n){var r,i,a,o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,ir(t,i,n);case 4:return a=e.sent,e.next=7,tr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,e.t0=r,e.t0){e.next=12;break}return e.next=12,t._updateCurrentUser(o.user);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),dr.apply(this,arguments)}function pr(e,t){return vr.apply(this,arguments)}function vr(){return vr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hr(En(t),n));case 1:case"end":return e.stop()}}),e)}))),vr.apply(this,arguments)}function mr(e,t){return yr.apply(this,arguments)}function yr(){return yr=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,ur(!1,r,n.providerId);case 3:return e.abrupt("return",or(r,n));case 4:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function gr(e,t){return br.apply(this,arguments)}function br(){return br=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(ee(t),n));case 1:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}var wr=function(){function e(t,n){w(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return k(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?kr._fromServerResponse(e,t):kt(e,"internal-error")}}]),e}(),kr=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return k(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(wr);function xr(e,t,n){var r;Tt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Tt(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Tt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Tt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ir(e,t){return _r.apply(this,arguments)}function _r(){return _r=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,Cn(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(Tt(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return Tt(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:Tt(i.mfaInfo,r,"internal-error");case 12:Tt(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=wr._fromServerResponse(En(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function Er(e,t,n){return Tr.apply(this,arguments)}function Tr(){return Tr=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,Zt(t,Pn(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}var Sr=k((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ar=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o;return w(this,n),(o=t.call(this,e,r,i)).username=a,o}return k(n)}(Sr),Nr=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"facebook.com",r)}return k(n)}(Sr),Cr=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return k(n)}(Ar),Dr=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"google.com",r)}return k(n)}(Sr),Pr=function(e){y(n,e);var t=g(n);function n(e,r,i){return w(this,n),t.call(this,e,"twitter.com",r,i)}return k(n)}(Ar);function Or(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=Xt(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Sr(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Nr(a,i);case"github.com":return new Cr(a,i);case"google.com":return new Dr(a,i);case"twitter.com":return new Pr(a,i,e.screenName||null);case"custom":case"anonymous":return new Sr(a,null);default:return new Sr(a,r,i)}}(n)}var Rr=function(){function e(t,n){w(this,e),this.type=t,this.credential=n}return k(e,[{key:"toJSON",value:function(){return{multiFactorSession:l({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Lr=function(){function e(t,n,r){w(this,e),this.session=t,this.hints=n,this.signInResolver=r}return k(e,[{key:"resolveSignIn",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"_fromError",value:function(t,n){var r=En(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return wr._fromServerResponse(r,e)}));Tt(i.mfaPendingCredential,r,"internal-error");var o=Rr._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=d(f().mark((function e(t){var a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,tr._fromIdTokenResponse(r,n.operationType,s);case 10:return u=e.sent,e.next=13,r._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:return e.abrupt("return",(Tt(n.user,r,"internal-error"),tr._forOperation(n.user,n.operationType,s)));case 15:kt(r,"internal-error");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}(),jr=function(){function e(t){var n=this;w(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return wr._fromServerResponse(t.auth,e)})))}))}return k(e,[{key:"getSession",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Rr,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"enroll",value:function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Zt(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unenroll",value:function(){var e=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Zt(this.user,function(e,t){return Vt(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(e,t))}(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),"auth/user-token-expired"===e.t0.code){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Mr=new WeakMap,Ur="__sak",Fr=function(){function e(t,n){w(this,e),this.storageRetriever=t,this.type=n}return k(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ur,"1"),this.storage.removeItem(Ur),Promise.resolve(!0)):Promise.resolve(!1)}catch(r){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),Vr=function(e){y(n,e);var t=g(n);function n(){var e;return w(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=L();return pn(e)||wn(e)}()&&function(){try{return!(!window||window===window.top)}catch(r){return!1}}(),e.fallbackToPolling=kn(),e._shouldAllowMigration=!0,e}return k(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);V()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=d(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,e.abrupt("return",(this.localCache[t]=JSON.stringify(r),r));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Fr);Vr.type="LOCAL";var qr=Vr,Br=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return k(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Fr);Br.type="SESSION";var zr=Br,Wr=function(){function e(t){w(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return k(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null==(s=this.handlersMap[a])?void 0:s.size){e.next=3;break}return e.abrupt("return");case 3:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,function(e){return Promise.all(e.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}(u);case 7:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Qr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wr.receivers=[];var Kr=function(){function e(t){w(this,e),this.target=t,this.handlers=new Set}return k(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Qr("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();function Gr(){return window}function Hr(){return void 0!==Gr().WorkerGlobalScope&&"function"==typeof Gr().importScripts}var Yr="firebaseLocalStorageDb",Jr="firebaseLocalStorage",Xr="fbase_key",Zr=function(){function e(t){w(this,e),this.request=t}return k(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function $r(e,t){return e.transaction([Jr],t?"readwrite":"readonly").objectStore(Jr)}function ei(){var e=indexedDB.open(Yr,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Jr,{keyPath:Xr})}catch(e){n(e)}})),e.addEventListener("success",d(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains(Jr)){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(Yr);return new Zr(e).toPromise()}();case 8:return n.t0=t,n.next=11,ei();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}}),n)}))))}))}function ti(e,t,n){return ni.apply(this,arguments)}function ni(){return ni=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$r(t,!0).put((l(i={},Xr,n),l(i,"value",r),i)),e.abrupt("return",new Zr(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t){var n=$r(e,!0).delete(t);return new Zr(n).toPromise()}var ii=function(){function e(){w(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return k(e,[{key:"_openDb",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=5;break}return e.next=4,ei();case 4:this.db=e.sent;case 5:return e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_withRetries",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=1,e.next=4,this._openDb();case 4:return r=e.sent,e.next=7,t(r);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(1),!(n++>3)){e.next=14;break}throw e.t0;case 14:this.db&&(this.db.close(),this.db=void 0);case 15:e.next=1;break;case 17:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeReceiver",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Wr._getInstance(Hr()?self:null),this.receiver._subscribe("keyChanged",function(){var e=d(f().mark((function e(n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return e.t0=e.sent.includes(r.key),e.abrupt("return",{keyProcessed:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeSender",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Kr(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:(r=e.sent)&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyServiceWorker",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sender||!this.activeServiceWorker||function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==this.activeServiceWorker){e.next=8;break}return e.prev=1,e.next=4,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isAvailable",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ei();case 5:return t=e.sent,e.next=8,ti(t,Ur,"1");case 8:return e.next=10,ri(t,Ur);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_withPendingWrite",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_set",value:function(){var e=d(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ti(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$r(t,!1).get(n),e.next=3,new Zr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,t)}));case 2:return n=e.sent,e.abrupt("return",(this.localCache[t]=n,n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ri(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_poll",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=$r(e,!1).getAll();return new Zr(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=p(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ii.type="LOCAL";var ai=ii;function oi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=xt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function si(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ui=1e12,ci=function(){function e(t){w(this,e),this.auth=t,this.counter=ui,this._widgets=new Map}return k(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new li(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ui;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ui;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ui,e.abrupt("return",(null===(n=this._widgets.get(r))||void 0===n||n.execute(),""));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),li=function(){function e(t,n,r){var i=this;w(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;Tt(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return k(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(n){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(n){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),fi=si("rcb"),hi=new Rt(3e4,6e4),di=function(){function e(){w(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gr().grecaptcha}return k(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Tt(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Gr().grecaptcha):new Promise((function(r,i){var a=Gr().setTimeout((function(){i(xt(e,"network-request-failed"))}),hi.get());Gr()[fi]=function(){Gr().clearTimeout(a),delete Gr()[fi];var o=Gr().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(xt(e,"internal-error"))},oi("https://www.google.com/recaptcha/api.js??".concat(H({onload:fi,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(xt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Gr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),pi=function(){function e(){w(this,e)}return k(e,[{key:"load",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ci(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearedOneInstance",value:function(){}}]),e}(),vi="recaptcha",mi={theme:"light",type:"image"},yi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},mi),r=arguments.length>2?arguments[2]:void 0;w(this,e),this.parameters=n,this.type=vi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(r),this.isInvisible="invisible"===this.parameters.size,Tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;Tt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pi:new di,this.validateStartingState()}return k(e,[{key:"verify",value:function(){var e=d(f().mark((function e(){var t,n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:return t=e.sent,n=this.getAssertedRecaptcha(),e.abrupt("return",n.getResponse(t)||new Promise((function(e){var i=function t(n){n&&(r.tokenChangeListeners.delete(t),e(n))};r.tokenChangeListeners.add(i),r.isInvisible&&n.execute(t)})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(r){return Promise.reject(r)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Tt(!this.parameters.sitekey,this.auth,"argument-error"),Tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"==typeof e)e(n);else if("string"==typeof e){var r=Gr()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Tt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:if(this.widgetId){e.next=6;break}t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters);case 6:return e.abrupt("return",this.widgetId);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tt(Pt()&&!Hr(),this.auth,"internal-error"),e.next=3,function(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.auth);case 8:Tt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAssertedRecaptcha",value:function(){return Tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),gi=function(){function e(t,n){w(this,e),this.verificationId=t,this.onConfirmation=n}return k(e,[{key:"confirm",value:function(e){var t=qn._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function bi(e,t,n){return wi.apply(this,arguments)}function wi(){return wi=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Tt("string"==typeof a,t,"argument-error"),Tt(r.type===vi,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=19;break}if(s=o.session,!("phoneNumber"in o)){e.next=12;break}return Tt("enroll"===s.type,t,"internal-error"),e.next=10,function(e,t){return Vt(e,"POST","/v2/accounts/mfaEnrollment:start",Ft(e,t))}(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 12:return Tt("signin"===s.type,t,"internal-error"),Tt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=17,function(e,t){return Vt(e,"POST","/v2/accounts/mfaSignIn:start",Ft(e,t))}(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 17:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 19:return e.next=21,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:sendVerificationCode",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 21:return h=e.sent,p=h.sessionInfo,e.abrupt("return",p);case 24:return e.prev=24,r._reset(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[3,,24,27]])}))),wi.apply(this,arguments)}var ki=function(){function e(t){w(this,e),this.providerId=e.PROVIDER_ID,this.auth=En(t)}return k(e,[{key:"verifyPhoneNumber",value:function(e,t){return bi(this.auth,e,ee(t))}}],[{key:"credential",value:function(e,t){return qn._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?qn._fromTokenResponse(n,r):null}}]),e}();function xi(e,t){return t?Ct(t):(Tt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ki.PROVIDER_ID="phone",ki.PHONE_SIGN_IN_METHOD="phone";var Ii=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this,"custom","custom")).params=e,r}return k(n,[{key:"_getIdTokenResponse",value:function(e){return Mn(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Mn(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Mn(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Nn);function _i(e){return hr(e.auth,new Ii(e),e.bypassAuthState)}function Ei(e){var t=e.auth,n=e.user;return Tt(n,t,"internal-error"),lr(n,new Ii(e),e.bypassAuthState)}function Ti(e){return Si.apply(this,arguments)}function Si(){return Si=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(Tt(r,n,"internal-error"),or(r,new Ii(t),t.bypassAuthState)));case 2:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}var Ai=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];w(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return k(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=d(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=3;break}return e.abrupt("return",void this.reject(o));case 3:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=4,e.t0=this,e.next=8,this.getIdpTask(s)(u);case 8:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(4),this.reject(e.t2);case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _i;case"linkViaPopup":case"linkViaRedirect":return Ti;case"reauthViaPopup":case"reauthViaRedirect":return Ei;default:kt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ni=new Rt(2e3,1e4),Ci=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o){var s;return w(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(s),s}return k(n,[{key:"executeNotNull",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return t=e.sent,e.abrupt("return",(Tt(t,this.auth,"internal-error"),t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onExecution",value:function(){var e=d(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return At(1===this.filter.length,"Popup operations only handle one event"),t=Qr(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(xt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(xt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this,t=function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(xt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ni.get())};t()}}]),n}(Ai);Ci.currentPopupAction=null;var Di=new Map,Pi=function(e){y(n,e);var t=g(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return w(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return k(n,[{key:"execute",value:function(){var e=d(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Di.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mi(n),i=ji(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,a="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,s(u(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Di.set(this.auth._key(),t);case 21:return e.abrupt("return",(this.bypassAuthState||Di.set(this.auth._key(),(function(){return Promise.resolve(null)})),t()));case 22:case"end":return e.stop()}}),e,this,[[2,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAuthEvent",value:function(){var e=d(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=2;break}return e.abrupt("return",s(u(n.prototype),"onAuthEvent",this).call(this,t));case 2:if("unknown"===t.type){e.next=12;break}if(!t.eventId){e.next=10;break}return e.next=6,this.auth._redirectUserForId(t.eventId);case 6:if(!(r=e.sent)){e.next=9;break}return e.abrupt("return",(this.user=r,s(u(n.prototype),"onAuthEvent",this).call(this,t)));case 9:this.resolve(null);case 10:e.next=13;break;case 12:this.resolve(null);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onExecution",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cleanUp",value:function(){}}]),n}(Ai);function Oi(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ji(t)._set(Mi(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Li(e,t){Di.set(e._key(),t)}function ji(e){return Ct(e._redirectPersistence)}function Mi(e){return ln("pendingRedirect",e.config.apiKey,e.name)}function Ui(e,t){return Fi.apply(this,arguments)}function Fi(){return Fi=d(f().mark((function e(t,n){var r,i,a,o,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=En(t),a=xi(i,n),o=new Pi(i,a,r),e.next=6,o.execute();case 6:if(s=e.sent,e.t0=s&&!r,!e.t0){e.next=14;break}return delete s.user._redirectEventId,e.next=12,i._persistUserIfCurrent(s.user);case 12:return e.next=14,i._setRedirectUser(null,n);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Vi(e){return qi.apply(this,arguments)}function qi(){return qi=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qr("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}var Bi=function(){function e(t){w(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return k(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Wi(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(xt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(zi(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function zi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Wi(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Qi(e){return Ki.apply(this,arguments)}function Ki(){return Ki=d(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Vt(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}var Gi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hi=/^https?/;function Yi(e){var t=Dt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Hi.test(r))return!1;if(Gi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ji=new Rt(3e4,6e4);function Xi(){var e=Gr().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Zi=null;function $i(e){return Zi=Zi||function(e){return new Promise((function(t,n){var r,i,a;function o(){Xi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Xi(),n(xt(e,"network-request-failed"))},timeout:Ji.get()})}if(null===(i=null===(r=Gr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Gr().gapi)||void 0===a?void 0:a.load)){var s=si("iframefcb");return Gr()[s]=function(){gapi.load?o():n(xt(e,"network-request-failed"))},oi("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Zi=null,e}))}(e),Zi}var ea=new Rt(5e3,15e3),ta={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},na=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ra(e){var t=e.config;Tt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Lt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:We},i=na.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(H(r).slice(1))}var ia={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aa=function(){function e(t){w(this,e),this.window=t,this.associatedEvent=null}return k(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(r){}}}]),e}();function oa(e,t,n,r,i,a){Tt(e.config.authDomain,e,"auth-domain-config-required"),Tt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:We,eventId:i};if(t instanceof Wn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=v(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Qn){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,m=Object.keys(d);p<m.length;p++){var y=m[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;return t.emulator?Lt(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat(H(d).slice(1))}var sa="webStorageSupport",ua=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this,"phone")).credential=e,r}return k(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Vt(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Vt(e,"POST","/v2/accounts/mfaSignIn:finalize",Ft(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){w(this,e),this.factorId=t}return k(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return St("unexpected MultiFactorSessionType")}}}]),e}()),ca=function(){function e(){w(this,e)}return k(e,null,[{key:"assertion",value:function(e){return ua._fromCredential(e)}}]),e}();ca.FACTOR_ID="phone";var la,fa="@firebase/auth",ha="0.20.2",da=function(){function e(t){w(this,e),this.auth=t,this.internalListeners=new Map}return k(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(!this.auth.currentUser){e.next=10;break}return e.next=6,this.auth.currentUser.getIdToken(t);case 6:e.t1=e.sent,e.t0={accessToken:e.t1},e.next=11;break;case 10:e.t0=null;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function pa(){return window}la="Browser",Ue(new ne("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Tt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Tt(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:la,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xn(la)},i=new _n(e,t,r);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ct);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ue(new ne("auth-internal",(function(e){return function(e){return new da(e)}(En(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Je(fa,ha,void 0),Je(fa,ha,"esm2017");var va=function(e){y(n,e);var t=g(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return k(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),s(u(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Bi);function ma(e){return ya.apply(this,arguments)}function ya(){return ya=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba()._get(wa(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,ba()._remove(wa(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ga(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ba(){return Ct(qr)}function wa(e){return ln("authEvent",e.config.apiKey,e.name)}function ka(e){if(!(null==e?void 0:e.includes("?")))return{};var t=e.split("?"),n=o(t);return n[0],Y(n.slice(1).join("?"))}function xa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xt("no-auth-event")}}function Ia(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function _a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return!("file:"!==Ia()&&"ionic:"!==Ia()&&"capacitor:"!==Ia()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ea(){try{var e=self.localStorage,t=Qr();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return V()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/Edge\/\d+/.test(e)}(e)}()||q()}catch(e){return Ta()&&q()}return!1}function Ta(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Sa(){return("http:"===Ia()||"https:"===Ia()||U()||_a())&&!(F()||M())&&Ea()&&!Ta()}function Aa(){return _a()&&"undefined"!=typeof document}var Na={LOCAL:"local",NONE:"none",SESSION:"session"},Ca=Tt,Da="persistence";function Pa(e){return Oa.apply(this,arguments)}function Oa(){return Oa=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ra(),r=ln(Da,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Ra(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}var La=Tt,ja=function(){function e(){w(this,e),this.browserResolver=Ct(function(){function e(){w(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zr,this._completeRedirectFn=Ui,this._overrideRedirectResult=Li}return k(e,[{key:"_openPopup",value:function(){var e=d(f().mark((function e(t,n,r,i){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(At(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},ia),{width:r.toString(),height:i.toString(),top:a,left:o}),c=L().toLowerCase();n&&(s=vn(c)?"_blank":n),dn(c)&&(t=t||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=v(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return wn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new aa(null);var f=window.open(t||"",s,l);Tt(f,e,"popup-blocked");try{f.focus()}catch(e){}return new aa(f)}(t,oa(t,n,r,Dt(),i),Qr())));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=oa(t,n,r,Dt(),i),Gr().location.href=a,e.abrupt("return",new Promise((function(){})));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(At(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(t);case 2:return n=e.sent,r=Gr().gapi,e.abrupt("return",(Tt(r,t,"internal-error"),n.open({where:document.body,url:ra(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ta,dontclear:!0},(function(e){return new Promise(function(){var n=d(f().mark((function n(r,i){var a,o,s;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Gr().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=xt(t,"network-request-failed"),o=Gr().setTimeout((function(){i(a)}),ea.get()),e.ping(s).then(s,(function(){i(a)}));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:return n=e.sent,r=new Bi(t),e.abrupt("return",(n.register("authEvent",(function(e){return Tt(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(sa,{type:sa},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),kt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(){var e=d(f().mark((function e(t){var n,r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qi(t);case 4:n=e.sent,r=n.authorizedDomains,i=p(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Yi(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:kt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})));return function(t){return e.apply(this,arguments)}}()(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return kn()||pn()||wn()}}]),e}()),this.cordovaResolver=Ct(function(){function e(){w(this,e),this._redirectPersistence=zr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ui,this._overrideRedirectResult=Li}return k(e,[{key:"_initialize",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),r=this.eventManagers.get(n),e.abrupt("return",(r||(r=new va(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_openPopup",value:function(e){kt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return function(e){var t,n,r,i,a,o,s,u,c,l,f=pa();Tt("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Tt(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Tt("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Tt("function"==typeof(null===(u=null===(s=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Tt("function"==typeof(null===(l=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Di.clear(),e.next=10,this._originValidation(t);case 10:return o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ga(),postBody:null,tenantId:e.tenantId,error:xt(e,"no-auth-event")}}(t,r,i),e.next=13,function(e,t){return ba()._set(wa(e),t)}(t,o);case 13:return e.next=15,function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pa(),o=a.BuildInfo,At(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(At(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(n.sessionId);case 4:return s=e.sent,u={},e.abrupt("return",(wn()?u.ibi=o.packageName:yn()?u.apn=o.packageName:kt(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,oa(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(t,o,n);case 15:return s=e.sent,e.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pa(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(xt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),yn()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),e.t1=t,e.t2=a,e.next=21,function(e){var t=pa().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(s);case 21:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 23:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(){var e=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pa(),r=n.BuildInfo,i={},wn()?i.iosBundleId=r.packageName:yn()?i.androidPackageName=r.packageName:kt(t,"operation-not-supported-in-this-environment"),e.next=4,Qi(t,i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=pa(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ma(e);case 2:t.onEvent(xa());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=d(f().mark((function n(r){var i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ma(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=ka(e),n=t.link?decodeURIComponent(t.link):void 0,r=ka(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ka(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ka(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?xt(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||xa());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();void 0!==r&&"function"==typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");pa().handleOpenURL=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"==typeof u)try{u(t)}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=zr,this._completeRedirectFn=Ui,this._overrideRedirectResult=Li}return k(e,[{key:"_initialize",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_openPopup",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Aa()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return La(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Aa()&&new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})))();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function Ma(e){return e.unwrap()}function Ua(e){var t=(e instanceof B?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof B)&&"temporaryProof"in t&&"phoneNumber"in t)return ki.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=Hn;break;case"facebook.com":n=Gn;break;case"github.com":n=Yn;break;case"twitter.com":n=Zn;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Jn._create(r,s):Fn._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Kn(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof B?n.credentialFromError(e):n.credentialFromResult(e)}function Fa(e,t){return t.catch((function(t){throw t instanceof B&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ba(e,function(e,t){var n,r=ee(e),i=t;return Tt(t.customData.operationType,r,"argument-error"),Tt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Lr._fromError(r,i)}(e,t));else if(r){var i=Ua(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ua(t)),additionalUserInfo:Or(e),user:za.getOrCreate(r)}}))}function Va(e,t){return qa.apply(this,arguments)}function qa(){return qa=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Fa(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}var Ba=function(){function e(t,n){w(this,e),this.resolver=n,this.auth=t.wrapped()}return k(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Fa(Ma(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),za=function(){function e(t){w(this,e),this._delegate=t,this.multiFactor=function(e){var t=ee(e);return Mr.has(t)||Mr.set(t,jr._fromUser(t)),Mr.get(t)}(t)}return k(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fa(this.auth,mr(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"linkWithPhoneNumber",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,ur(!1,i,"phone");case 3:return e.next=5,bi(i.auth,n,ee(r));case 5:return a=e.sent,e.abrupt("return",new gi(a,(function(e){return mr(i,e)})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"linkWithPopup",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fa(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Wn),a=xi(i.auth,r),e.abrupt("return",new Ci(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,ja)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"linkWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa(En(this.auth));case 2:return e.abrupt("return",function(e,t,n){return function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Wn),a=xi(i.auth,r),e.next=5,ur(!1,i,n.providerId);case 5:return e.next=7,Oi(a,i.auth);case 7:return e.next=9,Vi(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)}(this._delegate,t,ja));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fa(this.auth,gr(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Va(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,bi(i.auth,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new gi(a,(function(e){return gr(i,e)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Fa(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Wn),a=xi(i.auth,r),e.abrupt("return",new Ci(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,ja))}},{key:"reauthenticateWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa(En(this.auth));case 2:return e.abrupt("return",function(e,t,n){return function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Wn),a=xi(i.auth,r),e.next=5,Oi(a,i.auth);case 5:return e.next=7,Vi(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)}(this._delegate,t,ja));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendEmailVerification",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&xr(r.auth,i,n),e.next=8,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"unlink",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,ur(!0,r,n);case 3:return e.t0=function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ar(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateEmail",value:function(e){return function(e,t){return Er(ee(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Er(ee(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(ee(t),n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ee(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,Zt(a,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(a.auth,o));case 13:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(u=a.providerData.find((function(e){return"password"===e.providerId})))&&(u.displayName=a.displayName,u.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(s);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&xr(i.auth,a,r),e.next=9,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i.auth,a);case 9:if(o=e.sent,s=o.email,e.t2=s!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();za.USER_MAP=new WeakMap;var Wa=Tt,Qa=function(){function e(t,n){if(w(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Wa(r,"invalid-api-key",{appName:t.name}),Wa(r,"invalid-api-key",{appName:t.name});var i="undefined"!=typeof window?ja:void 0;this._delegate=n.initialize({options:{persistence:Ga(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(mt),this.linkUnderlyingAuth()}return k(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?za.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){!function(e,t,n){var r=En(e);Tt(r._canInitEmulator,r,"emulator-config-failed"),Tt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null==n?void 0:n.disableWarnings),a=Sn(t),o=function(e){var t=Sn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:An(r.substr(a.length+1))}}var o=r.split(":"),s=v(o,2);return{host:s[0],port:An(s[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:update",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(ee(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ir(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(ee(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fa(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),e.next=3,$n(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,tr._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:Pt()?Dt():"http://localhost"},e.next=3,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt(t,"POST","/v1/accounts:createAuthUri",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(ee(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Bn.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wa(Sa(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(t)._initializationPromise;case 2:return e.abrupt("return",Ui(t,n,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,ja);case 3:return t=e.sent,e.abrupt("return",t?Fa(this._delegate,Promise.resolve(t)):{credential:null,user:null});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){En(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ka(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ka(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"EMAIL_SIGNIN",email:n},Tt(r.handleCodeInApp,i,"argument-error"),r&&xr(i,a,r),e.next=5,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"PASSWORD_RESET",email:n},r&&xr(i,a,r),e.next=4,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i,a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(function(e,t){Ca(Object.values(Na).includes(t),e,"invalid-persistence-type"),F()?Ca(t!==Na.SESSION,e,"unsupported-persistence-type"):M()?Ca(t===Na.NONE,e,"unsupported-persistence-type"):Ta()?Ca(t===Na.NONE||t===Na.LOCAL&&q(),e,"unsupported-persistence-type"):Ca(t===Na.NONE||Ea(),e,"unsupported-persistence-type")}(this._delegate,t),t),e.next=e.t0===Na.SESSION?3:e.t0===Na.LOCAL?5:e.t0===Na.NONE?14:16;break;case 3:return n=zr,e.abrupt("break",17);case 5:return e.next=7,Ct(ai)._isAvailable();case 7:if(!e.sent){e.next=11;break}e.t1=ai,e.next=12;break;case 11:e.t1=qr;case 12:return n=e.t1,e.abrupt("break",17);case 14:return n=cn,e.abrupt("break",17);case 16:return e.abrupt("return",kt("argument-error",{appName:this._delegate.name}));case 17:return e.abrupt("return",this._delegate.setPersistence(n));case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Fa(this._delegate,function(){var e=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=En(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new tr({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,$n(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,tr._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this._delegate))}},{key:"signInWithCredential",value:function(e){return Fa(this._delegate,pr(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Fa(this._delegate,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=En(t),e.next=3,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:signInWithCustomToken",Ft(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,tr._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Fa(this._delegate,function(e,t,n){return pr(ee(e),zn.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Fa(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a=zn.credentialWithLink(n,r||Dt()),e.abrupt("return",(Tt(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),pr(i,a)));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Va(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),e.next=3,bi(i,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new gi(a,(function(e){return pr(i,e)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Wa(Sa(),this._delegate,"operation-not-supported-in-this-environment"),Fa(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),_t(t,n,Wn),a=xi(i,r),e.abrupt("return",new Ci(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,ja))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signInWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wa(Sa(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Pa(this._delegate);case 3:return e.abrupt("return",function(e,t,n){return function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),_t(t,n,Wn),a=xi(i,r),e.next=5,Oi(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)}(this._delegate,t,ja));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(ee(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ka(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&za.getOrCreate(e))},error:t,complete:n}}function Ga(e,t){var n=function(e,t){var n=Ra();if(!n)return[];var r=ln(Da,e,t);switch(n.getItem(r)){case Na.NONE:return[cn];case Na.LOCAL:return[ai,zr];case Na.SESSION:return[zr];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(ai)||n.push(ai),"undefined"!=typeof window)for(var r=0,i=[qr,zr];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(cn)||n.push(cn),n}Qa.Persistence=Na;var Ha=function(){function e(){w(this,e),this.providerId="phone",this._delegate=new ki(Ma(pt.auth()))}return k(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return ki.credential(e,t)}}]),e}();Ha.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,Ha.PROVIDER_ID=ki.PROVIDER_ID;var Ya,Ja=Tt;(Ya=pt).INTERNAL.registerComponent(new ne("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Qa(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zn,FacebookAuthProvider:Gn,GithubAuthProvider:Yn,GoogleAuthProvider:Hn,OAuthProvider:Kn,SAMLAuthProvider:Xn,PhoneAuthProvider:Ha,PhoneMultiFactorGenerator:ca,RecaptchaVerifier:function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pt.app();w(this,e),Ja(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new yi(t,n,i.auth()),this.type=this._delegate.type}return k(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),TwitterAuthProvider:Zn,Auth:Qa,AuthCredential:Nn,Error:B}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ya.registerVersion("@firebase/auth-compat","0.2.15");var Xa,Za="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},$a={},eo=eo||{},to=Za||self;function no(){}function ro(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function io(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ao="closure_uid_"+(1e9*Math.random()>>>0),oo=0;function so(e,t,n){return e.call.apply(e.bind,arguments)}function uo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function co(e,t,n){return(co=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?so:uo).apply(null,arguments)}function lo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fo(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ho(){this.s=this.s,this.o=this.o}var po={};ho.prototype.s=!1,ho.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ao)&&e[ao]||(e[ao]=++oo)}(this);delete po[e]}},ho.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},mo=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function yo(e){return Array.prototype.concat.apply([],arguments)}function go(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function bo(e){return/^[\s\xa0]*$/.test(e)}var wo,ko=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function xo(e,t){return-1!=e.indexOf(t)}function Io(e,t){return e<t?-1:e>t?1:0}e:{var _o=to.navigator;if(_o){var Eo=_o.userAgent;if(Eo){wo=Eo;break e}}wo=""}function To(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function So(e){var t={};for(var n in e)t[n]=e[n];return t}var Ao="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function No(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ao.length;a++)n=Ao[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Co(e){return Co[" "](e),e}Co[" "]=no;var Do,Po,Oo=xo(wo,"Opera"),Ro=xo(wo,"Trident")||xo(wo,"MSIE"),Lo=xo(wo,"Edge"),jo=Lo||Ro,Mo=xo(wo,"Gecko")&&!(xo(wo.toLowerCase(),"webkit")&&!xo(wo,"Edge"))&&!(xo(wo,"Trident")||xo(wo,"MSIE"))&&!xo(wo,"Edge"),Uo=xo(wo.toLowerCase(),"webkit")&&!xo(wo,"Edge");function Fo(){var e=to.document;return e?e.documentMode:void 0}e:{var Vo="",qo=(Po=wo,Mo?/rv:([^\);]+)(\)|;)/.exec(Po):Lo?/Edge\/([\d\.]+)/.exec(Po):Ro?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Po):Uo?/WebKit\/(\S+)/.exec(Po):Oo?/(?:Version)[ \/]?(\S+)/.exec(Po):void 0);if(qo&&(Vo=qo?qo[1]:""),Ro){var Bo=Fo();if(null!=Bo&&Bo>parseFloat(Vo)){Do=String(Bo);break e}}Do=Vo}var zo={};function Wo(){return e=zo,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=ko(String(Do)).split("."),n=ko("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Io(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Io(0==a[2].length,0==o[2].length)||Io(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}var Qo=to.document&&Ro&&(Fo()||parseInt(Do,10))||void 0,Ko=function(){if(!to.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{to.addEventListener("test",no,t),to.removeEventListener("test",no,t)}catch(e){}return e}();function Go(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ho(e,t){if(Go.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mo){e:{try{Co(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Yo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ho.Z.h.call(this)}}Go.prototype.h=function(){this.defaultPrevented=!0},fo(Ho,Go);var Yo={2:"touch",3:"pen",4:"mouse"};Ho.prototype.h=function(){Ho.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jo="closure_listenable_"+(1e6*Math.random()|0),Xo=0;function Zo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Xo,this.ca=this.fa=!1}function $o(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function es(e){this.src=e,this.g={},this.h=0}function ts(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vo(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($o(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ns(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}es.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ns(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Zo(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var rs="closure_lm_"+(1e6*Math.random()|0),is={};function as(e,t,n,r,i){if(r&&r.once)return ss(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)as(e,t[a],n,r,i);return null}return n=ps(n),e&&e[Jo]?e.N(t,n,io(r)?!!r.capture:!!r,i):os(e,t,n,!1,r,i)}function os(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=io(i)?!!i.capture:!!i,s=hs(e);if(s||(e[rs]=s=new es(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=fs;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ko||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ls(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ss(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ss(e,t[a],n,r,i);return null}return n=ps(n),e&&e[Jo]?e.O(t,n,io(r)?!!r.capture:!!r,i):os(e,t,n,!0,r,i)}function us(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)us(e,t[a],n,r,i);else r=io(r)?!!r.capture:!!r,n=ps(n),e&&e[Jo]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ns(a=e.g[t],n,r,i))&&($o(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=hs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ns(t,n,r,i)),(n=-1<e?t[e]:null)&&cs(n))}function cs(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Jo])ts(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ls(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hs(t))?(ts(n,e),0==n.h&&(n.src=null,t[rs]=null)):$o(e)}}}function ls(e){return e in is?is[e]:is[e]="on"+e}function fs(e,t){if(e.ca)e=!0;else{t=new Ho(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&cs(e),e=n.call(r,t)}return e}function hs(e){return(e=e[rs])instanceof es?e:null}var ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function ps(e){return"function"==typeof e?e:(e[ds]||(e[ds]=function(t){return e.handleEvent(t)}),e[ds])}function vs(){ho.call(this),this.i=new es(this),this.P=this,this.I=null}function ms(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Go(t,e);else if(t instanceof Go)t.target=t.target||e;else{var i=t;No(t=new Go(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ys(o,r,!0,t)&&i}if(i=ys(o=t.g=e,r,!0,t)&&i,i=ys(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ys(o=t.g=n[a],r,!1,t)&&i}function ys(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&ts(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}fo(vs,ho),vs.prototype[Jo]=!0,vs.prototype.removeEventListener=function(e,t,n,r){us(this,e,t,n,r)},vs.prototype.M=function(){if(vs.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$o(n[r]);delete t.g[e],t.h--}}this.I=null},vs.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},vs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var gs=to.JSON.stringify;function bs(){var e=Ts,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ws,ks=new(function(){function e(t,n){w(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return k(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new xs}),(function(e){return e.reset()})),xs=function(){function e(){w(this,e),this.next=this.g=this.h=null}return k(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Is(e){to.setTimeout((function(){throw e}),0)}function _s(e,t){ws||function(){var e=to.Promise.resolve(void 0);ws=function(){e.then(Ss)}}(),Es||(ws(),Es=!0),Ts.add(e,t)}var Es=!1,Ts=new(function(){function e(){w(this,e),this.h=this.g=null}return k(e,[{key:"add",value:function(e,t){var n=ks.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function Ss(){for(var e;e=bs();){try{e.h.call(e.g)}catch(e){Is(e)}var t=ks;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Es=!1}function As(e,t){vs.call(this),this.h=e||1,this.g=t||to,this.j=co(this.kb,this),this.l=Date.now()}function Ns(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Cs(e,t,n){if("function"==typeof e)n&&(e=co(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=co(e.handleEvent,e)}return 2147483647<Number(t)?-1:to.setTimeout(e,t||0)}function Ds(e){e.g=Cs((function(){e.g=null,e.i&&(e.i=!1,Ds(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}fo(As,vs),(Xa=As.prototype).da=!1,Xa.S=null,Xa.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ms(this,"tick"),this.da&&(Ns(this),this.start()))}},Xa.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xa.M=function(){As.Z.M.call(this),Ns(this),delete this.g};var Ps=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return k(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ds(this)}},{key:"M",value:function(){s(u(n.prototype),"M",this).call(this),this.g&&(to.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ho);function Os(e){ho.call(this),this.h=e,this.g={}}fo(Os,ho);var Rs=[];function Ls(e,t,n,r){Array.isArray(n)||(n&&(Rs[0]=n.toString()),n=Rs);for(var i=0;i<n.length;i++){var a=as(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function js(e){To(e.g,(function(e,t){this.g.hasOwnProperty(t)&&cs(e)}),e),e.g={}}function Ms(){this.g=!0}function Us(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return gs(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Os.prototype.M=function(){Os.Z.M.call(this),js(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ms.prototype.Aa=function(){this.g=!1},Ms.prototype.info=function(){};var Fs={},Vs=null;function qs(){return Vs=Vs||new vs}function Bs(e){Go.call(this,Fs.Ma,e)}function zs(e){var t=qs();ms(t,new Bs(t,e))}function Ws(e,t){Go.call(this,Fs.STAT_EVENT,e),this.stat=t}function Qs(e){var t=qs();ms(t,new Ws(t,e))}function Ks(e,t){Go.call(this,Fs.Na,e),this.size=t}function Gs(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return to.setTimeout((function(){e()}),t)}Fs.Ma="serverreachability",fo(Bs,Go),Fs.STAT_EVENT="statevent",fo(Ws,Go),Fs.Na="timingevent",fo(Ks,Go);var Hs={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ys={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Js(){}function Xs(e){return e.h||(e.h=e.i())}function Zs(){}Js.prototype.h=null;var $s,eu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tu(){Go.call(this,"d")}function nu(){Go.call(this,"c")}function ru(){}function iu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Os(this),this.P=ou,e=jo?125:void 0,this.W=new As(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}fo(tu,Go),fo(nu,Go),fo(ru,Js),ru.prototype.g=function(){return new XMLHttpRequest},ru.prototype.i=function(){return{}},$s=new ru;var ou=45e3,su={},uu={};function cu(e,t,n){e.K=1,e.v=Pu(Tu(t)),e.s=n,e.U=!0,lu(e,null)}function lu(e,t){e.F=Date.now(),pu(e),e.A=Tu(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qu(n.h,"t",r),e.C=0,n=e.l.H,e.h=new au,e.g=Qc(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ps(co(e.Ia,e,e.g),e.O)),Ls(e.V,e.g,"readystatechange",e.gb),t=e.H?So(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zs(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function fu(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function hu(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=du(e,n))==uu){4==t&&(e.o=4,Qs(14),i=!1),Us(e.j,e.m,null,"[Incomplete Response]");break}if(r==su){e.o=4,Qs(15),Us(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Us(e.j,e.m,r,null),bu(e,r)}fu(e)&&r!=uu&&r!=su&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mc(t),t.L=!0,Qs(11))):(Us(e.j,e.m,n,"[Invalid Chunked Response]"),gu(e),yu(e))}function du(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uu:(n=Number(t.substring(n,r)),isNaN(n)?su:(r+=1)+n>t.length?uu:(t=t.substr(r,n),e.C=r+n,t))}function pu(e){e.Y=Date.now()+e.P,vu(e,e.P)}function vu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Gs(co(e.eb,e),t)}function mu(e){e.B&&(to.clearTimeout(e.B),e.B=null)}function yu(e){0==e.l.G||e.I||Vc(e.l,e)}function gu(e){mu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ns(e.W),js(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function bu(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Xu(n.i,e)))if(n.I=e.N,!e.J&&Xu(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Fc(n),Ac(n)}jc(n),Qs(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Gs(co(n.ab,n),6e3));if(1>=Ju(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else Bc(n,11)}else if((e.J||n.g==e)&&Fc(n),!bo(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(xo(l,"spdy")||xo(l,"quic")||xo(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Zu(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Du(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Wc(r,r.H?r.la:null,r.W),d.J){$u(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(mu(p),pu(p)),r.g=d}else Lc(r);0<n.l.length&&Dc(n)}else"stop"!=a[0]&&"close"!=a[0]||Bc(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Bc(n,7):Sc(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}zs(4)}catch(e){}}function wu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ro(e)||"string"==typeof e)mo(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ro(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(ro(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ku(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ku)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xu(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Iu(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Iu(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Iu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Xa=iu.prototype).setTimeout=function(e){this.P=e},Xa.gb=function(e){e=e.target;var t=this.L;t&&3==xc(e)?t.l():this.Ia(e)},Xa.Ia=function(e){try{if(e==this.g)e:{var t=xc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||jo||this.g&&(this.h.h||this.g.ga()||Ic(this.g)))){this.I||4!=t||7==n||zs(8==n||0>=r?3:2),mu(this);var i=this.g.ba();this.N=i;t:if(fu(this)){var a=Ic(this.g);e="";var o=a.length,s=4==xc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){gu(this),yu(this);var u="";break t}this.h.i=new to.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bo(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Qs(12),gu(this),yu(this);break e}Us(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bu(this,i)}this.U?(hu(this,t,u),jo&&this.i&&3==t&&(Ls(this.V,this.W,"tick",this.fb),this.W.start())):(Us(this.j,this.m,u,null),bu(this,u)),4==t&&gu(this),this.i&&!this.I&&(4==t?Vc(this.l,this):(this.i=!1,pu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Qs(12)):(this.o=0,Qs(13)),gu(this),yu(this)}}}catch(e){}},Xa.fb=function(){if(this.g){var e=xc(this.g),t=this.g.ga();this.C<t.length&&(mu(this),hu(this,e,t),this.i&&4!=e&&pu(this))}},Xa.cancel=function(){this.I=!0,gu(this)},Xa.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zs(3),Qs(17)),gu(this),this.o=2,yu(this)):vu(this,this.Y-e)},(Xa=ku.prototype).R=function(){xu(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Xa.T=function(){return xu(this),this.g.concat()},Xa.get=function(e,t){return Iu(this.h,e)?this.h[e]:t},Xa.set=function(e,t){Iu(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Xa.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var _u=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Eu(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Eu){this.g=void 0!==t?t:e.g,Su(this,e.j),this.s=e.s,Au(this,e.i),Nu(this,e.m),this.l=e.l,t=e.h;var n=new qu;n.i=t.i,t.g&&(n.g=new ku(t.g),n.h=t.h),Cu(this,n),this.o=e.o}else e&&(n=String(e).match(_u))?(this.g=!!t,Su(this,n[1]||"",!0),this.s=Ou(n[2]||""),Au(this,n[3]||"",!0),Nu(this,n[4]),this.l=Ou(n[5]||"",!0),Cu(this,n[6]||"",!0),this.o=Ou(n[7]||"")):(this.g=!!t,this.h=new qu(null,this.g))}function Tu(e){return new Eu(e)}function Su(e,t,n){e.j=n?Ou(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Au(e,t,n){e.i=n?Ou(t,!0):t}function Nu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cu(e,t,n){t instanceof qu?(e.h=t,function(e,t){t&&!e.j&&(Bu(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zu(this,t),Qu(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ru(t,Fu)),e.h=new qu(t,e.g))}function Du(e,t,n){e.h.set(t,n)}function Pu(e){return Du(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ou(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ru(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Lu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Lu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Eu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ru(t,ju,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ru(t,ju,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ru(n,"/"==n.charAt(0)?Uu:Mu,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ru(n,Vu)),e.join("")};var ju=/[#\/\?@]/g,Mu=/[#\?:]/g,Uu=/[#\?]/g,Fu=/[#\?@]/g,Vu=/#/g;function qu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bu(e){e.g||(e.g=new ku,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zu(e,t){Bu(e),t=Ku(e,t),Iu(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Iu((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&xu(e)))}function Wu(e,t){return Bu(e),t=Ku(e,t),Iu(e.g.h,t)}function Qu(e,t,n){zu(e,t),0<n.length&&(e.i=null,e.g.set(Ku(e,t),go(n)),e.h+=n.length)}function Ku(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Gu(e){this.l=e||Hu,e=to.PerformanceNavigationTiming?0<(e=to.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(to.g&&to.g.Ea&&to.g.Ea()&&to.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xa=qu.prototype).add=function(e,t){Bu(this),this.i=null,e=Ku(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xa.forEach=function(e,t){Bu(this),this.g.forEach((function(n,r){mo(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Xa.T=function(){Bu(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xa.R=function(e){Bu(this);var t=[];if("string"==typeof e)Wu(this,e)&&(t=yo(t,this.g.get(Ku(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=yo(t,e[n])}return t},Xa.set=function(e,t){return Bu(this),this.i=null,Wu(this,e=Ku(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xa.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Xa.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Hu=10;function Yu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ju(e){return e.h?1:e.g?e.g.size:0}function Xu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zu(e,t){e.g?e.g.add(t):e.h=t}function $u(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ec(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=p(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return go(e.i)}function tc(){}function nc(){this.g=new tc}function rc(e,t,n){var r=n||"";try{wu(e,(function(e,n){var i=e;io(e)&&(i=gs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function ic(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function ac(e){this.l=e.$b||null,this.j=e.ib||!1}function oc(e,t){vs.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=sc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gu.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=p(this.g.values());try{for(t.s();!(e=t.n()).done;)e.value.cancel()}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},tc.prototype.stringify=function(e){return to.JSON.stringify(e,void 0)},tc.prototype.parse=function(e){return to.JSON.parse(e,void 0)},fo(ac,Js),ac.prototype.g=function(){return new oc(this.l,this.j)},ac.prototype.i=function(e){return function(){return e}}({}),fo(oc,vs);var sc=0;function uc(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function cc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,lc(e)}function lc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xa=oc.prototype).open=function(e,t){if(this.readyState!=sc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,lc(this)},Xa.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||to).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Xa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cc(this)),this.readyState=sc},Xa.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,lc(this)),this.g&&(this.readyState=3,lc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==to.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uc(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Xa.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?cc(this):lc(this),3==this.readyState&&uc(this)}},Xa.Ua=function(e){this.g&&(this.response=this.responseText=e,cc(this))},Xa.Ta=function(e){this.g&&(this.response=e,cc(this))},Xa.ha=function(){this.g&&cc(this)},Xa.setRequestHeader=function(e,t){this.v.append(e,t)},Xa.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xa.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(oc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fc=to.JSON.parse;function hc(e){vs.call(this),this.headers=new ku,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dc,this.K=this.L=!1}fo(hc,vs);var dc="",pc=/^https?$/i,vc=["POST","PUT"];function mc(e){return"content-type"==e.toLowerCase()}function yc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gc(e),wc(e)}function gc(e){e.D||(e.D=!0,ms(e,"complete"),ms(e,"error"))}function bc(e){if(e.h&&void 0!==eo&&(!e.C[1]||4!=xc(e)||2!=e.ba()))if(e.v&&4==xc(e))Cs(e.Fa,0,e);else if(ms(e,"readystatechange"),4==xc(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(_u)[1]||null;if(!a&&to.self&&to.self.location){var o=to.self.location.protocol;a=o.substr(0,o.length-1)}i=!pc.test(a?a.toLowerCase():"")}t=i}if(t)ms(e,"complete"),ms(e,"success");else{e.m=6;try{var s=2<xc(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",gc(e)}}finally{wc(e)}}}function wc(e,t){if(e.g){kc(e);var n=e.g,r=e.C[0]?no:null;e.g=null,e.C=null,t||ms(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function kc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(to.clearTimeout(e.A),e.A=null)}function xc(e){return e.g?e.g.readyState:0}function Ic(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case dc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _c(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return To(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Du(e,t,n))}function Ec(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Tc(e){this.za=0,this.l=[],this.h=new Ms,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ec("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ec("baseRetryDelayMs",5e3,e),this.$a=Ec("retryDelaySeedMs",1e4,e),this.Ya=Ec("forwardChannelMaxRetries",2,e),this.ra=Ec("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Gu(e&&e.concurrentRequestLimit),this.Ca=new nc,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Sc(e){if(Nc(e),3==e.G){var t=e.V++,n=Tu(e.F);Du(n,"SID",e.J),Du(n,"RID",t),Du(n,"TYPE","terminate"),Oc(e,n),(t=new iu(e,e.h,t,void 0)).K=2,t.v=Pu(Tu(n)),n=!1,to.navigator&&to.navigator.sendBeacon&&(n=to.navigator.sendBeacon(t.v.toString(),"")),!n&&to.Image&&((new Image).src=t.v,n=!0),n||(t.g=Qc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),pu(t)}zc(e)}function Ac(e){e.g&&(Mc(e),e.g.cancel(),e.g=null)}function Nc(e){Ac(e),e.u&&(to.clearTimeout(e.u),e.u=null),Fc(e),e.i.cancel(),e.m&&("number"==typeof e.m&&to.clearTimeout(e.m),e.m=null)}function Cc(e,t){e.l.push(new(function(){function e(t,n){w(this,e),this.h=t,this.g=n}return k(e)}())(e.Za++,t)),3==e.G&&Dc(e)}function Dc(e){Yu(e.i)||e.m||(e.m=!0,_s(e.Ha,e),e.C=0)}function Pc(e,t){var n;n=t?t.m:e.V++;var r=Tu(e.F);Du(r,"SID",e.J),Du(r,"RID",n),Du(r,"AID",e.U),Oc(e,r),e.o&&e.s&&_c(r,e.o,e.s),n=new iu(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Rc(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Zu(e.i,n),cu(n,r,t)}function Oc(e,t){e.j&&wu({},(function(e,n){Du(t,n,e)}))}function Rc(e,t,n){n=Math.min(e.l.length,n);var r=e.j?co(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{rc(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Lc(e){e.g||e.u||(e.Y=1,_s(e.Ga,e),e.A=0)}function jc(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Gs(co(e.Ga,e),qc(e,e.A)),e.A++,0))}function Mc(e){null!=e.B&&(to.clearTimeout(e.B),e.B=null)}function Uc(e){e.g=new iu(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Tu(e.oa);Du(t,"RID","rpc"),Du(t,"SID",e.J),Du(t,"CI",e.N?"0":"1"),Du(t,"AID",e.U),Oc(e,t),Du(t,"TYPE","xmlhttp"),e.o&&e.s&&_c(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Pu(Tu(t)),n.s=null,n.U=!0,lu(n,e)}function Fc(e){null!=e.v&&(to.clearTimeout(e.v),e.v=null)}function Vc(e,t){var n=null;if(e.g==t){Fc(e),Mc(e),e.g=null;var r=2}else{if(!Xu(e.i,t))return;n=t.D,$u(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ms(r=qs(),new Ks(r,n,t,i)),Dc(e)}else Lc(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ju(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Gs(co(e.Ha,e,t),qc(e,e.C)),e.C++,0)))}(e,t)||2==r&&jc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Bc(e,5);break;case 4:Bc(e,10);break;case 3:Bc(e,6);break;default:Bc(e,2)}}function qc(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Bc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=co(e.jb,e);n||(n=new Eu("//www.google.com/images/cleardot.gif"),to.location&&"http"==to.location.protocol||Su(n,"https"),Pu(n)),function(e,t){var n=new Ms;if(to.Image){var r=new Image;r.onload=lo(ic,n,r,"TestLoadImage: loaded",!0,t),r.onerror=lo(ic,n,r,"TestLoadImage: error",!1,t),r.onabort=lo(ic,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=lo(ic,n,r,"TestLoadImage: timeout",!1,t),to.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qs(2);e.G=0,e.j&&e.j.va(t),zc(e),Nc(e)}function zc(e){e.G=0,e.I=-1,e.j&&(0==ec(e.i).length&&0==e.l.length||(e.i.i.length=0,go(e.l),e.l.length=0),e.j.ua())}function Wc(e,t,n){var r=function(e){return e instanceof Eu?Tu(e):new Eu(e,void 0)}(n);if(""!=r.i)t&&Au(r,t+"."+r.i),Nu(r,r.m);else{var i=to.location;r=function(e,t,n,r){var i=new Eu(null,void 0);return e&&Su(i,e),t&&Au(i,t),n&&Nu(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&To(e.aa,(function(e,t){Du(r,t,e)})),t=e.D,n=e.sa,t&&n&&Du(r,t,n),Du(r,"VER",e.ma),Oc(e,r),r}function Qc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new hc(new ac({ib:!0})):new hc(e.qa)).L=e.H,t}function Kc(){}function Gc(){if(Ro&&!(10<=Number(Qo)))throw Error("Environmental error: no available transport.")}function Hc(e,t){vs.call(this),this.g=new Tc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!bo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bo(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Xc(this)}function Yc(e){tu.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jc(){nu.call(this),this.status=1}function Xc(e){this.g=e}(Xa=hc.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$s.g(),this.C=this.u?Xs(this.u):Xs($s),this.g.onreadystatechange=co(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void yc(this,e)}e=n||"";var i=new ku(this.headers);r&&wu(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=mc,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=to.FormData&&e instanceof to.FormData,!(0<=vo(vc,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kc(this),0<this.B&&((this.K=function(e){return Ro&&Wo()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=co(this.pa,this)):this.A=Cs(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){yc(this,e)}},Xa.pa=function(){void 0!==eo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ms(this,"timeout"),this.abort(8))},Xa.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ms(this,"complete"),ms(this,"abort"),wc(this))},Xa.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wc(this,!0)),hc.Z.M.call(this)},Xa.Fa=function(){this.s||(this.F||this.v||this.l?bc(this):this.cb())},Xa.cb=function(){bc(this)},Xa.ba=function(){try{return 2<xc(this)?this.g.status:-1}catch(r){return-1}},Xa.ga=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},Xa.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fc(t)}},Xa.Da=function(){return this.m},Xa.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xa=Tc.prototype).ma=8,Xa.G=1,Xa.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},Xa.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new iu(this,this.h,e,void 0),n=this.s;if(this.P&&(n?No(n=So(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Rc(this,t,r),Du(i=Tu(this.F),"RID",e),Du(i,"CVER",22),this.D&&Du(i,"X-HTTP-Session-Id",this.D),Oc(this,i),this.o&&n&&_c(i,this.o,n),Zu(this.i,t),this.Ra&&Du(i,"TYPE","init"),this.ja?(Du(i,"$req",r),Du(i,"SID","null"),t.$=!0,cu(t,i,null)):cu(t,i,r),this.G=2}}else 3==this.G&&(e?Pc(this,e):0==this.l.length||Yu(this.i)||Pc(this))},Xa.Ga=function(){if(this.u=null,Uc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Gs(co(this.bb,this),e)}},Xa.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qs(10),Ac(this),Uc(this))},Xa.ab=function(){null!=this.v&&(this.v=null,Ac(this),jc(this),Qs(19))},Xa.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qs(2)):(this.h.info("Failed to ping google.com"),Qs(1))},(Xa=Kc.prototype).xa=function(){},Xa.wa=function(){},Xa.va=function(){},Xa.ua=function(){},Xa.Oa=function(){},Gc.prototype.g=function(e,t){return new Hc(e,t)},fo(Hc,vs),Hc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),_s(co(e.hb,e,t))),Qs(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Wc(e,null,e.W),Dc(e)},Hc.prototype.close=function(){Sc(this.g)},Hc.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Cc(this.g,t)}else this.v?((t={}).__data__=gs(e),Cc(this.g,t)):Cc(this.g,e)},Hc.prototype.M=function(){this.g.j=null,delete this.j,Sc(this.g),delete this.g,Hc.Z.M.call(this)},fo(Yc,tu),fo(Jc,nu),fo(Xc,Kc),Xc.prototype.xa=function(){ms(this.g,"a")},Xc.prototype.wa=function(e){ms(this.g,new Yc(e))},Xc.prototype.va=function(e){ms(this.g,new Jc(e))},Xc.prototype.ua=function(){ms(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,Hc.prototype.send=Hc.prototype.u,Hc.prototype.open=Hc.prototype.m,Hc.prototype.close=Hc.prototype.close,Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Ys.COMPLETE="complete",Zs.EventType=eu,eu.OPEN="a",eu.CLOSE="b",eu.ERROR="c",eu.MESSAGE="d",vs.prototype.listen=vs.prototype.N,hc.prototype.listenOnce=hc.prototype.O,hc.prototype.getLastError=hc.prototype.La,hc.prototype.getLastErrorCode=hc.prototype.Da,hc.prototype.getStatus=hc.prototype.ba,hc.prototype.getResponseJson=hc.prototype.Qa,hc.prototype.getResponseText=hc.prototype.ga,hc.prototype.send=hc.prototype.ea;var Zc=$a.createWebChannelTransport=function(){return new Gc},$c=$a.getStatEventTarget=function(){return qs()},el=$a.ErrorCode=Hs,tl=$a.EventType=Ys,nl=$a.Event=Fs,rl=$a.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},il=$a.FetchXmlHttpFactory=ac,al=$a.WebChannel=Zs,ol=$a.XhrIo=hc,sl="@firebase/firestore",ul=function(){function e(t){w(this,e),this.uid=t}return k(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ul.UNAUTHENTICATED=new ul(null),ul.GOOGLE_CREDENTIALS=new ul("google-credentials-uid"),ul.FIRST_PARTY=new ul("first-party-uid"),ul.MOCK_USER=new ul("mock-user");var cl="9.8.0",ll=new de("@firebase/firestore");function fl(){return ll.logLevel}function hl(e){if(ll.logLevel<=te.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.debug.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(h(i)))}}function dl(e){if(ll.logLevel<=te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.error.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(h(i)))}}function pl(e){if(ll.logLevel<=te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.warn.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(h(i)))}}function vl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(cl,") INTERNAL ASSERTION FAILED: ")+e;throw dl(t),new Error(t)}function yl(e,t){e||ml()}function gl(e,t){return e}var bl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wl=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return k(n)}(B),kl=k((function e(){var t=this;w(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),xl=k((function e(t,n){w(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Il=function(){function e(){w(this,e)}return k(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ul.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),_l=function(){function e(t){w(this,e),this.token=t,this.changeListener=null}return k(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),El=function(){function e(t){w(this,e),this.t=t,this.currentUser=ul.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return k(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new kl;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new kl,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){hl("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(hl("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new kl)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(hl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yl("string"==typeof n.accessToken),new xl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return yl(null===e||"string"==typeof e),new ul(e)}}]),e}(),Tl=k((function e(t,n,r){w(this,e),this.type="FirstParty",this.user=ul.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Sl=function(){function e(t,n,r){w(this,e),this.h=t,this.l=n,this.m=r}return k(e,[{key:"getToken",value:function(){return Promise.resolve(new Tl(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ul.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Al=k((function e(t){w(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Nl=function(){function e(t){w(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return k(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&hl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,hl("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){hl("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):hl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(yl("string"==typeof t.token),e.p=t.token,new Al(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Cl=function(){function e(t,n){var r=this;w(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return k(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Dl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Cl.A=-1;var Pl=function(){function e(){w(this,e)}return k(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Dl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ol(e,t){return e<t?-1:e>t?1:0}function Rl(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ll(e){return e+"\0"}var jl=function(){function e(t,n){if(w(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new wl(bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new wl(bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new wl(bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wl(bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return k(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ol(this.nanoseconds,e.nanoseconds):Ol(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ml=function(){function e(t){w(this,e),this.timestamp=t}return k(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new jl(0,0))}},{key:"max",value:function(){return new e(new jl(253402300799,999999999))}}]),e}();function Ul(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vl(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ql=function(){function e(t,n,r){w(this,e),void 0===n?n=0:n>t.length&&ml(),void 0===r?r=t.length-n:r>t.length-n&&ml(),this.segments=t,this.offset=n,this.len=r}return k(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Bl=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new wl(bl.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ql),zl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wl=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zl.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new wl(bl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new wl(bl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new wl(bl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new wl(bl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ql),Ql=function(){function e(t){w(this,e),this.fields=t,t.sort(Wl.comparator)}return k(e,[{key:"covers",value:function(e){var t,n=p(this.fields);try{for(n.s();!(t=n.n()).done;)if(t.value.isPrefixOf(e))return!0}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Rl(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}(),Kl=function(e){function t(e){w(this,t),this.binaryString=e}return k(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ol(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);Kl.EMPTY_BYTE_STRING=new Kl("");var Gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(e){if(yl(!!e),"string"==typeof e){var t=0,n=Gl.exec(e);if(yl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yl(e.seconds),nanos:Yl(e.nanos)}}function Yl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jl(e){return"string"==typeof e?Kl.fromBase64String(e):Kl.fromUint8Array(e)}function Xl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zl(e){var t=e.mapValue.fields.__previous_value__;return Xl(t)?Zl(t):t}function $l(e){var t=Hl(e.mapValue.fields.__local_write_time__.timestampValue);return new jl(t.seconds,t.nanos)}var ef=k((function e(t,n,r,i,a,o,s,u){w(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),tf=function(){function e(t,n){w(this,e),this.projectId=t,this.database=n||"(default)"}return k(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function nf(e){return null==e}function rf(e){return 0===e&&1/e==-1/0}function af(e){return"number"==typeof e&&Number.isInteger(e)&&!rf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var of=function(){function e(t){w(this,e),this.path=t}return k(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Bl.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Bl.fromString(t))}},{key:"fromName",value:function(t){return new e(Bl.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Bl.emptyPath())}},{key:"comparator",value:function(e,t){return Bl.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Bl(t.slice()))}}]),e}(),sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uf={nullValue:"NULL_VALUE"};function cf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xl(e)?4:If(e)?9007199254740991:10:ml()}function lf(e,t){if(e===t)return!0;var n=cf(e);if(n!==cf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $l(e).isEqual($l(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Hl(e.timestampValue),r=Hl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jl(e.bytesValue).isEqual(Jl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yl(e.geoPointValue.latitude)===Yl(t.geoPointValue.latitude)&&Yl(e.geoPointValue.longitude)===Yl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yl(e.integerValue)===Yl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yl(e.doubleValue),r=Yl(t.doubleValue);return n===r?rf(n)===rf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rl(e.arrayValue.values||[],t.arrayValue.values||[],lf);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ul(n)!==Ul(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!lf(n[i],r[i])))return!1;return!0}(e,t);default:return ml()}}function ff(e,t){return void 0!==(e.values||[]).find((function(e){return lf(e,t)}))}function hf(e,t){if(e===t)return 0;var n=cf(e),r=cf(t);if(n!==r)return Ol(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ol(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yl(e.integerValue||e.doubleValue),r=Yl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return df(e.timestampValue,t.timestampValue);case 4:return df($l(e),$l(t));case 5:return Ol(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Jl(e),r=Jl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ol(n[i],r[i]);if(0!==a)return a}return Ol(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ol(Yl(e.latitude),Yl(t.latitude));return 0!==n?n:Ol(Yl(e.longitude),Yl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=hf(n[i],r[i]);if(a)return a}return Ol(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===sf.mapValue&&t===sf.mapValue)return 0;if(e===sf.mapValue)return 1;if(t===sf.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Ol(r[o],a[o]);if(0!==s)return s;var u=hf(n[r[o]],i[a[o]]);if(0!==u)return u}return Ol(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ml()}}function df(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ol(e,t);var n=Hl(e),r=Hl(t),i=Ol(n.seconds,r.seconds);return 0!==i?i:Ol(n.nanos,r.nanos)}function pf(e){return vf(e)}function vf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Hl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Jl(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,of.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=p(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=vf(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n=Object.keys(e.fields||{}).sort(),r="{",i=!0,a=p(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;i?i=!1:r+=",",r+="".concat(o,":").concat(vf(e.fields[o]))}}catch(s){a.e(s)}finally{a.f()}return r+"}"}(e.mapValue):ml();var t,n}function mf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yf(e){return!!e&&"integerValue"in e}function gf(e){return!!e&&"arrayValue"in e}function bf(e){return!!e&&"nullValue"in e}function wf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kf(e){return!!e&&"mapValue"in e}function xf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Fl(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=xf(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=xf(e.arrayValue.values[r]);return n}return Object.assign({},e)}function If(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _f(e){return"nullValue"in e?uf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?mf(tf.empty(),of.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ml()}function Ef(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?mf(tf.empty(),of.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?sf:ml()}function Tf(e,t){var n=hf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Sf(e,t){var n=hf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Af=function(){function e(t){w(this,e),this.value=t}return k(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!kf(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(t)}},{key:"setAll",value:function(e){var t=this,n=Wl.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=xf(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return lf(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];kf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Fl(t,(function(t,n){return e[t]=n}));var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(xf(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Nf(e){var t=[];return Fl(e.fields,(function(e,n){var r=new Wl([e]);if(kf(n)){var i=Nf(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Ql(t)}var Cf=function(){function e(t,n,r,i,a,o){w(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return k(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Af.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Af.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ml.min(),Ml.min(),Af.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ml.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ml.min(),Af.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ml.min(),Af.empty(),2)}}]),e}(),Df=k((function e(t,n,r,i){w(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Pf(e){return e.fields.find((function(e){return 2===e.kind}))}function Of(e){return e.fields.filter((function(e){return 2!==e.kind}))}Df.UNKNOWN_ID=-1;var Rf=k((function e(t,n){w(this,e),this.fieldPath=t,this.kind=n})),Lf=function(){function e(t,n){w(this,e),this.sequenceNumber=t,this.offset=n}return k(e,null,[{key:"empty",value:function(){return new e(0,Uf.min())}}]),e}();function jf(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ml.fromTimestamp(1e9===r?new jl(n+1,0):new jl(n,r));return new Uf(i,of.empty(),t)}function Mf(e){return new Uf(e.readTime,e.key,-1)}var Uf=function(){function e(t,n,r){w(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return k(e,null,[{key:"min",value:function(){return new e(Ml.min(),of.empty(),-1)}},{key:"max",value:function(){return new e(Ml.max(),of.empty(),-1)}}]),e}();function Ff(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n||0!==(n=of.comparator(e.documentKey,t.documentKey))?n:Ol(e.largestBatchId,t.largestBatchId)}var Vf=function(){function e(t,n){w(this,e),this.comparator=t,this.root=n||Bf.EMPTY}return k(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Bf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bf.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new qf(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new qf(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qf(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new qf(this.root,e,this.comparator,!0)}}]),e}(),qf=function(){function e(t,n,r,i){w(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return k(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Bf=function(){function e(t,n,r,i,a){w(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return k(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ml();if(this.right.isRed())throw ml();var e=this.left.check();if(e!==this.right.check())throw ml();return e+(this.isRed()?0:1)}}]),e}();Bf.EMPTY=null,Bf.RED=!0,Bf.BLACK=!1,Bf.EMPTY=new(function(){function e(){w(this,e),this.size=0}return k(e,[{key:"key",get:function(){throw ml()}},{key:"value",get:function(){throw ml()}},{key:"color",get:function(){throw ml()}},{key:"left",get:function(){throw ml()}},{key:"right",get:function(){throw ml()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Bf(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var zf=function(){function e(t){w(this,e),this.comparator=t,this.data=new Vf(this.comparator)}return k(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wf(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wf(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wf=function(){function e(t){w(this,e),this.iter=t}return k(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qf(e){return e.hasNext()?e.getNext():void 0}var Kf=k((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;w(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function Gf(e){return new Kf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Hf(e){var t=gl(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+pf(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),nf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return pf(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return pf(e)})).join(",")),t.P=n}return t.P}function Yf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!fh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!lf(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dh(e.startAt,t.startAt)&&dh(e.endAt,t.endAt)}function Jf(e){return of.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Xf(e,t){return e.filters.filter((function(e){return e instanceof eh&&e.field.isEqual(t)}))}function Zf(e,t,n){var r,i=uf,a=!0,o=p(Xf(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=uf,c=!0;switch(s.op){case"<":case"<=":u=_f(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=uf}Tf({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Tf({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function $f(e,t,n){var r,i=sf,a=!0,o=p(Xf(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=sf,c=!0;switch(s.op){case">=":case">":u=Ef(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=sf}Sf({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Sf({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var eh=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return k(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(hf(t,this.value)):null!==t&&cf(this.value)===cf(t)&&this.v(hf(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ml()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new th(e,t,r):"array-contains"===t?new ah(e,r):"in"===t?new oh(e,r):"not-in"===t?new sh(e,r):"array-contains-any"===t?new uh(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new nh(e,n):new rh(e,n)}}]),n}(function(){function e(){w(this,e)}return k(e)}()),th=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,e,r,i)).key=of.fromName(i.referenceValue),a}return k(n,[{key:"matches",value:function(e){var t=of.comparator(e.key,this.key);return this.v(t)}}]),n}(eh),nh=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,"in",r)).keys=ih(0,r),i}return k(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(eh),rh=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,"not-in",r)).keys=ih(0,r),i}return k(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(eh);function ih(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return of.fromName(e.referenceValue)}))}var ah=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"array-contains",r)}return k(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return gf(t)&&ff(t.arrayValue,this.value)}}]),n}(eh),oh=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"in",r)}return k(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ff(this.value.arrayValue,t)}}]),n}(eh),sh=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"not-in",r)}return k(n,[{key:"matches",value:function(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ff(this.value.arrayValue,t)}}]),n}(eh),uh=function(e){y(n,e);var t=g(n);function n(e,r){return w(this,n),t.call(this,e,"array-contains-any",r)}return k(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!gf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ff(t.value.arrayValue,e)}))}}]),n}(eh),ch=k((function e(t,n){w(this,e),this.position=t,this.inclusive=n})),lh=k((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";w(this,e),this.field=t,this.dir=n}));function fh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function hh(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?of.comparator(of.fromName(o.referenceValue),n.key):hf(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function dh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!lf(e.position[n],t.position[n]))return!1;return!0}var ph=k((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;w(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function vh(e,t,n,r,i,a,o,s){return new ph(e,t,n,r,i,a,o,s)}function mh(e){return new ph(e)}function yh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gh(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function bh(e){return null!==e.collectionGroup}function wh(e){var t=gl(e);if(null===t.D){t.D=[];var n=gh(t),r=yh(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new lh(n)),t.D.push(new lh(Wl.keyField(),"asc"));else{var i,a=!1,o=p(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new lh(Wl.keyField(),u))}}}return t.D}function kh(e){var t=gl(e);if(!t.C)if("F"===t.limitType)t.C=Gf(t.path,t.collectionGroup,wh(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=p(wh(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new lh(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new ch(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new ch(t.startAt.position,t.startAt.inclusive):null;t.C=Gf(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function xh(e,t,n){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ih(e,t){return Yf(kh(e),kh(t))&&e.limitType===t.limitType}function _h(e){return"".concat(Hf(kh(e)),"|lt:").concat(e.limitType)}function Eh(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(pf(t.value));var t})).join(", "),"]")),nf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return pf(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return pf(e)})).join(",")),"Target(".concat(t,")")}(kh(e)),"; limitType=").concat(e.limitType,")")}function Th(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):of.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=p(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;)if(!n.value.matches(t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=hh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wh(e),t)||e.endAt&&!function(e,t,n){var r=hh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wh(e),t))}(e,t)}function Sh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ah(e){return function(t,n){var r,i=!1,a=p(wh(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Nh(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Nh(e,t,n){var r=e.field.isKeyField()?of.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hf(r,i):ml()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ml()}}function Ch(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(t)?"-0":t}}function Dh(e){return{integerValue:""+e}}function Ph(e,t){return af(t)?Dh(t):Ch(e,t)}var Oh=k((function e(){w(this,e),this._=void 0}));function Rh(e,t,n){return e instanceof Mh?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Uh?Fh(e,t):e instanceof Vh?qh(e,t):function(e,t){var n=jh(e,t),r=zh(n)+zh(e.k);return yf(n)&&yf(e.k)?Dh(r):Ch(e.M,r)}(e,t)}function Lh(e,t,n){return e instanceof Uh?Fh(e,t):e instanceof Vh?qh(e,t):n}function jh(e,t){return e instanceof Bh?yf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Mh=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n)}(Oh),Uh=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).elements=e,r}return k(n)}(Oh);function Fh(e,t){var n,r=Wh(t),i=p(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return lf(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vh=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).elements=e,r}return k(n)}(Oh);function qh(e,t){var n,r=Wh(t),i=p(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!lf(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bh=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).M=e,i.k=r,i}return k(n)}(Oh);function zh(e){return Yl(e.integerValue||e.doubleValue)}function Wh(e){return gf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Qh=k((function e(t,n){w(this,e),this.field=t,this.transform=n})),Kh=k((function e(t,n){w(this,e),this.version=t,this.transformResults=n})),Gh=function(){function e(t,n){w(this,e),this.updateTime=t,this.exists=n}return k(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Hh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Yh=k((function e(){w(this,e)}));function Jh(e,t,n){e instanceof td?function(e,t,n){var r=e.value.clone(),i=id(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof nd?function(e,t,n){if(Hh(e.precondition,t)){var r=id(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(rd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xh(e,t,n){e instanceof td?function(e,t,n){if(Hh(e.precondition,t)){var r=e.value.clone(),i=ad(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(ed(t),r).setHasLocalMutations()}}(e,t,n):e instanceof nd?function(e,t,n){if(Hh(e.precondition,t)){var r=ad(e.fieldTransforms,n,t),i=t.data;i.setAll(rd(e)),i.setAll(r),t.convertToFoundDocument(ed(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Hh(e.precondition,t)&&t.convertToNoDocument(Ml.min())}(e,t)}function Zh(e,t){var n,r=null,i=p(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=jh(a.transform,o||null);null!=s&&(null==r&&(r=Af.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function $h(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rl(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Uh&&t instanceof Uh||e instanceof Vh&&t instanceof Vh?Rl(e.elements,t.elements,lf):e instanceof Bh&&t instanceof Bh?lf(e.k,t.k):e instanceof Mh&&t instanceof Mh}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ed(e){return e.isFoundDocument()?e.version:Ml.min()}var td=function(e){y(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return w(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return k(n)}(Yh),nd=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return w(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return k(n)}(Yh);function rd(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function id(e,t,n){var r=new Map;yl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Lh(o,s,n[i]))}return r}function ad(e,t,n){var r,i=new Map,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Rh(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var od,sd,ud=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return k(n)}(Yh),cd=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return k(n)}(Yh),ld=k((function e(t){w(this,e),this.count=t}));function fd(e){switch(e){default:return ml();case bl.CANCELLED:case bl.UNKNOWN:case bl.DEADLINE_EXCEEDED:case bl.RESOURCE_EXHAUSTED:case bl.INTERNAL:case bl.UNAVAILABLE:case bl.UNAUTHENTICATED:return!1;case bl.INVALID_ARGUMENT:case bl.NOT_FOUND:case bl.ALREADY_EXISTS:case bl.PERMISSION_DENIED:case bl.FAILED_PRECONDITION:case bl.ABORTED:case bl.OUT_OF_RANGE:case bl.UNIMPLEMENTED:case bl.DATA_LOSS:return!0}}function hd(e){if(void 0===e)return dl("GRPC error has no .code"),bl.UNKNOWN;switch(e){case od.OK:return bl.OK;case od.CANCELLED:return bl.CANCELLED;case od.UNKNOWN:return bl.UNKNOWN;case od.DEADLINE_EXCEEDED:return bl.DEADLINE_EXCEEDED;case od.RESOURCE_EXHAUSTED:return bl.RESOURCE_EXHAUSTED;case od.INTERNAL:return bl.INTERNAL;case od.UNAVAILABLE:return bl.UNAVAILABLE;case od.UNAUTHENTICATED:return bl.UNAUTHENTICATED;case od.INVALID_ARGUMENT:return bl.INVALID_ARGUMENT;case od.NOT_FOUND:return bl.NOT_FOUND;case od.ALREADY_EXISTS:return bl.ALREADY_EXISTS;case od.PERMISSION_DENIED:return bl.PERMISSION_DENIED;case od.FAILED_PRECONDITION:return bl.FAILED_PRECONDITION;case od.ABORTED:return bl.ABORTED;case od.OUT_OF_RANGE:return bl.OUT_OF_RANGE;case od.UNIMPLEMENTED:return bl.UNIMPLEMENTED;case od.DATA_LOSS:return bl.DATA_LOSS;default:return ml()}}(sd=od||(od={}))[sd.OK=0]="OK",sd[sd.CANCELLED=1]="CANCELLED",sd[sd.UNKNOWN=2]="UNKNOWN",sd[sd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sd[sd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sd[sd.NOT_FOUND=5]="NOT_FOUND",sd[sd.ALREADY_EXISTS=6]="ALREADY_EXISTS",sd[sd.PERMISSION_DENIED=7]="PERMISSION_DENIED",sd[sd.UNAUTHENTICATED=16]="UNAUTHENTICATED",sd[sd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sd[sd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sd[sd.ABORTED=10]="ABORTED",sd[sd.OUT_OF_RANGE=11]="OUT_OF_RANGE",sd[sd.UNIMPLEMENTED=12]="UNIMPLEMENTED",sd[sd.INTERNAL=13]="INTERNAL",sd[sd.UNAVAILABLE=14]="UNAVAILABLE",sd[sd.DATA_LOSS=15]="DATA_LOSS";var dd=function(){function e(t,n){w(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return k(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=v(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Fl(this.inner,(function(t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=v(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Vl(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),pd=new Vf(of.comparator);function vd(){return pd}var md=new Vf(of.comparator);function yd(){for(var e=md,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function gd(){return new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var bd=new Vf(of.comparator),wd=new zf(of.comparator);function kd(){for(var e=wd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var xd=new zf(Ol);function Id(){return xd}var _d=function(){function e(t,n,r,i,a){w(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return k(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ed.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ml.min(),r,Id(),vd(),kd())}}]),e}(),Ed=function(){function e(t,n,r,i,a){w(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return k(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Kl.EMPTY_BYTE_STRING,n,kd(),kd(),kd())}}]),e}(),Td=k((function e(t,n,r,i){w(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Sd=k((function e(t,n){w(this,e),this.targetId=t,this.$=n})),Ad=k((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kl.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;w(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Nd=function(){function e(){w(this,e),this.B=0,this.L=Pd(),this.U=Kl.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return k(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=kd(),t=kd(),n=kd();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ml()}})),new Ed(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Pd()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Cd=function(){function e(t){w(this,e),this.nt=t,this.st=new Map,this.it=vd(),this.rt=Dd(),this.ot=new zf(Ol)}return k(e,[{key:"ut",value:function(e){var t,n=p(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=p(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:ml()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Jf(i))if(0===n){var a=new of(i.path);this.ct(t,a,Cf.newNoDocument(a,Ml.min()))}else yl(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Jf(a.target)){var o=new of(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Cf.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=kd();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new _d(e,n,this.ot,this.it,r);return this.it=vd(),this.rt=Dd(),this.ot=new zf(Ol),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Nd,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new zf(Ol),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||hl("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Nd),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Dd(){return new Vf(of.comparator)}function Pd(){return new Vf(of.comparator)}var Od={asc:"ASCENDING",desc:"DESCENDING"},Rd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ld=k((function e(t,n){w(this,e),this.databaseId=t,this.N=n}));function jd(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Md(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ud(e,t){return jd(e,t.toTimestamp())}function Fd(e){return yl(!!e),Ml.fromTimestamp(function(e){var t=Hl(e);return new jl(t.seconds,t.nanos)}(e))}function Vd(e,t){return function(e){return new Bl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qd(e){var t=Bl.fromString(e);return yl(cp(t)),t}function Bd(e,t){return Vd(e.databaseId,t.path)}function zd(e,t){var n=qd(t);if(n.get(1)!==e.databaseId.projectId)throw new wl(bl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wl(bl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new of(Gd(n))}function Wd(e,t){return Vd(e.databaseId,t)}function Qd(e){var t=qd(e);return 4===t.length?Bl.emptyPath():Gd(t)}function Kd(e){return new Bl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gd(e){return yl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hd(e,t,n){return{name:Bd(e,t),fields:n.value.mapValue.fields}}function Yd(e,t,n){var r=zd(e,t.name),i=Fd(t.updateTime),a=new Af({mapValue:{fields:t.fields}}),o=Cf.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Jd(e,t){var n;if(t instanceof td)n={update:Hd(e,t.key,t.value)};else if(t instanceof ud)n={delete:Bd(e,t.key)};else if(t instanceof nd)n={update:Hd(e,t.key,t.data),updateMask:up(t.fieldMask)};else{if(!(t instanceof cd))return ml();n={verify:Bd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Mh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bh)return{fieldPath:t.field.canonicalString(),increment:n.k};throw ml()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ud(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ml()}(e,t.precondition)),n}function Xd(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gh.updateTime(Fd(e.updateTime)):void 0!==e.exists?Gh.exists(e.exists):Gh.none()}(t.currentDocument):Gh.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)yl("REQUEST_TIME"===t.setToServerValue),n=new Mh;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Uh(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Vh(i)}else"increment"in t?n=new Bh(e,t.increment):ml();var a=Wl.fromServerFormat(t.fieldPath);return new Qh(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=zd(e,t.update.name),a=new Af({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ql(t.map((function(e){return Wl.fromServerFormat(e)})))}(t.updateMask);return new nd(i,a,o,n,r)}return new td(i,a,n,r)}if(t.delete){var s=zd(e,t.delete);return new ud(s,n)}if(t.verify){var u=zd(e,t.verify);return new cd(u,n)}return ml()}function Zd(e,t){return{documents:[Wd(e,t.path)]}}function $d(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Wd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Wd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(wf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NAN"}};if(bf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NOT_NAN"}};if(bf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ip(e.field),op:rp(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ip(e.field),direction:np(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||nf(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ep(e){var t=Qd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=tp(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new lh(ap(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return nf(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ch(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ch(n,t)}(n.endAt)),vh(t,i,s,o,u,"F",c,l)}function tp(e){return e?void 0!==e.unaryFilter?[sp(e)]:void 0!==e.fieldFilter?[op(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return tp(e)})).reduce((function(e,t){return e.concat(t)})):ml():[]}function np(e){return Od[e]}function rp(e){return Rd[e]}function ip(e){return{fieldPath:e.canonicalString()}}function ap(e){return Wl.fromServerFormat(e.fieldPath)}function op(e){return eh.create(ap(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ml()}}(e.fieldFilter.op),e.fieldFilter.value)}function sp(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ap(e.unaryFilter.field);return eh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ap(e.unaryFilter.field);return eh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ap(e.unaryFilter.field);return eh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ap(e.unaryFilter.field);return eh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ml()}}function up(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function cp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function lp(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=hp(t)),t=fp(e.get(n),t);return hp(t)}function fp(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function hp(e){return e+"\x01\x01"}function dp(e){var t=e.length;if(yl(t>=2),2===t)return yl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Bl.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ml(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ml()}a=o+2}return new Bl(r)}var pp=["userId","batchId"];function vp(e,t){return[e,lp(t)]}function mp(e,t,n){return[e,lp(t),n]}var yp={},gp=["prefixPath","collectionGroup","readTime","documentId"],bp=["prefixPath","collectionGroup","documentId"],wp=["collectionGroup","readTime","prefixPath","documentId"],kp=["canonicalId","targetId"],xp=["targetId","path"],Ip=["path","targetId"],_p=["collectionId","parent"],Ep=["indexId","uid"],Tp=["uid","sequenceNumber"],Sp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ap=["indexId","uid","orderedDocumentKey"],Np=["userId","collectionPath","documentId"],Cp=["userId","collectionPath","largestBatchId"],Dp=["userId","collectionGroup","largestBatchId"],Pp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Op=[].concat(Pp,["documentOverlays"]),Rp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lp=[].concat(Rp,["indexConfiguration","indexState","indexEntries"]),jp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mp=function(){function e(){w(this,e),this.onCommittedListeners=[]}return k(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Up=function(){function e(t){var n=this;w(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return k(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ml(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=p(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Fp=function(){function e(t,n){var r=this;w(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new kl,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Bp(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Gp(e.target.error);r.At.reject(new Bp(t,n))}}return k(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(hl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Wp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Bp(n,t)}}}]),e}(),Vp=function(){function e(t,n,r){w(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(L())&&dl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return k(e,[{key:"Nt",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return hl("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Bp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new wl(bl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new wl(bl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Bp(t,n))},i.onupgradeneeded=function(e){hl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){hl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s,u,c=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(f().mark((function e(){var n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Fp.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Up.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,hl("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return hl("SimpleDb","Removing database:",e),Qp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!q())return!1;if(e.St())return!0;var t=L(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),qp=function(){function e(t){w(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return k(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Qp(this.Ft.delete())}}]),e}(),Bp=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,bl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return k(n)}(wl);function zp(e){return"IndexedDbTransactionError"===e.name}var Wp=function(){function e(t){w(this,e),this.store=t}return k(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(hl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(hl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Qp(n)}},{key:"add",value:function(e){return hl("SimpleDb","ADD",this.store.name,e,e),Qp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Qp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),hl("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return hl("SimpleDb","DELETE",this.store.name,e),Qp(this.store.delete(e))}},{key:"count",value:function(){return hl("SimpleDb","COUNT",this.store.name),Qp(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Up((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Up((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){hl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Up((function(n,r){t.onerror=function(e){var t=Gp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Up((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new qp(i),o=t(i.primaryKey,i.value,a);if(o instanceof Up){var s=o.catch((function(e){return a.done(),Up.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Up.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Qp(e){return new Up((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Gp(e.target.error);n(t)}}))}var Kp=!1;function Gp(e){var t=Vp.Vt(L());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new wl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Kp||(Kp=!0,setTimeout((function(){throw r}),0)),r}}return e}var Hp=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return k(n)}(Mp);function Yp(e,t){var n=gl(e);return Vp.xt(n.Ht,t)}var Jp=function(){function e(t,n,r,i){w(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return k(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Jh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=p(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Xh(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=p(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Xh(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ml.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),kd())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(function(e,t){return $h(e,t)}))&&Rl(this.baseMutations,e.baseMutations,(function(e,t){return $h(e,t)}))}}]),e}(),Xp=function(){function e(t,n,r,i){w(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return k(e,null,[{key:"from",value:function(t,n,r){yl(t.mutations.length===r.length);for(var i=bd,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Zp=function(){function e(t,n){w(this,e),this.largestBatchId=t,this.mutation=n}return k(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$p=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ml.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ml.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kl.EMPTY_BYTE_STRING;w(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return k(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ev=k((function e(t){w(this,e),this.Jt=t}));function tv(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:jd(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rv(t.version)};else{if(!t.isUnknownDocument())return ml();r.unknownDocument={path:n.path.toArray(),version:rv(t.version)}}return r}function nv(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rv(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function iv(e){var t=new jl(e.seconds,e.nanoseconds);return Ml.fromTimestamp(t)}function av(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Xd(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Xd(e.Jt,t)})),s=jl.fromMillis(t.localWriteTimeMs);return new Jp(t.batchId,s,n,o)}function ov(e){var t,n,r=iv(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?iv(e.lastLimboFreeSnapshotVersion):Ml.min();return void 0!==e.query.documents?(yl(1===(n=e.query).documents.length),t=kh(mh(Qd(n.documents[0])))):t=function(e){return kh(ep(e))}(e.query),new $p(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Kl.fromBase64String(e.resumeToken))}function sv(e,t){var n,r=rv(t.snapshotVersion),i=rv(t.lastLimboFreeSnapshotVersion);n=Jf(t.target)?Zd(e.Jt,t.target):$d(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Hf(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function uv(e){var t=ep({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xh(t,t.limit,"L"):t}function cv(e,t){return new Zp(t.largestBatchId,Xd(e.Jt,t.overlayMutation))}function lv(e,t){var n=t.path.lastSegment();return[e,lp(t.path.popLast()),n]}var fv=function(){function e(){w(this,e)}return k(e,[{key:"getBundleMetadata",value:function(e,t){return hv(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:iv(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return hv(e).put({bundleId:(n=t).id,createTime:rv(Fd(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return dv(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:uv(t.bundledQuery),readTime:iv(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return dv(e).put(function(e){return{name:e.name,readTime:rv(Fd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function hv(e){return Yp(e,"bundles")}function dv(e){return Yp(e,"namedQueries")}var pv=function(){function e(t,n){w(this,e),this.M=t,this.userId=n}return k(e,[{key:"getOverlay",value:function(e,t){var n=this;return vv(e).get(lv(this.userId,t)).next((function(e){return e?cv(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Zp(t,a);i.push(r.Xt(e,o))})),Up.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(lp(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(vv(e).Qt("collectionPathOverlayIndex",i))})),Up.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=gd(),a=lp(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return vv(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=cv(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=gd(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vv(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=cv(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return vv(e).put(function(e,t,n){var r=lv(t,n.mutation.key),i=v(r,3);return i[0],{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jd(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function vv(e){return Yp(e,"documentOverlays")}var mv=function(){function e(){w(this,e)}return k(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yl(e.integerValue));else if("doubleValue"in e){var n=Yl(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),rf(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Jl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?If(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ml()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),of.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function yv(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function gv(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=yv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}mv.fe=new mv;var bv=function(){function e(){w(this,e),this.buffer=new Uint8Array(1024),this.position=0}return k(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=gv(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=gv(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),wv=function(){function e(t){w(this,e),this.De=t}return k(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),kv=function(){function e(t){w(this,e),this.De=t}return k(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),xv=function(){function e(){w(this,e),this.De=new bv,this.Ce=new wv(this.De),this.xe=new kv(this.De)}return k(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Iv=function(){function e(t,n,r,i){w(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return k(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function _v(e,t){var n=e.indexId-t.indexId;return 0!==n||0!==(n=Ev(e.arrayValue,t.arrayValue))||0!==(n=Ev(e.directionalValue,t.directionalValue))?n:of.comparator(e.documentKey,t.documentKey)}function Ev(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Tv=function(){function e(t){w(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=p(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return k(e,[{key:"$e",value:function(e){var t=Pf(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Of(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=p(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Sv=function(){function e(){w(this,e),this.qe=new Av}return k(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Up.resolve()}},{key:"getCollectionParents",value:function(e,t){return Up.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Up.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Up.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Up.resolve(null)}},{key:"getIndexType",value:function(e,t){return Up.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Up.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Up.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Up.resolve(Uf.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Up.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Up.resolve()}}]),e}(),Av=function(){function e(){w(this,e),this.index={}}return k(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zf(Bl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new zf(Bl.comparator)).toArray()}}]),e}(),Nv=new Uint8Array(0),Cv=function(){function e(t,n){w(this,e),this.user=t,this.databaseId=n,this.Ke=new Av,this.Ge=new dd((function(e){return Hf(e)}),(function(e,t){return Yf(e,t)})),this.uid=t.uid||""}return k(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:lp(i)};return Dv(e).put(a)}return Up.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ll(t),""],!1,!0);return Dv(e).qt(r).next((function(e){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(dp(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Ov(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ov(e),r=Rv(e),i=Pv(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Pv(e),i=!0,a=new Map;return Up.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=kd(),o=[];return Up.forEach(a,(function(i,a){var s;hl("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Hf(t)));var u=function(e,t){var n=Pf(t);if(void 0===n)return null;var r,i=p(Xf(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=p(Of(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=p(Xf(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=p(Of(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Zf(e,o.fieldPath,e.startAt):$f(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ch(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=p(Of(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?$f(e,o.fieldPath,e.endAt):Zf(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ch(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),v=n.ze(i,a,c),m=n.He(i.indexId,u,h,l.inclusive,d,f.inclusive,v);return Up.forEach(m,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=of.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Up.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(u){var f=t?s.Je(t[u/c]):Nv,d=s.Ye(e,f,n[u%c],r),p=s.Xe(e,f,i[u%c],a),v=o.map((function(t){return s.Ye(e,f,t,!0)}));l.push.apply(l,h(s.createRange(d,p,v)))},d=0;d<u;++d)f(d);return l}},{key:"Ye",value:function(e,t,n,r){var i=new Iv(e,of.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Iv(e,of.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Tv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Up.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new zf(Wl.comparator),r=!1,i=p(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=p(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new xv,i=p(Of(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);mv.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new xv;return mv.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new xv;return mv.fe.Zt(mf(this.databaseId,t),n.Ne(function(e){var t=Of(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new xv);var i,a=0,o=p(Of(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=p(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.en(t,u.fieldPath)&&gf(c))r=this.nn(r,u,c);else{var h=f.Ne(u.kind);mv.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=h(e),a=[],o=p(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=p(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new xv;f.seed(l.Se()),mv.fe.Zt(u,f.Ne(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof eh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ov(e),i=Rv(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Up.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Lf(t.sequenceNumber,new Uf(iv(t.readTime),new of(dp(t.documentKey)),t.largestBatchId)):Lf.empty(),r=e.fields.map((function(e){var t=v(e,2),n=t[0],r=t[1];return new Rf(Wl.fromServerFormat(n),r)}));return new Df(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ol(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ov(e),a=Rv(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Up.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:rv(r.readTime),documentKey:lp(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Up.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Up.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Up.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Up.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Pv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Pv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Pv(e),i=new zf(_v);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Iv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new zf(_v),r=this.Ze(t,e);if(null==r)return n;var i=Pf(t);if(null!=i){var a=e.data.field(i.fieldPath);if(gf(a)){var o,s=p(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Iv(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Iv(t.indexId,e.key,Nv,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;hl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Qf(a),u=Qf(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Qf(o)):l?(i(s),s=Qf(a)):(s=Qf(a),u=Qf(o))}}(r,i,_v,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Up.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Rv(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return _v(e,t)})).filter((function(e,t,n){return!t||0!==_v(e,n[t-1])}));var r=[];r.push(e);var i,a=p(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=_v(o,e),u=_v(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Nv,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Nv,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Up.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Ff(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Uf.min()}))})).next((function(){return n}))}}]),e}();function Dv(e){return Yp(e,"collectionParents")}function Pv(e){return Yp(e,"indexEntries")}function Ov(e){return Yp(e,"indexConfiguration")}function Rv(e){return Yp(e,"indexState")}var Lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jv=function(){function e(t,n,r){w(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return k(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Mv(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){yl(1===s)})));var c,l=[],f=p(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=mp(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Up.waitFor(a).next((function(){return l}))}function Uv(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ml();t=e.noDocument}return JSON.stringify(t).length}jv.DEFAULT_COLLECTION_PERCENTILE=10,jv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jv.DEFAULT=new jv(41943040,jv.DEFAULT_COLLECTION_PERCENTILE,jv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jv.DISABLED=new jv(-1,0,0);var Fv=function(){function e(t,n,r,i){w(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return k(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qv(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Bv(e),o=qv(e);return o.add({}).next((function(s){yl("number"==typeof s);var u,c=new Jp(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Jd(e.Jt,t)})),i=n.mutations.map((function(t){return Jd(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new zf((function(e,t){return Ol(e.canonicalString(),t.canonicalString())})),d=p(r);try{for(d.s();!(u=d.n()).done;){var v=u.value,m=mp(i.userId,v.key.path,s);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(m,yp))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[s]=c.keys()})),Up.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return qv(e).get(t).next((function(e){return e?(yl(e.userId===n.userId),av(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Up.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return qv(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(yl(t.batchId>=r),a=av(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return qv(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qv(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return av(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=vp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Bv(e).Wt({range:i},(function(r,i,o){var s=v(r,3),u=s[0],c=s[1],l=s[2],f=dp(c);if(u===n.userId&&t.path.isEqual(f))return qv(e).get(l).next((function(e){if(!e)throw ml();yl(e.userId===n.userId),a.push(av(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zf(Ol),i=[];return t.forEach((function(t){var a=vp(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Bv(e).Wt({range:o},(function(e,i,a){var o=v(e,3),s=o[0],u=o[1],c=o[2],l=dp(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),Up.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=vp(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new zf(Ol);return Bv(e).Wt({range:o},(function(e,t,a){var o=v(e,3),u=o[0],c=o[1],l=o[2],f=dp(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(qv(e).get(t).next((function(e){if(null===e)throw ml();yl(e.userId===n.userId),r.push(av(n.M,e))})))})),Up.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Mv(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Up.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Up.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Bv(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=dp(e[1]);i.push(a)}else r.done()})).next((function(){yl(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Vv(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return zv(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return yl(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Vv(e,t,n){var r=vp(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Bv(e).Wt({range:a,jt:!0},(function(e,n,r){var a=v(e,3),s=a[0],u=a[1];a[2],s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function qv(e){return Yp(e,"mutations")}function Bv(e){return Yp(e,"documentMutations")}function zv(e){return Yp(e,"mutationQueues")}var Wv=function(){function e(t){w(this,e),this.mn=t}return k(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Qv=function(){function e(t,n){w(this,e),this.referenceDelegate=t,this.M=n}return k(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Wv(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Ml.fromTimestamp(new jl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Kv(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return yl(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Kv(e).Wt((function(o,s){var u=ov(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Up.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Kv(e).Wt((function(e,n){var r=ov(n);t(r)}))}},{key:"pn",value:function(e){return Gv(e).get("targetGlobalKey").next((function(e){return yl(null!==e),e}))}},{key:"In",value:function(e,t){return Gv(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Kv(e).put(sv(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Hf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kv(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ov(n);Yf(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Hv(e);return t.forEach((function(t){var o=lp(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Up.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Hv(e);return Up.forEach(t,(function(t){var a=lp(t.path);return Up.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Hv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Hv(e),i=kd();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=dp(e[1]),a=new of(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=lp(t.path),r=IDBKeyRange.bound([n],[Ll(n)],!1,!0),i=0;return Hv(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=v(e,2),a=r[0];r[1],0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Kv(e).get(t).next((function(e){return e?ov(e):null}))}}]),e}();function Kv(e){return Yp(e,"targets")}function Gv(e){return Yp(e,"targetGlobal")}function Hv(e){return Yp(e,"targetDocuments")}function Yv(e){return Jv.apply(this,arguments)}function Jv(){return Jv=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bl.FAILED_PRECONDITION&&t.message===jp){e.next=2;break}throw t;case 2:hl("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Xv(e,t){var n=v(e,2),r=n[0],i=n[1],a=v(t,2),o=a[0],s=a[1],u=Ol(r,o);return 0===u?Ol(i,s):u}var Zv=function(){function e(t){w(this,e),this.An=t,this.buffer=new zf(Xv),this.Rn=0}return k(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$v=function(){function e(t,n){w(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return k(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;hl("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!zp(n.t0)){n.next=12;break}hl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Yv(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),em=function(){function e(t,n){w(this,e),this.Dn=t,this.params=n}return k(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Up.resolve(Cl.A);var r=new Zv(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; disabled"),Up.resolve(Lv)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Lv):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(hl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),fl()<=te.DEBUG&&hl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Up.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),tm=function(){function e(t,n){w(this,e),this.db=t,this.garbageCollector=function(e,t){return new em(e,t)}(this,n)}return k(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nm(e,n)}},{key:"removeReference",value:function(e,t,n){return nm(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nm(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return zv(e).zt((function(r){return Vv(e,r,t).next((function(e){return e&&(n=!0),Up.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,s){if(s<=t){var u=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ml.min()),Hv(e).delete([0,lp(o.path)])}))}));i.push(u)}})).next((function(){return Up.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nm(e,t)}},{key:"Mn",value:function(e,t){var n,r=Hv(e),i=Cl.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=v(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Cl.A&&t(new of(dp(n)),i),i=u,n=s):i=Cl.A})).next((function(){i!==Cl.A&&t(new of(dp(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nm(e,t){return Hv(e).put(function(e,t){return{targetId:0,path:lp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var rm=function(){function e(){w(this,e),this.changes=new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return k(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Cf.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Up.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),im=function(){function e(t){w(this,e),this.M=t}return k(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return sm(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return sm(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],nv(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Cf.newInvalidDocument(t);return sm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(um(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Cf.newInvalidDocument(t)};return sm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(um(t))},(function(e,i){r={document:n.$n(t,i),size:Uv(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=vd();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=vd(),i=new Vf(of.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Uv(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Up.resolve();var r=new zf(lm);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(um(r.first()),um(r.last())),a=r.getIterator(),o=a.getNext();return sm(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=of.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&lm(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(um(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),nv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sm(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=vd(),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(of.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=vd(),o=cm(t,n),s=cm(t,Uf.max());return sm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.$n(of.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new am(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return om(e).get("remoteDocumentGlobalKey").next((function(e){return yl(!!e),e}))}},{key:"Fn",value:function(e,t){return om(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Yd(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=of.fromSegments(t.noDocument.path),i=iv(t.noDocument.readTime);n=Cf.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ml();var a=of.fromSegments(t.unknownDocument.path),o=iv(t.unknownDocument.version);n=Cf.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new jl(e[0],e[1]);return Ml.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Ml.min()))return n}return Cf.newInvalidDocument(e)}}]),e}(),am=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return k(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new zf((function(e,t){return Ol(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=tv(t.Kn.M,o);i=i.add(a.path.popLast());var c=Uv(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=tv(t.Kn.M,o.convertToNoDocument(Ml.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Up.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(rm);function om(e){return Yp(e,"remoteDocumentGlobal")}function sm(e){return Yp(e,"remoteDocumentsV14")}function um(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cm(e,t){var n=t.documentKey.path.toArray();return[e,nv(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lm(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ol(n[a],r[a]))return i;return(i=Ol(n.length,r.length))||(i=Ol(n[n.length-2],r[r.length-2]))||Ol(n[n.length-1],r[r.length-1])}var fm=function(){function e(t){w(this,e),this.M=t}return k(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Fp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pp,{unique:!0}),e.createObjectStore("documentMutations")}(e),hm(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Up.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hm(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ml.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pp,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Up.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Np});t.createIndex("collectionPathOverlayIndex",Cp,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Dp,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:gp});t.createIndex("documentKeyIndex",bp),t.createIndex("collectionGroupIndex",wp)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ep}).createIndex("sequenceNumberIndex",Tp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sp}).createIndex("documentKeyIndex",Ap,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Uv(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Up.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Up.forEach(r,(function(r){yl(r.userId===n.userId);var i=av(t.M,r);return Mv(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Bl(n),o=function(e){return[0,lp(e)]}(a);r.push(t.get(o).next((function(n){return n?Up.resolve():function(n){return t.put({targetId:0,path:lp(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Up.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_p});var n=t.store("collectionParents"),r=new Av,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:lp(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Bl(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=v(e,3),r=(n[0],n[1]),a=(n[2],dp(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=ov(r),a=sv(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new of(Bl.fromString(i.document.name).popFirst(5)):i.noDocument?of.fromSegments(i.noDocument.path):i.unknownDocument?of.fromSegments(i.unknownDocument.path):ml()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return Up.waitFor(r)}))}}]),e}();function hm(e){e.createObjectStore("targetDocuments",{keyPath:xp}).createIndex("documentTargetsIndex",Ip,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kp,{unique:!0}),e.createObjectStore("targetGlobal")}var dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pm=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(w(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new wl(bl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tm(this,i),this.hs=n+"main",this.M=new ev(u),this.ls=new Vp(this.hs,this.ts,new fm(this.M)),this.fs=new Qv(this.referenceDelegate,this.M),this.ds=function(e){return new im(e)}(this.M),this._s=new fv,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&dl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return k(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new wl(bl.FAILED_PRECONDITION,dm);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Cl(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=d(f().mark((function n(r){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mm(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(zp(t))return hl("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return hl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return vm(e).get("owner").next((function(e){return Up.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return mm(e).delete(this.clientId)}},{key:"vs",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Yp(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Up.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=p(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Up.resolve(!0):vm(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new wl(bl.FAILED_PRECONDITION,dm);return!1}}return!(!t.networkEnabled||!t.inForeground)||mm(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&hl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Hp(e,Cl.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mm(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Fv.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Cv(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return pv.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;hl("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?Lp:13===i?Rp:12===i?Op:11===i?Pp:void ml();return this.ls.runTransaction(e,o,s,(function(i){return a=new Hp(i,r.es?r.es.next():Cl.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw dl("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new wl(bl.FAILED_PRECONDITION,jp);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return vm(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new wl(bl.FAILED_PRECONDITION,dm)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vm(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=vm(e);return n.get("owner").next((function(e){return t.Ps(e)?(hl("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Up.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(dl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!M()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return hl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return dl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(r){dl("Failed to set zombie client id.",r)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(r){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Vp.vt()}}]),e}();function vm(e){return Yp(e,"owner")}function mm(e){return Yp(e,"clientMetadata")}function ym(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gm=function(){function e(t,n,r){w(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return k(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=p(n);try{for(r.s();!(t=r.n()).done;)t.value.applyToLocalView(e)}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=p(t);try{for(i.s();!(r=i.n()).done;)r.value.applyToLocalView(n)}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return of.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):bh(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new of(t)).next((function(e){var t=yd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=yd();return this.indexManager.getCollectionParents(e,i).next((function(o){return Up.forEach(o,(function(o){var s=function(e,t){return new ph(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=p(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Cf.newInvalidDocument(u),r=r.insert(u,c)),Xh(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Th(t,n)||(r=r.remove(e))})),r}))}}]),e}(),bm=function(){function e(t,n,r,i){w(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return k(e,null,[{key:"Ys",value:function(t,n){var r,i=kd(),a=kd(),o=p(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),wm=function(){function e(){w(this,e),this.Xs=!1}return k(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Up.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ml.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(fl()<=te.DEBUG&&hl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Eh(t)),i.ri(e,o,t,jf(r,-1)))}))}},{key:"si",value:function(e,t){var n=new zf(Ah(e));return t.forEach((function(t,r){Th(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return fl()<=te.DEBUG&&hl("QueryEngine","Using full collection scan to execute query:",Eh(t)),this.Zs.Qs(e,t,Uf.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),km=function(){function e(t,n,r,i){w(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Vf(Ol),this.ai=new dd((function(e){return Hf(e)}),Yf),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return k(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new gm(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function xm(e,t,n,r){return new km(e,t,n,r)}function Im(e,t){return _m.apply(this,arguments)}function _m(){return _m=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=kd(),u=p(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=p(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){u.e(w)}finally{u.f()}var d,v=p(n);try{for(v.s();!(d=v.n()).done;){var m=d.value;o.push(m.batchId);var y,g=p(m.mutations);try{for(g.s();!(y=g.n()).done;){var b=y.value;s=s.add(b.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){v.e(w)}finally{v.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),_m.apply(this,arguments)}function Em(e){var t=gl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Tm(e,t,n){var r=kd();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=vd();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ml.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):hl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Sm(e,t){var n=gl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Am(e,t){var n=gl(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Up.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new $p(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Nm(e,t,n){return Cm.apply(this,arguments)}function Cm(){return Cm=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gl(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),zp(e.t1)){e.next=12;break}throw e.t1;case 12:hl("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Cm.apply(this,arguments)}function Dm(e,t,n){var r=gl(e),i=Ml.min(),a=kd();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=gl(e),i=r.ai.get(n);return void 0!==i?Up.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,kh(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Ml.min(),n?a:kd())})).next((function(e){return Rm(r,Sh(t),e),{documents:e,_i:a}}))}))}function Pm(e,t){var n=gl(e),r=gl(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Om(e,t){var n=gl(e),r=n.ci.get(t)||Ml.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,jf(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Rm(n,t,e),e}))}function Rm(e,t,n){var r=Ml.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Lm(e,t){return jm.apply(this,arguments)}function jm(){return jm=d(f().mark((function e(t,n){var r,i,a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:kd(),e.next=3,Am(t,kh(uv(n.bundledQuery)));case 3:return i=e.sent,a=gl(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Fd(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Kl.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),jm.apply(this,arguments)}var Mm=function(){function e(t){w(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return k(e,[{key:"getBundleMetadata",value:function(e,t){return Up.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Fd(n.createTime)}),Up.resolve()}},{key:"getNamedQuery",value:function(e,t){return Up.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:uv(e.bundledQuery),readTime:Fd(e.readTime)}}(t)),Up.resolve()}}]),e}(),Um=function(){function e(){w(this,e),this.overlays=new Vf(of.comparator),this.Ii=new Map}return k(e,[{key:"getOverlay",value:function(e,t){return Up.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Up.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Up.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=gd(),i=t.length+1,a=new of(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Up.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Vf((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=gd(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=gd(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Up.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Zp(t,n));var a=this.Ii.get(t);void 0===a&&(a=kd(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Fm=function(){function e(){w(this,e),this.Ti=new zf(Vm.Ei),this.Ai=new zf(Vm.Ri)}return k(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Vm(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Vm(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new of(new Bl([])),r=new Vm(n,e),i=new Vm(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new of(new Bl([])),n=new Vm(t,e),r=new Vm(t,e+1),i=kd();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Vm(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Vm=function(){function e(t,n){w(this,e),this.key=t,this.Ci=n}return k(e,null,[{key:"Ei",value:function(e,t){return of.comparator(e.key,t.key)||Ol(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Ol(e.Ci,t.Ci)||of.comparator(e.key,t.key)}}]),e}(),qm=function(){function e(t,n){w(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new zf(Vm.Ei)}return k(e,[{key:"checkEmpty",value:function(e){return Up.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Jp(i,t,n,r);this.Bs.push(a);var o,s=p(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new Vm(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Up.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Up.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Up.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Up.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Up.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Vm(t,0),i=new Vm(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Up.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zf(Ol);return t.forEach((function(e){var t=new Vm(e,0),i=new Vm(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Up.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;of.isDocumentKey(i)||(i=i.child(""));var a=new Vm(new of(i),0),o=new zf(Ol);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Up.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;yl(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Up.forEach(t.mutations,(function(i){var a=new Vm(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Vm(t,0),r=this.Ni.firstAfterOrEqual(n);return Up.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Up.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Bm=function(){function e(t){w(this,e),this.$i=t,this.docs=new Vf(of.comparator),this.size=0}return k(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Up.resolve(n?n.document.mutableCopy():Cf.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=vd();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cf.newInvalidDocument(e))})),Up.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=vd(),i=new of(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Ff(Mf(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Up.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ml()}},{key:"Bi",value:function(e,t){return Up.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new zm(this)}},{key:"getSize",value:function(e){return Up.resolve(this.size)}}]),e}(),zm=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).Kn=e,r}return k(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Up.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(rm),Wm=function(){function e(t){w(this,e),this.persistence=t,this.Li=new dd((function(e){return Hf(e)}),Yf),this.lastRemoteSnapshotVersion=Ml.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Fm,this.targetCount=0,this.Ki=Wv.gn()}return k(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Up.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Up.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Up.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Up.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Up.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Wv(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Up.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Up.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Up.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Up.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Up.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Up.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Up.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Up.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Up.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Up.resolve(n)}},{key:"containsKey",value:function(e,t){return Up.resolve(this.qi.containsKey(t))}}]),e}(),Qm=function(){function e(t,n){var r=this;w(this,e),this.Gi={},this.overlays={},this.es=new Cl(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Wm(this),this.indexManager=new Sv,this.ds=function(e){return new Bm(e)}((function(e){return r.referenceDelegate.Qi(e)})),this.M=new ev(n),this._s=new Mm(this.M)}return k(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Um,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new qm(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;hl("MemoryPersistence","Starting transaction:",e);var i=new Km(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Up.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Km=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return k(n)}(Mp),Gm=function(){function e(t){w(this,e),this.persistence=t,this.Hi=new Fm,this.Ji=null}return k(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw ml()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Up.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Up.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Up.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Up.forEach(this.Xi,(function(r){var i=of.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Ml.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Up.or([function(){return Up.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Hm(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ym(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jm(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Xm=function(){function e(t,n,r,i){w(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return k(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&(o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new wl(a.error.code,a.error.message)),o?new e(t,n,a.state,i):(dl("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Zm=function(){function e(t,n,r){w(this,e),this.targetId=t,this.state=n,this.error=r}return k(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new wl(i.error.code,i.error.message)),a?new e(t,i.state,r):(dl("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),$m=function(){function e(t,n){w(this,e),this.clientId=t,this.activeTargetIds=n}return k(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Id(),o=0;i&&o<r.activeTargetIds.length;++o)i=af(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(dl("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ey=function(){function e(t,n){w(this,e),this.clientId=t,this.onlineState=n}return k(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(dl("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ty=function(){function e(){w(this,e),this.activeTargetIds=Id()}return k(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ny=function(){function e(t,n,r,i,a){w(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Vf(Ol),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Hm(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new ty),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return k(e,[{key:"start",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,d=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=p(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Hm(this.persistenceKey,i)))&&(o=$m.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(u=this.pr(s))&&this.Ir(u),c=p(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.ur(h)}catch(f){c.e(f)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Jm(this.persistenceKey,e));if(n){var r=Zm.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Jm(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return hl("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){hl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){hl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(hl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void dl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(d(f().mark((function e(){var r,i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}u=function(e){var t=Cl.A;if(null!=e)try{var n=JSON.parse(e);yl("number"==typeof n),t=n}catch(e){dl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Cl.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new Xm(this.currentUser,e,t,n),i=Ym(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=Ym(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=Jm(this.persistenceKey,e),i=new Zm(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return $m.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xm.tr(new ul(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return Zm.tr(r,t)}},{key:"pr",value:function(e){return ey.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:hl("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Lr(o,s).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Id();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ry=function(){function e(){w(this,e),this.Ur=new ty,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return k(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new ty,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),iy=function(){function e(){w(this,e)}return k(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ay=function(){function e(){var t=this;w(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return k(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){hl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=p(this.zr);try{for(t.s();!(e=t.n()).done;)(0,e.value)(0)}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){hl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=p(this.zr);try{for(t.s();!(e=t.n()).done;)(0,e.value)(1)}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),oy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sy=function(){function e(t){w(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return k(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),uy=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return k(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ol;o.listenOnce(tl.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case el.NO_ERROR:var t=o.getResponseJson();hl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case el.TIMEOUT:hl("Connection",'RPC "'+e+'" timed out'),a(new wl(bl.DEADLINE_EXCEEDED,"Request time out"));break;case el.HTTP_ERROR:var n=o.getStatus();if(hl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bl).indexOf(t)>=0?t:bl.UNKNOWN}(r.status);a(new wl(s,r.message))}else a(new wl(bl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new wl(bl.UNAVAILABLE,"Connection failed."));break;default:ml()}}finally{hl("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Zc(),a=$c(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new il({})),this.lo(o.initMessageHeaders,t,n),j()||F()||L().indexOf("Electron/")>=0||V()||L().indexOf("MSAppHost/")>=0||U()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");hl("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new sy({Jr:function(e){l?hl("Connection","Not sending because WebChannel is closed:",e):(c||(hl("Connection","Opening WebChannel transport."),u.open(),c=!0),hl("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,al.EventType.OPEN,(function(){l||hl("Connection","WebChannel transport opened.")})),h(u,al.EventType.CLOSE,(function(){l||(l=!0,hl("Connection","WebChannel transport closed"),f.ro())})),h(u,al.EventType.ERROR,(function(e){l||(l=!0,pl("Connection","WebChannel transport errored:",e),f.ro(new wl(bl.UNAVAILABLE,"The operation could not be completed")))})),h(u,al.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];yl(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){hl("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=od[e];if(void 0!==t)return hd(t)}(a),s=i.message;void 0===o&&(o=bl.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new wl(o,s)),u.close()}else hl("Connection","WebChannel received:",n),f.oo(n)}})),h(a,nl.STAT_EVENT,(function(e){e.stat===rl.PROXY?hl("Connection","Detected buffering proxy"):e.stat===rl.NOPROXY&&hl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){w(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return k(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);hl("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return hl("RestConnection","Received: ",e),e}),(function(t){throw pl("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=oy[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function cy(){return"undefined"!=typeof window?window:null}function ly(){return"undefined"!=typeof document?document:null}function fy(e){return new Ld(e,!0)}var hy=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;w(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return k(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&hl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),dy=function(){function e(t,n,r,i,a,o,s,u){w(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new hy(t,n)}return k(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===bl.RESOURCE_EXHAUSTED?(dl(n.toString()),dl("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===bl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=v(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new wl(bl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return hl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(hl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),py=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o,s){var u;return w(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return k(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ml()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(yl(void 0===t||"string"==typeof t),Kl.fromBase64String(t||"")):(yl(void 0===t||t instanceof Uint8Array),Kl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?bl.UNKNOWN:hd(e.code);return new wl(t,e.message||"")}(o);n=new Ad(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=zd(e,u.document.name),l=Fd(u.document.updateTime),f=new Af({mapValue:{fields:u.document.fields}}),h=Cf.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Td(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=zd(e,v.document),y=v.readTime?Fd(v.readTime):Ml.min(),g=Cf.newNoDocument(m,y),b=v.removedTargetIds||[];n=new Td([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var k=zd(e,w.document),x=w.removedTargetIds||[];n=new Td([],x,k,null)}else{if(!("filter"in t))return ml();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new ld(_),T=I.targetId;n=new Sd(T,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ml.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ml.min():t.readTime?Fd(t.readTime):Ml.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Kd(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Jf(r)?{documents:Zd(e,r)}:{query:$d(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Md(e,t.resumeToken):t.snapshotVersion.compareTo(Ml.min())>0&&(n.readTime=jd(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ml()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Kd(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(dy),vy=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o,s){var u;return w(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return k(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,s(u(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(yl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(yl(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Fd(e.updateTime):Fd(t);return n.isEqual(Ml.min())&&(n=Fd(t)),new Kh(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Fd(e.commitTime);return this.listener.tu(n,t)}return yl(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Kd(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Jd(t.M,e)}))};this.Lo(n)}}]),n}(dy),my=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o;return w(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return k(n,[{key:"iu",value:function(){if(this.su)throw new wl(bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=v(i,2),o=a[0],s=a[1];return r.So.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wl(bl.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=v(i,2),o=a[0],s=a[1];return r.So._o(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wl(bl.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){function e(){w(this,e)}return k(e)}()),yy=function(){function e(t,n){w(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return k(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(dl(t),this.uu=!1):hl("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),gy=k((function e(t,n,r,i,a){var o=this;w(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ny(o),!e.t0){e.next=5;break}return hl("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gl(t)).wu.add(4),e.next=4,ky(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,by(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new yy(r,i)}));function by(e){return wy.apply(this,arguments)}function wy(){return wy=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ny(t)){e.next=18;break}n=p(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),wy.apply(this,arguments)}function ky(e){return xy.apply(this,arguments)}function xy(){return xy=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),xy.apply(this,arguments)}function Iy(e,t){var n=gl(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Ay(n)?Sy(n):ig(n).Mo()&&Ey(n,t))}function _y(e,t){var n=gl(e),r=ig(n);n._u.delete(t),r.Mo()&&Ty(n,t),0===n._u.size&&(r.Mo()?r.$o():Ny(n)&&n.yu.set("Unknown"))}function Ey(e,t){e.pu.Z(t.targetId),ig(e).Ho(t)}function Ty(e,t){e.pu.Z(t),ig(e).Jo(t)}function Sy(e){e.pu=new Cd({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),ig(e).start(),e.yu.au()}function Ay(e){return Ny(e)&&!ig(e).ko()&&e._u.size>0}function Ny(e){return 0===gl(e).wu.size}function Cy(e){e.pu=void 0}function Dy(e){return Py.apply(this,arguments)}function Py(){return Py=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Ey(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Py.apply(this,arguments)}function Oy(e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cy(t),Ay(t)?(t.yu.lu(n),Sy(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Ry.apply(this,arguments)}function Ly(e,t,n){return jy.apply(this,arguments)}function jy(){return jy=d(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Ad&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=p(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),hl("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,My(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Td?t.pu.ut(n):n instanceof Sd?t.pu._t(n):t.pu.ht(n),r.isEqual(Ml.min())){e.next=29;break}return e.prev=14,e.next=17,Em(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Kl.EMPTY_BYTE_STRING,n.snapshotVersion)),Ty(e,t);var r=new $p(n.target,t,1,n.sequenceNumber);Ey(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),hl("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,My(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),jy.apply(this,arguments)}function My(e,t,n){return Uy.apply(this,arguments)}function Uy(){return Uy=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zp(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,ky(t);case 5:t.yu.set("Offline"),r||(r=function(){return Em(t.localStore)}),t.asyncQueue.enqueueRetryable(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hl("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,by(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Uy.apply(this,arguments)}function Fy(e,t){return t().catch((function(n){return My(e,n,t)}))}function Vy(e){return qy.apply(this,arguments)}function qy(){return qy=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gl(t),r=ag(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!By(n)){e.next=19;break}return e.prev=3,e.next=6,Sm(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,zy(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,My(n,e.t0);case 17:e.next=2;break;case 19:Wy(n)&&Qy(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),qy.apply(this,arguments)}function By(e){return Ny(e)&&e.du.length<10}function zy(e,t){e.du.push(t);var n=ag(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Wy(e){return Ny(e)&&!ag(e).ko()&&e.du.length>0}function Qy(e){ag(e).start()}function Ky(e){return Gy.apply(this,arguments)}function Gy(){return Gy=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ag(t).nu();case 1:case"end":return e.stop()}}),e)}))),Gy.apply(this,arguments)}function Hy(e){return Yy.apply(this,arguments)}function Yy(){return Yy=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ag(t),r=p(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Yy.apply(this,arguments)}function Jy(e,t,n){return Xy.apply(this,arguments)}function Xy(){return Xy=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=Xp.from(i,n,r),e.next=3,Fy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Vy(t);case 5:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}function Zy(e,t){return $y.apply(this,arguments)}function $y(){return $y=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ag(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fd(i=n.code)||i===bl.ABORTED){e.next=7;break}return r=t.du.shift(),ag(t).Fo(),e.next=5,Fy(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Vy(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Wy(t)&&Qy(t);case 5:case"end":return e.stop()}}),e)}))),$y.apply(this,arguments)}function eg(e,t){return tg.apply(this,arguments)}function tg(){return tg=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=gl(t)).asyncQueue.verifyOperationInProgress(),hl("RemoteStore","RemoteStore received new credentials"),i=Ny(r),r.wu.add(3),e.next=6,ky(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,by(r);case 12:case"end":return e.stop()}}),e)}))),tg.apply(this,arguments)}function ng(e,t){return rg.apply(this,arguments)}function rg(){return rg=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,by(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,ky(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),rg.apply(this,arguments)}function ig(e){return e.Iu||(e.Iu=function(e,t,n){var r=gl(e);return r.iu(),new py(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Dy.bind(null,e),eo:Oy.bind(null,e),zo:Ly.bind(null,e)}),e.mu.push(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Ay(e)?Sy(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Cy(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function ag(e){return e.Tu||(e.Tu=function(e,t,n){var r=gl(e);return r.iu(),new vy(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Ky.bind(null,e),eo:Zy.bind(null,e),eu:Hy.bind(null,e),tu:Jy.bind(null,e)}),e.mu.push(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Vy(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(hl("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var og=function(){function e(t,n,r,i,a){w(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new kl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return k(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wl(bl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function sg(e,t){if(dl("AsyncQueue","".concat(t,": ").concat(e)),zp(e))return new wl(bl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ug=function(){function e(t){w(this,e),this.comparator=t?function(e,n){return t(e,n)||of.comparator(e.key,n.key)}:function(e,t){return of.comparator(e.key,t.key)},this.keyedMap=yd(),this.sortedSet=new Vf(this.comparator)}return k(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),cg=function(){function e(){w(this,e),this.Eu=new Vf(of.comparator)}return k(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ml():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),lg=function(){function e(t,n,r,i,a,o,s,u){w(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return k(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ug.emptySet(n),a,r,i,!0,!1)}}]),e}(),fg=k((function e(){w(this,e),this.Ru=void 0,this.listeners=[]})),hg=k((function e(){w(this,e),this.queries=new dd((function(e){return _h(e)}),Ih),this.onlineState="Unknown",this.bu=new Set}));function dg(e,t){return pg.apply(this,arguments)}function pg(){return pg=d(f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new fg),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=sg(e.t0,"Initialization of query '".concat(Eh(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&bg(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),pg.apply(this,arguments)}function vg(e,t){return mg.apply(this,arguments)}function mg(){return mg=d(f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),mg.apply(this,arguments)}function yg(e,t){var n,r=gl(e),i=!1,a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=p(u.listeners);try{for(l.s();!(c=l.n()).done;)c.value.Vu(o)&&(i=!0)}catch(f){l.e(f)}finally{l.f()}u.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&bg(r)}function gg(e,t,n){var r=gl(e),i=r.queries.get(t);if(i){var a,o=p(i.listeners);try{for(o.s();!(a=o.n()).done;)a.value.onError(n)}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function bg(e){e.bu.forEach((function(e){e.next()}))}var wg=function(){function e(t,n,r){w(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return k(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=p(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new lg(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.ku&&n||e.docs.isEmpty()&&"Offline"!==t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=lg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),kg=function(){function e(t,n){w(this,e),this.payload=t,this.byteLength=n}return k(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),xg=function(){function e(t){w(this,e),this.M=t}return k(e,[{key:"wi",value:function(e){return zd(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Yd(this.M,e.document,!1):Cf.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Fd(e)}}]),e}(),Ig=function(){function e(t,n,r){w(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_g(t)}return k(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Bl.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new xg(this.M),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=p(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||kd()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,d,v,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gl(t),o=kd(),s=vd(),u=p(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.wi(l.metadata.name),l.document&&(o=o.add(h)),(d=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),s=s.insert(h,d)}catch(f){u.e(f)}finally{u.f()}return v=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Am(a,function(e){return kh(mh(Bl.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return m=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Tm(e,v,s).next((function(t){return v.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,m.targetId).next((function(){return a.fs.addMatchingKeys(e,o,m.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(this.localStore,new xg(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=p(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Lm(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function _g(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Eg=k((function e(t){w(this,e),this.key=t})),Tg=k((function e(t){w(this,e),this.key=t})),Sg=function(){function e(t,n){w(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=kd(),this.mutatedKeys=kd(),this.Gu=Ah(t),this.Qu=new ug(this.Gu)}return k(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new cg,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Th(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||c&&n.Gu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ml()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new lg(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new cg,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=kd(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Tg(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Eg(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=kd();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return lg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Ag=k((function e(t,n,r){w(this,e),this.query=t,this.targetId=n,this.view=r})),Ng=k((function e(t){w(this,e),this.key=t,this.na=!1})),Cg=function(){function e(t,n,r,i,a,o){w(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new dd((function(e){return _h(e)}),Ih),this.ra=new Map,this.oa=new Set,this.ua=new Vf(of.comparator),this.aa=new Map,this.ca=new Fm,this.ha={},this.la=new Map,this.fa=Wv.yn(),this.onlineState="Unknown",this.da=void 0}return k(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Dg(e,t){return Pg.apply(this,arguments)}function Pg(){return Pg=d(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gb(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Am(r.localStore,kh(n));case 8:return s=e.sent,r.isPrimaryClient&&Iy(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Og(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Pg.apply(this,arguments)}function Og(e,t,n,r){return Rg.apply(this,arguments)}function Rg(){return Rg=d(f().mark((function e(t,n,r,i){var a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Dm(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Jg(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Dm(t.localStore,n,!0);case 3:return a=e.sent,o=new Sg(n,a._i),s=o.Wu(a.documents),u=Ed.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Jg(t,r,c.Xu),l=new Ag(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Rg.apply(this,arguments)}function Lg(e,t){return jg.apply(this,arguments)}function jg(){return jg=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Ih(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Nm(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),_y(r.remoteStore,i.targetId),Hg(r,i.targetId)})).catch(Yv);case 9:e.next=14;break;case 11:return Hg(r,i.targetId),e.next=14,Nm(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function Mg(e,t){return Ug.apply(this,arguments)}function Ug(){return Ug=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.prev=1,e.next=4,function(e,t){var n=gl(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Kl.EMPTY_BYTE_STRING,Ml.min()).withLastLimboFreeSnapshotVersion(Ml.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var s=vd();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Tm(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Ml.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Up.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=i,e}))}(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(yl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?yl(n.na):e.removedDocuments.size>0&&(yl(n.na),n.na=!1))})),e.next=8,$g(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Yv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ug.apply(this,arguments)}function Fg(e,t,n){var r=gl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=gl(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=p(n.listeners);try{for(a.s();!(i=a.n()).done;)i.value.Pu(t)&&(r=!0)}catch(o){a.e(o)}finally{a.f()}})),r&&bg(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Vg(e,t,n){return qg.apply(this,arguments)}function qg(){return qg=d(f().mark((function e(t,n,r){var i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=gl(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Vf(of.comparator)).insert(o,Cf.newNoDocument(o,Ml.min())),u=kd().add(o),c=new _d(Ml.min(),new Map,new zf(Ol),s,u),e.next=9,Mg(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),Zg(i),e.next=16;break;case 14:return e.next=16,Nm(i.localStore,n,!1).then((function(){return Hg(i,n,r)})).catch(Yv);case 16:case"end":return e.stop()}}),e)}))),qg.apply(this,arguments)}function Bg(e,t){return zg.apply(this,arguments)}function zg(){return zg=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=n.batch.batchId,e.prev=1,e.next=4,function(e,t){var n=gl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Up.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);yl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(r.localStore,n);case 4:return a=e.sent,Gg(r,i,null),Kg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,$g(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zg.apply(this,arguments)}function Wg(e,t,n){return Qg.apply(this,arguments)}function Qg(){return Qg=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gl(t),e.prev=1,e.next=4,function(e,t){var n=gl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return yl(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Gg(i,n,r),Kg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,$g(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Qg.apply(this,arguments)}function Kg(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function Gg(e,t,n){var r=gl(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Hg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=p(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||Yg(e,t)}))}function Yg(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(_y(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),Zg(e))}function Jg(e,t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Eg?(e.ca.addReference(a.key,t),Xg(e,a)):a instanceof Tg?(hl("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||Yg(e,a.key)):ml()}}catch(o){i.e(o)}finally{i.f()}}function Xg(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(hl("SyncEngine","New document in limbo: "+n),e.oa.add(r),Zg(e))}function Zg(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new of(Bl.fromString(t)),r=e.fa.next();e.aa.set(r,new Ng(n)),e.ua=e.ua.insert(n,r),Iy(e.remoteStore,new $p(kh(mh(n.path)),r,2,Cl.A))}}function $g(e,t,n){return eb.apply(this,arguments)}function eb(){return eb=d(f().mark((function e(t,n,r){var i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gl(t),a=[],o=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){s.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=bm.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Up.forEach(n,(function(t){return Up.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Up.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),zp(e.t0)){e.next=10;break}throw e.t0;case 10:hl("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=p(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t){return nb.apply(this,arguments)}function nb(){return nb=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=gl(t)).currentUser.isEqual(n)){e.next=11;break}return hl("SyncEngine","User change. New user:",n.toKey()),e.next=5,Im(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new wl(bl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,$g(r,i.di);case 11:case"end":return e.stop()}}),e)}))),nb.apply(this,arguments)}function rb(e,t){var n=gl(e),r=n.aa.get(t);if(r&&r.na)return kd().add(r.key);var i=kd(),a=n.ra.get(t);if(!a)return i;var o,s=p(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function ib(e,t){return ab.apply(this,arguments)}function ab(){return ab=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.next=3,Dm(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&Jg(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t){return sb.apply(this,arguments)}function sb(){return sb=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.abrupt("return",Om(r.localStore,n).then((function(e){return $g(r,e)})));case 2:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function ub(e,t,n,r){return cb.apply(this,arguments)}function cb(){return cb=d(f().mark((function e(t,n,r,i){var a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gl(t),e.next=3,function(e,t){var n=gl(e),r=gl(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Up.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Vy(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Gg(a,n,i||null),Kg(a,n),function(e,t){gl(gl(e).Bs)._n(t)}(a.localStore,n)):ml();case 11:return e.next=13,$g(a,o);case 13:e.next=16;break;case 15:hl("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t,n){return fb.apply(this,arguments)}function fb(){return fb=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,v,m,y,g,b;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=gl(t),a=[],o=[],s=p(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ra.get(c))||0===h.length){e.next=34;break}return e.next=11,Am(i.localStore,kh(h[0]));case 11:l=e.sent,d=p(h),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return m=v.value,y=i.ia.get(m),e.next=20,ib(i,y);case 20:(g=e.sent).snapshot&&o.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Pm(i.localStore,c);case 36:return b=e.sent,e.next=39,Am(i.localStore,b);case 39:return l=e.sent,e.next=42,Og(i,hb(b),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),fb.apply(this,arguments)}function hb(e){return vh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function db(e){var t=gl(e);return gl(gl(t.localStore).persistence).Fs()}function pb(e,t,n,r){return vb.apply(this,arguments)}function vb(){return vb=d(f().mark((function e(t,n,r,i){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=gl(t)).da){e.next=3;break}return e.abrupt("return",void hl("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Om(a.localStore,Sh(o[0]));case 10:return s=e.sent,u=_d.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,$g(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Nm(a.localStore,n,!0);case 17:return Hg(a,n,i),e.abrupt("break",20);case 19:ml();case 20:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function mb(e,t,n){return yb.apply(this,arguments)}function yb(){return yb=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=gb(t)).da){e.next=45;break}a=p(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return hl("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Pm(i.localStore,s);case 12:return u=e.sent,e.next=15,Am(i.localStore,u);case 15:return c=e.sent,e.next=18,Og(i,hb(u),c.targetId,!1);case 18:Iy(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=p(r),e.prev=30,d=f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Nm(i.localStore,t,!1).then((function(){_y(i.remoteStore,t),Hg(i,t)})).catch(Yv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),yb.apply(this,arguments)}function gb(e){var t=gl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vg.bind(null,t),t.sa.zo=yg.bind(null,t.eventManager),t.sa.wa=gg.bind(null,t.eventManager),t}function bb(e){var t=gl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wg.bind(null,t),t}var wb=function(){function e(){w(this,e),this.synchronizeTabs=!1}return k(e,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=fy(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return xm(this.persistence,new wm,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Qm(Gm.Yi,this.M)}},{key:"ga",value:function(e){return new ry}},{key:"terminate",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),kb=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return k(n,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,bb(this.Ta.syncEngine);case 6:return e.next=8,Vy(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Ia",value:function(e){return xm(this.persistence,new wm,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new $v(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=ym(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?jv.withCacheSize(this.cacheSizeBytes):jv.DEFAULT;return new pm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cy(),ly(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new ry}}]),n}(wb),xb=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return k(n,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){var r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof ny,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:ub.bind(null,r),Br:pb.bind(null,r),Lr:mb.bind(null,r),Fs:db.bind(null,r),Fr:ob.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gb(r=gl(t)),bb(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,lb(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,ng(r.remoteStore,!0);case 9:o=p(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Iy(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Hg(r,t),Nm(r.localStore,t,!0)})),_y(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,lb(r,c);case 21:return function(e){var t=gl(e);t.aa.forEach((function(e,n){_y(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Vf(of.comparator)}(r),r.da=!1,e.next=25,ng(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ga",value:function(e){var t=cy();if(!ny.vt(t))throw new wl(bl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ym(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ny(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(kb),Ib=function(){function e(){w(this,e)}return k(e,[{key:"initialize",value:function(){var e=d(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Fg(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tb.bind(null,this.syncEngine),e.next=12,ng(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"createEventManager",value:function(e){return new hg}},{key:"createDatastore",value:function(e){var t,n=fy(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uy(t));return function(e,t,n,r){return new my(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Fg(o.syncEngine,e,0)},a=ay.vt()?new ay:new iy,new gy(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Cg(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gl(t),hl("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,ky(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function _b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return d(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Eb=function(){function e(t){w(this,e),this.observer=t,this.muted=!1}return k(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Tb=function(){function e(t,n){var r=this;w(this,e),this.Ra=t,this.M=n,this.metadata=new kl,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return k(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ma",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Pa",value:function(){var e=d(f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new kg(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Da()<0,!e.t0){e.next=5;break}return e.next=4,this.Ca();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=9;break}case 7:e.next=0;break;case 9:if(0!==this.buffer.length){e.next=11;break}return e.abrupt("return",null);case 11:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Sa",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Sb=function(){function e(t){w(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return k(e,[{key:"lookup",value:function(){var e=d(f().mark((function e(t){var n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new wl(bl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=Kd(r.M)+"/documents",a={documents:n.map((function(e){return Bd(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){yl(!!t.found),t.found.name,t.found.updateTime;var n=zd(e,t.found.name),r=Fd(t.found.updateTime),i=new Af({mapValue:{fields:t.found.fields}});return Cf.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){yl(!!t.missing),yl(!!t.readTime);var n=zd(e,t.missing),r=Fd(t.readTime);return Cf.newNoDocument(n,r)}(e,t):ml()}(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());yl(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=d(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=of.fromPath(t);n.mutations.push(new cd(r,n.precondition(r)))})),e.next=7,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=Kd(r.M)+"/documents",a={writes:n.map((function(e){return Jd(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ml();t=Ml.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new wl(bl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Gh.updateTime(t):Gh.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ml.min()))throw new wl(bl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gh.updateTime(t)}return Gh.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ab=function(){function e(t,n,r,i,a){w(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new hy(this.asyncQueue,"transaction_retry")}return k(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Sb(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!nf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!fd(t)}return!1}}]),e}(),Nb=function(){function e(t,n,r,i){var a=this;w(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ul.UNAUTHENTICATED,this.clientId=Pl.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hl("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return hl("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return k(e,[{key:"getConfiguration",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new wl(bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new kl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(d(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=sg(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Cb(e,t){return Db.apply(this,arguments)}function Db(){return Db=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),hl("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Im(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Pb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Rb(t);case 3:return r=e.sent,hl("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return eg(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return eg(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Rb(e){return Lb.apply(this,arguments)}function Lb(){return Lb=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return hl("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Cb(t,new wb);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function jb(e){return Mb.apply(this,arguments)}function Mb(){return Mb=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return hl("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Pb(t,new Ib);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Mb.apply(this,arguments)}function Ub(e){return Rb(e).then((function(e){return e.persistence}))}function Fb(e){return Rb(e).then((function(e){return e.localStore}))}function Vb(e){return jb(e).then((function(e){return e.remoteStore}))}function qb(e){return jb(e).then((function(e){return e.syncEngine}))}function Bb(e){return zb.apply(this,arguments)}function zb(){return zb=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jb(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Dg.bind(null,n.syncEngine),r.onUnlisten=Lg.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function Wb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Eb({next:function(a){t.enqueueAndForget((function(){return vg(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new wl(bl.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new wl(bl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new wg(mh(n.path),a,{includeMetadataChanges:!0,ku:!0});return dg(e,o)},i.next=3,Bb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Qb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Eb({next:function(n){t.enqueueAndForget((function(){return vg(e,o)})),n.fromCache&&"server"===r.source?i.reject(new wl(bl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new wg(n,a,{includeMetadataChanges:!0,ku:!0});return dg(e,o)},i.next=3,Bb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Kb=new Map;function Gb(e,t,n){if(!n)throw new wl(bl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Hb(e,t,n,r){if(!0===t&&!0===r)throw new wl(bl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Yb(e){if(!of.isDocumentKey(e))throw new wl(bl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jb(e){if(of.isDocumentKey(e))throw new wl(bl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ml()}function Zb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wl(bl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xb(e);throw new wl(bl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $b(e,t){if(t<=0)throw new wl(bl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ew=function(){function e(t){var n;if(w(this,e),void 0===t.host){if(void 0!==t.ssl)throw new wl(bl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wl(bl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Hb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return k(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),tw=function(){function e(t,n,r){w(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,t instanceof tf?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wl(bl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tf(e.options.projectId)}(t))}return k(e,[{key:"app",get:function(){if(!this._app)throw new wl(bl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new wl(bl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Il;switch(e.type){case"gapi":var t=e.client;return yl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Sl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new wl(bl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Kb.get(e);t&&(hl("ComponentProvider","Removing Datastore"),Kb.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}(),nw=function(){function e(t,n,r){w(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return k(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new iw(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),rw=function(){function e(t,n,r){w(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return k(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),iw=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,e,r,mh(i)))._path=i,a.type="collection",a}return k(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new nw(this.firestore,null,new of(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(rw);function aw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),Gb("collection","path",t),e instanceof tw){var a=Bl.fromString.apply(Bl,[t].concat(r));return Jb(a),new iw(e,null,a)}if(!(e instanceof nw||e instanceof iw))throw new wl(bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bl.fromString.apply(Bl,[t].concat(r)));return Jb(o),new iw(e.firestore,null,o)}function ow(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),1===arguments.length&&(t=Pl.R()),Gb("doc","path",t),e instanceof tw){var a=Bl.fromString.apply(Bl,[t].concat(r));return Yb(a),new nw(e,null,new of(a))}if(!(e instanceof nw||e instanceof iw))throw new wl(bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bl.fromString.apply(Bl,[t].concat(r)));return Yb(o),new nw(e.firestore,e instanceof iw?e.converter:null,new of(o))}function sw(e,t){return e=ee(e),t=ee(t),(e instanceof nw||e instanceof iw)&&(t instanceof nw||t instanceof iw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uw(e,t){return e=ee(e),t=ee(t),e instanceof rw&&t instanceof rw&&e.firestore===t.firestore&&Ih(e._query,t._query)&&e.converter===t.converter}var cw=function(){function e(){var t=this;w(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new hy(this,"async_queue_retry"),this.Qa=function(){var e=ly();e&&hl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=ly();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return k(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=ly();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new kl;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),zp(e.t0)){e.next=12;break}throw e.t0;case 12:hl("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw dl("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=og.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&ml()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Ya",value:function(e){var t,n=p(this.La);try{for(n.s();!(t=n.n()).done;)if(t.value.timerId===e)return!0}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=p(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function lw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var fw=function(){function e(){w(this,e),this._progressObserver={},this._taskCompletionResolver=new kl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return k(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),hw=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new cw,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return k(n,[{key:"_terminate",value:function(){return this._firestoreClient||pw(this),this._firestoreClient.terminate()}}]),n}(tw);function dw(e){return e._firestoreClient||pw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pw(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ef(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Nb(e._authCredentials,e._appCheckCredentials,e._queue,r)}function vw(e,t,n){var r=new kl;return e.asyncQueue.enqueue(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Cb(e,n);case 3:return i.next=5,Pb(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===bl.FAILED_PRECONDITION||e.code===bl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function mw(e){if(e._initialized||e._terminated)throw new wl(bl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yw=function(){function e(){w(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new wl(bl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wl(n)}return k(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),gw=function(){function e(t){w(this,e),this._byteString=t}return k(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Kl.fromBase64String(t))}catch(t){throw new wl(bl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Kl.fromUint8Array(t))}}]),e}(),bw=k((function e(t){w(this,e),this._methodName=t})),ww=function(){function e(t,n){if(w(this,e),!isFinite(t)||t<-90||t>90)throw new wl(bl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new wl(bl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return k(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ol(this._lat,e._lat)||Ol(this._long,e._long)}}]),e}(),kw=/^__.*__$/,xw=function(){function e(t,n,r){w(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return k(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new nd(e,this.data,this.fieldMask,t,this.fieldTransforms):new td(e,this.data,t,this.fieldTransforms)}}]),e}(),Iw=function(){function e(t,n,r){w(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return k(e,[{key:"toMutation",value:function(e,t){return new nd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function _w(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ml()}}var Ew=function(){function e(t,n,r,i,a,o){w(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return k(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return Qw(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(_w(this.ec)&&kw.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),Tw=function(){function e(t,n,r){w(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||fy(t)}return k(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ew({ec:e,methodName:t,hc:n,path:Wl.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Sw(e){var t=e._freezeSettings(),n=fy(e._databaseId);return new Tw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Aw(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);qw("Data must be an object, but it was:",o,r);var s,u,c=Fw(r,o);if(a.merge)s=new Ql(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=p(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Bw(t,l.value,n);if(!o.contains(d))throw new wl(bl.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Kw(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}s=new Ql(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new xw(new Af(c),s,u)}var Nw=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(bw);function Cw(e,t,n){return new Ew({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Dw=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"_toFieldTransform",value:function(e){return new Qh(e.path,new Mh)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(bw),Pw=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e)).fc=r,i}return k(n,[{key:"_toFieldTransform",value:function(e){var t=Cw(this,e,!0),n=this.fc.map((function(e){return Uw(e,t)})),r=new Uh(n);return new Qh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bw),Ow=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e)).fc=r,i}return k(n,[{key:"_toFieldTransform",value:function(e){var t=Cw(this,e,!0),n=this.fc.map((function(e){return Uw(e,t)})),r=new Vh(n);return new Qh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bw),Rw=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e)).dc=r,i}return k(n,[{key:"_toFieldTransform",value:function(e){var t=new Bh(e.M,Ph(e.M,this.dc));return new Qh(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bw);function Lw(e,t,n,r){var i=e.lc(1,t,n);qw("Data must be an object, but it was:",i,r);var a=[],o=Af.empty();Fl(r,(function(e,r){var s=Ww(t,e,n);r=ee(r);var u=i.oc(s);if(r instanceof Nw)a.push(s);else{var c=Uw(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Ql(a);return new Iw(o,s,i.fieldTransforms)}function jw(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[Bw(t,r,n)],u=[i];if(a.length%2!=0)throw new wl(bl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Bw(t,a[c])),u.push(a[c+1]);for(var l=[],f=Af.empty(),h=s.length-1;h>=0;--h)if(!Kw(l,s[h])){var d=s[h],p=u[h];p=ee(p);var v=o.oc(d);if(p instanceof Nw)l.push(d);else{var m=Uw(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Ql(l);return new Iw(f,y,o.fieldTransforms)}function Mw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Uw(n,e.lc(r?4:3,t))}function Uw(e,t){if(Vw(e=ee(e)))return qw("Unsupported field value:",t,e),Fw(e,t);if(e instanceof bw)return function(e,t){if(!_w(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=Uw(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ph(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jl.fromDate(e);return{timestampValue:jd(t.M,n)}}if(e instanceof jl){var r=new jl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jd(t.M,r)}}if(e instanceof ww)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gw)return{bytesValue:Md(t.M,e._byteString)};if(e instanceof nw){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Vd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(Xb(e)))}(e,t)}function Fw(e,t){var n={};return Vl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fl(e,(function(e,r){var i=Uw(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Vw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jl||e instanceof ww||e instanceof gw||e instanceof nw||e instanceof bw)}function qw(e,t,n){if(!Vw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Xb(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function Bw(e,t,n){if((t=ee(t))instanceof yw)return t._internalPath;if("string"==typeof t)return Ww(e,t);throw Qw("Field path arguments must be of type string or ",e,!1,void 0,n)}var zw=new RegExp("[~\\*/\\[\\]]");function Ww(e,t,n){if(t.search(zw)>=0)throw Qw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return a(yw,h(t.split(".")))._internalPath}catch(_){throw Qw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Qw(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new wl(bl.INVALID_ARGUMENT,s+e+u)}function Kw(e,t){return e.some((function(e){return e.isEqual(t)}))}var Gw=function(){function e(t,n,r,i,a){w(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return k(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new nw(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Hw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Yw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Hw=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"data",value:function(){return s(u(n.prototype),"data",this).call(this)}}]),n}(Gw);function Yw(e,t){return"string"==typeof t?Ww(e,t):t instanceof yw?t._internalPath:t._delegate._internalPath}var Jw=function(){function e(t,n){w(this,e),this.hasPendingWrites=t,this.fromCache=n}return k(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Xw=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o,s){var u;return w(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return k(n,[{key:"exists",value:function(){return s(u(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Zw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Yw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Gw),Zw=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(u(n.prototype),"data",this).call(this,e)}}]),n}(Xw),$w=function(){function e(t,n,r,i){w(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jw(i.hasPendingWrites,i.fromCache),this.query=r}return k(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Zw(n._firestore,n._userDataWriter,r.key,r,new Jw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new wl(bl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Zw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Zw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ek(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function ek(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ml()}}function tk(e,t){return e instanceof Xw&&t instanceof Xw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $w&&t instanceof $w&&e._firestore===t._firestore&&uw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function nk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new wl(bl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rk=k((function e(){w(this,e)}));function ik(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++)e=a[i]._apply(e);return e}var ak=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return k(n,[{key:"_apply",value:function(e){var t=Sw(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new wl(bl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){hk(o,a);var u,c=[],l=p(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(fk(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=fk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||hk(o,a),s=Mw(n,"where",o,"in"===a||"not-in"===a);var h=eh.create(i,a,s);return function(e,t){if(t.S()){var n=gh(e);if(null!==n&&!n.isEqual(t.field))throw new wl(bl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=yh(e);null!==r&&dk(0,t.field,r)}var i=function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new wl(bl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wl(bl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new rw(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(rk),ok=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return k(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new wl(bl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wl(bl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lh(t,n);return function(e,t){if(null===yh(e)){var n=gh(e);null!==n&&dk(0,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new rw(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ph(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(rk),sk=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return k(n,[{key:"_apply",value:function(e){return new rw(e.firestore,e.converter,xh(e._query,this.yc,this.Ic))}}]),n}(rk),uk=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return k(n,[{key:"_apply",value:function(e){var t=lk(e,this.type,this.Tc,this.Ec);return new rw(e.firestore,e.converter,function(e,t){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(rk),ck=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return k(n,[{key:"_apply",value:function(e){var t=lk(e,this.type,this.Tc,this.Ec);return new rw(e.firestore,e.converter,function(e,t){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(rk);function lk(e,t,n,r){if(n[0]=ee(n[0]),n[0]instanceof Gw)return function(e,t,n,r,i){if(!r)throw new wl(bl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=p(wh(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(mf(t,r.key));else{var c=r.data.field(u.field);if(Xl(c))throw new wl(bl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new wl(bl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new ch(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Sw(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new wl(bl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new wl(bl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!bh(e)&&-1!==c.indexOf("/"))throw new wl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Bl.fromString(c));if(!of.isDocumentKey(l))throw new wl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new of(l);s.push(mf(t,f))}else{var h=Mw(n,r,c);s.push(h)}}return new ch(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function fk(e,t,n){if("string"==typeof(n=ee(n))){if(""===n)throw new wl(bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bh(t)&&-1!==n.indexOf("/"))throw new wl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Bl.fromString(n));if(!of.isDocumentKey(r))throw new wl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return mf(e,new of(r))}if(n instanceof nw)return mf(e,n._key);throw new wl(bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xb(n),"."))}function hk(e,t){if(!Array.isArray(e)||0===e.length)throw new wl(bl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new wl(bl.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function dk(e,t,n){if(!n.isEqual(t))throw new wl(bl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var pk={maxAttempts:5},vk=function(){function e(){w(this,e)}return k(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(cf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ml()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Fl(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ww(Yl(e.latitude),Yl(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Zl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($l(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Hl(e);return new jl(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Bl.fromString(e);yl(cp(n));var r=new tf(n.get(1),n.get(3)),i=new of(n.popFirst(5));return r.isEqual(t)||dl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function mk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var yk=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).firestore=e,r}return k(n,[{key:"convertBytes",value:function(e){return new gw(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new nw(this.firestore,null,t)}}]),n}(vk),gk=function(){function e(t,n){w(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Sw(t)}return k(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=bk(e,this._firestore),i=mk(r.converter,t,n),a=Aw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gh.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=bk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof yw?jw(this._dataReader,"WriteBatch.update",i._key,t,n,o):Lw(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gh.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=bk(e,this._firestore);return this._mutations=this._mutations.concat(new ud(t._key,Gh.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new wl(bl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function bk(e,t){if((e=ee(e)).firestore!==t)throw new wl(bl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var wk=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).firestore=e,r}return k(n,[{key:"convertBytes",value:function(e){return new gw(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new nw(this.firestore,null,t)}}]),n}(vk);function kk(e,t,n){e=Zb(e,nw);var r=Zb(e.firestore,hw),i=mk(e.converter,t,n);return _k(r,[Aw(Sw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gh.none())])}function xk(e,t,n){e=Zb(e,nw);for(var r=Zb(e.firestore,hw),i=Sw(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return _k(r,[("string"==typeof(t=ee(t))||t instanceof yw?jw(i,"updateDoc",e._key,t,n,o):Lw(i,"updateDoc",e._key,t)).toMutation(e._key,Gh.exists(!0))])}function Ik(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ee(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||lw(n[u])||(s=n[u],u++);var c,l,h,p={includeMetadataChanges:s.includeMetadataChanges};if(lw(n[u])){var v=n[u];n[u]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[u+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[u+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof nw)l=Zb(e.firestore,hw),h=mh(e._key.path),c={next:function(t){n[u]&&n[u](Ek(l,e,t))},error:n[u+1],complete:n[u+2]};else{var m=Zb(e,rw);l=Zb(m.firestore,hw),h=m._query;var y=new wk(l);c={next:function(e){n[u]&&n[u](new $w(l,y,m,e))},error:n[u+1],complete:n[u+2]},nk(e._query)}return function(e,t,n,r){var i=new Eb(r),a=new wg(t,i,n);return e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dg,t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vg,t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dw(l),h,p,c)}function _k(e,t){return function(e,t){var n=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bb(t),e.prev=1,e.next=4,function(e,t){var n,r=gl(e),i=jl.now(),a=t.reduce((function(e,t){return e.add(t.key)}),kd());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,s=[],u=p(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Zh(c,n.get(c.key));null!=l&&s.push(new nd(c.key,l,Nf(l.value.mapValue),Gh.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Vf(Ol)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,$g(i,a.changes);case 9:return e.next=11,Vy(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=sg(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,qb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(dw(e),t)}function Ek(e,t,n){var r=n.docs.get(t._key),i=new wk(e);return new Xw(e,i,t._key,r,new Jw(n.hasPendingWrites,n.fromCache),t.converter)}var Tk=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,r))._firestore=e,i}return k(n,[{key:"get",value:function(e){var t=this,r=bk(e,this._firestore),i=new wk(this._firestore);return s(u(n.prototype),"get",this).call(this,e).then((function(e){return new Xw(t._firestore,i,r._key,e._document,new Jw(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){w(this,e),this._firestore=t,this._transaction=n,this._dataReader=Sw(t)}return k(e,[{key:"get",value:function(e){var t=this,n=bk(e,this._firestore),r=new yk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ml();var i=e[0];if(i.isFoundDocument())return new Gw(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Gw(t._firestore,r,n._key,null,n.converter);throw ml()}))}},{key:"set",value:function(e,t,n){var r=bk(e,this._firestore),i=mk(r.converter,t,n),a=Aw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=bk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof yw?jw(this._dataReader,"Transaction.update",i._key,t,n,o):Lw(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=bk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Sk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new wl("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function Ak(){if("undefined"==typeof Uint8Array)throw new wl("unimplemented","Uint8Arrays are not available in this environment.")}function Nk(){if("undefined"==typeof atob)throw new wl("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cl=e}(We),Ue(new ne("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new hw(i,new El(e.getProvider("auth-internal")),new Nl(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Je(sl,"3.4.9",e),Je(sl,"3.4.9","esm2017")}();var Ck=function(){function e(t){w(this,e),this._delegate=t}return k(e,[{key:"toBase64",value:function(){return Nk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ak(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Nk(),new e(gw.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ak(),new e(gw.fromUint8Array(t))}}]),e}();function Dk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Pk=function(){function e(){w(this,e)}return k(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){mw(e=Zb(e,hw));var n=dw(e),r=e._freezeSettings(),i=new Ib;return vw(n,i,new kb(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){mw(e=Zb(e,hw));var t=dw(e),n=e._freezeSettings(),r=new Ib;return vw(t,r,new xb(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new wl(bl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new kl;return e._queue.enqueueAndForgetEvenWhileRestricted(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vp.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Vp.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ym(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Ok=function(){function e(t,n,r){var i=this;w(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tf||(this._appCompat=t)}return k(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Zb(e,tw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&pl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=ul.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[P(JSON.stringify({alg:"none",type:"JWT"})),P(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new wl(bl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ul(u)}e._authCredentials=new _l(new xl(o,s))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ub(e);case 2:return n=t.sent,t.next=5,Vb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=gl(e);return t.wu.delete(0),by(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(dw(e=Zb(e,hw)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ub(e);case 2:return n=t.sent,t.next=5,Vb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gl(t)).wu.add(0),e.next=4,ky(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(dw(e=Zb(e,hw)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Hb("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ny((r=gl(t)).remoteStore)||hl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=gl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=sg(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),n.next=3,qb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(dw(e=Zb(e,hw)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new Eb(t);return e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gl(e).bu.add(t),t.next()},t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gl(e).bu.delete(t)},t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dw(e=Zb(e,hw)),lw(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new wl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Gk(this,aw(this._delegate,e))}catch(e){throw Fk(e,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Uk(this,ow(this._delegate,e))}catch(e){throw Fk(e,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Wk(this,function(e,t){if(e=Zb(e,tw),Gb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new wl(bl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new rw(e,null,function(e){return new ph(Bl.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Fk(e,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Zb(e,hw);var r=Object.assign(Object.assign({},pk),n);return function(e){if(e.maxAttempts<1)throw new wl(bl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){var a;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return jb(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Ab(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(dw(e),(function(n){return t(new Tk(e,n))}),r)}(this._delegate,(function(n){return e(new Lk(t,n))}))}},{key:"batch",value:function(){var e=this;return dw(this._delegate),new jk(new gk(this._delegate,(function(t){return _k(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return function(e,t){var n=dw(e=Zb(e,hw)),r=new fw;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Tb(e,t)}(function(e,t){if(e instanceof Uint8Array)return _b(e,t);if(e instanceof ArrayBuffer)return _b(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,fy(t));e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r=gl(e);(function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=gl(e),r=Fd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_g(i)),a=new Ig(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,$g(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=gl(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(pl("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))},t.next=3,qb(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=gl(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Fb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(dw(e=Zb(e,hw)),t).then((function(t){return t?new rw(e,null,t.query):null}))}(this._delegate,e).then((function(e){return e?new Wk(t,e):null}))}}]),e}(),Rk=function(e){y(n,e);var t=g(n);function n(e){var r;return w(this,n),(r=t.call(this)).firestore=e,r}return k(n,[{key:"convertBytes",value:function(e){return new Ck(new gw(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Uk.forKey(t,this.firestore,null)}}]),n}(vk),Lk=function(){function e(t,n){w(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Rk(t)}return k(e,[{key:"get",value:function(e){var t=this,n=Hk(e);return this._delegate.get(n).then((function(e){return new Bk(t._firestore,new Xw(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Hk(e);return n?(Sk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=Hk(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=Hk(e);return this._delegate.delete(t),this}}]),e}(),jk=function(){function e(t){w(this,e),this._delegate=t}return k(e,[{key:"set",value:function(e,t,n){var r=Hk(e);return n?(Sk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=Hk(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=Hk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Mk=function(){function e(t,n,r){w(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return k(e,[{key:"fromFirestore",value:function(e,t){var n=new Zw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zk(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Rk(t),n),i.set(n,a)),a}}]),e}();Mk.INSTANCES=new WeakMap;var Uk=function(){function e(t,n){w(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Rk(t)}return k(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Gk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Gk(this.firestore,aw(this._delegate,e))}catch(e){throw Fk(e,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ee(e))instanceof nw&&sw(this._delegate,e)}},{key:"set",value:function(e,t){t=Sk("DocumentReference.set",t);try{return t?kk(this._delegate,e,t):kk(this._delegate,e)}catch(e){throw Fk(e,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?xk(this._delegate,e):xk.apply(void 0,[this._delegate,e,t].concat(r))}catch(e){throw Fk(e,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return _k(Zb(e.firestore,hw),[new ud(e._key,Gh.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vk(n),a=qk(n,(function(t){return new Bk(e.firestore,new Xw(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ik(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null==e?void 0:e.source)?function(e){e=Zb(e,nw);var t=Zb(e.firestore,hw),n=dw(t),r=new wk(t);return function(e,t){var n=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=gl(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new wl(bl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=sg(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Xw(t,r,e._key,n,new Jw(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Zb(e,nw);var t=Zb(e.firestore,hw);return Wb(dw(t),e._key,{source:"server"}).then((function(n){return Ek(t,e,n)}))}(this._delegate):function(e){e=Zb(e,nw);var t=Zb(e.firestore,hw);return Wb(dw(t),e._key).then((function(n){return Ek(t,e,n)}))}(this._delegate),t.then((function(e){return new Bk(n.firestore,new Xw(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Mk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new wl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new nw(n._delegate,r,new of(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new nw(n._delegate,r,t))}}]),e}();function Fk(e,t,n){return e.message=e.message.replace(t,n),e}function Vk(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!Dk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function qk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Dk(e[0])?e[0]:Dk(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Bk=function(){function e(t,n){w(this,e),this._firestore=t,this._delegate=n}return k(e,[{key:"ref",get:function(){return new Uk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tk(this._delegate,e._delegate)}}]),e}(),zk=function(e){y(n,e);var t=g(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ml()}(void 0!==t),t}}]),n}(Bk),Wk=function(){function e(t,n){w(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Rk(t)}return k(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ik(this._delegate,function(e,t,n){var r=t,i=Yw("where",e);return new ak(i,r,n)}(t,n,r)))}catch(t){throw Fk(t,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ik(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Yw("orderBy",e);return new ok(n,t)}(t,n)))}catch(t){throw Fk(t,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ik(this._delegate,function(e){return $b("limit",e),new sk("limit",e,"F")}(t)))}catch(t){throw Fk(t,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ik(this._delegate,function(e){return $b("limitToLast",e),new sk("limitToLast",e,"L")}(t)))}catch(t){throw Fk(t,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,ik(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uk("startAt",t,!0)}.apply(void 0,arguments)))}catch(r){throw Fk(r,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ik(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uk("startAfter",t,!1)}.apply(void 0,arguments)))}catch(r){throw Fk(r,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ik(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ck("endBefore",t,!1)}.apply(void 0,arguments)))}catch(r){throw Fk(r,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ik(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ck("endAt",t,!0)}.apply(void 0,arguments)))}catch(r){throw Fk(r,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return uw(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null==e?void 0:e.source)?function(e){e=Zb(e,rw);var t=Zb(e.firestore,hw),n=dw(t),r=new wk(t);return function(e,t){var n=new kl;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dm(t,n,!0);case 3:i=e.sent,a=new Sg(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=sg(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new $w(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Zb(e,rw);var t=Zb(e.firestore,hw),n=dw(t),r=new wk(t);return Qb(n,e._query,{source:"server"}).then((function(n){return new $w(t,r,e,n)}))}(this._delegate):function(e){e=Zb(e,rw);var t=Zb(e.firestore,hw),n=dw(t),r=new wk(t);return nk(e._query),Qb(n,e._query).then((function(n){return new $w(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Kk(n.firestore,new $w(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vk(n),a=qk(n,(function(t){return new Kk(e.firestore,new $w(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ik(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Mk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Qk=function(){function e(t,n){w(this,e),this._firestore=t,this._delegate=n}return k(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new zk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Kk=function(){function e(t,n){w(this,e),this._firestore=t,this._delegate=n}return k(e,[{key:"query",get:function(){return new Wk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new zk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Qk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new zk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tk(this._delegate,e._delegate)}}]),e}(),Gk=function(e){y(n,e);var t=g(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return k(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Uk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Uk(this.firestore,void 0===e?ow(this._delegate):ow(this._delegate,e))}catch(e){throw Fk(e,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Zb(e.firestore,hw),r=ow(e),i=mk(e.converter,t);return _k(n,[Aw(Sw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gh.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Uk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return sw(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Mk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Wk);function Hk(e){return Zb(e,nw)}var Yk=function(){function e(){w(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=a(yw,n)}return k(e,[{key:"isEqual",value:function(e){return(e=ee(e))instanceof yw&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Wl.keyField().canonicalString())}}]),e}(),Jk=function(){function e(t){w(this,e),this._delegate=t}return k(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Dw("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Nw("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Pw("arrayUnion",t)}.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ow("arrayRemove",t)}.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Rw("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Xk={Firestore:Ok,GeoPoint:ww,Timestamp:jl,Blob:Ck,Transaction:Lk,WriteBatch:jk,DocumentReference:Uk,DocumentSnapshot:Bk,Query:Wk,QueryDocumentSnapshot:zk,QuerySnapshot:Kk,CollectionReference:Gk,FieldPath:Yk,FieldValue:Jk,setLogLevel:function(e){!function(e){ll.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ne("firestore-compat",(function(e){return function(e,t){return new Ok(e,t,new Pk)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())}),"PUBLIC").setServiceProps(Object.assign({},Xk)))}(e),e.registerVersion("@firebase/firestore-compat","0.1.18")}(pt);var Zk,$k=function(e,t){var n,r;return n=e.appId,r=pt.apps.filter((function(e){return e.options.appId===n})),(1===r.length?r[0]:null)||pt.initializeApp(e,t)};"pam"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using pjordan config"),Zk=$k({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using scott config"),Zk=$k({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),Zk=$k({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var ex=Zk,tx=ex.auth(),nx=ex.firestore();window.db=nx;var rx=N().createContext({}),ix="auth/user-not-found",ax="auth/network-request-failed",ox="Sorry, we have no record of a user with your email address",sx="A Network Error has occurred. Try again later.",ux=function(){var e=E(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=nx.collection("staff").doc(t.uid),e.next=5,n.get();case 5:return r=e.sent,e.abrupt("return",r.exists);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cx="signin",lx="register",fx="forgot-passwd",hx="email-verify",dx=function(e){var t=e.children,n=I((0,A.useState)(!1),2),r=n[0],i=n[1],a=I((0,A.useState)(null),2),o=a[0],s=a[1],u=I((0,A.useState)(null),2),c=u[0],l=u[1],f=I((0,A.useState)(""),2),h=f[0],d=f[1],p=I((0,A.useState)(cx),2),v=p[0],m=p[1],y=I((0,A.useState)(""),2),g=y[0],b=y[1],w=I((0,A.useState)(""),2),k=w[0],x=w[1],_=I((0,A.useState)(""),2),T=_[0],C=_[1],D=I((0,A.useState)(!1),2),P=D[0],O=D[1],R=I((0,A.useState)(!1),2),L=R[0],j=R[1],M=I((0,A.useState)({}),2),U=M[0],F=M[1],V=function(){i(!1),O(!1),l(null),j(!1)};(0,A.useEffect)((function(){tx.onAuthStateChanged((function(e){s(e),e?(i(!0),l(e.email.substr(0,e.email.indexOf("@"))),ux(e).then((function(t){O(t),e.emailVerified?j(!0):(d("A message has been sent to your email address. It contains a link which will verify that you are the owner of that email address"),m(hx))})).catch((function(e){return console.error(e)}))):V()}))}),[]);var q=function(){return nx.collection("users").doc(o.uid)||null},B=function(){var e=E(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q().get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return N().createElement(rx.Provider,{value:{auth:tx,currentUser:o,authMsg:h,setAuthMsg:d,registerErrorMsg:g,setRegisterErrorMsg:b,registerUserWithEmailAndPassword:function(e,t){tx.createUserWithEmailAndPassword(e,t).then((function(e){e.user.sendEmailVerification(),setErrorMsg("")})).catch((function(e){switch(e.code){case"auth/email-already-in-use":b("An account already exists with that email address");break;case ax:b(sx);break;default:console.log(e.code),b(e.message)}}))},loginError:k,setLoginError:x,loginUserWithEmailAndPassword:function(e,t){tx.signInWithEmailAndPassword(e,t).then((function(){x("")})).catch((function(e){switch(e.code){case"auth/wrong-password":x("Incorrect Password. Try again.");break;case ix:x(ox);break;case ax:x(sx);break;default:console.log(e.code),x(e.message)}}))},passwdResetError:T,setPasswdResetError:C,sendOutPasswordReset:function(e){tx.sendPasswordResetEmail(e).then((function(){d("You should soon recieve an email with a password reset link it. After reseting you password, you will be able to sign in."),m(cx)})).catch((function(e){switch(e.code){case ix:C(ox);break;case ax:C(sx);break;default:console.log(e.code),C(e.message)}}))},currAuthComponent:v,setCurrAuthComponent:m,signOutUser:function(){tx.signOut().then((function(){V()})).catch((function(e){return console.log(e)}))},userName:c,isAuthenticated:r,isStaff:P,emailVerified:L,setEmailVerified:j,userPrefs:U,setUserPrefs:F,saveUserData:function(e,t){var n,r,i;q().set((i=t,(r=e)in(n={})?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n),{merge:!0})},getUserData:B}},t)},px=n(779),vx=n.n(px),mx=n(62),yx=n.n(mx),gx=n(985);yx()(gx.Z,{insert:"head",singleton:!1});var bx=gx.Z.locals||{},wx=function(e){var t=e.visible,n=e.stateToggler;return N().createElement("span",{className:vx()(bx["input-group-text"],"material-icons-outlined"),onClick:n},t?"visibility":"visibility_off")},kx=function(){var e=I((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,A.useContext)(rx),i=r.authMsg,a=r.loginError,o=r.loginUserWithEmailAndPassword,s=r.setCurrAuthComponent;return N().createElement("div",null,N().createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,n=t.email,r=t.password;o(n.value,r.value)}},N().createElement("div",{className:bx.container},N().createElement("div",{className:bx.row},N().createElement("h3",null,"Sign In")),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"email",className:vx()(bx["col-sm-2"],bx["col-form-label"])},"Email address"),N().createElement("div",{className:bx["col-sm-10"]},N().createElement("input",{id:"email",name:"email",type:"email",className:bx["form-control"],placeholder:"Enter email",required:!0}))),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"password",className:vx()(bx["col-sm-2"],bx["col-form-label"])},"Password"),N().createElement("div",{className:vx()(bx["col-sm-10"],bx["input-group"])},N().createElement("input",{id:"password",name:"password",type:t?"text":"password",className:bx["form-control"],placeholder:"Enter password",required:!0}),N().createElement(wx,{visible:t,stateToggler:function(){return n(!t)}}))),N().createElement("div",{className:bx.row},N().createElement("p",{className:bx["text-danger"]},a)),N().createElement("div",{className:bx.row},N().createElement("p",null,i)),N().createElement("button",{type:"submit",className:vx()(bx.btn,bx["btn-primary"])},"Sign In"),N().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),s(fx)}},"I forgot my Password"),N().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),s(lx)}},"Register"))))},xx=function(){var e=I((0,A.useState)(!1),2),t=e[0],n=e[1],r=I((0,A.useState)(!1),2),i=r[0],a=r[1],o=(0,A.useContext)(rx),s=o.setCurrAuthComponent,u=o.registerErrorMsg,c=o.registerUserWithEmailAndPassword;return N().createElement("div",null,N().createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,n=t.email,r=t.password;c(n.value,r.value)}},N().createElement("div",{className:bx.container},N().createElement("div",{className:bx.row},N().createElement("h3",null,"Sign up for MedDBriefer")),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"classCode",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Class Code"),N().createElement("div",{className:bx["col-sm-9"]},N().createElement("input",{className:bx["form-control"],id:"classCode",name:"classCode",type:"text",placeholder:"example: demo",required:!0}))),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"emailAddress",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Email"),N().createElement("div",{className:bx["col-sm-9"]},N().createElement("input",{className:bx["form-control"],id:"emailAddress",name:"email",type:"email",placeholder:"example: john.doe@gmail.com",required:!0}))),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"password",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Password"),N().createElement("div",{className:vx()(bx["col-sm-9"],bx["input-group"])},N().createElement("input",{id:"password",name:"password",type:t?"text":"password",className:bx["form-control"],placeholder:"Enter password",required:!0}),N().createElement(wx,{visible:t,stateToggler:function(){return n(!t)}}))),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"confirmPassword",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Confirm Password"),N().createElement("div",{className:vx()(bx["col-sm-9"],bx["input-group"])},N().createElement("input",{className:bx["form-control"],id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",placeholder:"Password",required:!0}),N().createElement(wx,{visible:i,stateToggler:function(){return a(!i)}}))),N().createElement("div",{className:bx.row},N().createElement("p",{className:bx["text-danger"]},u)),N().createElement("button",{type:"submit",className:vx()(bx.btn,bx["btn-primary"])},"Sign Up"),N().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),s(cx)}},"I already have an account."))))},Ix=function(){var e=(0,A.useContext)(rx),t=e.sendOutPasswordReset,n=e.passwdResetError,r=e.setLoginError,i=e.setPasswdResetError,a=e.setCurrAuthComponent;return N().createElement("div",null,N().createElement("form",{onSubmit:function(e){e.preventDefault();var n=e.target.elements.email;r(""),t(n.value).then((function(){})).catch((function(e){i(e.message)}))}},N().createElement("div",{className:bx.container},N().createElement("div",{className:bx.row},N().createElement("h3",null,"MedDBriefer Password Reset Form")),N().createElement("div",{className:bx.row},N().createElement("label",{htmlFor:"email",className:vx()(bx["col-sm-1"],bx["col-form-label"])},"Email"),N().createElement("div",{className:bx["col-sm-11"]},N().createElement("input",{id:"email",name:"email",type:"email",className:bx["form-control"],placeholder:"Enter email",required:!0}))),N().createElement("div",{className:bx.row},N().createElement("p",{className:bx["text-danger"]},n)),N().createElement("div",{className:bx.row},N().createElement("button",{type:"submit",className:vx()(bx.btn,bx["btn-primary"])},"Send Password Reset Email"),N().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),r(""),a(cx)}},"I remembered my password!")))))},_x=function(){var e=(0,A.useContext)(rx),t=e.authMsg,n=e.currentUser,r=e.setAuthFlowComponent,i=e.setAuthMsg,a=e.setEmailVerified,o=function e(){setTimeout((function(){n.reload().then((function(){n.emailVerified?(a(!0),r(cx),i("")):e()}))}),5e3)};return(0,A.useEffect)((function(){n.emailVerified?(a(!0),i(""),r(cx)):(a(!1),o())}),[]),N().createElement("div",{className:bx.container},N().createElement("div",{className:bx.row},N().createElement("h4",null,t)),N().createElement("div",{className:bx.row},N().createElement("p",null,"You will arrive at your destination web page soon after clicking on the verification link.")),N().createElement("div",{className:bx.row},N().createElement("p",null,'Didn\'t recieve a verification email? Verification link expired? Click "Resend Verification Email".')),N().createElement("div",{className:bx.row},N().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-primary"]),onClick:function(){n.emailVerified?console.log("email address already verified"):n.sendEmailVerification().then((function(){o()})).catch((function(e){return console.log(e)}))}},"Resend Verification Email")))},Ex=function(e){var t=e.heading,n=void 0===t?"You must be logged in to access this page":t,r=(0,A.useContext)(rx).currAuthComponent;return N().createElement("div",null,N().createElement("h3",{className:bx["text-center"]},n),function(){switch(r){case lx:return N().createElement(xx,null);case fx:return N().createElement(Ix,null);case hx:return N().createElement(_x,null);default:return N().createElement(kx,null)}}())};function Tx(){return Tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tx.apply(this,arguments)}function Sx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ax=n(128),Nx=["component","authFlowLayout"],Cx=function(e){var t=e.component,n=e.authFlowLayout,r=Sx(e,Nx);return(0,A.useContext)(rx).emailVerified?N().createElement(Ax.Route,Tx({},r,{render:function(e){return N().createElement(t,e)}})):n?N().createElement(n,r,N().createElement(Ex,r)):N().createElement(Ex,r)},Dx=["component","authFlowLayout"],Px=function(e){var t=e.msg,n=void 0===t?"Staff Privileges are required to access this page.":t;return N().createElement("div",null,n)},Ox=function(e){var t=e.component,n=e.authFlowLayout,r=Sx(e,Dx),i=(0,A.useContext)(rx),a=i.isAuthenticated,o=i.isStaff,s=i.emailVerified;return o&&s?N().createElement(Ax.Route,Tx({},r,{render:function(e){return N().createElement(t,e)}})):a&&s?n?N().createElement(Ax.Route,Tx({},r,{render:function(e){return N().createElement(n,e,N().createElement(Px,null))}})):N().createElement(Px,null):n?N().createElement(Ax.Route,Tx({},r,{render:function(e){return N().createElement(n,e,N().createElement(Ex,r))}})):N().createElement(Ax.Route,Tx({},r,{render:function(e){return N().createElement(Ex,r)}}))}}(),x}())},5667:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},562:function(e){function t(e,t,n){return function e(t,n,i,a){var o,s=n[a];return n.length>a?(Array.isArray(t)?(s=r(s,t),o=t.slice()):o=Object.assign({},t),o[s]=e(void 0!==t[s]?t[s]:{},n,i,a+1),o):"function"===typeof i?i(t):i}(e,t="number"===typeof t?i(t.toString()):"string"===typeof t?i(t):t,n,0)}function n(e,t,n){t="number"===typeof t?i(t.toString()):"string"===typeof t?i(t):t;for(var r=0;r<t.length;r++){if(null===e||"object"!==typeof e)return n;var a=t[r];Array.isArray(e)&&"$end"===a&&(a=e.length-1),e=e[a]}return"undefined"===typeof e?n:e}function r(e,t){if("$end"===e&&(e=Math.max(t.length-1,0)),!/^\+?\d+$/.test(e))throw new Error("Array index '".concat(e,"' has to be an integer"));return parseInt(e)}function i(e){return e.split(".").reduce((function(e,t,n,r){var i=n>0&&r[n-1];if(i&&/(?:^|[^\\])\\$/.test(i)){var a=e.pop();e.push(a.slice(0,-1)+"."+t)}else e.push(t);return e}),[])}e.exports={set:t,get:n,delete:function(e,t){return function e(t,n,i){var a,o=n[i];return null===t||"object"!==typeof t||!Array.isArray(t)&&void 0===t[o]?t:n.length-1>i?(Array.isArray(t)?(o=r(o,t),a=t.slice()):a=Object.assign({},t),a[o]=e(t[o],n,i+1),a):(Array.isArray(t)?(o=r(o,t),a=[].concat(t.slice(0,o),t.slice(o+1))):delete(a=Object.assign({},t))[o],a)}(e,t="number"===typeof t?i(t.toString()):"string"===typeof t?i(t):t,0)},toggle:function(e,r){var i=n(e,r);return t(e,r,!Boolean(i))},merge:function(e,r,i){var a=n(e,r);return"object"===typeof a?Array.isArray(a)?t(e,r,a.concat(i)):t(e,r,null===a?i:Object.assign({},a,i)):"undefined"===typeof a?t(e,r,i):e}}},7828:function(e,t,n){"use strict";n.d(t,{lX:function(){return I},q_:function(){return N},ob:function(){return v},PP:function(){return D},Ep:function(){return p},Hp:function(){return m}});var r=n(7896);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&i(e),u=t&&i(t),c=s||u;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=o.length;h>=0;h--){var d=o[h];"."===d?a(o,h):".."===d?(a(o,h),f++):f&&(a(o,h),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=s(t),i=s(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(5704);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(e,t,n,i){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),a.state=t):(void 0===(a=(0,r.Z)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var w="popstate",k="hashchange";function x(){try{return window.history.state||{}}catch(e){return{}}}function I(e){void 0===e&&(e={}),g||(0,c.Z)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,s=void 0!==o&&o,u=a.getUserConfirmation,f=void 0===u?b:u,m=a.keyLength,I=void 0===m?6:m,_=e.basename?d(l(e.basename)):"";function E(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return _&&(a=h(a,_)),v(a,r,n)}function T(){return Math.random().toString(36).substr(2,I)}var S=y();function A(e){(0,r.Z)(V,e),V.length=t.length,S.notifyListeners(V.location,V.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(E(e.state))}function C(){P(E(x()))}var D=!1;function P(e){if(D)D=!1,A();else{S.confirmTransitionTo(e,"POP",f,(function(t){t?A({action:"POP",location:e}):function(e){var t=V.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(D=!0,j(i))}(e)}))}}var O=E(x()),R=[O.key];function L(e){return _+p(e)}function j(e){t.go(e)}var M=0;function U(e){1===(M+=e)&&1===e?(window.addEventListener(w,N),i&&window.addEventListener(k,C)):0===M&&(window.removeEventListener(w,N),i&&window.removeEventListener(k,C))}var F=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",a=v(e,r,T(),V.location);S.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,u=a.state;if(n)if(t.pushState({key:o,state:u},null,r),s)window.location.href=r;else{var c=R.indexOf(V.location.key),l=R.slice(0,c+1);l.push(a.key),R=l,A({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=v(e,r,T(),V.location);S.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,u=a.state;if(n)if(t.replaceState({key:o,state:u},null,r),s)window.location.replace(r);else{var c=R.indexOf(V.location.key);-1!==c&&(R[c]=a.key),A({action:i,location:a})}else window.location.replace(r)}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=S.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=S.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var _="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function S(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function A(e){window.location.replace(T(window.location.href)+"#"+e)}function N(e){void 0===e&&(e={}),g||(0,c.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?b:i,o=n.hashType,s=void 0===o?"slash":o,u=e.basename?d(l(e.basename)):"",f=E[s],m=f.encodePath,w=f.decodePath;function k(){var e=w(S());return u&&(e=h(e,u)),v(e)}var x=y();function I(e){(0,r.Z)(V,e),V.length=t.length,x.notifyListeners(V.location,V.action)}var N=!1,C=null;function D(){var e,t,n=S(),r=m(n);if(n!==r)A(r);else{var i=k(),o=V.location;if(!N&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(C===p(i))return;C=null,function(e){if(N)N=!1,I();else{var t="POP";x.confirmTransitionTo(e,t,a,(function(n){n?I({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(p(t));-1===n&&(n=0);var r=L.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(N=!0,j(i))}(e)}))}}(i)}}var P=S(),O=m(P);P!==O&&A(O);var R=k(),L=[p(R)];function j(e){t.go(e)}var M=0;function U(e){1===(M+=e)&&1===e?window.addEventListener(_,D):0===M&&window.removeEventListener(_,D)}var F=!1;var V={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+m(u+p(e))},push:function(e,t){var n="PUSH",r=v(e,void 0,void 0,V.location);x.confirmTransitionTo(r,n,a,(function(e){if(e){var t=p(r),i=m(u+t);if(S()!==i){C=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(p(V.location)),o=L.slice(0,a+1);o.push(t),L=o,I({action:n,location:r})}else I()}}))},replace:function(e,t){var n="REPLACE",r=v(e,void 0,void 0,V.location);x.confirmTransitionTo(r,n,a,(function(e){if(e){var t=p(r),i=m(u+t);S()!==i&&(C=t,A(i));var a=L.indexOf(p(V.location));-1!==a&&(L[a]=t),I({action:n,location:r})}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=x.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=x.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function C(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,s=void 0===o?0:o,u=t.keyLength,c=void 0===u?6:u,l=y();function f(e){(0,r.Z)(w,e),w.length=w.entries.length,l.notifyListeners(w.location,w.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=C(s,0,a.length-1),m=a.map((function(e){return v(e,void 0,"string"===typeof e?h():e.key||h())})),g=p;function b(e){var t=C(w.index+e,0,w.entries.length-1),r=w.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var w={length:m.length,action:"POP",location:m[d],index:d,entries:m,createHref:g,push:function(e,t){var r="PUSH",i=v(e,t,h(),w.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=v(e,t,h(),w.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(w.entries[w.index]=i,f({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return w}},7814:function(e,t,n){"use strict";var r=n(9479),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=h(n,y);try{c(t,y,g)}catch(b){}}}}return t}},8807:function(e,t,n){var r="undefined"!==typeof JSON?JSON:n(6903);e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n=t.space||"";"number"===typeof n&&(n=Array(n+1).join(" "));var o,s="boolean"===typeof t.cycles&&t.cycles,u=t.replacer||function(e,t){return t},c=t.cmp&&(o=t.cmp,function(e){return function(t,n){var r={key:t,value:e[t]},i={key:n,value:e[n]};return o(r,i)}}),l=[];return function e(t,o,f,h){var d=n?"\n"+new Array(h+1).join(n):"",p=n?": ":":";if(f&&f.toJSON&&"function"===typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=u.call(t,o,f))){if("object"!==typeof f||null===f)return r.stringify(f);if(i(f)){for(var v=[],m=0;m<f.length;m++){var y=e(f,m,f[m],h+1)||r.stringify(null);v.push(d+n+y)}return"["+v.join(",")+d+"]"}if(-1!==l.indexOf(f)){if(s)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(f);var g=a(f).sort(c&&c(f));for(v=[],m=0;m<g.length;m++){var b=e(f,o=g[m],f[o],h+1);if(b){var w=r.stringify(o)+p+b;v.push(d+n+w)}}return l.splice(l.indexOf(f),1),"{"+v.join(",")+d+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},6903:function(e,t,n){t.parse=n(2115),t.stringify=n(8101)},2115:function(e){var t,n,r,i,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:r}},s=function(e){return e&&e!==n&&o("Expected '"+e+"' instead of '"+n+"'"),n=r.charAt(t),t+=1,n},u=function(){var e,t="";for("-"===n&&(t="-",s("-"));n>="0"&&n<="9";)t+=n,s();if("."===n)for(t+=".";s()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,s(),"-"!==n&&"+"!==n||(t+=n,s());n>="0"&&n<="9";)t+=n,s();if(e=+t,isFinite(e))return e;o("Bad number")},c=function(){var e,t,r,i="";if('"'===n)for(;s();){if('"'===n)return s(),i;if("\\"===n)if(s(),"u"===n){for(r=0,t=0;t<4&&(e=parseInt(s(),16),isFinite(e));t+=1)r=16*r+e;i+=String.fromCharCode(r)}else{if("string"!==typeof a[n])break;i+=a[n]}else i+=n}o("Bad string")},l=function(){for(;n&&n<=" ";)s()},f=function(){var e=[];if("["===n){if(s("["),l(),"]"===n)return s("]"),e;for(;n;){if(e.push(i()),l(),"]"===n)return s("]"),e;s(","),l()}}o("Bad array")},h=function(){var e,t={};if("{"===n){if(s("{"),l(),"}"===n)return s("}"),t;for(;n;){if(e=c(),l(),s(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=i(),l(),"}"===n)return s("}"),t;s(","),l()}}o("Bad object")};i=function(){switch(l(),n){case"{":return h();case"[":return f();case'"':return c();case"-":return u();default:return n>="0"&&n<="9"?u():function(){switch(n){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}o("Unexpected '"+n+"'")}()}},e.exports=function(e,a){var s;return r=e,t=0,n=" ",s=i(),l(),n&&o("Syntax error"),"function"===typeof a?function e(t,n){var r,i,o=t[n];if(o&&"object"===typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(i=e(o,r))?o[r]=i:delete o[r]);return a.call(t,n,o)}({"":s},""):s}},8101:function(e){var t,n,r,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=a[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function s(e,i){var a,u,c,l,f,h=t,d=i[e];switch(d&&"object"===typeof d&&"function"===typeof d.toJSON&&(d=d.toJSON(e)),"function"===typeof r&&(d=r.call(i,e,d)),typeof d){case"string":return o(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(t+=n,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=d.length,a=0;a<l;a+=1)f[a]=s(a,d)||"null";return c=0===f.length?"[]":t?"[\n"+t+f.join(",\n"+t)+"\n"+h+"]":"["+f.join(",")+"]",t=h,c}if(r&&"object"===typeof r)for(l=r.length,a=0;a<l;a+=1)"string"===typeof(u=r[a])&&(c=s(u,d))&&f.push(o(u)+(t?": ":":")+c);else for(u in d)Object.prototype.hasOwnProperty.call(d,u)&&(c=s(u,d))&&f.push(o(u)+(t?": ":":")+c);return c=0===f.length?"{}":t?"{\n"+t+f.join(",\n"+t)+"\n"+h+"}":"{"+f.join(",")+"}",t=h,c}}e.exports=function(e,i,a){var o;if(t="",n="","number"===typeof a)for(o=0;o<a;o+=1)n+=" ";else"string"===typeof a&&(n=a);if(r=i,i&&"function"!==typeof i&&("object"!==typeof i||"number"!==typeof i.length))throw new Error("JSON.stringify");return s("",{"":e})}},576:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,f=128,h=256,d=1/0,p=9007199254740991,v=NaN,m=4294967295,y=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",h]],g="[object Arguments]",b="[object Array]",w="[object Boolean]",k="[object Date]",x="[object Error]",I="[object Function]",_="[object GeneratorFunction]",E="[object Map]",T="[object Number]",S="[object Object]",A="[object Promise]",N="[object RegExp]",C="[object Set]",D="[object String]",P="[object Symbol]",O="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",j="[object Float32Array]",M="[object Float64Array]",U="[object Int8Array]",F="[object Int16Array]",V="[object Int32Array]",q="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",W="[object Uint32Array]",Q=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,J=RegExp(H.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Ne="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ce="['\u2019]",De="[\\ud800-\\udfff]",Pe="["+Ne+"]",Oe="["+_e+"]",Re="\\d+",Le="[\\u2700-\\u27bf]",je="["+Te+"]",Me="[^\\ud800-\\udfff"+Ne+Re+Ee+Te+Se+"]",Ue="\\ud83c[\\udffb-\\udfff]",Fe="[^\\ud800-\\udfff]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Se+"]",ze="(?:"+je+"|"+Me+")",We="(?:"+Be+"|"+Me+")",Qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ke="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Oe+"|"+Ue+")"+"?",He="[\\ufe0e\\ufe0f]?",Ye=He+Ge+("(?:\\u200d(?:"+[Fe,Ve,qe].join("|")+")"+He+Ge+")*"),Je="(?:"+[Le,Ve,qe].join("|")+")"+Ye,Xe="(?:"+[Fe+Oe+"?",Oe,Ve,qe,De].join("|")+")",Ze=RegExp(Ce,"g"),$e=RegExp(Oe,"g"),et=RegExp(Ue+"(?="+Ue+")|"+Xe+Ye,"g"),tt=RegExp([Be+"?"+je+"+"+Qe+"(?="+[Pe,Be,"$"].join("|")+")",We+"+"+Ke+"(?="+[Pe,Be+ze,"$"].join("|")+")",Be+"?"+ze+"+"+Qe,Be+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+_e+Ae+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ot={};ot[j]=ot[M]=ot[U]=ot[F]=ot[V]=ot[q]=ot[B]=ot[z]=ot[W]=!0,ot[g]=ot[b]=ot[R]=ot[w]=ot[L]=ot[k]=ot[x]=ot[I]=ot[E]=ot[T]=ot[S]=ot[N]=ot[C]=ot[D]=ot[O]=!1;var st={};st[g]=st[b]=st[R]=st[L]=st[w]=st[k]=st[j]=st[M]=st[U]=st[F]=st[V]=st[E]=st[T]=st[S]=st[N]=st[C]=st[D]=st[P]=st[q]=st[B]=st[z]=st[W]=!0,st[x]=st[I]=st[O]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,lt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,dt=ft||ht||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===pt,yt=mt&&ft.process,gt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),bt=gt&&gt.isArrayBuffer,wt=gt&&gt.isDate,kt=gt&&gt.isMap,xt=gt&&gt.isRegExp,It=gt&&gt.isSet,_t=gt&&gt.isTypedArray;function Et(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function St(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ct(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Dt(e,t){return!!(null==e?0:e.length)&&qt(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Rt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Lt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ut=Qt("length");function Ft(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function qt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,zt,n)}function Bt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function zt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Ht(e,t)/n:v}function Qt(e){return function(t){return null==t?i:t[e]}}function Kt(e){return function(t){return null==e?i:e[t]}}function Gt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Ht(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function Xt(e){return function(t){return e(t)}}function Zt(e,t){return Ot(t,(function(t){return e[t]}))}function $t(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&qt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&qt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Kt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ut(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?dt:yn.defaults(dt.Object(),t,yn.pick(dt,it))).Array,r=t.Date,se=t.Error,_e=t.Function,Ee=t.Math,Te=t.Object,Se=t.RegExp,Ae=t.String,Ne=t.TypeError,Ce=n.prototype,De=_e.prototype,Pe=Te.prototype,Oe=t["__core-js_shared__"],Re=De.toString,Le=Pe.hasOwnProperty,je=0,Me=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ue=Pe.toString,Fe=Re.call(Te),Ve=dt._,qe=Se("^"+Re.call(Le).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=mt?t.Buffer:i,ze=t.Symbol,We=t.Uint8Array,Qe=Be?Be.allocUnsafe:i,Ke=cn(Te.getPrototypeOf,Te),Ge=Te.create,He=Pe.propertyIsEnumerable,Ye=Ce.splice,Je=ze?ze.isConcatSpreadable:i,Xe=ze?ze.iterator:i,et=ze?ze.toStringTag:i,nt=function(){try{var e=ha(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ft=r&&r.now!==dt.Date.now&&r.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Ee.ceil,vt=Ee.floor,yt=Te.getOwnPropertySymbols,gt=Be?Be.isBuffer:i,Ut=t.isFinite,Kt=Ce.join,gn=cn(Te.keys,Te),bn=Ee.max,wn=Ee.min,kn=r.now,xn=t.parseInt,In=Ee.random,_n=Ce.reverse,En=ha(t,"DataView"),Tn=ha(t,"Map"),Sn=ha(t,"Promise"),An=ha(t,"Set"),Nn=ha(t,"WeakMap"),Cn=ha(Te,"create"),Dn=Nn&&new Nn,Pn={},On=Fa(En),Rn=Fa(Tn),Ln=Fa(Sn),jn=Fa(An),Mn=Fa(Nn),Un=ze?ze.prototype:i,Fn=Un?Un.valueOf:i,Vn=Un?Un.toString:i;function qn(e){if(rs(e)&&!Ko(e)&&!(e instanceof Qn)){if(e instanceof Wn)return e;if(Le.call(e,"__wrapped__"))return Va(e)}return new Wn(e)}var Bn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function zn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Qn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Hn;++t<n;)this.add(e[t])}function Jn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Xn(e,t){var n=Ko(e),r=!n&&Qo(e),i=!n&&!r&&Jo(e),a=!n&&!r&&!i&&fs(e),o=n||r||i||a,s=o?Yt(e.length,Ae):[],u=s.length;for(var c in e)!t&&!Le.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ba(c,u))||s.push(c);return s}function Zn(e){var t=e.length;return t?e[Yr(0,t-1)]:i}function $n(e,t){return ja(Ci(e),ur(t,0,e.length))}function er(e){return ja(Ci(e))}function tr(e,t,n){(n!==i&&!Bo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Le.call(e,t)&&Bo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Bo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Di(t,Os(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:As(e,t[r]);return o}function ur(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,a,o){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ns(e))return e;var f=Ko(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ci(e,s)}else{var h=va(e),d=h==I||h==_;if(Jo(e))return _i(e,u);if(h==S||h==g||d&&!a){if(s=c||d?{}:ya(e),!u)return c?function(e,t){return Di(e,pa(e),t)}(e,function(e,t){return e&&Di(t,Rs(t),e)}(s,e)):function(e,t){return Di(e,da(e),t)}(e,ar(s,e))}else{if(!st[h])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case R:return Ei(e);case w:case k:return new r(+e);case L:return function(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case M:case U:case F:case V:case q:case B:case z:case W:return Ti(e,n);case E:return new r;case T:case D:return new r(e);case N:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new r;case P:return i=e,Fn?Te(Fn.call(i)):{}}var i}(e,h,u)}}o||(o=new Jn);var p=o.get(e);if(p)return p;o.set(e,s),us(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):is(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,o))}));var v=f?i:(l?c?aa:ia:c?Rs:Os)(e);return St(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,o))})),s}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Ne(a);return Pa((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Dt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Ot(t,Xt(n))),r?(a=Pt,o=!1):t.length>=200&&(a=$t,o=!1,t=new Yn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,o&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else a(t,f,r)||u.push(l)}return u}qn.templateSettings={escape:Z,evaluate:$,interpolate:ee,variable:"",imports:{_:qn}},qn.prototype=zn.prototype,qn.prototype.constructor=qn,Wn.prototype=Bn(zn.prototype),Wn.prototype.constructor=Wn,Qn.prototype=Bn(zn.prototype),Qn.prototype.constructor=Qn,Kn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Kn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return n===o?i:n}return Le.call(t,e)?t[e]:i},Kn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==i:Le.call(t,e)},Kn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===i?o:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Kn,map:new(Tn||Gn),string:new Kn}},Hn.prototype.delete=function(e){var t=la(this,e).delete(e);return this.size-=t?1:0,t},Hn.prototype.get=function(e){return la(this,e).get(e)},Hn.prototype.has=function(e){return la(this,e).has(e)},Hn.prototype.set=function(e,t){var n=la(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(e){return this.__data__.set(e,o),this},Yn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jn.prototype.get=function(e){return this.__data__.get(e)},Jn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(e,t),this.size=n.size,this};var dr=Ri(kr),pr=Ri(xr,!0);function vr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!ls(s):n(s,u)))var u=s,c=o}return c}function yr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function gr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ga),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?gr(s,t-1,n,r,i):Rt(i,s):r||(i[i.length]=s)}return i}var br=Li(),wr=Li(!0);function kr(e,t){return e&&br(e,t,Os)}function xr(e,t){return e&&wr(e,t,Os)}function Ir(e,t){return Ct(t,(function(t){return $o(e[t])}))}function _r(e,t){for(var n=0,r=(t=wi(t,e)).length;null!=e&&n<r;)e=e[Ua(t[n++])];return n&&n==r?e:i}function Er(e,t,n){var r=t(e);return Ko(e)?r:Rt(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in Te(e)?function(e){var t=Le.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(o){}var a=Ue.call(e);r&&(t?e[et]=n:delete e[et]);return a}(e):function(e){return Ue.call(e)}(e)}function Sr(e,t){return e>t}function Ar(e,t){return null!=e&&Le.call(e,t)}function Nr(e,t){return null!=e&&t in Te(e)}function Cr(e,t,r){for(var a=r?Pt:Dt,o=e[0].length,s=e.length,u=s,c=n(s),l=1/0,f=[];u--;){var h=e[u];u&&t&&(h=Ot(h,Xt(t))),l=wn(h.length,l),c[u]=!r&&(t||o>=120&&h.length>=120)?new Yn(u&&h):i}h=e[0];var d=-1,p=c[0];e:for(;++d<o&&f.length<l;){var v=h[d],m=t?t(v):v;if(v=r||0!==v?v:0,!(p?$t(p,m):a(f,m,r))){for(u=s;--u;){var y=c[u];if(!(y?$t(y,m):a(e[u],m,r)))continue e}p&&p.push(m),f.push(v)}}return f}function Dr(e,t,n){var r=null==(e=Aa(e,t=wi(t,e)))?e:e[Ua(Xa(t))];return null==r?i:Et(r,e,n)}function Pr(e){return rs(e)&&Tr(e)==g}function Or(e,t,n,r,a){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=Ko(e),u=Ko(t),c=s?b:va(e),l=u?b:va(t),f=(c=c==g?S:c)==S,h=(l=l==g?S:l)==S,d=c==l;if(d&&Jo(e)){if(!Jo(t))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new Jn),s||fs(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!a(new We(e),new We(t)));case w:case k:case T:return Bo(+e,+t);case x:return e.name==t.name&&e.message==t.message;case N:case D:return e==t+"";case E:var s=un;case C:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=na(s(e),s(t),r,i,a,o);return o.delete(e),l;case P:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var p=f&&Le.call(e,"__wrapped__"),v=h&&Le.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,y=v?t.value():t;return o||(o=new Jn),a(m,y,n,r,o)}}if(!d)return!1;return o||(o=new Jn),function(e,t,n,r,a,o){var s=1&n,u=ia(e),c=u.length,l=ia(t).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var h=u[f];if(!(s?h in t:Le.call(t,h)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);var m=s;for(;++f<c;){var y=e[h=u[f]],g=t[h];if(r)var b=s?r(g,y,h,t,e,o):r(y,g,h,e,t,o);if(!(b===i?y===g||a(y,g,n,r,o):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var w=e.constructor,k=t.constructor;w==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o)}(e,t,n,r,Or,a))}function Rr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Te(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=n[a])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var h=new Jn;if(r)var d=r(l,f,c,e,t,h);if(!(d===i?Or(f,l,3,r,h):d))return!1}}return!0}function Lr(e){return!(!ns(e)||(t=e,Me&&Me in t))&&($o(e)?qe:ge).test(Fa(e));var t}function jr(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?Ko(e)?Br(e[0],e[1]):qr(e):pu(e)}function Mr(e){if(!_a(e))return gn(e);var t=[];for(var n in Te(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=_a(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Vr(e,t){var r=-1,i=Ho(e)?n(e.length):[];return dr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function qr(e){var t=fa(e);return 1==t.length&&t[0][2]?Ta(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function Br(e,t){return ka(e)&&Ea(t)?Ta(Ua(e),t):function(n){var r=As(n,e);return r===i&&r===t?Ns(n,e):Or(t,r,3)}}function zr(e,t,n,r,a){e!==t&&br(t,(function(o,s){if(a||(a=new Jn),ns(o))!function(e,t,n,r,a,o,s){var u=Ca(e,n),c=Ca(t,n),l=s.get(c);if(l)return void tr(e,n,l);var f=o?o(u,c,n+"",e,t,s):i,h=f===i;if(h){var d=Ko(c),p=!d&&Jo(c),v=!d&&!p&&fs(c);f=c,d||p||v?Ko(u)?f=u:Yo(u)?f=Ci(u):p?(h=!1,f=_i(c,!0)):v?(h=!1,f=Ti(c,!0)):f=[]:os(c)||Qo(c)?(f=u,Qo(u)?f=bs(u):ns(u)&&!$o(u)||(f=ya(c))):h=!1}h&&(s.set(c,f),a(f,c,r,o,s),s.delete(c));tr(e,n,f)}(e,t,s,n,zr,r,a);else{var u=r?r(Ca(e,s),o,s+"",e,t,a):i;u===i&&(u=o),tr(e,s,u)}}),Rs)}function Wr(e,t){var n=e.length;if(n)return ba(t+=t<0?n:0,n)?e[t]:i}function Qr(e,t,n){t=t.length?Ot(t,(function(e){return Ko(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[au];var r=-1;t=Ot(t,Xt(ca()));var i=Vr(e,(function(e,n,i){var a=Ot(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Si(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Kr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=_r(e,o);n(s,o)&&ei(a,wi(o,e),s)}return a}function Gr(e,t,n,r){var i=r?Bt:qt,a=-1,o=t.length,s=e;for(e===t&&(t=Ci(t)),n&&(s=Ot(e,Xt(n)));++a<o;)for(var u=0,c=t[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ye.call(s,u,1),Ye.call(e,u,1);return e}function Hr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ba(i)?Ye.call(e,i,1):hi(e,i)}}return e}function Yr(e,t){return e+vt(In()*(t-e+1))}function Jr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Oa(Sa(e,t,au),e+"")}function Zr(e){return Zn(Bs(e))}function $r(e,t){var n=Bs(e);return ja(n,ur(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var a=-1,o=(t=wi(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=Ua(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var f=u[c];(l=r?r(f,c,u):i)===i&&(l=ns(f)?f:ba(t[a+1])?[]:{})}nr(u,c,l),u=u[c]}return e}var ti=Dn?function(e,t){return Dn.set(e,t),e}:au,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:au;function ri(e){return ja(Bs(e))}function ii(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!ls(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,au,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,c=ls(t),l=t===i;a<o;){var f=vt((a+o)/2),h=n(e[f]),d=h!==i,p=null===h,v=h===h,m=ls(h);if(s)var y=r||v;else y=l?v&&(r||d):u?v&&d&&(r||!p):c?v&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);y?a=f+1:o=f}return wn(o,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Bo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:ls(e)?v:+e}function li(e){if("string"==typeof e)return e;if(Ko(e))return Ot(e,li)+"";if(ls(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Dt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Pt;else if(a>=200){var c=t?null:Ji(e);if(c)return fn(c);o=!1,i=$t,u=new Yn}else u=t?[]:s;e:for(;++r<a;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function hi(e,t){return null==(e=Aa(e,t=wi(t,e)))||delete e[Ua(Xa(t))]}function di(e,t,n,r){return ei(e,t,n(_r(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function vi(e,t){var n=e;return n instanceof Qn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=hr(o[a]||s,e[u],t,r));return fi(gr(o,1),t,r)}function yi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function gi(e){return Yo(e)?e:[]}function bi(e){return"function"==typeof e?e:au}function wi(e,t){return Ko(e)?e:ka(e,t)?[e]:Ma(ws(e))}var ki=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Ii=ut||function(e){return dt.clearTimeout(e)};function _i(e,t){if(t)return e.slice();var n=e.length,r=Qe?Qe(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Ti(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=ls(e),s=t!==i,u=null===t,c=t===t,l=ls(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!l&&e<t||l&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function Ai(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,c=t.length,l=bn(o-s,0),f=n(c+l),h=!i;++u<c;)f[u]=t[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=e[a]);for(;l--;)f[u++]=e[a++];return f}function Ni(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,f=bn(o-u,0),h=n(f+l),d=!i;++a<f;)h[a]=e[a];for(var p=a;++c<l;)h[p+c]=t[c];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=e[a++]);return h}function Ci(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Di(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),a?or(n,u,c):nr(n,u,c)}return n}function Pi(e,t){return function(n,r){var i=Ko(n)?Tt:ir,a=t?t():{};return i(n,e,ca(r,2),a)}}function Oi(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&wa(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Te(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Ri(e,t){return function(n,r){if(null==n)return n;if(!Ho(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Te(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Li(e){return function(t,n,r){for(var i=-1,a=Te(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function ji(e){return function(t){var n=sn(t=ws(t))?pn(t):i,r=n?n[0]:t.charAt(0),a=n?xi(n,1).join(""):t.slice(1);return r[e]()+a}}function Mi(e){return function(t){return Lt($s(Qs(t).replace(Ze,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Fi(e){return function(t,n,r){var a=Te(t);if(!Ho(t)){var o=ca(n,3);t=Os(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Vi(e){return ra((function(t){var n=t.length,r=n,o=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ne(a);if(o&&!u&&"wrapper"==sa(s))var u=new Wn([],!0)}for(r=u?r:n;++r<n;){var c=sa(s=t[r]),l="wrapper"==c?oa(s):i;u=l&&xa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[sa(l[0])].apply(u,l[3]):1==s.length&&xa(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ko(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function qi(e,t,r,a,o,s,u,c,l,h){var d=t&f,p=1&t,v=2&t,m=24&t,y=512&t,g=v?i:Ui(e);return function i(){for(var f=arguments.length,b=n(f),w=f;w--;)b[w]=arguments[w];if(m)var k=ua(i),x=nn(b,k);if(a&&(b=Ai(b,a,o,m)),s&&(b=Ni(b,s,u,m)),f-=x,m&&f<h){var I=ln(b,k);return Hi(e,t,qi,i.placeholder,r,b,I,c,l,h-f)}var _=p?r:this,E=v?_[e]:e;return f=b.length,c?b=Na(b,c):y&&f>1&&b.reverse(),d&&l<f&&(b.length=l),this&&this!==dt&&this instanceof i&&(E=g||Ui(E)),E.apply(_,b)}}function Bi(e,t){return function(n,r){return function(e,t,n,r){return kr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function zi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ci(n),r=ci(r)),a=e(n,r)}return a}}function Wi(e){return ra((function(t){return t=Ot(t,Xt(ca())),Xr((function(n){var r=this;return e(t,(function(e){return Et(e,r,n)}))}))}))}function Qi(e,t){var n=(t=t===i?" ":li(t)).length;if(n<2)return n?Jr(t,e):t;var r=Jr(t,pt(e/dn(t)));return sn(t)?xi(pn(r),0,e).join(""):r.slice(0,e)}function Ki(e){return function(t,r,a){return a&&"number"!=typeof a&&wa(t,r,a)&&(r=a=i),t=vs(t),r===i?(r=t,t=0):r=vs(r),function(e,t,r,i){for(var a=-1,o=bn(pt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:vs(a),e)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function Hi(e,t,n,r,a,o,s,u,f,h){var d=8&t;t|=d?c:l,4&(t&=~(d?l:c))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,f,h],v=n.apply(i,p);return xa(e)&&Da(v,p),v.placeholder=r,Ra(v,e,t)}function Yi(e){var t=Ee[e];return function(e,n){if(e=gs(e),(n=null==n?0:wn(ms(n),292))&&Ut(e)){var r=(ws(e)+"e").split("e");return+((r=(ws(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ji=An&&1/fn(new An([,-0]))[1]==d?function(e){return new An(e)}:lu;function Xi(e){return function(t){var n=va(t);return n==E?un(t):n==C?hn(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,t,r,o,d,p,v,m){var y=2&t;if(!y&&"function"!=typeof e)throw new Ne(a);var g=o?o.length:0;if(g||(t&=-97,o=d=i),v=v===i?v:bn(ms(v),0),m=m===i?m:ms(m),g-=d?d.length:0,t&l){var b=o,w=d;o=d=i}var k=y?i:oa(e),x=[e,t,r,o,d,b,w,p,v,m];if(k&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ai(c,u,t[4]):u,e[4]=c?ln(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ni(c,u,t[6]):u,e[6]=c?ln(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&f&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(x,k),e=x[0],t=x[1],r=x[2],o=x[3],d=x[4],!(m=x[9]=x[9]===i?y?0:e.length:bn(x[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)I=8==t||t==u?function(e,t,r){var a=Ui(e);return function o(){for(var s=arguments.length,u=n(s),c=s,l=ua(o);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:ln(u,l);return(s-=f.length)<r?Hi(e,t,qi,o.placeholder,i,u,f,i,i,r-s):Et(this&&this!==dt&&this instanceof o?a:e,this,u)}}(e,t,m):t!=c&&33!=t||d.length?qi.apply(i,x):function(e,t,r,i){var a=1&t,o=Ui(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==dt&&this instanceof t?o:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return Et(h,a?r:this,f)}}(e,t,r,o);else var I=function(e,t,n){var r=1&t,i=Ui(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Ra((k?ti:Da)(I,x),e,t)}function $i(e,t,n,r){return e===i||Bo(e,Pe[n])&&!Le.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ns(e)&&ns(t)&&(o.set(t,e),zr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return os(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),f=o.get(t);if(l&&f)return l==t&&f==e;var h=-1,d=!0,p=2&n?new Yn:i;for(o.set(e,t),o.set(t,e);++h<u;){var v=e[h],m=t[h];if(r)var y=s?r(m,v,h,t,e,o):r(v,m,h,e,t,o);if(y!==i){if(y)continue;d=!1;break}if(p){if(!Mt(t,(function(e,t){if(!$t(p,t)&&(v===e||a(v,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(v!==m&&!a(v,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ra(e){return Oa(Sa(e,i,Ka),e+"")}function ia(e){return Er(e,Os,da)}function aa(e){return Er(e,Rs,pa)}var oa=Dn?function(e){return Dn.get(e)}:lu;function sa(e){for(var t=e.name+"",n=Pn[t],r=Le.call(Pn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function ua(e){return(Le.call(qn,"placeholder")?qn:e).placeholder}function ca(){var e=qn.iteratee||ou;return e=e===ou?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function la(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fa(e){for(var t=Os(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ea(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Lr(n)?n:i}var da=yt?function(e){return null==e?[]:(e=Te(e),Ct(yt(e),(function(t){return He.call(e,t)})))}:yu,pa=yt?function(e){for(var t=[];e;)Rt(t,da(e)),e=Ke(e);return t}:yu,va=Tr;function ma(e,t,n){for(var r=-1,i=(t=wi(t,e)).length,a=!1;++r<i;){var o=Ua(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&ts(i)&&ba(o,i)&&(Ko(e)||Qo(e))}function ya(e){return"function"!=typeof e.constructor||_a(e)?{}:Bn(Ke(e))}function ga(e){return Ko(e)||Qo(e)||!!(Je&&e&&e[Je])}function ba(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function wa(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ho(n)&&ba(t,n.length):"string"==r&&t in n)&&Bo(n[t],e)}function ka(e,t){if(Ko(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Te(t))}function xa(e){var t=sa(e),n=qn[t];if("function"!=typeof n||!(t in Qn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(En&&va(new En(new ArrayBuffer(1)))!=L||Tn&&va(new Tn)!=E||Sn&&va(Sn.resolve())!=A||An&&va(new An)!=C||Nn&&va(new Nn)!=O)&&(va=function(e){var t=Tr(e),n=t==S?e.constructor:i,r=n?Fa(n):"";if(r)switch(r){case On:return L;case Rn:return E;case Ln:return A;case jn:return C;case Mn:return O}return t});var Ia=Oe?$o:gu;function _a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function Ea(e){return e===e&&!ns(e)}function Ta(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Te(n)))}}function Sa(e,t,r){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=bn(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),Et(e,this,u)}}function Aa(e,t){return t.length<2?e:_r(e,ii(t,0,-1))}function Na(e,t){for(var n=e.length,r=wn(t.length,n),a=Ci(e);r--;){var o=t[r];e[r]=ba(o,n)?a[o]:i}return e}function Ca(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Da=La(ti),Pa=ht||function(e,t){return dt.setTimeout(e,t)},Oa=La(ni);function Ra(e,t,n){var r=t+"";return Oa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return St(y,(function(n){var r="_."+n[0];t&n[1]&&!Dt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function La(e){var t=0,n=0;return function(){var r=kn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ja(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Yr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ma=function(e){var t=jo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Ua(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fa(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Va(e){if(e instanceof Qn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var qa=Xr((function(e,t){return Yo(e)?hr(e,gr(t,1,Yo,!0)):[]})),Ba=Xr((function(e,t){var n=Xa(t);return Yo(n)&&(n=i),Yo(e)?hr(e,gr(t,1,Yo,!0),ca(n,2)):[]})),za=Xr((function(e,t){var n=Xa(t);return Yo(n)&&(n=i),Yo(e)?hr(e,gr(t,1,Yo,!0),i,n):[]}));function Wa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Vt(e,ca(t,3),i)}function Qa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?bn(r+a,0):wn(a,r-1)),Vt(e,ca(t,3),a,!0)}function Ka(e){return(null==e?0:e.length)?gr(e,1):[]}function Ga(e){return e&&e.length?e[0]:i}var Ha=Xr((function(e){var t=Ot(e,gi);return t.length&&t[0]===e[0]?Cr(t):[]})),Ya=Xr((function(e){var t=Xa(e),n=Ot(e,gi);return t===Xa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Cr(n,ca(t,2)):[]})),Ja=Xr((function(e){var t=Xa(e),n=Ot(e,gi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Cr(n,i,t):[]}));function Xa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Za=Xr($a);function $a(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var eo=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Hr(e,Ot(t,(function(e){return ba(e,n)?+e:e})).sort(Si)),r}));function to(e){return null==e?e:_n.call(e)}var no=Xr((function(e){return fi(gr(e,1,Yo,!0))})),ro=Xr((function(e){var t=Xa(e);return Yo(t)&&(t=i),fi(gr(e,1,Yo,!0),ca(t,2))})),io=Xr((function(e){var t=Xa(e);return t="function"==typeof t?t:i,fi(gr(e,1,Yo,!0),i,t)}));function ao(e){if(!e||!e.length)return[];var t=0;return e=Ct(e,(function(e){if(Yo(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return Ot(e,Qt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=ao(e);return null==t?n:Ot(n,(function(e){return Et(t,i,e)}))}var so=Xr((function(e,t){return Yo(e)?hr(e,t):[]})),uo=Xr((function(e){return mi(Ct(e,Yo))})),co=Xr((function(e){var t=Xa(e);return Yo(t)&&(t=i),mi(Ct(e,Yo),ca(t,2))})),lo=Xr((function(e){var t=Xa(e);return t="function"==typeof t?t:i,mi(Ct(e,Yo),i,t)})),fo=Xr(ao);var ho=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oo(e,n)}));function po(e){var t=qn(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Qn&&ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[a],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var yo=Pi((function(e,t,n){Le.call(e,n)?++e[n]:or(e,n,1)}));var go=Fi(Wa),bo=Fi(Qa);function wo(e,t){return(Ko(e)?St:dr)(e,ca(t,3))}function ko(e,t){return(Ko(e)?At:pr)(e,ca(t,3))}var xo=Pi((function(e,t,n){Le.call(e,n)?e[n].push(t):or(e,n,[t])}));var Io=Xr((function(e,t,r){var i=-1,a="function"==typeof t,o=Ho(e)?n(e.length):[];return dr(e,(function(e){o[++i]=a?Et(t,e,r):Dr(e,t,r)})),o})),_o=Pi((function(e,t,n){or(e,n,t)}));function Eo(e,t){return(Ko(e)?Ot:Vr)(e,ca(t,3))}var To=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var So=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wa(e,t[0],t[1])?t=[]:n>2&&wa(t[0],t[1],t[2])&&(t=[t[0]]),Qr(e,gr(t,1),[])})),Ao=ft||function(){return dt.Date.now()};function No(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Zi(e,f,i,i,i,i,t)}function Co(e,t){var n;if("function"!=typeof t)throw new Ne(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Do=Xr((function(e,t,n){var r=1;if(n.length){var i=ln(n,ua(Do));r|=c}return Zi(e,r,t,n,i)})),Po=Xr((function(e,t,n){var r=3;if(n.length){var i=ln(n,ua(Po));r|=c}return Zi(t,r,e,n,i)}));function Oo(e,t,n){var r,o,s,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ne(a);function v(t){var n=r,a=o;return r=o=i,f=t,u=e.apply(a,n)}function m(e){return f=e,c=Pa(g,t),h?v(e):u}function y(e){var n=e-l;return l===i||n>=t||n<0||d&&e-f>=s}function g(){var e=Ao();if(y(e))return b(e);c=Pa(g,function(e){var n=t-(e-l);return d?wn(n,s-(e-f)):n}(e))}function b(e){return c=i,p&&r?v(e):(r=o=i,u)}function w(){var e=Ao(),n=y(e);if(r=arguments,o=this,l=e,n){if(c===i)return m(l);if(d)return Ii(c),c=Pa(g,t),v(l)}return c===i&&(c=Pa(g,t)),u}return t=gs(t)||0,ns(n)&&(h=!!n.leading,s=(d="maxWait"in n)?bn(gs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),w.cancel=function(){c!==i&&Ii(c),f=0,r=l=o=c=i},w.flush=function(){return c===i?u:b(Ao())},w}var Ro=Xr((function(e,t){return fr(e,1,t)})),Lo=Xr((function(e,t,n){return fr(e,gs(t)||0,n)}));function jo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ne(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(jo.Cache||Hn),n}function Mo(e){if("function"!=typeof e)throw new Ne(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}jo.Cache=Hn;var Uo=ki((function(e,t){var n=(t=1==t.length&&Ko(t[0])?Ot(t[0],Xt(ca())):Ot(gr(t,1),Xt(ca()))).length;return Xr((function(r){for(var i=-1,a=wn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Et(e,this,r)}))})),Fo=Xr((function(e,t){var n=ln(t,ua(Fo));return Zi(e,c,i,t,n)})),Vo=Xr((function(e,t){var n=ln(t,ua(Vo));return Zi(e,l,i,t,n)})),qo=ra((function(e,t){return Zi(e,h,i,i,i,t)}));function Bo(e,t){return e===t||e!==e&&t!==t}var zo=Gi(Sr),Wo=Gi((function(e,t){return e>=t})),Qo=Pr(function(){return arguments}())?Pr:function(e){return rs(e)&&Le.call(e,"callee")&&!He.call(e,"callee")},Ko=n.isArray,Go=bt?Xt(bt):function(e){return rs(e)&&Tr(e)==R};function Ho(e){return null!=e&&ts(e.length)&&!$o(e)}function Yo(e){return rs(e)&&Ho(e)}var Jo=gt||gu,Xo=wt?Xt(wt):function(e){return rs(e)&&Tr(e)==k};function Zo(e){if(!rs(e))return!1;var t=Tr(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function $o(e){if(!ns(e))return!1;var t=Tr(e);return t==I||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=kt?Xt(kt):function(e){return rs(e)&&va(e)==E};function as(e){return"number"==typeof e||rs(e)&&Tr(e)==T}function os(e){if(!rs(e)||Tr(e)!=S)return!1;var t=Ke(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Fe}var ss=xt?Xt(xt):function(e){return rs(e)&&Tr(e)==N};var us=It?Xt(It):function(e){return rs(e)&&va(e)==C};function cs(e){return"string"==typeof e||!Ko(e)&&rs(e)&&Tr(e)==D}function ls(e){return"symbol"==typeof e||rs(e)&&Tr(e)==P}var fs=_t?Xt(_t):function(e){return rs(e)&&ts(e.length)&&!!ot[Tr(e)]};var hs=Gi(Fr),ds=Gi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ho(e))return cs(e)?pn(e):Ci(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=va(e);return(t==E?un:t==C?fn:Bs)(e)}function vs(e){return e?(e=gs(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function ys(e){return e?ur(ms(e),0,m):0}function gs(e){if("number"==typeof e)return e;if(ls(e))return v;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ye.test(e);return n||be.test(e)?lt(e.slice(2),n?2:8):me.test(e)?v:+e}function bs(e){return Di(e,Rs(e))}function ws(e){return null==e?"":li(e)}var ks=Oi((function(e,t){if(_a(t)||Ho(t))Di(t,Os(t),e);else for(var n in t)Le.call(t,n)&&nr(e,n,t[n])})),xs=Oi((function(e,t){Di(t,Rs(t),e)})),Is=Oi((function(e,t,n,r){Di(t,Rs(t),e,r)})),_s=Oi((function(e,t,n,r){Di(t,Os(t),e,r)})),Es=ra(sr);var Ts=Xr((function(e,t){e=Te(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&wa(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Rs(o),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===i||Bo(f,Pe[l])&&!Le.call(e,l))&&(e[l]=o[l])}return e})),Ss=Xr((function(e){return e.push(i,ea),Et(js,i,e)}));function As(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function Ns(e,t){return null!=e&&ma(e,t,Nr)}var Cs=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),nu(au)),Ds=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),ca),Ps=Xr(Dr);function Os(e){return Ho(e)?Xn(e):Mr(e)}function Rs(e){return Ho(e)?Xn(e,!0):Ur(e)}var Ls=Oi((function(e,t,n){zr(e,t,n)})),js=Oi((function(e,t,n,r){zr(e,t,n,r)})),Ms=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ot(t,(function(t){return t=wi(t,e),r||(r=t.length>1),t})),Di(e,aa(e),n),r&&(n=cr(n,7,ta));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Us=ra((function(e,t){return null==e?{}:function(e,t){return Kr(e,t,(function(t,n){return Ns(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Ot(aa(e),(function(e){return[e]}));return t=ca(t),Kr(e,n,(function(e,n){return t(e,n[0])}))}var Vs=Xi(Os),qs=Xi(Rs);function Bs(e){return null==e?[]:Zt(e,Os(e))}var zs=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ws(t):t)}));function Ws(e){return Zs(ws(e).toLowerCase())}function Qs(e){return(e=ws(e))&&e.replace(ke,rn).replace($e,"")}var Ks=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gs=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Hs=ji("toLowerCase");var Ys=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Js=Mi((function(e,t,n){return e+(n?" ":"")+Zs(t)}));var Xs=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zs=ji("toUpperCase");function $s(e,t,n){return e=ws(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Xr((function(e,t){try{return Et(e,i,t)}catch(n){return Zo(n)?n:new se(n)}})),tu=ra((function(e,t){return St(t,(function(t){t=Ua(t),or(e,t,Do(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Vi(),iu=Vi(!0);function au(e){return e}function ou(e){return jr("function"==typeof e?e:cr(e,1))}var su=Xr((function(e,t){return function(n){return Dr(n,e,t)}})),uu=Xr((function(e,t){return function(n){return Dr(e,n,t)}}));function cu(e,t,n){var r=Os(t),i=Ir(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ir(t,Os(t)));var a=!(ns(n)&&"chain"in n)||!!n.chain,o=$o(e);return St(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=Ci(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})})),e}function lu(){}var fu=Wi(Ot),hu=Wi(Nt),du=Wi(Mt);function pu(e){return ka(e)?Qt(Ua(e)):function(e){return function(t){return _r(t,e)}}(e)}var vu=Ki(),mu=Ki(!0);function yu(){return[]}function gu(){return!1}var bu=zi((function(e,t){return e+t}),0),wu=Yi("ceil"),ku=zi((function(e,t){return e/t}),1),xu=Yi("floor");var Iu=zi((function(e,t){return e*t}),1),_u=Yi("round"),Eu=zi((function(e,t){return e-t}),0);return qn.after=function(e,t){if("function"!=typeof t)throw new Ne(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},qn.ary=No,qn.assign=ks,qn.assignIn=xs,qn.assignInWith=Is,qn.assignWith=_s,qn.at=Es,qn.before=Co,qn.bind=Do,qn.bindAll=tu,qn.bindKey=Po,qn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ko(e)?e:[e]},qn.chain=po,qn.chunk=function(e,t,r){t=(r?wa(e,t,r):t===i)?1:bn(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(pt(a/t));o<a;)u[s++]=ii(e,o,o+=t);return u},qn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},qn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Rt(Ko(r)?Ci(r):[r],gr(t,1))},qn.cond=function(e){var t=null==e?0:e.length,n=ca();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Ne(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Et(i[0],this,n))return Et(i[1],this,n)}}))},qn.conforms=function(e){return function(e){var t=Os(e);return function(n){return lr(n,e,t)}}(cr(e,1))},qn.constant=nu,qn.countBy=yo,qn.create=function(e,t){var n=Bn(e);return null==t?n:ar(n,t)},qn.curry=function e(t,n,r){var a=Zi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},qn.curryRight=function e(t,n,r){var a=Zi(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},qn.debounce=Oo,qn.defaults=Ts,qn.defaultsDeep=Ss,qn.defer=Ro,qn.delay=Lo,qn.difference=qa,qn.differenceBy=Ba,qn.differenceWith=za,qn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},qn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},qn.dropRightWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!0,!0):[]},qn.dropWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!0):[]},qn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&wa(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:ys(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},qn.filter=function(e,t){return(Ko(e)?Ct:yr)(e,ca(t,3))},qn.flatMap=function(e,t){return gr(Eo(e,t),1)},qn.flatMapDeep=function(e,t){return gr(Eo(e,t),d)},qn.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),gr(Eo(e,t),n)},qn.flatten=Ka,qn.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,d):[]},qn.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===i?1:ms(t)):[]},qn.flip=function(e){return Zi(e,512)},qn.flow=ru,qn.flowRight=iu,qn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},qn.functions=function(e){return null==e?[]:Ir(e,Os(e))},qn.functionsIn=function(e){return null==e?[]:Ir(e,Rs(e))},qn.groupBy=xo,qn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},qn.intersection=Ha,qn.intersectionBy=Ya,qn.intersectionWith=Ja,qn.invert=Cs,qn.invertBy=Ds,qn.invokeMap=Io,qn.iteratee=ou,qn.keyBy=_o,qn.keys=Os,qn.keysIn=Rs,qn.map=Eo,qn.mapKeys=function(e,t){var n={};return t=ca(t,3),kr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},qn.mapValues=function(e,t){var n={};return t=ca(t,3),kr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},qn.matches=function(e){return qr(cr(e,1))},qn.matchesProperty=function(e,t){return Br(e,cr(t,1))},qn.memoize=jo,qn.merge=Ls,qn.mergeWith=js,qn.method=su,qn.methodOf=uu,qn.mixin=cu,qn.negate=Mo,qn.nthArg=function(e){return e=ms(e),Xr((function(t){return Wr(t,e)}))},qn.omit=Ms,qn.omitBy=function(e,t){return Fs(e,Mo(ca(t)))},qn.once=function(e){return Co(2,e)},qn.orderBy=function(e,t,n,r){return null==e?[]:(Ko(t)||(t=null==t?[]:[t]),Ko(n=r?i:n)||(n=null==n?[]:[n]),Qr(e,t,n))},qn.over=fu,qn.overArgs=Uo,qn.overEvery=hu,qn.overSome=du,qn.partial=Fo,qn.partialRight=Vo,qn.partition=To,qn.pick=Us,qn.pickBy=Fs,qn.property=pu,qn.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},qn.pull=Za,qn.pullAll=$a,qn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,ca(n,2)):e},qn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,i,n):e},qn.pullAt=eo,qn.range=vu,qn.rangeRight=mu,qn.rearg=qo,qn.reject=function(e,t){return(Ko(e)?Ct:yr)(e,Mo(ca(t,3)))},qn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ca(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Hr(e,i),n},qn.rest=function(e,t){if("function"!=typeof e)throw new Ne(a);return Xr(e,t=t===i?t:ms(t))},qn.reverse=to,qn.sampleSize=function(e,t,n){return t=(n?wa(e,t,n):t===i)?1:ms(t),(Ko(e)?$n:$r)(e,t)},qn.set=function(e,t,n){return null==e?e:ei(e,t,n)},qn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},qn.shuffle=function(e){return(Ko(e)?er:ri)(e)},qn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&wa(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},qn.sortBy=So,qn.sortedUniq=function(e){return e&&e.length?ui(e):[]},qn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,ca(t,2)):[]},qn.split=function(e,t,n){return n&&"number"!=typeof n&&wa(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=ws(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=li(t))&&sn(e)?xi(pn(e),0,n):e.split(t,n):[]},qn.spread=function(e,t){if("function"!=typeof e)throw new Ne(a);return t=null==t?0:bn(ms(t),0),Xr((function(n){var r=n[t],i=xi(n,0,t);return r&&Rt(i,r),Et(e,this,i)}))},qn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},qn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},qn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},qn.takeRightWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!1,!0):[]},qn.takeWhile=function(e,t){return e&&e.length?pi(e,ca(t,3)):[]},qn.tap=function(e,t){return t(e),e},qn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ne(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oo(e,t,{leading:r,maxWait:t,trailing:i})},qn.thru=vo,qn.toArray=ps,qn.toPairs=Vs,qn.toPairsIn=qs,qn.toPath=function(e){return Ko(e)?Ot(e,Ua):ls(e)?[e]:Ci(Ma(ws(e)))},qn.toPlainObject=bs,qn.transform=function(e,t,n){var r=Ko(e),i=r||Jo(e)||fs(e);if(t=ca(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ns(e)&&$o(a)?Bn(Ke(e)):{}}return(i?St:kr)(e,(function(e,r,i){return t(n,e,r,i)})),n},qn.unary=function(e){return No(e,1)},qn.union=no,qn.unionBy=ro,qn.unionWith=io,qn.uniq=function(e){return e&&e.length?fi(e):[]},qn.uniqBy=function(e,t){return e&&e.length?fi(e,ca(t,2)):[]},qn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},qn.unset=function(e,t){return null==e||hi(e,t)},qn.unzip=ao,qn.unzipWith=oo,qn.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},qn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},qn.values=Bs,qn.valuesIn=function(e){return null==e?[]:Zt(e,Rs(e))},qn.without=so,qn.words=$s,qn.wrap=function(e,t){return Fo(bi(t),e)},qn.xor=uo,qn.xorBy=co,qn.xorWith=lo,qn.zip=fo,qn.zipObject=function(e,t){return yi(e||[],t||[],nr)},qn.zipObjectDeep=function(e,t){return yi(e||[],t||[],ei)},qn.zipWith=ho,qn.entries=Vs,qn.entriesIn=qs,qn.extend=xs,qn.extendWith=Is,cu(qn,qn),qn.add=bu,qn.attempt=eu,qn.camelCase=zs,qn.capitalize=Ws,qn.ceil=wu,qn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))===n?n:0),t!==i&&(t=(t=gs(t))===t?t:0),ur(gs(e),t,n)},qn.clone=function(e){return cr(e,4)},qn.cloneDeep=function(e){return cr(e,5)},qn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},qn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},qn.conformsTo=function(e,t){return null==t||lr(e,t,Os(t))},qn.deburr=Qs,qn.defaultTo=function(e,t){return null==e||e!==e?t:e},qn.divide=ku,qn.endsWith=function(e,t,n){e=ws(e),t=li(t);var r=e.length,a=n=n===i?r:ur(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},qn.eq=Bo,qn.escape=function(e){return(e=ws(e))&&X.test(e)?e.replace(Y,an):e},qn.escapeRegExp=function(e){return(e=ws(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},qn.every=function(e,t,n){var r=Ko(e)?Nt:vr;return n&&wa(e,t,n)&&(t=i),r(e,ca(t,3))},qn.find=go,qn.findIndex=Wa,qn.findKey=function(e,t){return Ft(e,ca(t,3),kr)},qn.findLast=bo,qn.findLastIndex=Qa,qn.findLastKey=function(e,t){return Ft(e,ca(t,3),xr)},qn.floor=xu,qn.forEach=wo,qn.forEachRight=ko,qn.forIn=function(e,t){return null==e?e:br(e,ca(t,3),Rs)},qn.forInRight=function(e,t){return null==e?e:wr(e,ca(t,3),Rs)},qn.forOwn=function(e,t){return e&&kr(e,ca(t,3))},qn.forOwnRight=function(e,t){return e&&xr(e,ca(t,3))},qn.get=As,qn.gt=zo,qn.gte=Wo,qn.has=function(e,t){return null!=e&&ma(e,t,Ar)},qn.hasIn=Ns,qn.head=Ga,qn.identity=au,qn.includes=function(e,t,n,r){e=Ho(e)?e:Bs(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),cs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&qt(e,t,n)>-1},qn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),qt(e,t,i)},qn.inRange=function(e,t,n){return t=vs(t),n===i?(n=t,t=0):n=vs(n),function(e,t,n){return e>=wn(t,n)&&e<bn(t,n)}(e=gs(e),t,n)},qn.invoke=Ps,qn.isArguments=Qo,qn.isArray=Ko,qn.isArrayBuffer=Go,qn.isArrayLike=Ho,qn.isArrayLikeObject=Yo,qn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Tr(e)==w},qn.isBuffer=Jo,qn.isDate=Xo,qn.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},qn.isEmpty=function(e){if(null==e)return!0;if(Ho(e)&&(Ko(e)||"string"==typeof e||"function"==typeof e.splice||Jo(e)||fs(e)||Qo(e)))return!e.length;var t=va(e);if(t==E||t==C)return!e.size;if(_a(e))return!Mr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},qn.isEqual=function(e,t){return Or(e,t)},qn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},qn.isError=Zo,qn.isFinite=function(e){return"number"==typeof e&&Ut(e)},qn.isFunction=$o,qn.isInteger=es,qn.isLength=ts,qn.isMap=is,qn.isMatch=function(e,t){return e===t||Rr(e,t,fa(t))},qn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Rr(e,t,fa(t),n)},qn.isNaN=function(e){return as(e)&&e!=+e},qn.isNative=function(e){if(Ia(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},qn.isNil=function(e){return null==e},qn.isNull=function(e){return null===e},qn.isNumber=as,qn.isObject=ns,qn.isObjectLike=rs,qn.isPlainObject=os,qn.isRegExp=ss,qn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=p},qn.isSet=us,qn.isString=cs,qn.isSymbol=ls,qn.isTypedArray=fs,qn.isUndefined=function(e){return e===i},qn.isWeakMap=function(e){return rs(e)&&va(e)==O},qn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Tr(e)},qn.join=function(e,t){return null==e?"":Kt.call(e,t)},qn.kebabCase=Ks,qn.last=Xa,qn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?bn(r+a,0):wn(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Vt(e,zt,a,!0)},qn.lowerCase=Gs,qn.lowerFirst=Hs,qn.lt=hs,qn.lte=ds,qn.max=function(e){return e&&e.length?mr(e,au,Sr):i},qn.maxBy=function(e,t){return e&&e.length?mr(e,ca(t,2),Sr):i},qn.mean=function(e){return Wt(e,au)},qn.meanBy=function(e,t){return Wt(e,ca(t,2))},qn.min=function(e){return e&&e.length?mr(e,au,Fr):i},qn.minBy=function(e,t){return e&&e.length?mr(e,ca(t,2),Fr):i},qn.stubArray=yu,qn.stubFalse=gu,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=Iu,qn.nth=function(e,t){return e&&e.length?Wr(e,ms(t)):i},qn.noConflict=function(){return dt._===this&&(dt._=Ve),this},qn.noop=lu,qn.now=Ao,qn.pad=function(e,t,n){e=ws(e);var r=(t=ms(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Qi(vt(i),n)+e+Qi(pt(i),n)},qn.padEnd=function(e,t,n){e=ws(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?e+Qi(t-r,n):e},qn.padStart=function(e,t,n){e=ws(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?Qi(t-r,n)+e:e},qn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ws(e).replace(oe,""),t||0)},qn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wa(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=vs(e),t===i?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=In();return wn(e+a*(t-e+ct("1e-"+((a+"").length-1))),t)}return Yr(e,t)},qn.reduce=function(e,t,n){var r=Ko(e)?Lt:Gt,i=arguments.length<3;return r(e,ca(t,4),n,i,dr)},qn.reduceRight=function(e,t,n){var r=Ko(e)?jt:Gt,i=arguments.length<3;return r(e,ca(t,4),n,i,pr)},qn.repeat=function(e,t,n){return t=(n?wa(e,t,n):t===i)?1:ms(t),Jr(ws(e),t)},qn.replace=function(){var e=arguments,t=ws(e[0]);return e.length<3?t:t.replace(e[1],e[2])},qn.result=function(e,t,n){var r=-1,a=(t=wi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Ua(t[r])];o===i&&(r=a,o=n),e=$o(o)?o.call(e):o}return e},qn.round=_u,qn.runInContext=e,qn.sample=function(e){return(Ko(e)?Zn:Zr)(e)},qn.size=function(e){if(null==e)return 0;if(Ho(e))return cs(e)?dn(e):e.length;var t=va(e);return t==E||t==C?e.size:Mr(e).length},qn.snakeCase=Ys,qn.some=function(e,t,n){var r=Ko(e)?Mt:ai;return n&&wa(e,t,n)&&(t=i),r(e,ca(t,3))},qn.sortedIndex=function(e,t){return oi(e,t)},qn.sortedIndexBy=function(e,t,n){return si(e,t,ca(n,2))},qn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Bo(e[r],t))return r}return-1},qn.sortedLastIndex=function(e,t){return oi(e,t,!0)},qn.sortedLastIndexBy=function(e,t,n){return si(e,t,ca(n,2),!0)},qn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Bo(e[n],t))return n}return-1},qn.startCase=Js,qn.startsWith=function(e,t,n){return e=ws(e),n=null==n?0:ur(ms(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},qn.subtract=Eu,qn.sum=function(e){return e&&e.length?Ht(e,au):0},qn.sumBy=function(e,t){return e&&e.length?Ht(e,ca(t,2)):0},qn.template=function(e,t,n){var r=qn.templateSettings;n&&wa(e,t,n)&&(t=i),e=ws(e),t=Is({},t,r,$i);var a,o,s=Is({},t.imports,r.imports,$i),u=Os(s),c=Zt(s,u),l=0,f=t.interpolate||xe,h="__p += '",d=Se((t.escape||xe).source+"|"+f.source+"|"+(f===ee?pe:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(Ie,on),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var v=Le.call(t,"variable")&&t.variable;if(v){if(he.test(v))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(Q,""):h).replace(K,"$1").replace(G,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=eu((function(){return _e(u,p+"return "+h).apply(i,c)}));if(m.source=h,Zo(m))throw m;return m},qn.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=m,r=wn(e,m);t=ca(t),e-=m;for(var i=Yt(r,t);++n<e;)t(n);return i},qn.toFinite=vs,qn.toInteger=ms,qn.toLength=ys,qn.toLower=function(e){return ws(e).toLowerCase()},qn.toNumber=gs,qn.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,p):0===e?e:0},qn.toString=ws,qn.toUpper=function(e){return ws(e).toUpperCase()},qn.trim=function(e,t,n){if((e=ws(e))&&(n||t===i))return Jt(e);if(!e||!(t=li(t)))return e;var r=pn(e),a=pn(t);return xi(r,en(r,a),tn(r,a)+1).join("")},qn.trimEnd=function(e,t,n){if((e=ws(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=li(t)))return e;var r=pn(e);return xi(r,0,tn(r,pn(t))+1).join("")},qn.trimStart=function(e,t,n){if((e=ws(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=li(t)))return e;var r=pn(e);return xi(r,en(r,pn(t))).join("")},qn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?li(t.omission):r}var o=(e=ws(e)).length;if(sn(e)){var s=pn(e);o=s.length}if(n>=o)return e;var u=n-dn(r);if(u<1)return r;var c=s?xi(s,0,u).join(""):e.slice(0,u);if(a===i)return c+r;if(s&&(u+=c.length-u),ss(a)){if(e.slice(u).search(a)){var l,f=c;for(a.global||(a=Se(a.source,ws(ve.exec(a))+"g")),a.lastIndex=0;l=a.exec(f);)var h=l.index;c=c.slice(0,h===i?u:h)}}else if(e.indexOf(li(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+r},qn.unescape=function(e){return(e=ws(e))&&J.test(e)?e.replace(H,mn):e},qn.uniqueId=function(e){var t=++je;return ws(e)+t},qn.upperCase=Xs,qn.upperFirst=Zs,qn.each=wo,qn.eachRight=ko,qn.first=Ga,cu(qn,function(){var e={};return kr(qn,(function(t,n){Le.call(qn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),qn.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){qn[e].placeholder=qn})),St(["drop","take"],(function(e,t){Qn.prototype[e]=function(n){n=n===i?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Qn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Qn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),St(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Qn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ca(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),St(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Qn.prototype[e]=function(){return this[n](1).value()[0]}})),St(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Qn.prototype[e]=function(){return this.__filtered__?new Qn(this):this[n](1)}})),Qn.prototype.compact=function(){return this.filter(au)},Qn.prototype.find=function(e){return this.filter(e).head()},Qn.prototype.findLast=function(e){return this.reverse().find(e)},Qn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Qn(this):this.map((function(n){return Dr(n,e,t)}))})),Qn.prototype.reject=function(e){return this.filter(Mo(ca(e)))},Qn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Qn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Qn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Qn.prototype.toArray=function(){return this.take(m)},kr(Qn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=qn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(qn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Qn,c=s[0],l=u||Ko(t),f=function(e){var t=a.apply(qn,Rt([e],s));return r&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=u&&!d;if(!o&&l){t=v?t:new Qn(this);var m=e.apply(t,s);return m.__actions__.push({func:vo,args:[f],thisArg:i}),new Wn(m,h)}return p&&v?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),St(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);qn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ko(i)?i:[],e)}return this[n]((function(n){return t.apply(Ko(n)?n:[],e)}))}})),kr(Qn.prototype,(function(e,t){var n=qn[t];if(n){var r=n.name+"";Le.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[qi(i,2).name]=[{name:"wrapper",func:i}],Qn.prototype.clone=function(){var e=new Qn(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Qn.prototype.reverse=function(){if(this.__filtered__){var e=new Qn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Qn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ko(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=wn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,f=l.length,h=0,d=wn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return vi(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,m=e[c+=t];++v<f;){var y=l[v],g=y.iteratee,b=y.type,w=g(m);if(2==b)m=w;else if(!w){if(1==b)continue e;break e}}p[h++]=m}return p},qn.prototype.at=mo,qn.prototype.chain=function(){return po(this)},qn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},qn.prototype.plant=function(e){for(var t,n=this;n instanceof zn;){var r=Va(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},qn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Qn){var t=e;return this.__actions__.length&&(t=new Qn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[to],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(to)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,Xe&&(qn.prototype[Xe]=function(){return this}),qn}();dt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},3545:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},2102:function(e,t,n){"use strict";var r=n(1369);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},4974:function(e,t,n){e.exports=n(2102)()},1369:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2610:function(e,t,n){"use strict";var r=n(969),i=n(3545),a=n(8019);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,I=60106,_=60107,E=60108,T=60114,S=60109,A=60110,N=60112,C=60113,D=60120,P=60115,O=60116,R=60121,L=60128,j=60129,M=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;x=F("react.element"),I=F("react.portal"),_=F("react.fragment"),E=F("react.strict_mode"),T=F("react.profiler"),S=F("react.provider"),A=F("react.context"),N=F("react.forward_ref"),C=F("react.suspense"),D=F("react.suspense_list"),P=F("react.memo"),O=F("react.lazy"),R=F("react.block"),F("react.scope"),L=F("react.opaque.id"),j=F("react.debug_trace_mode"),M=F("react.offscreen"),U=F("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function Q(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1);case 11:return e=Q(e.type.render,!1);case 22:return e=Q(e.type._render,!1);case 1:return e=Q(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case I:return"Portal";case T:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case R:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function H(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ce(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Ie=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ae=null,Ne=null;function Ce(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function De(e){Ae?Ne?Ne.push(e):Ne=[e]:Ae=e}function Pe(){if(Ae){var e=Ae,t=Ne;if(Ne=Ae=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var je=Oe,Me=!1,Ue=!1;function Fe(){null===Ae&&null===Ne||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(me){qe=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Qe=null,Ke=!1,Ge=null,He={onError:function(e){We=!0,Qe=e}};function Ye(e,t,n,r,i,a,o,s,u){We=!1,Qe=null,ze.apply(He,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Je(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ze(i),e;if(a===r)return Ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(bt),ft.forEach(bt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return kt(t,e)}if(0<ot.length){kt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&kt(st,e),null!==ut&&kt(ut,e),null!==ct&&kt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function It(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionend:It("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var At=St("animationend"),Nt=St("animationiteration"),Ct=St("animationstart"),Dt=St("transitionend"),Pt=new Map,Ot=new Map,Rt=["abort","abort",At,"animationEnd",Nt,"animationIteration",Ct,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var jt=8;function Mt(e){if(0!==(1&e))return jt=15,1;if(0!==(2&e))return jt=14,2;if(0!==(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!==(32&e)?(jt=11,32):0!==(t=192&e)?(jt=10,t):0!==(256&e)?(jt=9,256):0!==(t=3584&e)?(jt=8,t):0!==(4096&e)?(jt=7,4096):0!==(t=4186112&e)?(jt=6,t):0!==(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!==(134217728&e)?(jt=3,134217728):0!==(t=805306368&e)?(jt=2,t):0!==(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=jt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Mt(u),i=jt):0!==(s&=a)&&(r=Mt(s),i=jt)}else 0!==(a=n&~o)?(r=Mt(a),i=jt):0!==s&&(r=Mt(s),i=jt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=jt)return t;jt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Qt(e)/Kt|0)|0},Qt=Math.log,Kt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Ht=a.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Me||Le();var i=Zt,a=Me;Me=!0;try{Re(i,e,t,n,r)}finally{(Me=a)||Fe()}}function Xt(e,t,n,r){Ht(Gt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=$t(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),wn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),kn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=un(kn),In=un(i({},hn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function An(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=un(Nn),Dn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),On=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Rn),jn=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Fn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Mn||Un&&8<Un&&11>=Un),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Qn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Hn(e,t,n,r){De(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function Xn(e){Nr(e,0)}function Zn(e){if(X(ii(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Jn=Yn=null)}function ar(e){if("value"===e.propertyName&&Zn(Jn)){var t=[];if(Hn(t,Jn,e,Te(e)),e=Xn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,Fe()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Jn)}function ur(e,t){if("click"===e)return Zn(t)}function cr(e,t){if("input"===e||"change"===e)return Zn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,br=null,wr=null,kr=null,xr=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==br||br!==Z(r)||("selectionStart"in(r=br)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},kr&&hr(kr,r)||(kr=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<_r.length;Er++)Ot.set(_r[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Ar(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Qe;We=!1,Qe=null,Ke||(Ke=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ar(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ar(i,s,c),a=u}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Cr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Dr]||(e[Dr]=!0,s.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Rr(a,e,i,t),o.add(s))}function Rr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{je(e,t,n)}finally{Ue=!1,Fe()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case At:case Nt:case Ct:u=wn;break;case Dt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Dn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(jr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Dn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==u&&Fr(o,s,u,l,!1),null!==c&&null!==f&&Fr(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Gn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(br=y,wr=r,kr=null);break;case"focusout":kr=wr=br=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Ir(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Ir(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Qn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Vn&&"ko"!==n.locale&&(Qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Qn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Qn=!0)),0<(y=Mr(r,b)).length&&(b=new In(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Wn(n))&&(b.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Qn)return"compositionend"===e||!Mn&&zn(e,t)?(e=rn(),nn=tn=en=null,Qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(jr(e,a,i)),null!=(a=Ve(e,t))&&r.push(jr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Fr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ve(n,a))&&o.unshift(jr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(jr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Qr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Zr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Zr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Zr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[$r]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function bi(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var Ii=null,_i=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ai=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ci=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Li=a.unstable_LowPriority,ji=a.unstable_IdlePriority,Mi={},Ui=void 0!==Ni?Ni:function(){},Fi=null,Vi=null,qi=!1,Bi=Ci(),zi=1e4>Bi?Ci:function(){return Ci()-Bi};function Wi(){switch(Di()){case Pi:return 99;case Oi:return 98;case Ri:return 97;case Li:return 96;case ji:return 95;default:throw Error(o(332))}}function Qi(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Ri;case 96:return Li;case 95:return ji;default:throw Error(o(332))}}function Ki(e,t){return e=Qi(e),Ei(e,t)}function Gi(e,t,n){return e=Qi(e),Ti(e,t,n)}function Hi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==Fi){qi=!0;var e=0;try{var t=Fi;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(n){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ti(Pi,Hi),n}finally{qi=!1}}}var Ji=k.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zi=ci(null),$i=null,ea=null,ta=null;function na(){ta=ea=$i=null}function ra(e){var t=Zi.current;li(Zi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){$i=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===$i)throw Error(o(308));ea=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ba(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function Ia(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ia(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=Ia(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Hu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=Ia(e,null,t),n.return=e,n;case I:return(t=Xu(t,e.mode,n)).return=e,t}if(xa(t)||B(t))return(t=Hu(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===_?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case I:return n.key===i?l(e,t,n,r):null}if(xa(n)||B(n))return null!==i?null:f(e,t,n,r,null);_a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case I:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);_a(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,m),null===f?l=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===_&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===_){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ia(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===_?((r=Hu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=Ia(e,r,a),u.return=e,e=u)}return s(e);case I:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ju(a,e.mode,u)).return=e,e=r),s(e);if(xa(a))return v(e,r,a,u);if(B(a))return m(e,r,a,u);if(l&&_a(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Aa={},Na=ci(Aa),Ca=ci(Aa),Da=ci(Aa);function Pa(e){if(e===Aa)throw Error(o(174));return e}function Oa(e,t){switch(fi(Da,t),fi(Ca,e),fi(Na,Aa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Ra(){li(Na),li(Ca),li(Da)}function La(e){Pa(Da.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(fi(Ca,e),fi(Na,n))}function ja(e){Ca.current===e&&(li(Na),li(Ca))}var Ma=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fa=null,Va=null,qa=!1;function Ba(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Hr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Fa=e);Ba(Fa,n)}Fa=e,Va=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Fa=e}}function Qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fa=e}function Ka(e){if(e!==Fa)return!1;if(!qa)return Qa(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)Ba(e,t),t=Hr(t.nextSibling);if(Qa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Fa?Hr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=Fa=null,qa=!1}var Ha=[];function Ya(){for(var e=0;e<Ha.length;e++)Ha[e]._workInProgressVersionPrimary=null;Ha.length=0}var Ja=k.ReactCurrentDispatcher,Xa=k.ReactCurrentBatchConfig,Za=0,$a=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Za=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Oo:Ro,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Po,t=null!==eo&&null!==eo.next,Za=0,to=eo=$a=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?$a.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?$a.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?$a.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Za&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,$a.lanes|=l,qs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Za&e)===e)&&(t._workInProgressVersionPrimary=r,Ha.push(t))),e)return n(t._source);throw Ha.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ja.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=$a;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Do.bind(null,$a,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Do.bind(null,$a,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function wo(e,t,n,r){var i=so();$a.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function ko(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}$a.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function Io(e,t){return ko(516,4,e,t)}function _o(e,t){return ko(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,Eo.bind(null,t,e),n)}function So(){}function Ao(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Co(e,t){var n=Wi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Do(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===$a||null!==o&&o===$a)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,$a,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Co.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$a.mode)&&($a.flags|=516,yo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Ao,useContext:oa,useEffect:Io,useImperativeHandle:To,useLayoutEffect:_o,useMemo:No,useReducer:lo,useRef:bo,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Io((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Ao,useContext:oa,useEffect:Io,useImperativeHandle:To,useLayoutEffect:_o,useMemo:No,useReducer:fo,useRef:bo,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Io((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},jo=k.ReactCurrentOwner,Mo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Fo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Qu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Ku(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Qo(e,t,n,r,i){if(yi(n)){var a=!0;ki(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ba(t,n,r),ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&wa(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&wa(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),as(e,t,a);r=t.stateNode,jo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Oa(e,t.containerInfo)}var Ho,Yo,Jo,Xo={dehydrated:null,retryLane:0};function Zo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ma,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Hu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Ku(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(o,s),null!==e?r=Ku(e,r):(r=Hu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Ra(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:ja(t);var a=Pa(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ka(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zr]=t,r[$r]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Cr(Tr[e],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":ee(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ue(r,s),Cr("invalid",r)}for(var c in _e(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Cr("scroll",r));switch(n){case"input":J(r),re(r,s,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Zr]=t,e[$r]=r,Ho(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Cr("cancel",e),Cr("close",e),a=r;break;case"iframe":case"object":case"embed":Cr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Cr(Tr[a],e);a=r;break;case"source":Cr("error",e),a=r;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),a=r;break;case"details":Cr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Cr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Cr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Cr("invalid",e);break;default:a=r}_e(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?xe(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Cr("scroll",e):null!=f&&w(e,s,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Da.current),Pa(Na.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[Zr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=t,t.stateNode=r)}return null;case 13:return li(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Os||0===(134217727&qs)&&0===(134217727&Bs)||gu(Os,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ma),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ks&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ma.current,fi(Ma,s?1&t|2:1&t),n):null;case 23:case 24:return Iu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return ja(e),null;case 13:return li(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ma),null;case 4:return Ra(),null;case 10:return ra(e),null;case 23:case 24:return Iu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Cr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Mu(n,e),ju(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ke("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(Ii,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Mu(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function ws(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(ks(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Is(e,n,t):_s(e,n,t)}function Is(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(bs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):w(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Qs=zi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function As(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Cs=k.ReactCurrentDispatcher,Ds=k.ReactCurrentOwner,Ps=0,Os=null,Rs=null,Ls=0,js=0,Ms=ci(0),Us=0,Fs=null,Vs=0,qs=0,Bs=0,zs=0,Ws=null,Qs=0,Ks=1/0;function Gs(){Ks=zi()+500}var Hs,Ys=null,Js=!1,Xs=null,Zs=null,$s=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ps)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=Vs),0!==Ji.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Ps)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Os&&(Bs|=t,4===Us&&gu(e,Ls));var r=Wi();1===t?0!==(8&Ps)&&0===(48&Ps)?bu(e):(mu(e,n),0===Ps&&(Gs(),Hi())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=jt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Os?Ls:0),t=jt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=bu.bind(null,e),null===Fi?(Fi=[n],Vi=Ti(Pi,Yi)):Fi.push(n),n=Mi):14===t?n=Gi(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Os?Ls:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var a=Tu();for(Os===e&&Ls===r||(Gs(),_u(e,r));;)try{Nu();break}catch(u){Eu(e,u)}if(na(),Cs.current=a,Ps=i,null!==Rs?r=0:(Os=null,Ls=0,r=Us),0!==(Vs&Bs))_u(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ft(e))&&(r=Su(e,n))),1===r)throw t=Fs,_u(e,0),gu(e,n),mu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Qs+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Qr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Qr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return mu(e,zi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Ps))throw Error(o(327));if(Lu(),e===Os&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Su(e,t);0!==(Vs&Bs)&&(n=Su(e,t=Ut(e,t)))}else n=Su(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ft(e))&&(n=Su(e,t))),1===n)throw n=Fs,_u(e,0),gu(e,t),mu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,zi()),null}function wu(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Hi())}}function ku(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Hi())}}function xu(e,t){fi(Ms,js),js|=t,Vs|=t}function Iu(){js=Ms.current,li(Ms)}function _u(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ra(),li(pi),li(di),Ya();break;case 5:ja(r);break;case 4:Ra();break;case 13:case 19:li(Ma);break;case 10:ra(r);break;case 23:case 24:Iu()}n=n.return}Os=e,Rs=Ku(e.current,null),Ls=js=Vs=t,Us=0,Fs=null,zs=Bs=qs=0}function Eu(e,t){for(;;){var n=Rs;try{if(na(),Ja.current=Po,no){for(var r=$a.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Za=0,to=eo=$a=null,ro=!1,Ds.current=null,null===n||null===n.return){Us=1,Fs=t,Rs=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new fs,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var w=qu.bind(null,a,c,s);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var k=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof k.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Zs||!Zs.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Du(n)}catch(I){t=I,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function Tu(){var e=Cs.current;return Cs.current=Po,null===e?Po:e}function Su(e,t){var n=Ps;Ps|=16;var r=Tu();for(Os===e&&Ls===t||_u(e,t);;)try{Au();break}catch(i){Eu(e,i)}if(na(),Ps=n,Cs.current=r,null!==Rs)throw Error(o(261));return Os=null,Ls=0,Us}function Au(){for(;null!==Rs;)Cu(Rs)}function Nu(){for(;null!==Rs&&!Ai();)Cu(Rs)}function Cu(e){var t=Hs(e.alternate,e,js);e.memoizedProps=e.pendingProps,null===t?Du(e):Rs=t,Ds.current=null}function Du(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,js)))return void(Rs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&js)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Rs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Us&&(Us=5)}function Pu(e){var t=Wi();return Ki(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Lu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Rs=Os=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,Ds.current=null,qr=Yt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,lu=null,fu=!1,Ys=r;do{try{Ru()}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ge(Ys.stateNode,""),128&b){var w=Ys.alternate;if(null!==w){var k=w.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:xs(Ys),Ys.flags&=-3;break;case 6:xs(Ys),Ys.flags&=-3,Ts(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ts(Ys.alternate,Ys);break;case 4:Ts(Ys.alternate,Ys);break;case 8:Es(s,u=Ys);var x=u.alternate;ws(u),null!==x&&ws(x)}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);if(k=Br,w=mr(),b=k.focusedElem,s=k.selectionRange,w!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&yr(b)&&(w=s.start,void 0===(k=s.end)&&(k=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(k,b.value.length)):(k=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!k.extend&&x>s&&(u=s,s=x,x=u),u=pr(b,x),a=pr(b,s),u&&a&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==a.node||k.focusOffset!==a.offset)&&((w=w.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),x>s?(k.addRange(w),k.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),k.addRange(w))))),w=[];for(k=b;k=k.parentNode;)1===k.nodeType&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(k=w[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Yt=!!qr,Br=qr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var I=Ys.flags;if(36&I&&ys(b,Ys.alternate,Ys),128&I){w=void 0;var _=Ys.ref;if(null!==_){var E=Ys.stateNode;Ys.tag,w=E,"function"===typeof _?_(w):_.current=w}}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),Ps=i}else e.current=n;if($s)$s=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((I=Ys).sibling=null,I.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Zs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(Ii,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,zi()),Js)throw Js=!1,e=Xs,Xs=null,e;return 0!==(8&Ps)||Hi(),null}function Ru(){for(;null!==Ys;){var e=Ys.alternate;fu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(fu=!0):13===Ys.tag&&As(e,Ys)&&et(Ys,lu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||$s||($s=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ki(e,Uu)}return!1}function ju(e,t){nu.push(t,e),$s||($s=!0,Gi(97,(function(){return Lu(),null})))}function Mu(e,t){ru.push(t,e),$s||($s=!0,Gi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Hi(),!0}function Fu(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function Vu(e,t){if(3===e.tag)Fu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>zi()-Qs?_u(e,0):zs|=n),mu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=Vs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Qu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Qu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Hu(n.children,i,a,t);case j:s=8,i|=16;break;case E:s=8,i|=1;break;case T:return(e=Wu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case C:return(e=Wu(13,n,t,i)).type=C,e.elementType=C,e.lanes=a,e;case D:return(e=Wu(19,n,t,i)).elementType=D,e.lanes=a,e;case M:return Yu(n,i,a,t);case U:return(e=Wu(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case A:s=9;break e;case N:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e;case R:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Hu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=M,e.lanes=n,e}function Ju(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zu(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ku((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return $u(e,t,null,n)}Hs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&ki(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Zo(e,t,n):(fi(Ma,1&Ma.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return as(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;ki(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ka(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Qu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Qo(null,t,i,e,n);break e;case 11:t=Fo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Qo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Hr(t.stateNode.containerInfo.firstChild),Fa=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ha.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Zo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Zi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,ki(t)):e=!1,aa(t,n),ba(t,r,i),ka(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=wu,Re=function(e,t,n,r,i){var a=Ps;Ps|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Ps=a)&&(Gs(),Hi())}},Le=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,zi())}))}Hi()}(),Lu())},je=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Hi())}};var uc={Events:[ri,ii,ai,De,Pe,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ii=fc.inject(lc),_i=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Ps=n,Hi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ku((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=wu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},5749:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2610)},5443:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function x(e){return k(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||k(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===h},t.isFragment=function(e){return k(e)===a},t.isLazy=function(e){return k(e)===m},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===i},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=k},9479:function(e,t,n){"use strict";e.exports=n(5443)},4618:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserRouter:function(){return l},HashRouter:function(){return f},Link:function(){return y},MemoryRouter:function(){return r.VA},NavLink:function(){return w},Prompt:function(){return r.NL},Redirect:function(){return r.l_},Route:function(){return r.AW},Router:function(){return r.F0},StaticRouter:function(){return r.gx},Switch:function(){return r.rs},generatePath:function(){return r.Gn},matchPath:function(){return r.LX},useHistory:function(){return r.k6},useLocation:function(){return r.TH},useParams:function(){return r.UO},useRouteMatch:function(){return r.$B},withRouter:function(){return r.EN}});var r=n(2461),i=n(1665),a=n(969),o=n(7828),s=n(7896),u=n(1461),c=n(5704),l=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.lX)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return a.createElement(r.F0,{history:this.history,children:this.props.children})},t}(a.Component);var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.q_)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return a.createElement(r.F0,{history:this.history,children:this.props.children})},t}(a.Component);var h=function(e,t){return"function"===typeof e?e(t):e},d=function(e,t){return"string"===typeof e?(0,o.ob)(e,null,null,t):e},p=function(e){return e},v=a.forwardRef;"undefined"===typeof v&&(v=p);var m=v((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=(0,u.Z)(e,["innerRef","navigate","onClick"]),c=o.target,l=(0,s.Z)({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=p!==v&&t||n,a.createElement("a",l)}));var y=v((function(e,t){var n=e.component,i=void 0===n?m:n,l=e.replace,f=e.to,y=e.innerRef,g=(0,u.Z)(e,["component","replace","to","innerRef"]);return a.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=e.history,r=d(h(f,e.location),e.location),u=r?n.createHref(r):"",m=(0,s.Z)({},g,{href:u,navigate:function(){var t=h(f,e.location),r=(0,o.Ep)(e.location)===(0,o.Ep)(d(t));(l||r?n.replace:n.push)(t)}});return p!==v?m.ref=t||y:m.innerRef=y,a.createElement(i,m)}))})),g=function(e){return e},b=a.forwardRef;"undefined"===typeof b&&(b=g);var w=b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,l=void 0===o?"active":o,f=e.activeStyle,p=e.className,v=e.exact,m=e.isActive,w=e.location,k=e.sensitive,x=e.strict,I=e.style,_=e.to,E=e.innerRef,T=(0,u.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=w||e.location,o=d(h(_,n),n),u=o.pathname,S=u&&u.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),A=S?(0,r.LX)(n.pathname,{path:S,exact:v,sensitive:k,strict:x}):null,N=!!(m?m(A,n):A),C="function"===typeof p?p(N):p,D="function"===typeof I?I(N):I;N&&(C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(C,l),D=(0,s.Z)({},D,f));var P=(0,s.Z)({"aria-current":N&&i||null,className:C,style:D,to:o},T);return g!==b?P.ref=t||E:P.innerRef=E,a.createElement(y,P)}))}))},2461:function(e,t,n){"use strict";n.d(t,{VA:function(){return _},NL:function(){return T},l_:function(){return C},AW:function(){return R},F0:function(){return I},gx:function(){return V},rs:function(){return q},s6:function(){return x},Gn:function(){return N},LX:function(){return O},k6:function(){return W},TH:function(){return Q},UO:function(){return K},$B:function(){return G},EN:function(){return B}});var r=n(1665),i=n(969),a=n(7828),o=n(4974),s=n.n(o),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var f=i.createContext||function(e,t){var n,a,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):u,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},i.render=function(){return this.props.children},n}(i.Component);f.childContextTypes=((n={})[o]=s().object.isRequired,n);var h=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},i.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},i.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},i.getValue=function(){return this.context[o]?this.context[o].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return h.contextTypes=((a={})[o]=s().object,a),{Provider:f,Consumer:h}},h=f,d=n(5704),p=n(7896),v=n(1599),m=n.n(v),y=(n(9479),n(1461)),g=n(7814),b=n.n(g),w=function(e){var t=h();return t.displayName=e,t},k=w("Router-History"),x=w("Router"),I=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(x.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(k.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,a.PP)(t.props),t}return(0,r.Z)(t,e),t.prototype.render=function(){return i.createElement(I,{history:this.history,children:this.props.children})},t}(i.Component);var E=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.Component);function T(e){var t=e.message,n=e.when,r=void 0===n||n;return i.createElement(x.Consumer,null,(function(e){if(e||(0,d.Z)(!1),!r||e.staticContext)return null;var n=e.history.block;return i.createElement(E,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var S={},A=0;function N(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(S[e])return S[e];var t=m().compile(e);return A<1e4&&(S[e]=t,A++),t}(e)(t,{pretty:!0})}function C(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return i.createElement(x.Consumer,null,(function(e){e||(0,d.Z)(!1);var r=e.history,s=e.staticContext,u=o?r.push:r.replace,c=(0,a.ob)(t?"string"===typeof n?N(n,t.params):(0,p.Z)({},n,{pathname:N(n.pathname,t.params)}):n);return s?(u(c),null):i.createElement(E,{onMount:function(){u(c)},onUpdate:function(e,t){var n=(0,a.ob)(t.to);(0,a.Hp)(n,(0,p.Z)({},c,{key:n.key}))||u(c)},to:n})}))}var D={},P=0;function O(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=D[n]||(D[n]={});if(r[e])return r[e];var i=[],a={regexp:m()(e,i,t),keys:i};return P<1e4&&(r[e]=a,P++),a}(n,{end:a,strict:s,sensitive:c}),i=r.regexp,o=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var R=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(x.Consumer,null,(function(t){t||(0,d.Z)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?O(n.pathname,e.props):t.match,a=(0,p.Z)({},t,{location:n,match:r}),o=e.props,s=o.children,u=o.component,c=o.render;return Array.isArray(s)&&function(e){return 0===i.Children.count(e)}(s)&&(s=null),i.createElement(x.Provider,{value:a},a.match?s?"function"===typeof s?s(a):s:u?i.createElement(u,a):c?c(a):null:"function"===typeof s?s(a):null)}))},t}(i.Component);function L(e){return"/"===e.charAt(0)?e:"/"+e}function j(e,t){if(!e)return t;var n=L(e);return 0!==t.pathname.indexOf(n)?t:(0,p.Z)({},t,{pathname:t.pathname.substr(n.length)})}function M(e){return"string"===typeof e?e:(0,a.Ep)(e)}function U(e){return function(){(0,d.Z)(!1)}}function F(){}var V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return F},t.handleBlock=function(){return F},t}(0,r.Z)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,s=void 0===o?{}:o;s.action=t,s.location=function(e,t){return e?(0,p.Z)({},t,{pathname:L(e)+t.pathname}):t}(i,(0,a.ob)(e)),s.url=M(s.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,s=e.location,u=void 0===s?"/":s,c=(0,y.Z)(e,["basename","context","location"]),l={createHref:function(e){return L(n+M(e))},action:"POP",location:j(n,(0,a.ob)(u)),push:this.handlePush,replace:this.handleReplace,go:U(),goBack:U(),goForward:U(),listen:this.handleListen,block:this.handleBlock};return i.createElement(I,(0,p.Z)({},c,{history:l,staticContext:o}))},t}(i.Component);var q=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(x.Consumer,null,(function(t){t||(0,d.Z)(!1);var n,r,a=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?O(a.pathname,(0,p.Z)({},e.props,{path:o})):t.match}})),r?i.cloneElement(n,{location:a,computedMatch:r}):null}))},t}(i.Component);function B(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=(0,y.Z)(t,["wrappedComponentRef"]);return i.createElement(x.Consumer,null,(function(t){return t||(0,d.Z)(!1),i.createElement(e,(0,p.Z)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,b()(n,e)}var z=i.useContext;function W(){return z(k)}function Q(){return z(x).location}function K(){var e=z(x).match;return e?e.params:{}}function G(e){var t=Q(),n=z(x).match;return e?O(t.pathname,e):n}},9690:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},1599:function(e,t,n){var r=n(9690);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(s+=e.slice(o,d),o=d+f.length,h)s+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],b=n[6],w=n[7];s&&(r.push(s),s="");var k=null!=v&&null!=p&&p!==v,x="+"===b||"*"===b,I="?"===b||"*"===b,_=n[2]||l,E=y||g;r.push({name:m||a++,prefix:v||"",delimiter:_,optional:I,repeat:x,partial:k,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+u(_)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",s=t||{},u=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=s[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=u(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=u(c);else{var h=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},4999:function(e,t,n){"use strict";n(3545);var r=n(969),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},3949:function(e,t,n){"use strict";var r=n(3545),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=g.prototype=new y;b.constructor=g,r(b,m.prototype),b.isPureReactComponent=!0;var w={current:null},k=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:w.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function D(){var e=C.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},969:function(e,t,n){"use strict";e.exports=n(3949)},7574:function(e,t,n){"use strict";e.exports=n(4999)},384:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,k=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+g;try{m(!0,e)?k.postMessage(null):(v=!1,m=null)}catch(n){throw k.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,k.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],A=1,N=null,C=3,D=!1,P=!1,O=!1;function R(e){for(var t=I(S);null!==t;){if(null===t.callback)_(S);else{if(!(t.startTime<=e))break;_(S),t.sortIndex=t.expirationTime,x(T,t)}t=I(S)}}function L(e){if(O=!1,R(e),!P)if(null!==I(T))P=!0,n(j);else{var t=I(S);null!==t&&r(L,t.startTime-e)}}function j(e,n){P=!1,O&&(O=!1,i()),D=!0;var a=C;try{for(R(n),N=I(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,C=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===I(T)&&_(T),R(n)}else _(T);N=I(T)}if(null!==N)var u=!0;else{var c=I(S);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{N=null,C=a,D=!1}}var M=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||D||(P=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return I(T)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=M,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:A++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,x(S,e),null===I(T)&&e===I(S)&&(O?i():O=!0,r(L,o-s))):(e.sortIndex=u,x(T,e),P||D||(P=!0,n(j))),e},t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},8019:function(e,t,n){"use strict";e.exports=n(384)},5704:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="Invariant failed";function i(e,t){if(!e)throw new Error(r)}},7896:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1665:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(8960);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},1461:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},8960:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return J},SDK_VERSION:function(){return st},_DEFAULT_ENTRY_NAME:function(){return He},_addComponent:function(){return Ze},_addOrOverwriteComponent:function(){return $e},_apps:function(){return Je},_clearComponents:function(){return rt},_components:function(){return Xe},_getProvider:function(){return tt},_registerComponent:function(){return et},_removeServiceInstance:function(){return nt},deleteApp:function(){return ft},getApp:function(){return ct},getApps:function(){return lt},initializeApp:function(){return ut},onLog:function(){return pt},registerVersion:function(){return dt},setLogLevel:function(){return vt}});var t=n(969),r=n(5749);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||o(e,t)||s()}var c=n(4618),l=n(2461),f=n(19),h=t.createContext({title:void 0,setTitle:void 0}),d=function(){return(0,t.useContext)(h)},p=n(7574),v=function(e){return(0,p.jsx)(p.Fragment,{children:e.children})},m=function(){var e=(0,l.k6)(),n=(0,l.TH)(),r=(0,t.useContext)(f.AuthContext),i=r.currentUser,a=r.signOutUser,o=d().title;return(0,p.jsxs)("header",{className:"title-bar",children:[(0,p.jsx)("h1",{onClick:function(){return e.push("/")},children:"MDBedit"}),!!o&&(0,p.jsx)("h2",{children:o}),(0,p.jsxs)("nav",{children:["/"!==n.pathname&&(0,p.jsx)("button",{type:"button",className:"home-bttn",onClick:function(){return e.push("/")},children:"Home"}),i&&(0,p.jsx)("button",{type:"button",className:"sign-out-bttn",onClick:function(){return a()},children:"Sign Out"})]})]})},y=function(){return(0,p.jsxs)("nav",{className:"home-nav-wrapper",children:[(0,p.jsx)(c.Link,{to:"/scenario-types",className:"home-nav-link",children:"Scenario Types"}),(0,p.jsx)(c.Link,{to:"/scenarios",className:"home-nav-link",children:"Scenarios"}),(0,p.jsx)(c.Link,{to:"/class-codes",className:"home-nav-link",children:"Class Codes"})]})};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(T([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==g(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,s(y,"constructor",d),s(d,"constructor",h),h.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function w(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,s,"next",e)}function s(e){w(a,r,i,o,s,"throw",e)}o(void 0)}))}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A=n(8960);function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,A.Z)(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function P(e,t){if(t&&("object"===g(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function O(e){var t=D();return function(){var n,r=C(e);if(t){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function R(e,t,n){return R=D()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,A.Z)(i,n.prototype),i},R.apply(null,arguments)}function L(e){var t="function"===typeof Map?new Map:void 0;return L=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return R(e,arguments,C(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,A.Z)(n,e)},L(e)}var j=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},M={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(j(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},U=function(e){return function(e){var t=j(e);return M.encodeByteArray(t,!0)}(e).replace(/\./g,"")},F=function(e){try{return M.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function V(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=V(e[n],t[n]));return e}var q=function(){function e(){var t=this;I(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return E(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function B(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(a)),""].join(".")}function z(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(z())}function Q(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function K(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function G(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function H(){var e=z();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Y(){return"object"===typeof indexedDB}var J=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(S(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(S(a),X.prototype.create),a}return E(n)}(L(Error)),X=function(){function e(t,n,r){I(this,e),this.service=t,this.serviceName=n,this.errors=r}return E(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Z(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new J(n,a,t);return o}}]),e}();function Z(e,t){return e.replace($,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var $=/\{\$([^}]+)}/g;function ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function te(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(ne(s)&&ne(u)){if(!te(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ne(e){return null!==e&&"object"===typeof e}function re(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ie(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ae(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function oe(e,t){var n=new se(e,t);return n.subscribe.bind(n)}var se=function(){function e(t,n){var r=this;I(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return E(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ue),void 0===r.error&&(r.error=ue),void 0===r.complete&&(r.complete=ue);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ue(){}function ce(e){return e&&e._delegate?e._delegate:e}function le(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function fe(e){return function(e){if(Array.isArray(e))return a(e)}(e)||le(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var he=function(){function e(t,n,r){I(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return E(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),de="[DEFAULT]",pe=function(){function e(t,n){I(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return E(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new q;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:de})}catch(c){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(fe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),fe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(mx){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===de?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(mx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.component?this.component.multipleInstances?e:de:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ve,me,ye=function(){function e(t){I(this,e),this.name=t,this.providers=new Map}return E(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new pe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ge=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(me||(me={}));var be={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},we=me.INFO,ke=(x(ve={},me.DEBUG,"log"),x(ve,me.VERBOSE,"log"),x(ve,me.INFO,"info"),x(ve,me.WARN,"warn"),x(ve,me.ERROR,"error"),ve),xe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ke[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ie=function(){function e(t){I(this,e),this.name=t,this._logLevel=we,this._logHandler=xe,this._userLogHandler=null,ge.push(this)}return E(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in me))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?be[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.DEBUG].concat(t)),this._logHandler.apply(this,[this,me.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.VERBOSE].concat(t)),this._logHandler.apply(this,[this,me.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.INFO].concat(t)),this._logHandler.apply(this,[this,me.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.WARN].concat(t)),this._logHandler.apply(this,[this,me.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.ERROR].concat(t)),this._logHandler.apply(this,[this,me.ERROR].concat(t))}}]),e}();function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te,Se;var Ae=new WeakMap,Ne=new WeakMap,Ce=new WeakMap,De=new WeakMap,Pe=new WeakMap;var Oe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return je(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Re(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Me(this),n),je(Ae.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return je(e.apply(Me(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Me(this),t].concat(r));return Ce.set(a,t.sort?t.sort():[t]),je(a)}}function Le(e){return"function"===typeof e?Re(e):(e instanceof IDBTransaction&&function(e){if(!Ne.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ne.set(e,t)}}(e),t=e,(Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Oe):e);var t}function je(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(je(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ae.set(t,e)})).catch((function(){})),Pe.set(t,e),t}(e);if(De.has(e))return De.get(e);var t=Le(e);return t!==e&&(De.set(e,t),Pe.set(t,e)),t}var Me=function(e){return Pe.get(e)};var Ue,Fe,Ve=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],Be=new Map;function ze(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Be.get(t))return Be.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=qe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ve.includes(n))){var a=function(){var e=k(b().mark((function e(t){var a,o,s,u,c,l,f=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Be.set(t,a),a}}}Oe=function(e){return Ee(Ee({},e),{},{get:function(t,n,r){return ze(t,n)||e.get(t,n,r)},has:function(t,n){return!!ze(t,n)||e.has(t,n)}})}(Oe);var We=function(){function e(t){I(this,e),this.container=t}return E(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Qe="@firebase/app",Ke="0.7.25",Ge=new Ie("@firebase/app"),He="[DEFAULT]",Ye=(x(Ue={},Qe,"fire-core"),x(Ue,"@firebase/app-compat","fire-core-compat"),x(Ue,"@firebase/analytics","fire-analytics"),x(Ue,"@firebase/analytics-compat","fire-analytics-compat"),x(Ue,"@firebase/app-check","fire-app-check"),x(Ue,"@firebase/app-check-compat","fire-app-check-compat"),x(Ue,"@firebase/auth","fire-auth"),x(Ue,"@firebase/auth-compat","fire-auth-compat"),x(Ue,"@firebase/database","fire-rtdb"),x(Ue,"@firebase/database-compat","fire-rtdb-compat"),x(Ue,"@firebase/functions","fire-fn"),x(Ue,"@firebase/functions-compat","fire-fn-compat"),x(Ue,"@firebase/installations","fire-iid"),x(Ue,"@firebase/installations-compat","fire-iid-compat"),x(Ue,"@firebase/messaging","fire-fcm"),x(Ue,"@firebase/messaging-compat","fire-fcm-compat"),x(Ue,"@firebase/performance","fire-perf"),x(Ue,"@firebase/performance-compat","fire-perf-compat"),x(Ue,"@firebase/remote-config","fire-rc"),x(Ue,"@firebase/remote-config-compat","fire-rc-compat"),x(Ue,"@firebase/storage","fire-gcs"),x(Ue,"@firebase/storage-compat","fire-gcs-compat"),x(Ue,"@firebase/firestore","fire-fst"),x(Ue,"@firebase/firestore-compat","fire-fst-compat"),x(Ue,"fire-js","fire-js"),x(Ue,"firebase","fire-js-all"),Ue),Je=new Map,Xe=new Map;function Ze(e,t){try{e.container.addComponent(t)}catch(n){Ge.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function $e(e,t){e.container.addOrOverwriteComponent(t)}function et(e){var t=e.name;if(Xe.has(t))return Ge.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);var n,r=T(Je.values());try{for(r.s();!(n=r.n()).done;){Ze(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function tt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;tt(e,t).clearInstance(n)}function rt(){Xe.clear()}var it=(x(Fe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),x(Fe,"bad-app-name","Illegal App name: '{$appName}"),x(Fe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),x(Fe,"app-deleted","Firebase App named '{$appName}' already deleted"),x(Fe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),x(Fe,"invalid-log-argument","First argument to `onLog` must be null or a function."),x(Fe,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),x(Fe,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),x(Fe,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),x(Fe,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Fe),at=new X("app","Firebase",it),ot=function(){function e(t,n,r){var i=this;I(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new he("app",(function(){return i}),"PUBLIC"))}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}]),e}(),st="9.8.2";function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:He,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw at.create("bad-app-name",{appName:String(i)});var a=Je.get(i);if(a){if(te(e,a.options)&&te(r,a.config))return a;throw at.create("duplicate-app",{appName:i})}var o,s=new ye(i),u=T(Xe.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new ot(e,r,s);return Je.set(i,l),l}function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=Je.get(e);if(!t)throw at.create("no-app",{appName:e});return t}function lt(){return Array.from(Je.values())}function ft(e){return ht.apply(this,arguments)}function ht(){return(ht=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Je.has(n)){e.next=6;break}return Je.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e,t,n){var r,i=null!==(r=Ye[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ge.warn(s.join(" "))}et(new he("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function pt(e,t){if(null!==e&&"function"!==typeof e)throw at.create("invalid-log-argument");!function(e,t){var n,r=T(ge);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=be[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:me[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function vt(e){var t;t=e,ge.forEach((function(e){e.setLogLevel(t)}))}var mt="firebase-heartbeat-store",yt=null;function gt(){return yt||(yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=je(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(je(s.result),e.oldVersion,e.newVersion,je(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(mt)}}).catch((function(e){throw at.create("storage-open",{originalErrorMessage:e.message})}))),yt}function bt(e){return wt.apply(this,arguments)}function wt(){return wt=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt();case 3:return n=e.sent,e.abrupt("return",n.transaction(mt).objectStore(mt).get(It(t)));case 7:throw e.prev=7,e.t0=e.catch(0),at.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),wt.apply(this,arguments)}function kt(e,t){return xt.apply(this,arguments)}function xt(){return xt=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt();case 3:return r=e.sent,i=r.transaction(mt,"readwrite"),a=i.objectStore(mt),e.next=8,a.put(n,It(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),at.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),xt.apply(this,arguments)}function It(e){return"".concat(e.name,"!").concat(e.options.appId)}var _t=function(){function e(t){var n=this;I(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Nt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return E(e,[{key:"triggerHeartbeat",value:function(){var e=k(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Et(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=k(b().mark((function e(){var t,n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Et(),n=Tt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=U(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Et(){return(new Date).toISOString().substring(0,10)}function Tt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ct(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ct(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var St,At,Nt=function(){function e(t){I(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return E(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,bt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(fe(r.heartbeats),fe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ct(e){return U(JSON.stringify({version:2,heartbeats:e})).length}St="",et(new he("platform-logger",(function(e){return new We(e)}),"PRIVATE")),et(new he("heartbeat",(function(e){return new _t(e)}),"PRIVATE")),dt(Qe,Ke,St),dt(Qe,Ke,"esm2017"),dt("fire-js","");var Dt=function(){function e(t,n){var r=this;I(this,e),this._delegate=t,this.firebase=n,Ze(t,new he("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ft(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ze(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){$e(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Pt=(x(At={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),x(At,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),At),Ot=new X("app-compat","Firebase",Pt);var Rt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ut(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ee(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:dt,setLogLevel:vt,onLog:pt,apps:null,SDK_VERSION:st,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(et(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ot.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&V(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ee(n,e=e||He))throw Ot.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Dt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){V(n,e)},createSubscribe:oe,ErrorFactory:X,deepExtend:V}),n}(),Lt=new Ie("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Lt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var jt=self.firebase.SDK_VERSION;jt&&jt.indexOf("LITE")>=0&&Lt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Mt=Rt;!function(e){dt("@firebase/app-compat","0.1.26",e)}();function Ut(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ut(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}Mt.registerVersion("firebase","9.8.2","app-compat");function Vt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var qt;Object.create;var Bt="facebook.com",zt="github.com",Wt="google.com",Qt="password",Kt="twitter.com",Gt="EMAIL_SIGNIN",Ht="PASSWORD_RESET",Yt="RECOVER_EMAIL",Jt="REVERT_SECOND_FACTOR_ADDITION",Xt="VERIFY_AND_CHANGE_EMAIL",Zt="VERIFY_EMAIL";function $t(){return x({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var en=function(){var e;return x(e={},"admin-restricted-operation","This operation is restricted to administrators only."),x(e,"argument-error",""),x(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),x(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),x(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),x(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),x(e,"cordova-not-ready","Cordova framework is not ready."),x(e,"cors-unsupported","This browser is not supported."),x(e,"credential-already-in-use","This credential is already associated with a different user account."),x(e,"custom-token-mismatch","The custom token corresponds to a different audience."),x(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),x(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),x(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),x(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),x(e,"email-already-in-use","The email address is already in use by another account."),x(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),x(e,"expired-action-code","The action code has expired."),x(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),x(e,"internal-error","An internal AuthError has occurred."),x(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),x(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),x(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),x(e,"invalid-auth-event","An internal AuthError has occurred."),x(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),x(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),x(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),x(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),x(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),x(e,"invalid-email","The email address is badly formatted."),x(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),x(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),x(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),x(e,"invalid-credential","The supplied auth credential is malformed or has expired."),x(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),x(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),x(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),x(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),x(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),x(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),x(e,"wrong-password","The password is invalid or the user does not have a password."),x(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),x(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),x(e,"invalid-provider-id","The specified provider ID is invalid."),x(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),x(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),x(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),x(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),x(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),x(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),x(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),x(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),x(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),x(e,"missing-continue-uri","A continue URL must be provided in the request."),x(e,"missing-iframe-start","An internal AuthError has occurred."),x(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),x(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),x(e,"missing-multi-factor-info","No second factor identifier is provided."),x(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),x(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),x(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),x(e,"app-deleted","This instance of FirebaseApp has been deleted."),x(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),x(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),x(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),x(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),x(e,"no-auth-event","An internal AuthError has occurred."),x(e,"no-such-provider","User was not linked to an account with the given provider."),x(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),x(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),x(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),x(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),x(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),x(e,"provider-already-linked","User can only be linked to one identity for the given provider."),x(e,"quota-exceeded","The project's quota for this operation has been exceeded."),x(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),x(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),x(e,"rejected-credential","The request contains malformed or mismatching credentials."),x(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),x(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),x(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),x(e,"timeout","The operation has timed out."),x(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),x(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),x(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),x(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),x(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),x(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),x(e,"unverified-email","The operation requires a verified email."),x(e,"user-cancelled","The user did not grant your application the permissions it requested."),x(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),x(e,"user-disabled","The user account has been disabled by an administrator."),x(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),x(e,"user-signed-out",""),x(e,"weak-password","The password must be 6 characters long or more."),x(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),x(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},tn=$t,nn=new X("auth","Firebase",$t()),rn=new Ie("@firebase/auth");function an(e){if(rn.logLevel<=me.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rn.error.apply(rn,["Auth (".concat(st,"): ").concat(e)].concat(n))}}function on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ln.apply(void 0,[e].concat(n))}function sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ln.apply(void 0,[e].concat(n))}function un(e,t,n){var r=Object.assign(Object.assign({},tn()),x({},t,n));return new X("auth","Firebase",r).create(t,{appName:e.name})}function cn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&on(e,"argument-error"),un(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=fe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(fe(o)))}return nn.create.apply(nn,[e].concat(n))}function fn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ln.apply(void 0,[t].concat(r))}}function hn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw an(t),new Error(t)}function dn(e,t){e||hn(t)}var pn=new Map;function vn(e){dn(e instanceof Function,"Expected a class definition");var t=pn.get(e);return t?(dn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pn.set(e,t),t)}function mn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yn(){return"http:"===gn()||"https:"===gn()}function gn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var bn=function(){function e(t,n){I(this,e),this.shortDelay=t,this.longDelay=n,dn(n>t,"Short delay should be less than long delay!"),this.isMobile=W()||G()}return E(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yn()||K()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function wn(e,t){dn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var kn=function(){function e(){I(this,e)}return E(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),xn=(x(qt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),x(qt,"MISSING_CUSTOM_TOKEN","internal-error"),x(qt,"INVALID_IDENTIFIER","invalid-email"),x(qt,"MISSING_CONTINUE_URI","internal-error"),x(qt,"INVALID_PASSWORD","wrong-password"),x(qt,"MISSING_PASSWORD","internal-error"),x(qt,"EMAIL_EXISTS","email-already-in-use"),x(qt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),x(qt,"INVALID_IDP_RESPONSE","invalid-credential"),x(qt,"INVALID_PENDING_TOKEN","invalid-credential"),x(qt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),x(qt,"MISSING_REQ_TYPE","internal-error"),x(qt,"EMAIL_NOT_FOUND","user-not-found"),x(qt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),x(qt,"EXPIRED_OOB_CODE","expired-action-code"),x(qt,"INVALID_OOB_CODE","invalid-action-code"),x(qt,"MISSING_OOB_CODE","internal-error"),x(qt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),x(qt,"INVALID_ID_TOKEN","invalid-user-token"),x(qt,"TOKEN_EXPIRED","user-token-expired"),x(qt,"USER_NOT_FOUND","user-token-expired"),x(qt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),x(qt,"INVALID_CODE","invalid-verification-code"),x(qt,"INVALID_SESSION_INFO","invalid-verification-id"),x(qt,"INVALID_TEMPORARY_PROOF","invalid-credential"),x(qt,"MISSING_SESSION_INFO","missing-verification-id"),x(qt,"SESSION_EXPIRED","code-expired"),x(qt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),x(qt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),x(qt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),x(qt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),x(qt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),x(qt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),x(qt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),x(qt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),x(qt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),x(qt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),x(qt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),qt),In=new bn(3e4,6e4);function _n(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function En(e,t,n,r){return Tn.apply(this,arguments)}function Tn(){return Tn=k(b().mark((function e(t,n,r,i){var a,o=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Sn(t,a,k(b().mark((function e(){var a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=re(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",kn.fetch()(Dn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}function Sn(e,t,n){return An.apply(this,arguments)}function An(){return An=k(b().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},xn),n),e.prev=2,a=new Pn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw On(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=o.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=u(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw On(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw On(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw On(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw un(t,p,d);case 34:on(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof J)){e.next=41;break}throw e.t0;case 41:on(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),An.apply(this,arguments)}function Nn(e,t,n,r){return Cn.apply(this,arguments)}function Cn(){return Cn=k(b().mark((function e(t,n,r,i){var a,o,s=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,En(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&on(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Cn.apply(this,arguments)}function Dn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?wn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Pn=function(){function e(t){var n=this;I(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(sn(n.auth,"network-request-failed"))}),In.get())}))}return E(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function On(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=sn(e,t,r);return i.customData._tokenResponse=n,i}function Rn(e,t){return Ln.apply(this,arguments)}function Ln(){return Ln=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}function jn(e,t){return Mn.apply(this,arguments)}function Mn(){return Mn=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}function Un(e,t){return Fn.apply(this,arguments)}function Fn(){return Fn=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Fn.apply(this,arguments)}function Vn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function qn(){return qn=k(b().mark((function e(t){var n,r,i,a,o,s,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ce(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,fn((a=zn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Vn(Bn(a.auth_time)),issuedAtTime:Vn(Bn(a.iat)),expirationTime:Vn(Bn(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),qn.apply(this,arguments)}function Bn(e){return 1e3*Number(e)}function zn(e){var t=u(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return an("JWT malformed, contained fewer than 3 sections"),null;try{var a=F(r);return a?JSON.parse(a):(an("Failed to decode base64 JWT payload"),null)}catch(o){return an("Caught error parsing JWT payload as JSON",o),null}}function Wn(e,t){return Qn.apply(this,arguments)}function Qn(){return Qn=k(b().mark((function e(t,n){var r=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof J&&Kn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Qn.apply(this,arguments)}function Kn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Gn=function(){function e(t){I(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return E(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Hn=function(){function e(t,n){I(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return E(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Yn(e){return Jn.apply(this,arguments)}function Jn(){return Jn=k(b().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Wn(t,Un(r,{idToken:i}));case 6:fn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?$n(o.providerUserInfo):[],u=Zn(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Hn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Xn(){return(Xn=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce(t),e.next=3,Yn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(fe(n),fe(t))}function $n(e){return e.map((function(e){var t=e.providerId,n=Vt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function er(e,t){return tr.apply(this,arguments)}function tr(){return tr=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(t,{},k(b().mark((function e(){var r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Dn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",kn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),tr.apply(this,arguments)}var nr=function(){function e(){I(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return E(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){fn(e.idToken,"internal-error"),fn("undefined"!==typeof e.idToken,"internal-error"),fn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=zn(e);return fn(t,"internal-error"),fn("undefined"!==typeof t.exp,"internal-error"),fn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=k(b().mark((function e(t){var n,r=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],fn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return hn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(fn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(fn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(fn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function rr(e,t){fn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ir=function(){function e(t){I(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Vt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?fe(a.providerData):[],this.metadata=new Hn(a.createdAt||void 0,a.lastLoginAt||void 0)}return E(e,[{key:"getIdToken",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(fn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return qn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Xn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(fn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){fn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=k(b().mark((function e(t){var n,r,i=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Yn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Wn(this,Rn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,w=n.emailVerified,k=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;fn(b&&I,t,"internal-error");var _=nr.fromJSON(this.name,I);fn("string"===typeof b,t,"internal-error"),rr(f,t.name),rr(h,t.name),fn("boolean"===typeof w,t,"internal-error"),fn("boolean"===typeof k,t,"internal-error"),rr(d,t.name),rr(p,t.name),rr(v,t.name),rr(m,t.name),rr(y,t.name),rr(g,t.name);var E=new e({uid:b,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:k,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=k(b().mark((function t(n,r){var i,a,o,s=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new nr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Yn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ar=function(){function e(){I(this,e),this.type="NONE",this.storage={}}return E(e,[{key:"_isAvailable",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ar.type="NONE";var or=ar;function sr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ur=function(){function e(t,n,r){I(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=sr(this.userKey,a.apiKey,o),this.fullPersistenceKey=sr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return E(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ir._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=k(b().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(vn(or),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||vn(or),s=sr(i,n.config.apiKey,n.name),u=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=ir._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function cr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vr(t))return"Blackberry";if(mr(t))return"Webos";if(fr(t))return"Safari";if((t.includes("chrome/")||hr(t))&&!t.includes("edge/"))return"Chrome";if(pr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/firefox\//i.test(e)}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/crios\//i.test(e)}function dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/iemobile/i.test(e)}function pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/android/i.test(e)}function vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/blackberry/i.test(e)}function mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/webos/i.test(e)}function yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/iphone|ipad|ipod/i.test(e)}function gr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return yr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function br(){return H()&&10===document.documentMode}function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return yr(e)||pr(e)||mr(e)||vr(e)||/windows phone/i.test(e)||dr(e)}function kr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=cr(z());break;case"Worker":t="".concat(cr(z()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(st,"/").concat(r)}var xr=function(){function e(t){I(this,e),this.auth=t,this.queue=[]}return E(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=k(b().mark((function e(t){var n,r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ir=function(){function e(t,n,r){I(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Er(this),this.idTokenSubscription=new Er(this),this.beforeStateQueue=new xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return E(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=vn(t)),this._initializationPromise=this.queue(k(b().mark((function r(){var i,a;return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ur.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=k(b().mark((function e(t){var n,r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return fn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ce(t):null)&&fn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=k(b().mark((function e(t){var n,r=this,i=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&fn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(k(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(vn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new X("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return fn(n=t&&vn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ur.create(this,[vn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=k(b().mark((function e(t){var n=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return fn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return fn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=k(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _r(e){return ce(e)}var Er=function(){function e(t){var n=this;I(this,e),this.auth=t,this.observer=null,this.addObserver=oe((function(e){return n.observer=e}))}return E(e,[{key:"next",get:function(){return fn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Tr(e,t,n){var r=_r(e);fn(r._canInitEmulator,r,"emulator-config-failed"),fn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Sr(t),o=function(e){var t=Sr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ar(r.substr(a.length+1))}}var o=u(r.split(":"),2);return{host:o[0],port:Ar(o[1])}}(t),s=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Sr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ar(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Nr=function(){function e(t,n){I(this,e),this.providerId=t,this.signInMethod=n}return E(e,[{key:"toJSON",value:function(){return hn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return hn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return hn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return hn("not implemented")}}]),e}();function Cr(e,t){return Dr.apply(this,arguments)}function Dr(){return Dr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:resetPassword",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Pr(e,t){return Or.apply(this,arguments)}function Or(){return Or=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Rr(e,t){return Lr.apply(this,arguments)}function Lr(){return Lr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function jr(e,t){return Mr.apply(this,arguments)}function Mr(){return Mr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithPassword",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}function Ur(e,t){return Fr.apply(this,arguments)}function Fr(){return Fr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:sendOobCode",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Vr(e,t){return qr.apply(this,arguments)}function qr(){return qr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,n));case 1:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Br(e,t){return zr.apply(this,arguments)}function zr(){return zr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,n));case 1:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}function Wr(e,t){return Qr.apply(this,arguments)}function Qr(){return Qr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,n));case 1:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Kr(e,t){return Gr.apply(this,arguments)}function Gr(){return Gr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,n));case 1:case"end":return e.stop()}}),e)}))),Gr.apply(this,arguments)}function Hr(e,t){return Yr.apply(this,arguments)}function Yr(){return Yr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function Jr(e,t){return Xr.apply(this,arguments)}function Xr(){return Xr=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}var Zr=function(e){N(n,e);var t=O(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return E(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",jr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Hr(t,{email:this._email,oobCode:this._password}));case 5:on(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Pr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Jr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:on(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Nr);function $r(e,t){return ei.apply(this,arguments)}function ei(){return ei=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithIdp",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}var ti=function(e){N(n,e);var t=O(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return E(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return $r(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$r(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$r(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=re(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):on("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Vt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Nr);function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:sendVerificationCode",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(){return ii=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function ai(){return ai=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw On(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}var oi=x({},"USER_NOT_FOUND","user-not-found");function si(){return si=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,r),oi));case 2:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}var ui=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone","phone")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ii.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ai.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return si.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Nr);var ci=function(){function e(t){var n,r,i,a,o,s;I(this,e);var u=ie(ae(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);fn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return E(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ie(ae(e)).link,n=t?ie(ae(t)).deep_link_id:null,r=ie(ae(e)).deep_link_id;return(r?ie(ae(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(mx){return null}}}]),e}();var li=function(){function e(){I(this,e),this.providerId=e.PROVIDER_ID}return E(e,null,[{key:"credential",value:function(e,t){return Zr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ci.parseLink(t);return fn(n,"argument-error"),Zr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();li.PROVIDER_ID="password",li.EMAIL_PASSWORD_SIGN_IN_METHOD="password",li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var fi=function(){function e(t){I(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return E(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),hi=function(e){N(n,e);var t=O(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).scopes=[],e}return E(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return fe(this.scopes)}}]),n}(fi),di=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return fn(e.idToken||e.accessToken,"argument-error"),ti._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return fn("providerId"in t&&"signInMethod"in t,"argument-error"),ti._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(hi),pi=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.call(this,"facebook.com")}return E(n,null,[{key:"credential",value:function(e){return ti._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mx){return null}}}]),n}(hi);pi.FACEBOOK_SIGN_IN_METHOD="facebook.com",pi.PROVIDER_ID="facebook.com";var vi=function(e){N(n,e);var t=O(n);function n(){var e;return I(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return E(n,null,[{key:"credential",value:function(e,t){return ti._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(mx){return null}}}]),n}(hi);vi.GOOGLE_SIGN_IN_METHOD="google.com",vi.PROVIDER_ID="google.com";var mi=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.call(this,"github.com")}return E(n,null,[{key:"credential",value:function(e){return ti._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mx){return null}}}]),n}(hi);mi.GITHUB_SIGN_IN_METHOD="github.com",mi.PROVIDER_ID="github.com";var yi=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return E(n,[{key:"_getIdTokenResponse",value:function(e){return $r(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$r(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$r(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Nr),gi=function(e){N(n,e);var t=O(n);function n(e){return I(this,n),fn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return E(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=yi.fromJSON(e);return fn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return yi._create(r,n)}catch(i){return null}}}]),n}(fi),bi=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.call(this,"twitter.com")}return E(n,null,[{key:"credential",value:function(e,t){return ti._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(mx){return null}}}]),n}(hi);function wi(e,t){return ki.apply(this,arguments)}function ki(){return ki=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signUp",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}bi.TWITTER_SIGN_IN_METHOD="twitter.com",bi.PROVIDER_ID="twitter.com";var xi=function(){function e(t){I(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return E(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=k(b().mark((function t(n,r,i){var a,o,s,u,c=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ir._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Ii(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=k(b().mark((function t(n,r,i){var a;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ii(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ii(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function _i(){return _i=k(b().mark((function e(t){var n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_r(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new xi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,wi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,xi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}var Ei=function(e){N(n,e);var t=O(n);function n(e,r,i,a){var o,s;return I(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(S(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return E(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(J);function Ti(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ei._fromErrorAndOperation(e,n,t,r);throw n}))}function Si(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ai(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,Pi(!0,r,n);case 3:return e.t0=jn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Si(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ci(e,t){return Di.apply(this,arguments)}function Di(){return Di=k(b().mark((function e(t,n){var r,i,a=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Wn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",xi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Pi(e,t,n){return Oi.apply(this,arguments)}function Oi(){return(Oi=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(n);case 2:i=Si(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",fn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e,t){return Li.apply(this,arguments)}function Li(){return Li=k(b().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Wn(t,Ti(i,a,n,t),r);case 6:return fn((o=e.sent).idToken,i,"internal-error"),fn(s=zn(o.idToken),i,"internal-error"),u=s.sub,fn(t.uid===u,i,"user-mismatch"),e.abrupt("return",xi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&on(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Li.apply(this,arguments)}function ji(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=k(b().mark((function e(t,n){var r,i,a,o,s=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Ti(t,i,n);case 4:return a=e.sent,e.next=7,xi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Ui(e,t){return Fi.apply(this,arguments)}function Fi(){return Fi=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ji(_r(t),n));case 1:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Vi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,Pi(!1,r,n.providerId);case 3:return e.abrupt("return",Ci(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(e,t){return zi.apply(this,arguments)}function zi(){return(zi=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ri(ce(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nn(t,"POST","/v1/accounts:signInWithCustomToken",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Ki(){return Ki=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_r(t),e.next=3,Wi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,xi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}var Gi=function(){function e(t,n){I(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return E(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Hi._fromServerResponse(e,t):on(e,"internal-error")}}]),e}(),Hi=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return E(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Gi);function Yi(e,t,n){var r;fn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),fn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(fn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(fn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ji(){return Ji=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),a={requestType:"PASSWORD_RESET",email:n},r&&Yi(i,a,r),e.next=5,Br(i,a);case 5:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Xi(){return Xi=k(b().mark((function e(t,n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr(ce(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}function Zi(){return Zi=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr(ce(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function $i(e,t){return ea.apply(this,arguments)}function ea(){return ea=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,Cr(r,{oobCode:n});case 3:i=e.sent,fn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return fn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:fn(i.mfaInfo,r,"internal-error");case 13:fn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Gi._fromServerResponse(_r(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(){return ta=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(ce(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}function na(e,t,n){return ra.apply(this,arguments)}function ra(){return ra=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),e.next=3,wi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,xi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(){return ia=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),a={requestType:"EMAIL_SIGNIN",email:n},fn(r.handleCodeInApp,i,"argument-error"),r&&Yi(i,a,r),e.next=6,Wr(i,a);case 6:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(){return aa=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),fn((a=li.credentialWithLink(n,r||mn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ui(i,a));case 4:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function oa(e,t){return sa.apply(this,arguments)}function sa(){return sa=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:createAuthUri",_n(t,n)));case 1:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ua(){return ua=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yn()?mn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,oa(ce(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function ca(){return(ca=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Yi(r.auth,a,n),e.next=8,Vr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(){return(la=k(b().mark((function e(t,n,r){var i,a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Yi(i.auth,o,r),e.next=8,Kr(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(){return(da=k(b().mark((function e(t,n){var r,i,a,o,s,u,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ce(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Wn(a,fa(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(e,t,n){return va.apply(this,arguments)}function va(){return va=k(b().mark((function e(t,n,r){var i,a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Wn(t,Pr(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}var ma=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};I(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ya=function(e){N(n,e);var t=O(n);function n(e,r,i,a){var o;return I(this,n),(o=t.call(this,e,r,i)).username=a,o}return E(n)}(ma),ga=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"facebook.com",r)}return E(n)}(ma),ba=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return E(n)}(ya),wa=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"google.com",r)}return E(n)}(ma),ka=function(e){N(n,e);var t=O(n);function n(e,r,i){return I(this,n),t.call(this,e,"twitter.com",r,i)}return E(n)}(ya);function xa(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=zn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ma(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ga(a,i);case"github.com":return new ba(a,i);case"google.com":return new wa(a,i);case"twitter.com":return new ka(a,i,e.screenName||null);case"custom":case"anonymous":return new ma(a,null);default:return new ma(a,r,i)}}(n)}var Ia=function(){function e(t,n){I(this,e),this.type=t,this.credential=n}return E(e,[{key:"toJSON",value:function(){return{multiFactorSession:x({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),_a=function(){function e(t,n,r){I(this,e),this.session=t,this.hints=n,this.signInResolver=r}return E(e,[{key:"resolveSignIn",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=_r(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Gi._fromServerResponse(r,e)}));fn(i.mfaPendingCredential,r,"internal-error");var o=Ia._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=k(b().mark((function e(t){var a,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,xi._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return fn(n.user,r,"internal-error"),e.abrupt("return",xi._forOperation(n.user,n.operationType,s));case 17:on(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ea(e,t){return En(e,"POST","/v2/accounts/mfaEnrollment:start",_n(e,t))}function Ta(e,t){return En(e,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(e,t))}var Sa=function(){function e(t){var n=this;I(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Gi._fromServerResponse(t.auth,e)})))}))}return E(e,[{key:"getSession",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ia,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Wn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=k(b().mark((function e(t){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Wn(this.user,Ta(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Aa=new WeakMap;var Na="__sak",Ca=function(){function e(t,n){I(this,e),this.storageRetriever=t,this.type=n}return E(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Na,"1"),this.storage.removeItem(Na),Promise.resolve(!0)):Promise.resolve(!1)}catch(mx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Da=function(e){N(n,e);var t=O(n);function n(){var e;return I(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=z();return fr(e)||yr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=wr(),e._shouldAllowMigration=!0,e}return E(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);br()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=k(b().mark((function e(t,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(C(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=k(b().mark((function e(t){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(C(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(C(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ca);Da.type="LOCAL";var Pa=Da,Oa=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return E(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ca);Oa.type="SESSION";var Ra=Oa;function La(e){return Promise.all(e.map(function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ja=function(){function e(t){I(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return E(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=k(b().mark((function e(t){var n,r,i,a,o,s,u,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,La(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ma(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ja.receivers=[];var Ua=function(){function e(t){I(this,e),this.target=t,this.handlers=new Set}return E(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=k(b().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ma("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Fa(){return window}function Va(){return"undefined"!==typeof Fa().WorkerGlobalScope&&"function"===typeof Fa().importScripts}function qa(){return Ba.apply(this,arguments)}function Ba(){return(Ba=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function za(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Wa="firebaseLocalStorageDb",Qa="firebaseLocalStorage",Ka="fbase_key",Ga=function(){function e(t){I(this,e),this.request=t}return E(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ha(e,t){return e.transaction([Qa],t?"readwrite":"readonly").objectStore(Qa)}function Ya(){var e=indexedDB.deleteDatabase(Wa);return new Ga(e).toPromise()}function Ja(){var e=indexedDB.open(Wa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Qa,{keyPath:Ka})}catch(r){n(r)}})),e.addEventListener("success",k(b().mark((function n(){var r;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Qa)){n.next=12;break}return r.close(),n.next=5,Ya();case 5:return n.t0=t,n.next=8,Ja();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Xa(e,t,n){return Za.apply(this,arguments)}function Za(){return Za=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ha(t,!0).put((x(i={},Ka,n),x(i,"value",r),i)),e.abrupt("return",new Ga(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}function $a(e,t){return eo.apply(this,arguments)}function eo(){return eo=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ha(t,!1).get(n),e.next=3,new Ga(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t){var n=Ha(e,!0).delete(t);return new Ga(n).toPromise()}var no=function(){function e(){I(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return E(e,[{key:"_openDb",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ja();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=k(b().mark((function e(){var t=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ja._getInstance(Va()?self:null),this.receiver._subscribe("keyChanged",function(){var e=k(b().mark((function e(n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=k(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ua(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&za()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ja();case 5:return t=e.sent,e.next=8,Xa(t,Na,"1");case 8:return e.next=10,to(t,Na);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=k(b().mark((function e(t,n){var r=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Xa(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return $a(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=k(b().mark((function e(t){var n=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return to(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=k(b().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ha(e,!1).getAll();return new Ga(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();no.type="LOCAL";var ro=no;function io(e,t){return En(e,"POST","/v2/accounts/mfaSignIn:start",_n(e,t))}function ao(e){return oo.apply(this,arguments)}function oo(){return oo=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function so(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=sn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function uo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var co=1e12,lo=function(){function e(t){I(this,e),this.auth=t,this.counter=co,this._widgets=new Map}return E(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new fo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||co;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||co;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||co,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),fo=function(){function e(t,n,r){var i=this;I(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;fn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return E(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ho=uo("rcb"),po=new bn(3e4,6e4),vo="https://www.google.com/recaptcha/api.js?",mo=function(){function e(){I(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Fa().grecaptcha}return E(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return fn(yo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Fa().grecaptcha):new Promise((function(r,i){var a=Fa().setTimeout((function(){i(sn(e,"network-request-failed"))}),po.get());Fa()[ho]=function(){Fa().clearTimeout(a),delete Fa()[ho];var o=Fa().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(sn(e,"internal-error"))},so("".concat(vo,"?").concat(re({onload:ho,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(sn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Fa().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function yo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var go=function(){function e(){I(this,e)}return E(e,[{key:"load",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new lo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),bo="recaptcha",wo={theme:"light",type:"image"},ko=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},wo),r=arguments.length>2?arguments[2]:void 0;I(this,e),this.parameters=n,this.type=bo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_r(r),this.isInvisible="invisible"===this.parameters.size,fn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;fn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new go:new mo,this.validateStartingState()}return E(e,[{key:"verify",value:function(){var e=k(b().mark((function e(){var t,n,r,i=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){fn(!this.parameters.sitekey,this.auth,"argument-error"),fn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Fa()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){fn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=k(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fn(yn()&&!Va(),this.auth,"internal-error"),e.next=3,xo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,ao(this.auth);case 8:fn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return fn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function xo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Io=function(){function e(t,n){I(this,e),this.verificationId=t,this.onConfirmation=n}return E(e,[{key:"confirm",value:function(e){var t=ui._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function _o(){return _o=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),e.next=3,Ao(i,n,ce(r));case 3:return a=e.sent,e.abrupt("return",new Io(a,(function(e){return Ui(i,e)})));case 5:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function Eo(e,t,n){return To.apply(this,arguments)}function To(){return(To=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),e.next=3,Pi(!1,i,"phone");case 3:return e.next=5,Ao(i.auth,n,ce(r));case 5:return a=e.sent,e.abrupt("return",new Io(a,(function(e){return Vi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(){return(So=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),e.next=3,Ao(i.auth,n,ce(r));case 3:return a=e.sent,e.abrupt("return",new Io(a,(function(e){return Bi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(e,t,n){return No.apply(this,arguments)}function No(){return No=k(b().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,fn("string"===typeof a,t,"argument-error"),fn(r.type===bo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return fn("enroll"===s.type,t,"internal-error"),e.next=13,Ea(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return fn("signin"===s.type,t,"internal-error"),fn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,io(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ni(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),No.apply(this,arguments)}function Co(){return(Co=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ci(ce(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Do=function(){function e(t){I(this,e),this.providerId=e.PROVIDER_ID,this.auth=_r(t)}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ao(this.auth,e,ce(t))}}],[{key:"credential",value:function(e,t){return ui._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ui._fromTokenResponse(n,r):null}}]),e}();function Po(e,t){return t?vn(t):(fn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Do.PROVIDER_ID="phone",Do.PHONE_SIGN_IN_METHOD="phone";var Oo=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this,"custom","custom")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return $r(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return $r(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return $r(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Nr);function Ro(e){return ji(e.auth,new Oo(e),e.bypassAuthState)}function Lo(e){var t=e.auth,n=e.user;return fn(n,t,"internal-error"),Ri(n,new Oo(e),e.bypassAuthState)}function jo(e){return Mo.apply(this,arguments)}function Mo(){return Mo=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,fn(r=t.user,n,"internal-error"),e.abrupt("return",Ci(r,new Oo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}var Uo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];I(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return E(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=k(b().mark((function t(n,r){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=k(b().mark((function e(t){var n,r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ro;case"linkViaPopup":case"linkViaRedirect":return jo;case"reauthViaPopup":case"reauthViaRedirect":return Lo;default:on(this.auth,"internal-error")}}},{key:"resolve",value:function(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Fo=new bn(2e3,1e4);function Vo(e,t,n){return qo.apply(this,arguments)}function qo(){return qo=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),cn(t,n,fi),a=Po(i,r),o=new Qo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Bo(){return(Bo=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=ce(t)).auth,n,fi),a=Po(i.auth,r),o=new Qo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e,t,n){return Wo.apply(this,arguments)}function Wo(){return(Wo=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=ce(t)).auth,n,fi),a=Po(i.auth,r),o=new Qo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qo=function(e){N(n,e);var t=O(n);function n(e,r,i,a,o){var s;return I(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=S(s),s}return E(n,[{key:"executeNotNull",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return fn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=k(b().mark((function e(){var t,n=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn(1===this.filter.length,"Popup operations only handle one event"),t=Ma(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(sn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(sn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(sn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Fo.get())}()}}]),n}(Uo);Qo.currentPopupAction=null;var Ko=new Map,Go=function(e){N(n,e);var t=O(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return I(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return E(n,[{key:"execute",value:function(){var e=k(b().mark((function e(){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ko.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ho(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(C(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ko.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ko.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=k(b().mark((function e(t){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(C(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(C(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Uo);function Ho(e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=es(n),i=$o(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Jo(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$o(t)._set(es(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function Zo(e,t){Ko.set(e._key(),t)}function $o(e){return vn(e._redirectPersistence)}function es(e){return sr("pendingRedirect",e.config.apiKey,e.name)}function ts(e,t,n){return function(e,t,n){return ns.apply(this,arguments)}(e,t,n)}function ns(){return ns=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),cn(t,n,fi),a=Po(i,r),e.next=5,Jo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t,n){return function(e,t,n){return is.apply(this,arguments)}(e,t,n)}function is(){return(is=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=ce(t)).auth,n,fi),a=Po(i.auth,r),e.next=5,Jo(a,i.auth);case 5:return e.next=7,fs(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function as(e,t,n){return function(e,t,n){return os.apply(this,arguments)}(e,t,n)}function os(){return(os=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=ce(t)).auth,n,fi),a=Po(i.auth,r),e.next=5,Pi(!1,i,n.providerId);case 5:return e.next=7,Jo(a,i.auth);case 7:return e.next=9,fs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(e,t){return us.apply(this,arguments)}function us(){return us=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(t)._initializationPromise;case 2:return e.abrupt("return",cs(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=k(b().mark((function e(t,n){var r,i,a,o,s,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=_r(t),a=Po(i,n),o=new Go(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function fs(e){return hs.apply(this,arguments)}function hs(){return(hs=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ma("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ds=function(){function e(t){I(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return E(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!vs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ps(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ps(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ps(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function vs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ms(e){return ys.apply(this,arguments)}function ys(){return ys=k(b().mark((function e(t){var n,r=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",En(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}var gs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bs=/^https?/;function ws(){return ws=k(b().mark((function e(t){var n,r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ms(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ks(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:on(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),ws.apply(this,arguments)}function ks(e){var t=mn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!bs.test(r))return!1;if(gs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var xs=new bn(3e4,6e4);function Is(){var e=Fa().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=fe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var _s=null;function Es(e){return _s=_s||function(e){return new Promise((function(t,n){var r,i,a;function o(){Is(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Is(),n(sn(e,"network-request-failed"))},timeout:xs.get()})}if(null===(i=null===(r=Fa().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Fa().gapi)||void 0===a?void 0:a.load)){var s=uo("iframefcb");return Fa()[s]=function(){gapi.load?o():n(sn(e,"network-request-failed"))},so("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw _s=null,e}))}(e),_s}var Ts=new bn(5e3,15e3),Ss={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},As=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ns(e){var t=e.config;fn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?wn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:st},i=As.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(re(r).slice(1))}function Cs(e){return Ds.apply(this,arguments)}function Ds(){return Ds=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Es(t);case 2:return n=e.sent,fn(r=Fa().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ns(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ss,dontclear:!0},(function(e){return new Promise(function(){var n=k(b().mark((function n(r,i){var a,o,s;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Fa().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=sn(t,"network-request-failed"),o=Fa().setTimeout((function(){i(a)}),Ts.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}var Ps={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Os="_blank",Rs="http://localhost",Ls=function(){function e(t){I(this,e),this.window=t,this.associatedEvent=null}return E(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function js(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},Ps),{width:r.toString(),height:i.toString(),top:a,left:o}),l=z().toLowerCase();n&&(s=hr(l)?Os:n),lr(l)&&(t=t||Rs,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(gr(l)&&"_self"!==s)return Ms(t||"",s),new Ls(null);var h=window.open(t||"",s,f);fn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Ls(h)}function Ms(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Us="__/auth/handler",Fs="emulator/auth/handler";function Vs(e,t,n,r,i,a){fn(e.config.authDomain,e,"auth-domain-config-required"),fn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:st,eventId:i};if(t instanceof fi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(a||{});s<c.length;s++){var l=u(c[s],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof hi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Us);return wn(t,Fs)}(e),"?").concat(re(p).slice(1))}var qs="webStorageSupport",Bs=function(){function e(){I(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ra,this._completeRedirectFn=cs,this._overrideRedirectResult=Zo}return E(e,[{key:"_openPopup",value:function(){var e=k(b().mark((function e(t,n,r,i){var a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Vs(t,n,r,mn(),i),e.abrupt("return",js(t,o,Ma()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=k(b().mark((function e(t,n,r,i){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Vs(t,n,r,mn(),i),Fa().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(dn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cs(t);case 2:return n=e.sent,r=new ds(t),n.register("authEvent",(function(e){return fn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(qs,{type:qs},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),on(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ws.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return wr()||fr()||yr()}}]),e}(),zs=Bs,Ws=function(){function e(t){I(this,e),this.factorId=t}return E(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return hn("unexpected MultiFactorSessionType")}}}]),e}(),Qs=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone")).credential=e,r}return E(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return En(e,"POST","/v2/accounts/mfaEnrollment:finalize",_n(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return En(e,"POST","/v2/accounts/mfaSignIn:finalize",_n(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ws),Ks=function(){function e(){I(this,e)}return E(e,null,[{key:"assertion",value:function(e){return Qs._fromCredential(e)}}]),e}();Ks.FACTOR_ID="phone";var Gs,Hs="@firebase/auth",Ys="0.20.2",Js=function(){function e(t){I(this,e),this.auth=t,this.internalListeners=new Map}return E(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){fn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Xs(){return window}Gs="Browser",et(new he("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){fn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),fn(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Gs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kr(Gs)},i=new Ir(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),et(new he("auth-internal",(function(e){return function(e){return new Js(e)}(_r(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),dt(Hs,Ys,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Gs)),dt(Hs,Ys,"esm2017");function Zs(e,t,n){return $s.apply(this,arguments)}function $s(){return $s=k(b().mark((function e(t,n,r){var i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xs(),o=a.BuildInfo,dn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,au(n.sessionId);case 4:return s=e.sent,u={},yr()?u.ibi=o.packageName:pr()?u.apn=o.packageName:on(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Vs(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function eu(){return eu=k(b().mark((function e(t){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xs(),r=n.BuildInfo,i={},yr()?i.iosBundleId=r.packageName:pr()?i.androidPackageName=r.packageName:on(t,"operation-not-supported-in-this-environment"),e.next=5,ms(t,i);case 5:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e){var t=Xs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function nu(e,t,n){return ru.apply(this,arguments)}function ru(){return ru=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(sn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),pr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ru.apply(this,arguments)}function iu(e){var t,n,r,i,a,o,s,u,c,l,f=Xs();fn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fn("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function au(e){return ou.apply(this,arguments)}function ou(){return(ou=k(b().mark((function e(t){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=su(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function su(e){if(dn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var uu=function(e){N(n,e);var t=O(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return E(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ft(C(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ds);function cu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:pu(),postBody:null,tenantId:e.tenantId,error:sn(e,"no-auth-event")}}function lu(e,t){return vu()._set(mu(e),t)}function fu(e){return hu.apply(this,arguments)}function hu(){return hu=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vu()._get(mu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,vu()._remove(mu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}function du(e,t){var n,r,i=function(e){var t=yu(e),n=t.link?decodeURIComponent(t.link):void 0,r=yu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return yu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=yu(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?sn(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function pu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function vu(){return vn(Pa)}function mu(e){return sr("authEvent",e.config.apiKey,e.name)}function yu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||le(t)||o(t)||s();r[0];return ie(r.slice(1).join("?"))}var gu=function(){function e(){I(this,e),this._redirectPersistence=Ra,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cs,this._overrideRedirectResult=Zo}return E(e,[{key:"_initialize",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new uu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){on(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=k(b().mark((function e(t,n,r,i){var a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return iu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ko.clear(),e.next=10,this._originValidation(t);case 10:return o=cu(t,r,i),e.next=13,lu(t,o);case 13:return e.next=15,Zs(t,o,n);case 15:return s=e.sent,e.next=18,tu(s);case 18:return u=e.sent,e.abrupt("return",nu(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return eu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Xs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(k(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fu(e);case 2:t.onEvent(wu());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=k(b().mark((function n(r){var i,a;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,fu(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=du(i,r.url)),t.onEvent(a||wu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Xs().handleOpenURL=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),bu=gu;function wu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sn("no-auth-event")}}function ku(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function xu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return!("file:"!==ku()&&"ionic:"!==ku()&&"capacitor:"!==ku()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Iu(){return H()&&11===(null===document||void 0===document?void 0:document.documentMode)}function _u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/Edge\/\d+/.test(e)}function Eu(){try{var e=self.localStorage,t=Ma();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return Iu()||_u(e)}()||Y()}catch(n){return Tu()&&Y()}return!1}function Tu(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Su(){return("http:"===ku()||"https:"===ku()||K()||xu())&&!(G()||Q())&&Eu()&&!Tu()}function Au(){return xu()&&"undefined"!==typeof document}function Nu(){return Cu.apply(this,arguments)}function Cu(){return(Cu=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Au()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Du={LOCAL:"local",NONE:"none",SESSION:"session"},Pu=fn,Ou="persistence";function Ru(e,t){Pu(Object.values(Du).includes(t),e,"invalid-persistence-type"),G()?Pu(t!==Du.SESSION,e,"unsupported-persistence-type"):Q()?Pu(t===Du.NONE,e,"unsupported-persistence-type"):Tu()?Pu(t===Du.NONE||t===Du.LOCAL&&Y(),e,"unsupported-persistence-type"):Pu(t===Du.NONE||Eu(),e,"unsupported-persistence-type")}function Lu(e){return ju.apply(this,arguments)}function ju(){return ju=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Mu(),r=sr(Ou,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Mu(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Uu=fn,Fu=function(){function e(){I(this,e),this.browserResolver=vn(zs),this.cordovaResolver=vn(bu),this.underlyingResolver=null,this._redirectPersistence=Ra,this._completeRedirectFn=cs,this._overrideRedirectResult=Zo}return E(e,[{key:"_initialize",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=k(b().mark((function e(t,n,r,i){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=k(b().mark((function e(t,n,r,i){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Au()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Uu(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Nu();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Vu(e){return e.unwrap()}function qu(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ku(e,function(e,t){var n,r=ce(e),i=t;return fn(t.customData.operationType,r,"argument-error"),fn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_a._fromError(r,i)}(e,t));else if(r){var i=Bu(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Bu(e){var t=(e instanceof J?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof J)&&"temporaryProof"in t&&"phoneNumber"in t)return Do.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Qt)return null;switch(r){case Wt:n=vi;break;case Bt:n=pi;break;case zt:n=mi;break;case Kt:n=bi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?yi._create(r,s):ti._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new di(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof J?n.credentialFromError(e):n.credentialFromResult(e)}function zu(e,t){return t.catch((function(t){throw t instanceof J&&qu(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Bu(t)),additionalUserInfo:xa(e),user:Gu.getOrCreate(r)}}))}function Wu(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return zu(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}var Ku=function(){function e(t,n){I(this,e),this.resolver=n,this.auth=t.wrapped()}return E(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return zu(Vu(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Gu=function(){function e(t){I(this,e),this._delegate=t,this.multiFactor=function(e){var t=ce(e);return Aa.has(t)||Aa.set(t,Sa._fromUser(t)),Aa.get(t)}(t)}return E(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zu(this.auth,Vi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wu(this.auth,Eo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zu(this.auth,zo(this._delegate,t,Fu)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu(_r(this.auth));case 2:return e.abrupt("return",as(this._delegate,t,Fu));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zu(this.auth,Bi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Wu(this.auth,function(e,t,n){return So.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return zu(this.auth,function(e,t,n){return Bo.apply(this,arguments)}(this._delegate,e,Fu))}},{key:"reauthenticateWithRedirect",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu(_r(this.auth));case 2:return e.abrupt("return",rs(this._delegate,t,Fu));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ca.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ai(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return pa(ce(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return pa(ce(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Co.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return da.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return la.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Gu.USER_MAP=new WeakMap;var Hu=fn,Yu=function(){function e(t,n){if(I(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Hu(r,"invalid-api-key",{appName:t.name}),Hu(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Fu:void 0;this._delegate=n.initialize({options:{persistence:Xu(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(en),this.linkUnderlyingAuth()}return E(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Gu.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Tr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Zi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return $i(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Xi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zu(this._delegate,na(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ua.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ci.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(Su(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ss(this._delegate,Fu);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",zu(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){_r(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ju(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ju(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ia.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ji.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ru(this._delegate,t),e.t0=t,e.next=e.t0===Du.SESSION?4:e.t0===Du.LOCAL?6:e.t0===Du.NONE?11:13;break;case 4:return n=Ra,e.abrupt("break",14);case 6:return e.next=8,vn(ro)._isAvailable();case 8:return r=e.sent,n=r?ro:Pa,e.abrupt("break",14);case 11:return n=or,e.abrupt("break",14);case 13:return e.abrupt("return",on("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return zu(this._delegate,function(e){return _i.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return zu(this._delegate,Ui(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return zu(this._delegate,function(e,t){return Ki.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return zu(this._delegate,function(e,t,n){return Ui(ce(e),li.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return zu(this._delegate,function(e,t,n){return aa.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Wu(this._delegate,function(e,t,n){return _o.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(Su(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",zu(this._delegate,Vo(this._delegate,t,Fu)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(Su(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Lu(this._delegate);case 3:return e.abrupt("return",ts(this._delegate,t,Fu));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ta.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ju(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Gu.getOrCreate(e))},error:t,complete:n}}function Xu(e,t){var n=function(e,t){var n=Mu();if(!n)return[];var r=sr(Ou,e,t);switch(n.getItem(r)){case Du.NONE:return[or];case Du.LOCAL:return[ro,Ra];case Du.SESSION:return[Ra];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ro)||n.push(ro),"undefined"!==typeof window)for(var r=0,i=[Pa,Ra];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(or)||n.push(or),n}Yu.Persistence=Du;var Zu=function(){function e(){I(this,e),this.providerId="phone",this._delegate=new Do(Vu(Mt.auth()))}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Do.credential(e,t)}}]),e}();Zu.PHONE_SIGN_IN_METHOD=Do.PHONE_SIGN_IN_METHOD,Zu.PROVIDER_ID=Do.PROVIDER_ID;var $u,ec=fn,tc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt.app();I(this,e),ec(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ko(t,n,i.auth()),this.type=this._delegate.type}return E(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();($u=Mt).INTERNAL.registerComponent(new he("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Yu(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Gt,PASSWORD_RESET:Ht,RECOVER_EMAIL:Yt,REVERT_SECOND_FACTOR_ADDITION:Jt,VERIFY_AND_CHANGE_EMAIL:Xt,VERIFY_EMAIL:Zt}},EmailAuthProvider:li,FacebookAuthProvider:pi,GithubAuthProvider:mi,GoogleAuthProvider:vi,OAuthProvider:di,SAMLAuthProvider:gi,PhoneAuthProvider:Zu,PhoneMultiFactorGenerator:Ks,RecaptchaVerifier:tc,TwitterAuthProvider:bi,Auth:Yu,AuthCredential:Nr,Error:J}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$u.registerVersion("@firebase/auth-compat","0.2.15");var nc,rc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ic={},ac=ac||{},oc=rc||self;function sc(){}function uc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function cc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var lc="closure_uid_"+(1e9*Math.random()>>>0),fc=0;function hc(e,t,n){return e.call.apply(e.bind,arguments)}function dc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function pc(e,t,n){return(pc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hc:dc).apply(null,arguments)}function vc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function yc(){this.s=this.s,this.o=this.o}var gc={};yc.prototype.s=!1,yc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,lc)&&e[lc]||(e[lc]=++fc)}(this);delete gc[e]}},yc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},wc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function kc(e){return Array.prototype.concat.apply([],arguments)}function xc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ic(e){return/^[\s\xa0]*$/.test(e)}var _c,Ec=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Tc(e,t){return-1!=e.indexOf(t)}function Sc(e,t){return e<t?-1:e>t?1:0}e:{var Ac=oc.navigator;if(Ac){var Nc=Ac.userAgent;if(Nc){_c=Nc;break e}}_c=""}function Cc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Dc(e){var t={};for(var n in e)t[n]=e[n];return t}var Pc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Pc.length;a++)n=Pc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Rc(e){return Rc[" "](e),e}Rc[" "]=sc;var Lc,jc=Tc(_c,"Opera"),Mc=Tc(_c,"Trident")||Tc(_c,"MSIE"),Uc=Tc(_c,"Edge"),Fc=Uc||Mc,Vc=Tc(_c,"Gecko")&&!(Tc(_c.toLowerCase(),"webkit")&&!Tc(_c,"Edge"))&&!(Tc(_c,"Trident")||Tc(_c,"MSIE"))&&!Tc(_c,"Edge"),qc=Tc(_c.toLowerCase(),"webkit")&&!Tc(_c,"Edge");function Bc(){var e=oc.document;return e?e.documentMode:void 0}e:{var zc="",Wc=function(){var e=_c;return Vc?/rv:([^\);]+)(\)|;)/.exec(e):Uc?/Edge\/([\d\.]+)/.exec(e):Mc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):qc?/WebKit\/(\S+)/.exec(e):jc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Wc&&(zc=Wc?Wc[1]:""),Mc){var Qc=Bc();if(null!=Qc&&Qc>parseFloat(zc)){Lc=String(Qc);break e}}Lc=zc}var Kc,Gc={};function Hc(){return function(e){var t=Gc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Ec(String(Lc)).split("."),n=Ec("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Sc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Sc(0==a[2].length,0==o[2].length)||Sc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(oc.document&&Mc){var Yc=Bc();Kc=Yc||(parseInt(Lc,10)||void 0)}else Kc=void 0;var Jc=Kc,Xc=function(){if(!oc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{oc.addEventListener("test",sc,t),oc.removeEventListener("test",sc,t)}catch(n){}return e}();function Zc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function $c(e,t){if(Zc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vc){e:{try{Rc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:el[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$c.Z.h.call(this)}}Zc.prototype.h=function(){this.defaultPrevented=!0},mc($c,Zc);var el={2:"touch",3:"pen",4:"mouse"};$c.prototype.h=function(){$c.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var tl="closure_listenable_"+(1e6*Math.random()|0),nl=0;function rl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++nl,this.ca=this.fa=!1}function il(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function al(e){this.src=e,this.g={},this.h=0}function ol(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=bc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(il(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}al.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=sl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new rl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ul="closure_lm_"+(1e6*Math.random()|0),cl={};function ll(e,t,n,r,i){if(r&&r.once)return hl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ll(e,t[a],n,r,i);return null}return n=bl(n),e&&e[tl]?e.N(t,n,cc(r)?!!r.capture:!!r,i):fl(e,t,n,!1,r,i)}function fl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=cc(i)?!!i.capture:!!i,s=yl(e);if(s||(e[ul]=s=new al(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ml;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(vl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function hl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)hl(e,t[a],n,r,i);return null}return n=bl(n),e&&e[tl]?e.O(t,n,cc(r)?!!r.capture:!!r,i):fl(e,t,n,!0,r,i)}function dl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)dl(e,t[a],n,r,i);else r=cc(r)?!!r.capture:!!r,n=bl(n),e&&e[tl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sl(a=e.g[t],n,r,i))&&(il(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=yl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sl(t,n,r,i)),(n=-1<e?t[e]:null)&&pl(n))}function pl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[tl])ol(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(vl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yl(t))?(ol(n,e),0==n.h&&(n.src=null,t[ul]=null)):il(e)}}}function vl(e){return e in cl?cl[e]:cl[e]="on"+e}function ml(e,t){if(e.ca)e=!0;else{t=new $c(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&pl(e),e=n.call(r,t)}return e}function yl(e){return(e=e[ul])instanceof al?e:null}var gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function bl(e){return"function"===typeof e?e:(e[gl]||(e[gl]=function(t){return e.handleEvent(t)}),e[gl])}function wl(){yc.call(this),this.i=new al(this),this.P=this,this.I=null}function kl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Zc(t,e);else if(t instanceof Zc)t.target=t.target||e;else{var i=t;Oc(t=new Zc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=xl(o,r,!0,t)&&i}if(i=xl(o=t.g=e,r,!0,t)&&i,i=xl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=xl(o=t.g=n[a],r,!1,t)&&i}function xl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&ol(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}mc(wl,yc),wl.prototype[tl]=!0,wl.prototype.removeEventListener=function(e,t,n,r){dl(this,e,t,n,r)},wl.prototype.M=function(){if(wl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)il(n[r]);delete t.g[e],t.h--}}this.I=null},wl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},wl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Il=oc.JSON.stringify;function _l(){var e=Pl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var El,Tl=function(){function e(){I(this,e),this.h=this.g=null}return E(e,[{key:"add",value:function(e,t){var n=Sl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Sl=new(function(){function e(t,n){I(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return E(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Al}),(function(e){return e.reset()})),Al=function(){function e(){I(this,e),this.next=this.g=this.h=null}return E(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Nl(e){oc.setTimeout((function(){throw e}),0)}function Cl(e,t){El||function(){var e=oc.Promise.resolve(void 0);El=function(){e.then(Ol)}}(),Dl||(El(),Dl=!0),Pl.add(e,t)}var Dl=!1,Pl=new Tl;function Ol(){for(var e;e=_l();){try{e.h.call(e.g)}catch(n){Nl(n)}var t=Sl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Dl=!1}function Rl(e,t){wl.call(this),this.h=e||1,this.g=t||oc,this.j=pc(this.kb,this),this.l=Date.now()}function Ll(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function jl(e,t,n){if("function"===typeof e)n&&(e=pc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=pc(e.handleEvent,e)}return 2147483647<Number(t)?-1:oc.setTimeout(e,t||0)}function Ml(e){e.g=jl((function(){e.g=null,e.i&&(e.i=!1,Ml(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}mc(Rl,wl),(nc=Rl.prototype).da=!1,nc.S=null,nc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kl(this,"tick"),this.da&&(Ll(this),this.start()))}},nc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nc.M=function(){Rl.Z.M.call(this),Ll(this),delete this.g};var Ul=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return E(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ml(this)}},{key:"M",value:function(){Ft(C(n.prototype),"M",this).call(this),this.g&&(oc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(yc);function Fl(e){yc.call(this),this.h=e,this.g={}}mc(Fl,yc);var Vl=[];function ql(e,t,n,r){Array.isArray(n)||(n&&(Vl[0]=n.toString()),n=Vl);for(var i=0;i<n.length;i++){var a=ll(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Bl(e){Cc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pl(e)}),e),e.g={}}function zl(){this.g=!0}function Wl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Il(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Fl.prototype.M=function(){Fl.Z.M.call(this),Bl(this)},Fl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zl.prototype.Aa=function(){this.g=!1},zl.prototype.info=function(){};var Ql={},Kl=null;function Gl(){return Kl=Kl||new wl}function Hl(e){Zc.call(this,Ql.Ma,e)}function Yl(e){var t=Gl();kl(t,new Hl(t,e))}function Jl(e,t){Zc.call(this,Ql.STAT_EVENT,e),this.stat=t}function Xl(e){var t=Gl();kl(t,new Jl(t,e))}function Zl(e,t){Zc.call(this,Ql.Na,e),this.size=t}function $l(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return oc.setTimeout((function(){e()}),t)}Ql.Ma="serverreachability",mc(Hl,Zc),Ql.STAT_EVENT="statevent",mc(Jl,Zc),Ql.Na="timingevent",mc(Zl,Zc);var ef={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},tf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function nf(){}function rf(e){return e.h||(e.h=e.i())}function af(){}nf.prototype.h=null;var of,sf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uf(){Zc.call(this,"d")}function cf(){Zc.call(this,"c")}function lf(){}function ff(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Fl(this),this.P=df,e=Fc?125:void 0,this.W=new Rl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hf}function hf(){this.i=null,this.g="",this.h=!1}mc(uf,Zc),mc(cf,Zc),mc(lf,nf),lf.prototype.g=function(){return new XMLHttpRequest},lf.prototype.i=function(){return{}},of=new lf;var df=45e3,pf={},vf={};function mf(e,t,n){e.K=1,e.v=Ff(Of(t)),e.s=n,e.U=!0,yf(e,null)}function yf(e,t){e.F=Date.now(),kf(e),e.A=Of(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Zf(n.h,"t",r),e.C=0,n=e.l.H,e.h=new hf,e.g=ed(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ul(pc(e.Ia,e,e.g),e.O)),ql(e.V,e.g,"readystatechange",e.gb),t=e.H?Dc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Yl(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function gf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function bf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=wf(e,n))==vf){4==t&&(e.o=4,Xl(14),i=!1),Wl(e.j,e.m,null,"[Incomplete Response]");break}if(r==pf){e.o=4,Xl(15),Wl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Wl(e.j,e.m,r,null),Tf(e,r)}gf(e)&&r!=vf&&r!=pf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Xl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kh(t),t.L=!0,Xl(11))):(Wl(e.j,e.m,n,"[Invalid Chunked Response]"),Ef(e),_f(e))}function wf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vf:(n=Number(t.substring(n,r)),isNaN(n)?pf:(r+=1)+n>t.length?vf:(t=t.substr(r,n),e.C=r+n,t))}function kf(e){e.Y=Date.now()+e.P,xf(e,e.P)}function xf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$l(pc(e.eb,e),t)}function If(e){e.B&&(oc.clearTimeout(e.B),e.B=null)}function _f(e){0==e.l.G||e.I||Yh(e.l,e)}function Ef(e){If(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ll(e.W),Bl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Tf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||oh(n.i,e)))if(n.I=e.N,!e.J&&oh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Hh(n),Mh(n)}Qh(n),Xl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$l(pc(n.ab,n),6e3));if(1>=ah(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Xh(n,11)}else if((e.J||n.g==e)&&Hh(n),!Ic(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Tc(l,"spdy")||Tc(l,"quic")||Tc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(sh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Uf(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=$h(r,r.H?r.la:null,r.W),d.J){uh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(If(p),kf(p)),r.g=d}else Wh(r);0<n.l.length&&Vh(n)}else"stop"!=a[0]&&"close"!=a[0]||Xh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xh(n,7):jh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Yl(4)}catch(a){}}function Sf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(uc(e)||"string"===typeof e)wc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(uc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(uc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Af(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Af)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Cf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Cf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Cf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(nc=ff.prototype).setTimeout=function(e){this.P=e},nc.gb=function(e){e=e.target;var t=this.L;t&&3==Dh(e)?t.l():this.Ia(e)},nc.Ia=function(e){try{if(e==this.g)e:{var t=Dh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Fc||this.g&&(this.h.h||this.g.ga()||Ph(this.g)))){this.I||4!=t||7==n||Yl(8==n||0>=r?3:2),If(this);var i=this.g.ba();this.N=i;t:if(gf(this)){var a=Ph(this.g);e="";var o=a.length,s=4==Dh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ef(this),_f(this);var u="";break t}this.h.i=new oc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ic(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Xl(12),Ef(this),_f(this);break e}Wl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tf(this,i)}this.U?(bf(this,t,u),Fc&&this.i&&3==t&&(ql(this.V,this.W,"tick",this.fb),this.W.start())):(Wl(this.j,this.m,u,null),Tf(this,u)),4==t&&Ef(this),this.i&&!this.I&&(4==t?Yh(this.l,this):(this.i=!1,kf(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Xl(12)):(this.o=0,Xl(13)),Ef(this),_f(this)}}}catch(t){}},nc.fb=function(){if(this.g){var e=Dh(this.g),t=this.g.ga();this.C<t.length&&(If(this),bf(this,e,t),this.i&&4!=e&&kf(this))}},nc.cancel=function(){this.I=!0,Ef(this)},nc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Yl(3),Xl(17)),Ef(this),this.o=2,_f(this)):xf(this,this.Y-e)},(nc=Af.prototype).R=function(){Nf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},nc.T=function(){return Nf(this),this.g.concat()},nc.get=function(e,t){return Cf(this.h,e)?this.h[e]:t},nc.set=function(e,t){Cf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},nc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Df=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Pf){this.g=void 0!==t?t:e.g,Rf(this,e.j),this.s=e.s,Lf(this,e.i),jf(this,e.m),this.l=e.l,t=e.h;var n=new Hf;n.i=t.i,t.g&&(n.g=new Af(t.g),n.h=t.h),Mf(this,n),this.o=e.o}else e&&(n=String(e).match(Df))?(this.g=!!t,Rf(this,n[1]||"",!0),this.s=Vf(n[2]||""),Lf(this,n[3]||"",!0),jf(this,n[4]),this.l=Vf(n[5]||"",!0),Mf(this,n[6]||"",!0),this.o=Vf(n[7]||"")):(this.g=!!t,this.h=new Hf(null,this.g))}function Of(e){return new Pf(e)}function Rf(e,t,n){e.j=n?Vf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Lf(e,t,n){e.i=n?Vf(t,!0):t}function jf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mf(e,t,n){t instanceof Hf?(e.h=t,function(e,t){t&&!e.j&&(Yf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jf(this,t),Zf(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=qf(t,Kf)),e.h=new Hf(t,e.g))}function Uf(e,t,n){e.h.set(t,n)}function Ff(e){return Uf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Vf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Bf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qf(t,zf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(qf(t,zf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(qf(n,"/"==n.charAt(0)?Qf:Wf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qf(n,Gf)),e.join("")};var zf=/[#\/\?@]/g,Wf=/[#\?:]/g,Qf=/[#\?]/g,Kf=/[#\?@]/g,Gf=/#/g;function Hf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Yf(e){e.g||(e.g=new Af,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jf(e,t){Yf(e),t=$f(e,t),Cf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Cf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Nf(e)))}function Xf(e,t){return Yf(e),t=$f(e,t),Cf(e.g.h,t)}function Zf(e,t,n){Jf(e,t),0<n.length&&(e.i=null,e.g.set($f(e,t),xc(n)),e.h+=n.length)}function $f(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(nc=Hf.prototype).add=function(e,t){Yf(this),this.i=null,e=$f(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},nc.forEach=function(e,t){Yf(this),this.g.forEach((function(n,r){wc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},nc.T=function(){Yf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},nc.R=function(e){Yf(this);var t=[];if("string"===typeof e)Xf(this,e)&&(t=kc(t,this.g.get($f(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=kc(t,e[n])}return t},nc.set=function(e,t){return Yf(this),this.i=null,Xf(this,e=$f(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},nc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},nc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var eh=E((function e(t,n){I(this,e),this.h=t,this.g=n}));function th(e){this.l=e||rh,oc.PerformanceNavigationTiming?e=0<(e=oc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(oc.g&&oc.g.Ea&&oc.g.Ea()&&oc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nh,rh=10;function ih(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ah(e){return e.h?1:e.g?e.g.size:0}function oh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function sh(e,t){e.g?e.g.add(t):e.h=t}function uh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ch(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return xc(e.i)}function lh(){}function fh(){this.g=new lh}function hh(e,t,n){var r=n||"";try{Sf(e,(function(e,n){var i=e;cc(e)&&(i=Il(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function dh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ph(e){this.l=e.$b||null,this.j=e.ib||!1}function vh(e,t){wl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=mh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}th.prototype.cancel=function(){if(this.i=ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},lh.prototype.stringify=function(e){return oc.JSON.stringify(e,void 0)},lh.prototype.parse=function(e){return oc.JSON.parse(e,void 0)},mc(ph,nf),ph.prototype.g=function(){return new vh(this.l,this.j)},ph.prototype.i=(nh={},function(){return nh}),mc(vh,wl);var mh=0;function yh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function gh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bh(e)}function bh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(nc=vh.prototype).open=function(e,t){if(this.readyState!=mh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bh(this)},nc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||oc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},nc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gh(this)),this.readyState=mh},nc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bh(this)),this.g&&(this.readyState=3,bh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof oc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},nc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gh(this):bh(this),3==this.readyState&&yh(this)}},nc.Ua=function(e){this.g&&(this.response=this.responseText=e,gh(this))},nc.Ta=function(e){this.g&&(this.response=e,gh(this))},nc.ha=function(){this.g&&gh(this)},nc.setRequestHeader=function(e,t){this.v.append(e,t)},nc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},nc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var wh=oc.JSON.parse;function kh(e){wl.call(this),this.headers=new Af,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xh,this.K=this.L=!1}mc(kh,wl);var xh="",Ih=/^https?$/i,_h=["POST","PUT"];function Eh(e){return"content-type"==e.toLowerCase()}function Th(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Sh(e),Nh(e)}function Sh(e){e.D||(e.D=!0,kl(e,"complete"),kl(e,"error"))}function Ah(e){if(e.h&&"undefined"!=typeof ac&&(!e.C[1]||4!=Dh(e)||2!=e.ba()))if(e.v&&4==Dh(e))jl(e.Fa,0,e);else if(kl(e,"readystatechange"),4==Dh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Df)[1]||null;if(!a&&oc.self&&oc.self.location){var o=oc.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ih.test(a?a.toLowerCase():"")}t=i}if(t)kl(e,"complete"),kl(e,"success");else{e.m=6;try{var s=2<Dh(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Sh(e)}}finally{Nh(e)}}}function Nh(e,t){if(e.g){Ch(e);var n=e.g,r=e.C[0]?sc:null;e.g=null,e.C=null,t||kl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ch(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(oc.clearTimeout(e.A),e.A=null)}function Dh(e){return e.g?e.g.readyState:0}function Ph(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case xh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Oh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Cc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Uf(e,t,n))}function Rh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Lh(e){this.za=0,this.l=[],this.h=new zl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rh("baseRetryDelayMs",5e3,e),this.$a=Rh("retryDelaySeedMs",1e4,e),this.Ya=Rh("forwardChannelMaxRetries",2,e),this.ra=Rh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new th(e&&e.concurrentRequestLimit),this.Ca=new fh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function jh(e){if(Uh(e),3==e.G){var t=e.V++,n=Of(e.F);Uf(n,"SID",e.J),Uf(n,"RID",t),Uf(n,"TYPE","terminate"),Bh(e,n),(t=new ff(e,e.h,t,void 0)).K=2,t.v=Ff(Of(n)),n=!1,oc.navigator&&oc.navigator.sendBeacon&&(n=oc.navigator.sendBeacon(t.v.toString(),"")),!n&&oc.Image&&((new Image).src=t.v,n=!0),n||(t.g=ed(t.l,null),t.g.ea(t.v)),t.F=Date.now(),kf(t)}Zh(e)}function Mh(e){e.g&&(Kh(e),e.g.cancel(),e.g=null)}function Uh(e){Mh(e),e.u&&(oc.clearTimeout(e.u),e.u=null),Hh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&oc.clearTimeout(e.m),e.m=null)}function Fh(e,t){e.l.push(new eh(e.Za++,t)),3==e.G&&Vh(e)}function Vh(e){ih(e.i)||e.m||(e.m=!0,Cl(e.Ha,e),e.C=0)}function qh(e,t){var n;n=t?t.m:e.V++;var r=Of(e.F);Uf(r,"SID",e.J),Uf(r,"RID",n),Uf(r,"AID",e.U),Bh(e,r),e.o&&e.s&&Oh(r,e.o,e.s),n=new ff(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=zh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),sh(e.i,n),mf(n,r,t)}function Bh(e,t){e.j&&Sf({},(function(e,n){Uf(t,n,e)}))}function zh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?pc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{hh(l,o,"req"+c+"_")}catch(Ad){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Wh(e){e.g||e.u||(e.Y=1,Cl(e.Ga,e),e.A=0)}function Qh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=$l(pc(e.Ga,e),Jh(e,e.A)),e.A++,!0)}function Kh(e){null!=e.B&&(oc.clearTimeout(e.B),e.B=null)}function Gh(e){e.g=new ff(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Of(e.oa);Uf(t,"RID","rpc"),Uf(t,"SID",e.J),Uf(t,"CI",e.N?"0":"1"),Uf(t,"AID",e.U),Bh(e,t),Uf(t,"TYPE","xmlhttp"),e.o&&e.s&&Oh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ff(Of(t)),n.s=null,n.U=!0,yf(n,e)}function Hh(e){null!=e.v&&(oc.clearTimeout(e.v),e.v=null)}function Yh(e,t){var n=null;if(e.g==t){Hh(e),Kh(e),e.g=null;var r=2}else{if(!oh(e.i,t))return;n=t.D,uh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;kl(r=Gl(),new Zl(r,n,t,i)),Vh(e)}else Wh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ah(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=$l(pc(e.Ha,e,t),Jh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Qh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xh(e,5);break;case 4:Xh(e,10);break;case 3:Xh(e,6);break;default:Xh(e,2)}}function Jh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Xh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=pc(e.jb,e);n||(n=new Pf("//www.google.com/images/cleardot.gif"),oc.location&&"http"==oc.location.protocol||Rf(n,"https"),Ff(n)),function(e,t){var n=new zl;if(oc.Image){var r=new Image;r.onload=vc(dh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vc(dh,n,r,"TestLoadImage: error",!1,t),r.onabort=vc(dh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vc(dh,n,r,"TestLoadImage: timeout",!1,t),oc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Xl(2);e.G=0,e.j&&e.j.va(t),Zh(e),Uh(e)}function Zh(e){e.G=0,e.I=-1,e.j&&(0==ch(e.i).length&&0==e.l.length||(e.i.i.length=0,xc(e.l),e.l.length=0),e.j.ua())}function $h(e,t,n){var r=function(e){return e instanceof Pf?Of(e):new Pf(e,void 0)}(n);if(""!=r.i)t&&Lf(r,t+"."+r.i),jf(r,r.m);else{var i=oc.location;r=function(e,t,n,r){var i=new Pf(null,void 0);return e&&Rf(i,e),t&&Lf(i,t),n&&jf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Cc(e.aa,(function(e,t){Uf(r,t,e)})),t=e.D,n=e.sa,t&&n&&Uf(r,t,n),Uf(r,"VER",e.ma),Bh(e,r),r}function ed(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new kh(new ph({ib:!0})):new kh(e.qa)).L=e.H,t}function td(){}function nd(){if(Mc&&!(10<=Number(Jc)))throw Error("Environmental error: no available transport.")}function rd(e,t){wl.call(this),this.g=new Lh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ic(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ic(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new od(this)}function id(e){uf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ad(){cf.call(this),this.status=1}function od(e){this.g=e}(nc=kh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():of.g(),this.C=this.u?rf(this.u):rf(of),this.g.onreadystatechange=pc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Th(this,a)}e=n||"";var i=new Af(this.headers);r&&Sf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Eh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=oc.FormData&&e instanceof oc.FormData,!(0<=bc(_h,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ch(this),0<this.B&&((this.K=function(e){return Mc&&Hc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pc(this.pa,this)):this.A=jl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Th(this,a)}},nc.pa=function(){"undefined"!=typeof ac&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kl(this,"timeout"),this.abort(8))},nc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kl(this,"complete"),kl(this,"abort"),Nh(this))},nc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nh(this,!0)),kh.Z.M.call(this)},nc.Fa=function(){this.s||(this.F||this.v||this.l?Ah(this):this.cb())},nc.cb=function(){Ah(this)},nc.ba=function(){try{return 2<Dh(this)?this.g.status:-1}catch(nh){return-1}},nc.ga=function(){try{return this.g?this.g.responseText:""}catch(nh){return""}},nc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wh(t)}},nc.Da=function(){return this.m},nc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(nc=Lh.prototype).ma=8,nc.G=1,nc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},nc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ff(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Oc(n=Dc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zh(this,t,r),Uf(i=Of(this.F),"RID",e),Uf(i,"CVER",22),this.D&&Uf(i,"X-HTTP-Session-Id",this.D),Bh(this,i),this.o&&n&&Oh(i,this.o,n),sh(this.i,t),this.Ra&&Uf(i,"TYPE","init"),this.ja?(Uf(i,"$req",r),Uf(i,"SID","null"),t.$=!0,mf(t,i,null)):mf(t,i,r),this.G=2}}else 3==this.G&&(e?qh(this,e):0==this.l.length||ih(this.i)||qh(this))},nc.Ga=function(){if(this.u=null,Gh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=$l(pc(this.bb,this),e)}},nc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xl(10),Mh(this),Gh(this))},nc.ab=function(){null!=this.v&&(this.v=null,Mh(this),Qh(this),Xl(19))},nc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Xl(2)):(this.h.info("Failed to ping google.com"),Xl(1))},(nc=td.prototype).xa=function(){},nc.wa=function(){},nc.va=function(){},nc.ua=function(){},nc.Oa=function(){},nd.prototype.g=function(e,t){return new rd(e,t)},mc(rd,wl),rd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Cl(pc(e.hb,e,t))),Xl(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=$h(e,null,e.W),Vh(e)},rd.prototype.close=function(){jh(this.g)},rd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Fh(this.g,t)}else this.v?((t={}).__data__=Il(e),Fh(this.g,t)):Fh(this.g,e)},rd.prototype.M=function(){this.g.j=null,delete this.j,jh(this.g),delete this.g,rd.Z.M.call(this)},mc(id,uf),mc(ad,cf),mc(od,td),od.prototype.xa=function(){kl(this.g,"a")},od.prototype.wa=function(e){kl(this.g,new id(e))},od.prototype.va=function(e){kl(this.g,new ad(e))},od.prototype.ua=function(){kl(this.g,"b")},nd.prototype.createWebChannel=nd.prototype.g,rd.prototype.send=rd.prototype.u,rd.prototype.open=rd.prototype.m,rd.prototype.close=rd.prototype.close,ef.NO_ERROR=0,ef.TIMEOUT=8,ef.HTTP_ERROR=6,tf.COMPLETE="complete",af.EventType=sf,sf.OPEN="a",sf.CLOSE="b",sf.ERROR="c",sf.MESSAGE="d",wl.prototype.listen=wl.prototype.N,kh.prototype.listenOnce=kh.prototype.O,kh.prototype.getLastError=kh.prototype.La,kh.prototype.getLastErrorCode=kh.prototype.Da,kh.prototype.getStatus=kh.prototype.ba,kh.prototype.getResponseJson=kh.prototype.Qa,kh.prototype.getResponseText=kh.prototype.ga,kh.prototype.send=kh.prototype.ea;var sd=ic.createWebChannelTransport=function(){return new nd},ud=ic.getStatEventTarget=function(){return Gl()},cd=ic.ErrorCode=ef,ld=ic.EventType=tf,fd=ic.Event=Ql,hd=ic.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dd=ic.FetchXmlHttpFactory=ph,pd=ic.WebChannel=af,vd=ic.XhrIo=kh,md="@firebase/firestore",yd=function(){function e(t){I(this,e),this.uid=t}return E(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yd.UNAUTHENTICATED=new yd(null),yd.GOOGLE_CREDENTIALS=new yd("google-credentials-uid"),yd.FIRST_PARTY=new yd("first-party-uid"),yd.MOCK_USER=new yd("mock-user");var gd="9.8.0",bd=new Ie("@firebase/firestore");function wd(){return bd.logLevel}function kd(e){if(bd.logLevel<=me.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(_d);bd.debug.apply(bd,["Firestore (".concat(gd,"): ").concat(e)].concat(fe(i)))}}function xd(e){if(bd.logLevel<=me.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(_d);bd.error.apply(bd,["Firestore (".concat(gd,"): ").concat(e)].concat(fe(i)))}}function Id(e){if(bd.logLevel<=me.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(_d);bd.warn.apply(bd,["Firestore (".concat(gd,"): ").concat(e)].concat(fe(i)))}}function _d(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gd,") INTERNAL ASSERTION FAILED: ")+e;throw xd(t),new Error(t)}function Td(e,t){e||Ed()}function Sd(e,t){return e}var Ad={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nd=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return E(n)}(J),Cd=E((function e(){var t=this;I(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Dd=E((function e(t,n){I(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Pd=function(){function e(){I(this,e)}return E(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Od=function(){function e(t){I(this,e),this.token=t,this.changeListener=null}return E(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Rd=function(){function e(t){I(this,e),this.t=t,this.currentUser=yd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Cd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Cd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){kd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(kd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(kd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Td("string"==typeof n.accessToken),new Dd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Td(null===e||"string"==typeof e),new yd(e)}}]),e}(),Ld=E((function e(t,n,r){I(this,e),this.type="FirstParty",this.user=yd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),jd=function(){function e(t,n,r){I(this,e),this.h=t,this.l=n,this.m=r}return E(e,[{key:"getToken",value:function(){return Promise.resolve(new Ld(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Md=E((function e(t){I(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ud=function(){function e(t){I(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&kd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,kd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){kd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):kd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Td("string"==typeof t.token),e.p=t.token,new Md(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Fd=function(){function e(t,n){var r=this;I(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return E(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Vd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Fd.A=-1;var qd=function(){function e(){I(this,e)}return E(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Vd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Bd(e,t){return e<t?-1:e>t?1:0}function zd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Wd(e){return e+"\0"}var Qd=function(){function e(t,n){if(I(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Nd(Ad.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Nd(Ad.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Nd(Ad.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nd(Ad.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return E(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Bd(this.nanoseconds,e.nanoseconds):Bd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Kd=function(){function e(t){I(this,e),this.timestamp=t}return E(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Qd(0,0))}},{key:"max",value:function(){return new e(new Qd(253402300799,999999999))}}]),e}();function Gd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Hd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yd(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Jd=function(){function e(t,n,r){I(this,e),void 0===n?n=0:n>t.length&&Ed(),void 0===r?r=t.length-n:r>t.length-n&&Ed(),this.segments=t,this.offset=n,this.len=r}return E(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Xd=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,fe(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jd),Zd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$d=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Zd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Nd(Ad.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Nd(Ad.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Nd(Ad.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jd),ep=function(){function e(t){I(this,e),this.fields=t,t.sort($d.comparator)}return E(e,[{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return zd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var tp=function(e){function t(e){I(this,t),this.binaryString=e}return E(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Bd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();tp.EMPTY_BYTE_STRING=new tp("");var np=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rp(e){if(Td(!!e),"string"==typeof e){var t=0,n=np.exec(e);if(Td(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ip(e.seconds),nanos:ip(e.nanos)}}function ip(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ap(e){return"string"==typeof e?tp.fromBase64String(e):tp.fromUint8Array(e)}function op(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sp(e){var t=e.mapValue.fields.__previous_value__;return op(t)?sp(t):t}function up(e){var t=rp(e.mapValue.fields.__local_write_time__.timestampValue);return new Qd(t.seconds,t.nanos)}var cp=E((function e(t,n,r,i,a,o,s,u){I(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),lp=function(){function e(t,n){I(this,e),this.projectId=t,this.database=n||"(default)"}return E(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function fp(e){return null==e}function hp(e){return 0===e&&1/e==-1/0}function dp(e){return"number"==typeof e&&Number.isInteger(e)&&!hp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var pp=function(){function e(t){I(this,e),this.path=t}return E(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Xd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Xd.fromString(t))}},{key:"fromName",value:function(t){return new e(Xd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Xd.emptyPath())}},{key:"comparator",value:function(e,t){return Xd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Xd(t.slice()))}}]),e}(),vp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mp={nullValue:"NULL_VALUE"};function yp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?op(e)?4:Dp(e)?9007199254740991:10:Ed()}function gp(e,t){if(e===t)return!0;var n=yp(e);if(n!==yp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return up(e).isEqual(up(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=rp(e.timestampValue),r=rp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ap(e.bytesValue).isEqual(ap(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ip(e.geoPointValue.latitude)===ip(t.geoPointValue.latitude)&&ip(e.geoPointValue.longitude)===ip(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ip(e.integerValue)===ip(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ip(e.doubleValue),r=ip(t.doubleValue);return n===r?hp(n)===hp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zd(e.arrayValue.values||[],t.arrayValue.values||[],gp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Gd(n)!==Gd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gp(n[i],r[i])))return!1;return!0}(e,t);default:return Ed()}}function bp(e,t){return void 0!==(e.values||[]).find((function(e){return gp(e,t)}))}function wp(e,t){if(e===t)return 0;var n=yp(e),r=yp(t);if(n!==r)return Bd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ip(e.integerValue||e.doubleValue),r=ip(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return kp(e.timestampValue,t.timestampValue);case 4:return kp(up(e),up(t));case 5:return Bd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ap(e),r=ap(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Bd(n[i],r[i]);if(0!==a)return a}return Bd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Bd(ip(e.latitude),ip(t.latitude));return 0!==n?n:Bd(ip(e.longitude),ip(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=wp(n[i],r[i]);if(a)return a}return Bd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===vp.mapValue&&t===vp.mapValue)return 0;if(e===vp.mapValue)return 1;if(t===vp.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Bd(r[o],a[o]);if(0!==s)return s;var u=wp(n[r[o]],i[a[o]]);if(0!==u)return u}return Bd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ed()}}function kp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bd(e,t);var n=rp(e),r=rp(t),i=Bd(n.seconds,r.seconds);return 0!==i?i:Bd(n.nanos,r.nanos)}function xp(e){return Ip(e)}function Ip(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=rp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ap(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,pp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ip(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ip(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ed();var t,n}function _p(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ep(e){return!!e&&"integerValue"in e}function Tp(e){return!!e&&"arrayValue"in e}function Sp(e){return!!e&&"nullValue"in e}function Ap(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Np(e){return!!e&&"mapValue"in e}function Cp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Hd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Cp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Dp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pp(e){return"nullValue"in e?mp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?_p(lp.empty(),pp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ed()}function Op(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?_p(lp.empty(),pp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?vp:Ed()}function Rp(e,t){var n=wp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Lp(e,t){var n=wp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var jp=function(){function e(t){I(this,e),this.value=t}return E(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Np(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cp(t)}},{key:"setAll",value:function(e){var t=this,n=$d.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Cp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Np(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return gp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Np(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Hd(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Cp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Mp(e){var t=[];return Hd(e.fields,(function(e,n){var r=new $d([e]);if(Np(n)){var i=Mp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new ep(t)}var Up=function(){function e(t,n,r,i,a,o){I(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return E(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=jp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=jp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Kd.min(),Kd.min(),jp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Kd.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Kd.min(),jp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Kd.min(),jp.empty(),2)}}]),e}(),Fp=E((function e(t,n,r,i){I(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Vp(e){return e.fields.find((function(e){return 2===e.kind}))}function qp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Fp.UNKNOWN_ID=-1;var Bp=E((function e(t,n){I(this,e),this.fieldPath=t,this.kind=n})),zp=function(){function e(t,n){I(this,e),this.sequenceNumber=t,this.offset=n}return E(e,null,[{key:"empty",value:function(){return new e(0,Kp.min())}}]),e}();function Wp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Kd.fromTimestamp(1e9===r?new Qd(n+1,0):new Qd(n,r));return new Kp(i,pp.empty(),t)}function Qp(e){return new Kp(e.readTime,e.key,-1)}var Kp=function(){function e(t,n,r){I(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return E(e,null,[{key:"min",value:function(){return new e(Kd.min(),pp.empty(),-1)}},{key:"max",value:function(){return new e(Kd.max(),pp.empty(),-1)}}]),e}();function Gp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=pp.comparator(e.documentKey,t.documentKey))?n:Bd(e.largestBatchId,t.largestBatchId)}var Hp=function(){function e(t,n){I(this,e),this.comparator=t,this.root=n||Jp.EMPTY}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Yp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Yp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Yp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Yp(this.root,e,this.comparator,!0)}}]),e}(),Yp=function(){function e(t,n,r,i){I(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return E(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Jp=function(){function e(t,n,r,i,a){I(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ed();if(this.right.isRed())throw Ed();var e=this.left.check();if(e!==this.right.check())throw Ed();return e+(this.isRed()?0:1)}}]),e}();Jp.EMPTY=null,Jp.RED=!0,Jp.BLACK=!1,Jp.EMPTY=new(function(){function e(){I(this,e),this.size=0}return E(e,[{key:"key",get:function(){throw Ed()}},{key:"value",get:function(){throw Ed()}},{key:"color",get:function(){throw Ed()}},{key:"left",get:function(){throw Ed()}},{key:"right",get:function(){throw Ed()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Jp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Xp=function(){function e(t){I(this,e),this.comparator=t,this.data=new Hp(this.comparator)}return E(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Zp(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Zp(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Zp=function(){function e(t){I(this,e),this.iter=t}return E(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function $p(e){return e.hasNext()?e.getNext():void 0}var ev=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;I(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function tv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ev(e,t,n,r,i,a,o)}function nv(e){var t=Sd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+xp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),fp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xp(e)})).join(",")),t.P=n}return t.P}function rv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!bv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!gp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kv(e.startAt,t.startAt)&&kv(e.endAt,t.endAt)}function iv(e){return pp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function av(e,t){return e.filters.filter((function(e){return e instanceof uv&&e.field.isEqual(t)}))}function ov(e,t,n){var r,i=mp,a=!0,o=T(av(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=mp,c=!0;switch(s.op){case"<":case"<=":u=Pp(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=mp}Rp({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Rp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function sv(e,t,n){var r,i=vp,a=!0,o=T(av(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=vp,c=!0;switch(s.op){case">=":case">":u=Op(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=vp}Lp({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Lp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var uv=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(wp(t,this.value)):null!==t&&yp(this.value)===yp(t)&&this.v(wp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ed()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new cv(e,t,r):"array-contains"===t?new dv(e,r):"in"===t?new pv(e,r):"not-in"===t?new vv(e,r):"array-contains-any"===t?new mv(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new lv(e,n):new fv(e,n)}}]),n}(function(){return E((function e(){I(this,e)}))}()),cv=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,e,r,i)).key=pp.fromName(i.referenceValue),a}return E(n,[{key:"matches",value:function(e){var t=pp.comparator(e.key,this.key);return this.v(t)}}]),n}(uv),lv=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,"in",r)).keys=hv("in",r),i}return E(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(uv),fv=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,"not-in",r)).keys=hv("not-in",r),i}return E(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(uv);function hv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return pp.fromName(e.referenceValue)}))}var dv=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"array-contains",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Tp(t)&&bp(t.arrayValue,this.value)}}]),n}(uv),pv=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"in",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&bp(this.value.arrayValue,t)}}]),n}(uv),vv=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"not-in",r)}return E(n,[{key:"matches",value:function(e){if(bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!bp(this.value.arrayValue,t)}}]),n}(uv),mv=function(e){N(n,e);var t=O(n);function n(e,r){return I(this,n),t.call(this,e,"array-contains-any",r)}return E(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return bp(t.value.arrayValue,e)}))}}]),n}(uv),yv=E((function e(t,n){I(this,e),this.position=t,this.inclusive=n})),gv=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";I(this,e),this.field=t,this.dir=n}));function bv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function wv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?pp.comparator(pp.fromName(o.referenceValue),n.key):wp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function kv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gp(e.position[n],t.position[n]))return!1;return!0}var xv=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;I(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function Iv(e,t,n,r,i,a,o,s){return new xv(e,t,n,r,i,a,o,s)}function _v(e){return new xv(e)}function Ev(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Tv(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Sv(e){return null!==e.collectionGroup}function Av(e){var t=Sd(e);if(null===t.D){t.D=[];var n=Tv(t),r=Ev(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new gv(n)),t.D.push(new gv($d.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new gv($d.keyField(),u))}}}return t.D}function Nv(e){var t=Sd(e);if(!t.C)if("F"===t.limitType)t.C=tv(t.path,t.collectionGroup,Av(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(Av(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new gv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new yv(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new yv(t.startAt.position,t.startAt.inclusive):null;t.C=tv(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function Cv(e,t,n){return new xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dv(e,t){return rv(Nv(e),Nv(t))&&e.limitType===t.limitType}function Pv(e){return"".concat(nv(Nv(e)),"|lt:").concat(e.limitType)}function Ov(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(xp(t.value));var t})).join(", "),"]")),fp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xp(e)})).join(",")),"Target(".concat(t,")")}(Nv(e)),"; limitType=").concat(e.limitType,")")}function Rv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=wv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Av(e),t))&&!(e.endAt&&!function(e,t,n){var r=wv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Av(e),t))}(e,t)}function Lv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jv(e){return function(t,n){var r,i=!1,a=T(Av(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Mv(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Mv(e,t,n){var r=e.field.isKeyField()?pp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wp(r,i):Ed()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ed()}}function Uv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hp(t)?"-0":t}}function Fv(e){return{integerValue:""+e}}function Vv(e,t){return dp(t)?Fv(t):Uv(e,t)}var qv=E((function e(){I(this,e),this._=void 0}));function Bv(e,t,n){return e instanceof Qv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Kv?Gv(e,t):e instanceof Hv?Yv(e,t):function(e,t){var n=Wv(e,t),r=Xv(n)+Xv(e.k);return Ep(n)&&Ep(e.k)?Fv(r):Uv(e.M,r)}(e,t)}function zv(e,t,n){return e instanceof Kv?Gv(e,t):e instanceof Hv?Yv(e,t):n}function Wv(e,t){return e instanceof Jv?Ep(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Qv=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n)}(qv),Kv=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).elements=e,r}return E(n)}(qv);function Gv(e,t){var n,r=Zv(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return gp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Hv=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).elements=e,r}return E(n)}(qv);function Yv(e,t){var n,r=Zv(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!gp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Jv=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).M=e,i.k=r,i}return E(n)}(qv);function Xv(e){return ip(e.integerValue||e.doubleValue)}function Zv(e){return Tp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $v=E((function e(t,n){I(this,e),this.field=t,this.transform=n}));var em=E((function e(t,n){I(this,e),this.version=t,this.transformResults=n})),tm=function(){function e(t,n){I(this,e),this.updateTime=t,this.exists=n}return E(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function nm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var rm=E((function e(){I(this,e)}));function im(e,t,n){e instanceof cm?function(e,t,n){var r=e.value.clone(),i=hm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof lm?function(e,t,n){if(nm(e.precondition,t)){var r=hm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function am(e,t,n){e instanceof cm?function(e,t,n){if(nm(e.precondition,t)){var r=e.value.clone(),i=dm(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(um(t),r).setHasLocalMutations()}}(e,t,n):e instanceof lm?function(e,t,n){if(nm(e.precondition,t)){var r=dm(e.fieldTransforms,n,t),i=t.data;i.setAll(fm(e)),i.setAll(r),t.convertToFoundDocument(um(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){nm(e.precondition,t)&&t.convertToNoDocument(Kd.min())}(e,t)}function om(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Wv(a.transform,o||null);null!=s&&(null==r&&(r=jp.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function sm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Kv&&t instanceof Kv||e instanceof Hv&&t instanceof Hv?zd(e.elements,t.elements,gp):e instanceof Jv&&t instanceof Jv?gp(e.k,t.k):e instanceof Qv&&t instanceof Qv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function um(e){return e.isFoundDocument()?e.version:Kd.min()}var cm=function(e){N(n,e);var t=O(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return I(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return E(n)}(rm),lm=function(e){N(n,e);var t=O(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return I(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return E(n)}(rm);function fm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function hm(e,t,n){var r=new Map;Td(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,zv(o,s,n[i]))}return r}function dm(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Bv(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var pm,vm,mm=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return E(n)}(rm),ym=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return E(n)}(rm),gm=E((function e(t){I(this,e),this.count=t}));function bm(e){switch(e){default:return Ed();case Ad.CANCELLED:case Ad.UNKNOWN:case Ad.DEADLINE_EXCEEDED:case Ad.RESOURCE_EXHAUSTED:case Ad.INTERNAL:case Ad.UNAVAILABLE:case Ad.UNAUTHENTICATED:return!1;case Ad.INVALID_ARGUMENT:case Ad.NOT_FOUND:case Ad.ALREADY_EXISTS:case Ad.PERMISSION_DENIED:case Ad.FAILED_PRECONDITION:case Ad.ABORTED:case Ad.OUT_OF_RANGE:case Ad.UNIMPLEMENTED:case Ad.DATA_LOSS:return!0}}function wm(e){if(void 0===e)return xd("GRPC error has no .code"),Ad.UNKNOWN;switch(e){case pm.OK:return Ad.OK;case pm.CANCELLED:return Ad.CANCELLED;case pm.UNKNOWN:return Ad.UNKNOWN;case pm.DEADLINE_EXCEEDED:return Ad.DEADLINE_EXCEEDED;case pm.RESOURCE_EXHAUSTED:return Ad.RESOURCE_EXHAUSTED;case pm.INTERNAL:return Ad.INTERNAL;case pm.UNAVAILABLE:return Ad.UNAVAILABLE;case pm.UNAUTHENTICATED:return Ad.UNAUTHENTICATED;case pm.INVALID_ARGUMENT:return Ad.INVALID_ARGUMENT;case pm.NOT_FOUND:return Ad.NOT_FOUND;case pm.ALREADY_EXISTS:return Ad.ALREADY_EXISTS;case pm.PERMISSION_DENIED:return Ad.PERMISSION_DENIED;case pm.FAILED_PRECONDITION:return Ad.FAILED_PRECONDITION;case pm.ABORTED:return Ad.ABORTED;case pm.OUT_OF_RANGE:return Ad.OUT_OF_RANGE;case pm.UNIMPLEMENTED:return Ad.UNIMPLEMENTED;case pm.DATA_LOSS:return Ad.DATA_LOSS;default:return Ed()}}(vm=pm||(pm={}))[vm.OK=0]="OK",vm[vm.CANCELLED=1]="CANCELLED",vm[vm.UNKNOWN=2]="UNKNOWN",vm[vm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vm[vm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vm[vm.NOT_FOUND=5]="NOT_FOUND",vm[vm.ALREADY_EXISTS=6]="ALREADY_EXISTS",vm[vm.PERMISSION_DENIED=7]="PERMISSION_DENIED",vm[vm.UNAUTHENTICATED=16]="UNAUTHENTICATED",vm[vm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vm[vm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vm[vm.ABORTED=10]="ABORTED",vm[vm.OUT_OF_RANGE=11]="OUT_OF_RANGE",vm[vm.UNIMPLEMENTED=12]="UNIMPLEMENTED",vm[vm.INTERNAL=13]="INTERNAL",vm[vm.UNAVAILABLE=14]="UNAVAILABLE",vm[vm.DATA_LOSS=15]="DATA_LOSS";var km=function(){function e(t,n){I(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return E(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Hd(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Yd(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),xm=new Hp(pp.comparator);function Im(){return xm}var _m=new Hp(pp.comparator);function Em(){for(var e=_m,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Tm(){return new km((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Sm=new Hp(pp.comparator),Am=new Xp(pp.comparator);function Nm(){for(var e=Am,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Cm=new Xp(Bd);function Dm(){return Cm}var Pm=function(){function e(t,n,r,i,a){I(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return E(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Om.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Kd.min(),r,Dm(),Im(),Nm())}}]),e}(),Om=function(){function e(t,n,r,i,a){I(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return E(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(tp.EMPTY_BYTE_STRING,n,Nm(),Nm(),Nm())}}]),e}(),Rm=E((function e(t,n,r,i){I(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Lm=E((function e(t,n){I(this,e),this.targetId=t,this.$=n})),jm=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;I(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Mm=function(){function e(){I(this,e),this.B=0,this.L=Vm(),this.U=tp.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return E(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Nm(),t=Nm(),n=Nm();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ed()}})),new Om(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Vm()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Um=function(){function e(t){I(this,e),this.nt=t,this.st=new Map,this.it=Im(),this.rt=Fm(),this.ot=new Xp(Bd)}return E(e,[{key:"ut",value:function(e){var t,n=T(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Ed()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(iv(i))if(0===n){var a=new pp(i.path);this.ct(t,a,Up.newNoDocument(a,Kd.min()))}else Td(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&iv(a.target)){var o=new pp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Up.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Nm();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Pm(e,n,this.ot,this.it,r);return this.it=Im(),this.rt=Fm(),this.ot=new Xp(Bd),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Mm,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Xp(Bd),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||kd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Mm),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Fm(){return new Hp(pp.comparator)}function Vm(){return new Hp(pp.comparator)}var qm={asc:"ASCENDING",desc:"DESCENDING"},Bm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zm=E((function e(t,n){I(this,e),this.databaseId=t,this.N=n}));function Wm(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qm(e,t){return e.N?t.toBase64():t.toUint8Array()}function Km(e,t){return Wm(e,t.toTimestamp())}function Gm(e){return Td(!!e),Kd.fromTimestamp(function(e){var t=rp(e);return new Qd(t.seconds,t.nanos)}(e))}function Hm(e,t){return function(e){return new Xd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ym(e){var t=Xd.fromString(e);return Td(gy(t)),t}function Jm(e,t){return Hm(e.databaseId,t.path)}function Xm(e,t){var n=Ym(t);if(n.get(1)!==e.databaseId.projectId)throw new Nd(Ad.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nd(Ad.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pp(ty(n))}function Zm(e,t){return Hm(e.databaseId,t)}function $m(e){var t=Ym(e);return 4===t.length?Xd.emptyPath():ty(t)}function ey(e){return new Xd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ty(e){return Td(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ny(e,t,n){return{name:Jm(e,t),fields:n.value.mapValue.fields}}function ry(e,t,n){var r=Xm(e,t.name),i=Gm(t.updateTime),a=new jp({mapValue:{fields:t.fields}}),o=Up.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function iy(e,t){return"found"in t?function(e,t){Td(!!t.found),t.found.name,t.found.updateTime;var n=Xm(e,t.found.name),r=Gm(t.found.updateTime),i=new jp({mapValue:{fields:t.found.fields}});return Up.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Td(!!t.missing),Td(!!t.readTime);var n=Xm(e,t.missing),r=Gm(t.readTime);return Up.newNoDocument(n,r)}(e,t):Ed()}function ay(e,t){var n;if(t instanceof cm)n={update:ny(e,t.key,t.value)};else if(t instanceof mm)n={delete:Jm(e,t.key)};else if(t instanceof lm)n={update:ny(e,t.key,t.data),updateMask:yy(t.fieldMask)};else{if(!(t instanceof ym))return Ed();n={verify:Jm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Qv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Kv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jv)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ed()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Km(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ed()}(e,t.precondition)),n}function oy(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?tm.updateTime(Gm(e.updateTime)):void 0!==e.exists?tm.exists(e.exists):tm.none()}(t.currentDocument):tm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Td("REQUEST_TIME"===t.setToServerValue),n=new Qv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Kv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Hv(i)}else"increment"in t?n=new Jv(e,t.increment):Ed();var a=$d.fromServerFormat(t.fieldPath);return new $v(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Xm(e,t.update.name),a=new jp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ep(t.map((function(e){return $d.fromServerFormat(e)})))}(t.updateMask);return new lm(i,a,o,n,r)}return new cm(i,a,n,r)}if(t.delete){var s=Xm(e,t.delete);return new mm(s,n)}if(t.verify){var u=Xm(e,t.verify);return new ym(u,n)}return Ed()}function sy(e,t){return{documents:[Zm(e,t.path)]}}function uy(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Zm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Zm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ap(e.value))return{unaryFilter:{field:dy(e.field),op:"IS_NAN"}};if(Sp(e.value))return{unaryFilter:{field:dy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ap(e.value))return{unaryFilter:{field:dy(e.field),op:"IS_NOT_NAN"}};if(Sp(e.value))return{unaryFilter:{field:dy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dy(e.field),op:hy(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dy(e.field),direction:fy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||fp(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function cy(e){var t=$m(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Td(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=ly(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new gv(py(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return fp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new yv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new yv(n,t)}(n.endAt)),Iv(t,i,s,o,u,"F",c,l)}function ly(e){return e?void 0!==e.unaryFilter?[my(e)]:void 0!==e.fieldFilter?[vy(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return ly(e)})).reduce((function(e,t){return e.concat(t)})):Ed():[]}function fy(e){return qm[e]}function hy(e){return Bm[e]}function dy(e){return{fieldPath:e.canonicalString()}}function py(e){return $d.fromServerFormat(e.fieldPath)}function vy(e){return uv.create(py(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ed()}}(e.fieldFilter.op),e.fieldFilter.value)}function my(e){switch(e.unaryFilter.op){case"IS_NAN":var t=py(e.unaryFilter.field);return uv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=py(e.unaryFilter.field);return uv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=py(e.unaryFilter.field);return uv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=py(e.unaryFilter.field);return uv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ed()}}function yy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function gy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function by(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ky(t)),t=wy(e.get(n),t);return ky(t)}function wy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ky(e){return e+"\x01\x01"}function xy(e){var t=e.length;if(Td(t>=2),2===t)return Td("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Xd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ed(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ed()}a=o+2}return new Xd(r)}var Iy=["userId","batchId"];function _y(e,t){return[e,by(t)]}function Ey(e,t,n){return[e,by(t),n]}var Ty={},Sy=["prefixPath","collectionGroup","readTime","documentId"],Ay=["prefixPath","collectionGroup","documentId"],Ny=["collectionGroup","readTime","prefixPath","documentId"],Cy=["canonicalId","targetId"],Dy=["targetId","path"],Py=["path","targetId"],Oy=["collectionId","parent"],Ry=["indexId","uid"],Ly=["uid","sequenceNumber"],jy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],My=["indexId","uid","orderedDocumentKey"],Uy=["userId","collectionPath","documentId"],Fy=["userId","collectionPath","largestBatchId"],Vy=["userId","collectionGroup","largestBatchId"],qy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),By=[].concat(fe(qy),["documentOverlays"]),zy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wy=[].concat(zy,["indexConfiguration","indexState","indexEntries"]),Qy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ky=function(){function e(){I(this,e),this.onCommittedListeners=[]}return E(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Gy=function(){function e(t){var n=this;I(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return E(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ed(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Hy=function(){function e(t,n){var r=this;I(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Cd,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Xy(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=ng(e.target.error);r.At.reject(new Xy(t,n))}}return E(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(kd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new $y(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Xy(n,t)}}}]),e}(),Yy=function(){function e(t,n,r){I(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(z())&&xd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return E(e,[{key:"Nt",value:function(){var e=k(b().mark((function e(t){var n=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return kd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Xy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Nd(Ad.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Nd(Ad.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Xy(t,n))},i.onupgradeneeded=function(e){kd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){kd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=k(b().mark((function e(t,n,r,i){var a,o,s,u,c=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(b().mark((function e(){var n,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Hy.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Gy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,kd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return kd("SimpleDb","Removing database:",e),eg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Y())return!1;if(e.St())return!0;var t=z(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Jy=function(){function e(t){I(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return E(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return eg(this.Ft.delete())}}]),e}(),Xy=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,Ad.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return E(n)}(Nd);function Zy(e){return"IndexedDbTransactionError"===e.name}var $y=function(){function e(t){I(this,e),this.store=t}return E(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(kd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(kd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eg(n)}},{key:"add",value:function(e){return kd("SimpleDb","ADD",this.store.name,e,e),eg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),kd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return kd("SimpleDb","DELETE",this.store.name,e),eg(this.store.delete(e))}},{key:"count",value:function(){return kd("SimpleDb","COUNT",this.store.name),eg(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Gy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Gy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){kd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Gy((function(n,r){t.onerror=function(e){var t=ng(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Gy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Jy(i),o=t(i.primaryKey,i.value,a);if(o instanceof Gy){var s=o.catch((function(e){return a.done(),Gy.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Gy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eg(e){return new Gy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ng(e.target.error);n(t)}}))}var tg=!1;function ng(e){var t=Yy.Vt(z());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Nd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tg||(tg=!0,setTimeout((function(){throw r}),0)),r}}return e}var rg=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return E(n)}(Ky);function ig(e,t){var n=Sd(e);return Yy.xt(n.Ht,t)}var ag=function(){function e(t,n,r,i){I(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return E(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&im(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=T(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&am(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=T(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&am(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Kd.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Nm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&zd(this.mutations,e.mutations,(function(e,t){return sm(e,t)}))&&zd(this.baseMutations,e.baseMutations,(function(e,t){return sm(e,t)}))}}]),e}(),og=function(){function e(t,n,r,i){I(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return E(e,null,[{key:"from",value:function(t,n,r){Td(t.mutations.length===r.length);for(var i=Sm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),sg=function(){function e(t,n){I(this,e),this.largestBatchId=t,this.mutation=n}return E(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ug=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kd.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Kd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:tp.EMPTY_BYTE_STRING;I(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return E(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),cg=E((function e(t){I(this,e),this.Jt=t}));function lg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Jm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wm(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hg(t.version)};else{if(!t.isUnknownDocument())return Ed();r.unknownDocument={path:n.path.toArray(),version:hg(t.version)}}return r}function fg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dg(e){var t=new Qd(e.seconds,e.nanoseconds);return Kd.fromTimestamp(t)}function pg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return oy(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return oy(e.Jt,t)})),s=Qd.fromMillis(t.localWriteTimeMs);return new ag(t.batchId,s,n,o)}function vg(e){var t,n,r=dg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dg(e.lastLimboFreeSnapshotVersion):Kd.min();return void 0!==e.query.documents?(Td(1===(n=e.query).documents.length),t=Nv(_v($m(n.documents[0])))):t=function(e){return Nv(cy(e))}(e.query),new ug(t,e.targetId,0,e.lastListenSequenceNumber,r,i,tp.fromBase64String(e.resumeToken))}function mg(e,t){var n,r=hg(t.snapshotVersion),i=hg(t.lastLimboFreeSnapshotVersion);n=iv(t.target)?sy(e.Jt,t.target):uy(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function yg(e){var t=cy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cv(t,t.limit,"L"):t}function gg(e,t){return new sg(t.largestBatchId,oy(e.Jt,t.overlayMutation))}function bg(e,t){var n=t.path.lastSegment();return[e,by(t.path.popLast()),n]}var wg=function(){function e(){I(this,e)}return E(e,[{key:"getBundleMetadata",value:function(e,t){return kg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return kg(e).put({bundleId:(n=t).id,createTime:hg(Gm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return xg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:yg(t.bundledQuery),readTime:dg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return xg(e).put(function(e){return{name:e.name,readTime:hg(Gm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function kg(e){return ig(e,"bundles")}function xg(e){return ig(e,"namedQueries")}var Ig=function(){function e(t,n){I(this,e),this.M=t,this.userId=n}return E(e,[{key:"getOverlay",value:function(e,t){var n=this;return _g(e).get(bg(this.userId,t)).next((function(e){return e?gg(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new sg(t,a);i.push(r.Xt(e,o))})),Gy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(by(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(_g(e).Qt("collectionPathOverlayIndex",i))})),Gy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Tm(),a=by(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return _g(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=gg(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Tm(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _g(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=gg(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return _g(e).put(function(e,t,n){var r=u(bg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ay(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function _g(e){return ig(e,"documentOverlays")}var Eg=function(){function e(){I(this,e)}return E(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ip(e.integerValue));else if("doubleValue"in e){var n=ip(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),hp(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ap(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Dp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ed()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),pp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Tg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Sg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Tg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Eg.fe=new Eg;var Ag=function(){function e(){I(this,e),this.buffer=new Uint8Array(1024),this.position=0}return E(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Sg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Sg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ng=function(){function e(t){I(this,e),this.De=t}return E(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),Cg=function(){function e(t){I(this,e),this.De=t}return E(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Dg=function(){function e(){I(this,e),this.De=new Ag,this.Ce=new Ng(this.De),this.xe=new Cg(this.De)}return E(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Pg=function(){function e(t,n,r,i){I(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return E(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Og(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Rg(e.arrayValue,t.arrayValue))?n:0!==(n=Rg(e.directionalValue,t.directionalValue))?n:pp.comparator(e.documentKey,t.documentKey)}function Rg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Lg=function(){function e(t){I(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return E(e,[{key:"$e",value:function(e){var t=Vp(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=qp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=T(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),jg=function(){function e(){I(this,e),this.qe=new Mg}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Gy.resolve()}},{key:"getCollectionParents",value:function(e,t){return Gy.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Gy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Gy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Gy.resolve(null)}},{key:"getIndexType",value:function(e,t){return Gy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Gy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Gy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Gy.resolve(Kp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Gy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Gy.resolve()}}]),e}(),Mg=function(){function e(){I(this,e),this.index={}}return E(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Xp(Xd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Xp(Xd.comparator)).toArray()}}]),e}(),Ug=new Uint8Array(0),Fg=function(){function e(t,n){I(this,e),this.user=t,this.databaseId=n,this.Ke=new Mg,this.Ge=new km((function(e){return nv(e)}),(function(e,t){return rv(e,t)})),this.uid=t.uid||""}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:by(i)};return Vg(e).put(a)}return Gy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Wd(t),""],!1,!0);return Vg(e).qt(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Bg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Bg(e),r=zg(e),i=qg(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=qg(e),i=!0,a=new Map;return Gy.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Nm(),o=[];return Gy.forEach(a,(function(i,a){var s;kd("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(nv(t)));var u=function(e,t){var n=Vp(t);if(void 0===n)return null;var r,i=T(av(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=T(qp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=T(av(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(qp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?ov(e,o.fieldPath,e.startAt):sv(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new yv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=T(qp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?sv(e,o.fieldPath,e.endAt):ov(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new yv(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,u,h,l.inclusive,d,f.inclusive,p);return Gy.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=pp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Gy.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(u){var f=t?s.Je(t[u/c]):Ug,h=s.Ye(e,f,n[u%c],r),d=s.Xe(e,f,i[u%c],a),p=o.map((function(t){return s.Ye(e,f,t,!0)}));l.push.apply(l,fe(s.createRange(h,d,p)))},h=0;h<u;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new Pg(e,pp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Pg(e,pp.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Lg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Gy.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Xp($d.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=T(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new Dg,i=T(qp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);Eg.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new Dg;return Eg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Dg;return Eg.fe.Zt(_p(this.databaseId,t),n.Ne(function(e){var t=qp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Dg);var i,a=0,o=T(qp(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=T(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.en(t,u.fieldPath)&&Tp(c))r=this.nn(r,u,c);else{var h=f.Ne(u.kind);Eg.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=fe(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=T(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new Dg;f.seed(l.Se()),Eg.fe.Zt(u,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof uv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Bg(e),i=zg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Gy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new zp(t.sequenceNumber,new Kp(dg(t.readTime),new pp(xy(t.documentKey)),t.largestBatchId)):zp.empty(),r=e.fields.map((function(e){var t=u(e,2),n=t[0],r=t[1];return new Bp($d.fromServerFormat(n),r)}));return new Fp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Bd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Bg(e),a=zg(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Gy.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:hg(r.readTime),documentKey:by(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Gy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Gy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Gy.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Gy.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return qg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return qg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=qg(e),i=new Xp(Og);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Pg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Xp(Og),r=this.Ze(t,e);if(null==r)return n;var i=Vp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Tp(a)){var o,s=T(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Pg(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Pg(t.indexId,e.key,Ug,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;kd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=$p(a),u=$p(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=$p(o)):l?(i(s),s=$p(a)):(s=$p(a),u=$p(o))}}(r,i,Og,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Gy.waitFor(o)}},{key:"rn",value:function(e){var t=1;return zg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Og(e,t)})).filter((function(e,t,n){return!t||0!==Og(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Og(o,e),u=Og(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ug,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ug,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Gy.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Gp(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Kp.min()}))})).next((function(){return n}))}}]),e}();function Vg(e){return ig(e,"collectionParents")}function qg(e){return ig(e,"indexEntries")}function Bg(e){return ig(e,"indexConfiguration")}function zg(e){return ig(e,"indexState")}var Wg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qg=function(){function e(t,n,r){I(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return E(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Kg(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Td(1===s)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ey(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Gy.waitFor(a).next((function(){return l}))}function Gg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ed();t=e.noDocument}return JSON.stringify(t).length}Qg.DEFAULT_COLLECTION_PERCENTILE=10,Qg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qg.DEFAULT=new Qg(41943040,Qg.DEFAULT_COLLECTION_PERCENTILE,Qg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qg.DISABLED=new Qg(-1,0,0);var Hg=function(){function e(t,n,r,i){I(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return E(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jg(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Xg(e),o=Jg(e);return o.add({}).next((function(s){Td("number"==typeof s);var u,c=new ag(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ay(e.Jt,t)})),i=n.mutations.map((function(t){return ay(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Xp((function(e,t){return Bd(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Ey(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Ty))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[s]=c.keys()})),Gy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Jg(e).get(t).next((function(e){return e?(Td(e.userId===n.userId),pg(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Gy.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Jg(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Td(t.batchId>=r),a=pg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Jg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jg(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return pg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=_y(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Xg(e).Wt({range:i},(function(r,i,o){var s=u(r,3),c=s[0],l=s[1],f=s[2],h=xy(l);if(c===n.userId&&t.path.isEqual(h))return Jg(e).get(f).next((function(e){if(!e)throw Ed();Td(e.userId===n.userId),a.push(pg(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Xp(Bd),i=[];return t.forEach((function(t){var a=_y(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Xg(e).Wt({range:o},(function(e,i,a){var o=u(e,3),s=o[0],c=o[1],l=o[2],f=xy(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),Gy.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=_y(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Xp(Bd);return Xg(e).Wt({range:o},(function(e,t,a){var o=u(e,3),c=o[0],l=o[1],f=o[2],h=xy(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Jg(e).get(t).next((function(e){if(null===e)throw Ed();Td(e.userId===n.userId),r.push(pg(n.M,e))})))})),Gy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Kg(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Gy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Gy.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Xg(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xy(e[1]);i.push(a)}else r.done()})).next((function(){Td(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Yg(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Zg(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Td(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Yg(e,t,n){var r=_y(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Xg(e).Wt({range:a,jt:!0},(function(e,n,r){var a=u(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Jg(e){return ig(e,"mutations")}function Xg(e){return ig(e,"documentMutations")}function Zg(e){return ig(e,"mutationQueues")}var $g=function(){function e(t){I(this,e),this.mn=t}return E(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),eb=function(){function e(t,n){I(this,e),this.referenceDelegate=t,this.M=n}return E(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new $g(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Kd.fromTimestamp(new Qd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return tb(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Td(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return tb(e).Wt((function(o,s){var u=vg(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Gy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return tb(e).Wt((function(e,n){var r=vg(n);t(r)}))}},{key:"pn",value:function(e){return nb(e).get("targetGlobalKey").next((function(e){return Td(null!==e),e}))}},{key:"In",value:function(e,t){return nb(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return tb(e).put(mg(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=nv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tb(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=vg(n);rv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=rb(e);return t.forEach((function(t){var o=by(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Gy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=rb(e);return Gy.forEach(t,(function(t){var a=by(t.path);return Gy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=rb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rb(e),i=Nm();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=xy(e[1]),a=new pp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=by(t.path),r=IDBKeyRange.bound([n],[Wd(n)],!1,!0),i=0;return rb(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=u(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return tb(e).get(t).next((function(e){return e?vg(e):null}))}}]),e}();function tb(e){return ig(e,"targets")}function nb(e){return ig(e,"targetGlobal")}function rb(e){return ig(e,"targetDocuments")}function ib(e){return ab.apply(this,arguments)}function ab(){return ab=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ad.FAILED_PRECONDITION&&t.message===Qy){e.next=2;break}throw t;case 2:kd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1],c=Bd(r,o);return 0===c?Bd(i,s):c}var sb=function(){function e(t){I(this,e),this.An=t,this.buffer=new Xp(ob),this.Rn=0}return E(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ob(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ub=function(){function e(t,n){I(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return E(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;kd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,k(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Zy(n.t0)){n.next=12;break}kd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,ib(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),cb=function(){function e(t,n){I(this,e),this.Dn=t,this.params=n}return E(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Gy.resolve(Fd.A);var r=new sb(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(kd("LruGarbageCollector","Garbage collection skipped; disabled"),Gy.resolve(Wg)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(kd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Wg):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(kd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),wd()<=me.DEBUG&&kd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Gy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),lb=function(){function e(t,n){I(this,e),this.db=t,this.garbageCollector=function(e,t){return new cb(e,t)}(this,n)}return E(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return fb(e,n)}},{key:"removeReference",value:function(e,t,n){return fb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return fb(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Zg(e).zt((function(r){return Yg(e,r,t).next((function(e){return e&&(n=!0),Gy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,s){if(s<=t){var u=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Kd.min()),rb(e).delete([0,by(o.path)])}))}));i.push(u)}})).next((function(){return Gy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return fb(e,t)}},{key:"Mn",value:function(e,t){var n,r=rb(e),i=Fd.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=u(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Fd.A&&t(new pp(xy(n)),i),i=c,n=s):i=Fd.A})).next((function(){i!==Fd.A&&t(new pp(xy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function fb(e,t){return rb(e).put(function(e,t){return{targetId:0,path:by(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var hb=function(){function e(){I(this,e),this.changes=new km((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return E(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Up.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Gy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),db=function(){function e(t){I(this,e),this.M=t}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return mb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return mb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],fg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Up.newInvalidDocument(t);return mb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yb(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Up.newInvalidDocument(t)};return mb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yb(t))},(function(e,i){r={document:n.$n(t,i),size:Gg(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Im();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=Im(),i=new Hp(pp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Gg(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Gy.resolve();var r=new Xp(bb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(yb(r.first()),yb(r.last())),a=r.getIterator(),o=a.getNext();return mb(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=pp.fromSegments([].concat(fe(t.prefixPath),[t.collectionGroup,t.documentId]));o&&bb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(yb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),fg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mb(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Im(),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(pp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Im(),o=gb(t,n),s=gb(t,Kp.max());return mb(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.$n(pp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new pb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return vb(e).get("remoteDocumentGlobalKey").next((function(e){return Td(!!e),e}))}},{key:"Fn",value:function(e,t){return vb(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=ry(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=pp.fromSegments(t.noDocument.path),i=dg(t.noDocument.readTime);n=Up.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ed();var a=pp.fromSegments(t.unknownDocument.path),o=dg(t.unknownDocument.version);n=Up.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Qd(e[0],e[1]);return Kd.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Kd.min()))return n}return Up.newInvalidDocument(e)}}]),e}(),pb=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new km((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Xp((function(e,t){return Bd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=lg(t.Kn.M,o);i=i.add(a.path.popLast());var c=Gg(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=lg(t.Kn.M,o.convertToNoDocument(Kd.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Gy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(hb);function vb(e){return ig(e,"remoteDocumentGlobal")}function mb(e){return ig(e,"remoteDocumentsV14")}function yb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gb(e,t){var n=t.documentKey.path.toArray();return[e,fg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function bb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Bd(n[a],r[a]))return i;return(i=Bd(n.length,r.length))||((i=Bd(n[n.length-2],r[r.length-2]))||Bd(n[n.length-1],r[r.length-1]))}var wb=function(){function e(t){I(this,e),this.M=t}return E(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Hy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0}),e.createObjectStore("documentMutations")}(e),kb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Gy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),kb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Gy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Uy});t.createIndex("collectionPathOverlayIndex",Fy,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Vy,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Sy});t.createIndex("documentKeyIndex",Ay),t.createIndex("collectionGroupIndex",Ny)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ry}).createIndex("sequenceNumberIndex",Ly,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:jy}).createIndex("documentKeyIndex",My,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Gg(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Gy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Gy.forEach(r,(function(r){Td(r.userId===n.userId);var i=pg(t.M,r);return Kg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Xd(n),o=function(e){return[0,by(e)]}(a);r.push(t.get(o).next((function(n){return n?Gy.resolve():function(n){return t.put({targetId:0,path:by(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Gy.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Oy});var n=t.store("collectionParents"),r=new Mg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:by(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Xd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=u(e,3),r=(n[0],n[1]),a=(n[2],xy(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=vg(r),a=mg(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new pp(Xd.fromString(i.document.name).popFirst(5)):i.noDocument?pp.fromSegments(i.noDocument.path):i.unknownDocument?pp.fromSegments(i.unknownDocument.path):Ed()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return Gy.waitFor(r)}))}}]),e}();function kb(e){e.createObjectStore("targetDocuments",{keyPath:Dy}).createIndex("documentTargetsIndex",Py,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cy,{unique:!0}),e.createObjectStore("targetGlobal")}var xb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ib=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(I(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Nd(Ad.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lb(this,i),this.hs=n+"main",this.M=new cg(u),this.ls=new Yy(this.hs,this.ts,new wb(this.M)),this.fs=new eb(this.referenceDelegate,this.M),this.ds=function(e){return new db(e)}(this.M),this._s=new wg,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&xd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return E(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Nd(Ad.FAILED_PRECONDITION,xb);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Fd(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=k(b().mark((function n(r){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=k(b().mark((function t(n){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Eb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Zy(t))return kd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return kd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return _b(e).get("owner").next((function(e){return Gy.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return Eb(e).delete(this.clientId)}},{key:"vs",value:function(){var e=k(b().mark((function e(){var t,n,r,i,a=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ig(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Gy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Gy.resolve(!0):_b(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new Nd(Ad.FAILED_PRECONDITION,xb);return!1}}return!(!t.networkEnabled||!t.inForeground)||Eb(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&kd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=k(b().mark((function e(){var t=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new rg(e,Fd.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Eb(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Hg.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Fg(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ig.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;kd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?Wy:13===i?zy:12===i?By:11===i?qy:void Ed();return this.ls.runTransaction(e,o,s,(function(i){return a=new rg(i,r.es?r.es.next():Fd.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw xd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Nd(Ad.FAILED_PRECONDITION,Qy);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return _b(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Nd(Ad.FAILED_PRECONDITION,xb)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _b(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=_b(e);return n.get("owner").next((function(e){return t.Ps(e)?(kd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Gy.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(xd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return kd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return xd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(mc){xd("Failed to set zombie client id.",mc)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(mc){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Yy.vt()}}]),e}();function _b(e){return ig(e,"owner")}function Eb(e){return ig(e,"clientMetadata")}function Tb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Sb=function(){function e(t,n,r){I(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return E(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=T(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=T(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return pp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Sv(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new pp(t)).next((function(e){var t=Em();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Em();return this.indexManager.getCollectionParents(e,i).next((function(o){return Gy.forEach(o,(function(o){var s=function(e,t){return new xv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=T(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Up.newInvalidDocument(u),r=r.insert(u,c)),am(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Rv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Ab=function(){function e(t,n,r,i){I(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return E(e,null,[{key:"Ys",value:function(t,n){var r,i=Nm(),a=Nm(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Nb=function(){function e(){I(this,e),this.Xs=!1}return E(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Gy.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Kd.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(wd()<=me.DEBUG&&kd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ov(t)),i.ri(e,o,t,Wp(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Xp(jv(e));return t.forEach((function(t,r){Rv(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return wd()<=me.DEBUG&&kd("QueryEngine","Using full collection scan to execute query:",Ov(t)),this.Zs.Qs(e,t,Kp.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Cb=function(){function e(t,n,r,i){I(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Hp(Bd),this.ai=new km((function(e){return nv(e)}),rv),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return E(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Sb(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function Db(e,t,n,r){return new Cb(e,t,n,r)}function Pb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Nm(),u=T(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Rb(e,t){var n=Sd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Gy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Td(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function Lb(e){var t=Sd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function jb(e,t){var n=Sd(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(tp.EMPTY_BYTE_STRING,Kd.min()).withLastLimboFreeSnapshotVersion(Kd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var s=Im();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Mb(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Kd.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Gy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=i,e}))}function Mb(e,t,n){var r=Nm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Im();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Kd.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):kd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Ub(e,t){var n=Sd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Fb(e,t){var n=Sd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Gy.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new ug(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Vb(e,t,n){return qb.apply(this,arguments)}function qb(){return qb=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Sd(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Zy(e.t1)){e.next=12;break}throw e.t1;case 12:kd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),qb.apply(this,arguments)}function Bb(e,t,n){var r=Sd(e),i=Kd.min(),a=Nm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Sd(e),i=r.ai.get(n);return void 0!==i?Gy.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Nv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Kd.min(),n?a:Nm())})).next((function(e){return Qb(r,Lv(t),e),{documents:e,_i:a}}))}))}function zb(e,t){var n=Sd(e),r=Sd(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Wb(e,t){var n=Sd(e),r=n.ci.get(t)||Kd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Wp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Qb(n,t,e),e}))}function Qb(e,t,n){var r=Kd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Kb(e,t,n,r){return Gb.apply(this,arguments)}function Gb(){return Gb=k(b().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Sd(t),o=Nm(),s=Im(),u=T(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Fb(a,function(e){return Nv(_v(Xd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Mb(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Hb(e,t){return Yb.apply(this,arguments)}function Yb(){return Yb=k(b().mark((function e(t,n){var r,i,a,o=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Nm(),e.next=3,Fb(t,Nv(yg(n.bundledQuery)));case 3:return i=e.sent,a=Sd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Gm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(tp.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Yb.apply(this,arguments)}var Jb=function(){function e(t){I(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return E(e,[{key:"getBundleMetadata",value:function(e,t){return Gy.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Gm(n.createTime)}),Gy.resolve()}},{key:"getNamedQuery",value:function(e,t){return Gy.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:yg(e.bundledQuery),readTime:Gm(e.readTime)}}(t)),Gy.resolve()}}]),e}(),Xb=function(){function e(){I(this,e),this.overlays=new Hp(pp.comparator),this.Ii=new Map}return E(e,[{key:"getOverlay",value:function(e,t){return Gy.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Gy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Gy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Tm(),i=t.length+1,a=new pp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Gy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Tm(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Tm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Gy.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new sg(t,n));var a=this.Ii.get(t);void 0===a&&(a=Nm(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Zb=function(){function e(){I(this,e),this.Ti=new Xp($b.Ei),this.Ai=new Xp($b.Ri)}return E(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new $b(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new $b(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new pp(new Xd([])),r=new $b(n,e),i=new $b(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new pp(new Xd([])),n=new $b(t,e),r=new $b(t,e+1),i=Nm();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new $b(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),$b=function(){function e(t,n){I(this,e),this.key=t,this.Ci=n}return E(e,null,[{key:"Ei",value:function(e,t){return pp.comparator(e.key,t.key)||Bd(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Bd(e.Ci,t.Ci)||pp.comparator(e.key,t.key)}}]),e}(),ew=function(){function e(t,n){I(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Xp($b.Ei)}return E(e,[{key:"checkEmpty",value:function(e){return Gy.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new ag(i,t,n,r);this.Bs.push(a);var o,s=T(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new $b(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Gy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Gy.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Gy.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Gy.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Gy.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new $b(t,0),i=new $b(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Gy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Xp(Bd);return t.forEach((function(e){var t=new $b(e,0),i=new $b(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Gy.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;pp.isDocumentKey(i)||(i=i.child(""));var a=new $b(new pp(i),0),o=new Xp(Bd);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Gy.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Td(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Gy.forEach(t.mutations,(function(i){var a=new $b(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new $b(t,0),r=this.Ni.firstAfterOrEqual(n);return Gy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Gy.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),tw=function(){function e(t){I(this,e),this.$i=t,this.docs=new Hp(pp.comparator),this.size=0}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Gy.resolve(n?n.document.mutableCopy():Up.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Im();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Up.newInvalidDocument(e))})),Gy.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Im(),i=new pp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Gp(Qp(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Gy.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ed()}},{key:"Bi",value:function(e,t){return Gy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new nw(this)}},{key:"getSize",value:function(e){return Gy.resolve(this.size)}}]),e}(),nw=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).Kn=e,r}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Gy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(hb),rw=function(){function e(t){I(this,e),this.persistence=t,this.Li=new km((function(e){return nv(e)}),rv),this.lastRemoteSnapshotVersion=Kd.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Zb,this.targetCount=0,this.Ki=$g.gn()}return E(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Gy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Gy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Gy.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Gy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Gy.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new $g(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Gy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Gy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Gy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Gy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Gy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Gy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Gy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Gy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Gy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Gy.resolve(n)}},{key:"containsKey",value:function(e,t){return Gy.resolve(this.qi.containsKey(t))}}]),e}(),iw=function(){function e(t,n){var r=this;I(this,e),this.Gi={},this.overlays={},this.es=new Fd(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new rw(this),this.indexManager=new jg,this.ds=new tw((function(e){return r.referenceDelegate.Qi(e)})),this.M=new cg(n),this._s=new Jb(this.M)}return E(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Xb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new ew(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;kd("MemoryPersistence","Starting transaction:",e);var i=new aw(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Gy.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),aw=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return E(n)}(Ky),ow=function(){function e(t){I(this,e),this.persistence=t,this.Hi=new Zb,this.Ji=null}return E(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw Ed()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Gy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Gy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Gy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gy.forEach(this.Xi,(function(r){var i=pp.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Kd.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Gy.or([function(){return Gy.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function sw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function uw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function cw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var lw=function(){function e(t,n,r,i){I(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return E(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Nd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(xd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fw=function(){function e(t,n,r){I(this,e),this.targetId=t,this.state=n,this.error=r}return E(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Nd(i.error.code,i.error.message))),a?new e(t,i.state,r):(xd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),hw=function(){function e(t,n){I(this,e),this.clientId=t,this.activeTargetIds=n}return E(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Dm(),o=0;i&&o<r.activeTargetIds.length;++o)i=dp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(xd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),dw=function(){function e(t,n){I(this,e),this.clientId=t,this.onlineState=n}return E(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(xd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),pw=function(){function e(){I(this,e),this.activeTargetIds=Dm()}return E(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),vw=function(){function e(t,n,r,i,a){I(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Hp(Bd),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=sw(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new pw),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return E(e,[{key:"start",value:function(){var e=k(b().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(sw(this.persistenceKey,i)))&&(o=hw.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(u=this.pr(s))&&this.Ir(u),c=T(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(cw(this.persistenceKey,e));if(n){var r=fw.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(cw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return kd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){kd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){kd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(kd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void xd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(k(b().mark((function e(){var r,i,a,o,s,u,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}u=function(e){var t=Fd.A;if(null!=e)try{var n=JSON.parse(e);Td("number"==typeof n),t=n}catch(e){xd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Fd.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new lw(this.currentUser,e,t,n),i=uw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=uw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=cw(this.persistenceKey,e),i=new fw(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return hw.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lw.tr(new yd(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return fw.tr(r,t)}},{key:"pr",value:function(e){return dw.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:kd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Lr(o,s).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Dm();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),mw=function(){function e(){I(this,e),this.Ur=new pw,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return E(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new pw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),yw=function(){function e(){I(this,e)}return E(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),gw=function(){function e(){var t=this;I(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return E(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){kd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){kd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ww=function(){function e(t){I(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return E(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),kw=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return E(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new vd;o.listenOnce(ld.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case cd.NO_ERROR:var t=o.getResponseJson();kd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case cd.TIMEOUT:kd("Connection",'RPC "'+e+'" timed out'),a(new Nd(Ad.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:var n=o.getStatus();if(kd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ad).indexOf(t)>=0?t:Ad.UNKNOWN}(r.status);a(new Nd(s,r.message))}else a(new Nd(Ad.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Nd(Ad.UNAVAILABLE,"Connection failed."));break;default:Ed()}}finally{kd("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=sd(),a=ud(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new dd({})),this.lo(o.initMessageHeaders,t,n),W()||G()||z().indexOf("Electron/")>=0||H()||z().indexOf("MSAppHost/")>=0||K()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");kd("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new ww({Jr:function(e){l?kd("Connection","Not sending because WebChannel is closed:",e):(c||(kd("Connection","Opening WebChannel transport."),u.open(),c=!0),kd("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,pd.EventType.OPEN,(function(){l||kd("Connection","WebChannel transport opened.")})),h(u,pd.EventType.CLOSE,(function(){l||(l=!0,kd("Connection","WebChannel transport closed"),f.ro())})),h(u,pd.EventType.ERROR,(function(e){l||(l=!0,Id("Connection","WebChannel transport errored:",e),f.ro(new Nd(Ad.UNAVAILABLE,"The operation could not be completed")))})),h(u,pd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Td(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){kd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=pm[e];if(void 0!==t)return wm(t)}(a),s=i.message;void 0===o&&(o=Ad.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new Nd(o,s)),u.close()}else kd("Connection","WebChannel received:",n),f.oo(n)}})),h(a,fd.STAT_EVENT,(function(e){e.stat===hd.PROXY?kd("Connection","Detected buffering proxy"):e.stat===hd.NOPROXY&&kd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){I(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return E(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);kd("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return kd("RestConnection","Received: ",e),e}),(function(t){throw Id("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=bw[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function xw(){return"undefined"!=typeof window?window:null}function Iw(){return"undefined"!=typeof document?document:null}function _w(e){return new zm(e,!0)}var Ew=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;I(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return E(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&kd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Tw=function(){function e(t,n,r,i,a,o,s,u){I(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Ew(t,n)}return E(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===Ad.RESOURCE_EXHAUSTED?(xd(n.toString()),xd("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===Ad.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Nd(Ad.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return kd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(kd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Sw=function(e){N(n,e);var t=O(n);function n(e,r,i,a,o,s){var u;return I(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return E(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ed()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Td(void 0===t||"string"==typeof t),tp.fromBase64String(t||"")):(Td(void 0===t||t instanceof Uint8Array),tp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Ad.UNKNOWN:wm(e.code);return new Nd(t,e.message||"")}(o);n=new jm(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Xm(e,u.document.name),l=Gm(u.document.updateTime),f=new jp({mapValue:{fields:u.document.fields}}),h=Up.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Rm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Xm(e,v.document),y=v.readTime?Gm(v.readTime):Kd.min(),g=Up.newNoDocument(m,y),b=v.removedTargetIds||[];n=new Rm([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var k=Xm(e,w.document),x=w.removedTargetIds||[];n=new Rm([],x,k,null)}else{if(!("filter"in t))return Ed();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new gm(_),T=I.targetId;n=new Lm(T,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Kd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Kd.min():t.readTime?Gm(t.readTime):Kd.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=ey(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=iv(r)?{documents:sy(e,r)}:{query:uy(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Qm(e,t.resumeToken):t.snapshotVersion.compareTo(Kd.min())>0&&(n.readTime=Wm(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ed()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=ey(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(Tw),Aw=function(e){N(n,e);var t=O(n);function n(e,r,i,a,o,s){var u;return I(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return E(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Ft(C(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Td(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(Td(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Gm(e.updateTime):Gm(t);return n.isEqual(Kd.min())&&(n=Gm(t)),new em(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Gm(e.commitTime);return this.listener.tu(n,t)}return Td(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=ey(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ay(t.M,e)}))};this.Lo(n)}}]),n}(Tw),Nw=function(e){N(n,e);var t=O(n);function n(e,r,i,a){var o;return I(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return E(n,[{key:"iu",value:function(){if(this.su)throw new Nd(Ad.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.So.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ad.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Nd(Ad.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.So._o(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ad.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Nd(Ad.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return E((function e(){I(this,e)}))}()),Cw=function(){function e(t,n){I(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return E(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(xd(t),this.uu=!1):kd("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Dw=E((function e(t,n,r,i,a){var o=this;I(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Bw(o),!e.t0){e.next=5;break}return kd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Sd(t)).wu.add(4),e.next=4,Rw(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,Pw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new Cw(r,i)}));function Pw(e){return Ow.apply(this,arguments)}function Ow(){return Ow=k(b().mark((function e(t){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bw(t)){e.next=18;break}n=T(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ow.apply(this,arguments)}function Rw(e){return Lw.apply(this,arguments)}function Lw(){return Lw=k(b().mark((function e(t){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Lw.apply(this,arguments)}function jw(e,t){var n=Sd(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),qw(n)?Vw(n):yk(n).Mo()&&Uw(n,t))}function Mw(e,t){var n=Sd(e),r=yk(n);n._u.delete(t),r.Mo()&&Fw(n,t),0===n._u.size&&(r.Mo()?r.$o():Bw(n)&&n.yu.set("Unknown"))}function Uw(e,t){e.pu.Z(t.targetId),yk(e).Ho(t)}function Fw(e,t){e.pu.Z(t),yk(e).Jo(t)}function Vw(e){e.pu=new Um({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),yk(e).start(),e.yu.au()}function qw(e){return Bw(e)&&!yk(e).ko()&&e._u.size>0}function Bw(e){return 0===Sd(e).wu.size}function zw(e){e.pu=void 0}function Ww(e){return Qw.apply(this,arguments)}function Qw(){return Qw=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Uw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function Kw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zw(t),qw(t)?(t.yu.lu(n),Vw(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Hw(e,t,n){return Yw.apply(this,arguments)}function Yw(){return Yw=k(b().mark((function e(t,n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof jm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),kd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Jw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Rm?t.pu.ut(n):n instanceof Lm?t.pu._t(n):t.pu.ht(n),r.isEqual(Kd.min())){e.next=29;break}return e.prev=14,e.next=17,Lb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(tp.EMPTY_BYTE_STRING,n.snapshotVersion)),Fw(e,t);var r=new ug(n.target,t,1,n.sequenceNumber);Uw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),kd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Jw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Yw.apply(this,arguments)}function Jw(e,t,n){return Xw.apply(this,arguments)}function Xw(){return Xw=k(b().mark((function e(t,n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zy(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Rw(t);case 5:t.yu.set("Offline"),r||(r=function(){return Lb(t.localStore)}),t.asyncQueue.enqueueRetryable(k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,Pw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function Zw(e,t){return t().catch((function(n){return Jw(e,n,t)}))}function $w(e){return ek.apply(this,arguments)}function ek(){return ek=k(b().mark((function e(t){var n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sd(t),r=gk(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!tk(n)){e.next=19;break}return e.prev=3,e.next=6,Ub(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,nk(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Jw(n,e.t0);case 17:e.next=2;break;case 19:rk(n)&&ik(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),ek.apply(this,arguments)}function tk(e){return Bw(e)&&e.du.length<10}function nk(e,t){e.du.push(t);var n=gk(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function rk(e){return Bw(e)&&!gk(e).ko()&&e.du.length>0}function ik(e){gk(e).start()}function ak(e){return ok.apply(this,arguments)}function ok(){return ok=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gk(t).nu();case 1:case"end":return e.stop()}}),e)}))),ok.apply(this,arguments)}function sk(e){return uk.apply(this,arguments)}function uk(){return uk=k(b().mark((function e(t){var n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gk(t),r=T(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),uk.apply(this,arguments)}function ck(e,t,n){return lk.apply(this,arguments)}function lk(){return lk=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=og.from(i,n,r),e.next=3,Zw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,$w(t);case 5:case"end":return e.stop()}}),e)}))),lk.apply(this,arguments)}function fk(e,t){return hk.apply(this,arguments)}function hk(){return hk=k(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&gk(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bm(i=n.code)||i===Ad.ABORTED){e.next=7;break}return r=t.du.shift(),gk(t).Fo(),e.next=5,Zw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,$w(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:rk(t)&&ik(t);case 5:case"end":return e.stop()}}),e)}))),hk.apply(this,arguments)}function dk(e,t){return pk.apply(this,arguments)}function pk(){return pk=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Sd(t)).asyncQueue.verifyOperationInProgress(),kd("RemoteStore","RemoteStore received new credentials"),i=Bw(r),r.wu.add(3),e.next=6,Rw(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,Pw(r);case 12:case"end":return e.stop()}}),e)}))),pk.apply(this,arguments)}function vk(e,t){return mk.apply(this,arguments)}function mk(){return mk=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sd(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,Pw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Rw(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),mk.apply(this,arguments)}function yk(e){return e.Iu||(e.Iu=function(e,t,n){var r=Sd(e);return r.iu(),new Sw(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Ww.bind(null,e),eo:Kw.bind(null,e),zo:Hw.bind(null,e)}),e.mu.push(function(){var t=k(b().mark((function t(n){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),qw(e)?Vw(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:zw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function gk(e){return e.Tu||(e.Tu=function(e,t,n){var r=Sd(e);return r.iu(),new Aw(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:ak.bind(null,e),eo:fk.bind(null,e),eu:sk.bind(null,e),tu:ck.bind(null,e)}),e.mu.push(function(){var t=k(b().mark((function t(n){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,$w(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(kd("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var bk=function(){function e(t,n,r,i,a){I(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Cd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return E(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nd(Ad.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wk(e,t){if(xd("AsyncQueue","".concat(t,": ").concat(e)),Zy(e))return new Nd(Ad.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var kk=function(){function e(t){I(this,e),this.comparator=t?function(e,n){return t(e,n)||pp.comparator(e.key,n.key)}:function(e,t){return pp.comparator(e.key,t.key)},this.keyedMap=Em(),this.sortedSet=new Hp(this.comparator)}return E(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),xk=function(){function e(){I(this,e),this.Eu=new Hp(pp.comparator)}return E(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Ed():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Ik=function(){function e(t,n,r,i,a,o,s,u){I(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return E(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,kk.emptySet(n),a,r,i,!0,!1)}}]),e}(),_k=E((function e(){I(this,e),this.Ru=void 0,this.listeners=[]})),Ek=E((function e(){I(this,e),this.queries=new km((function(e){return Pv(e)}),Dv),this.onlineState="Unknown",this.bu=new Set}));function Tk(e,t){return Sk.apply(this,arguments)}function Sk(){return Sk=k(b().mark((function e(t,n){var r,i,a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new _k),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=wk(e.t0,"Initialization of query '".concat(Ov(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&Pk(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Sk.apply(this,arguments)}function Ak(e,t){return Nk.apply(this,arguments)}function Nk(){return Nk=k(b().mark((function e(t,n){var r,i,a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Nk.apply(this,arguments)}function Ck(e,t){var n,r=Sd(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=T(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&Pk(r)}function Dk(e,t,n){var r=Sd(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Pk(e){e.bu.forEach((function(e){e.next()}))}var Ok=function(){function e(t,n,r){I(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return E(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Ik(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=Ik.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),Rk=function(){function e(t,n){I(this,e),this.payload=t,this.byteLength=n}return E(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),Lk=function(){function e(t){I(this,e),this.M=t}return E(e,[{key:"wi",value:function(e){return Xm(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?ry(this.M,e.document,!1):Up.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Gm(e)}}]),e}(),jk=function(){function e(t,n,r){I(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mk(t)}return E(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Xd.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Lk(this.M),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=T(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Nm()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=k(b().mark((function e(){var t,n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kb(this.localStore,new Lk(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Hb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Mk(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Uk=E((function e(t){I(this,e),this.key=t})),Fk=E((function e(t){I(this,e),this.key=t})),Vk=function(){function e(t,n){I(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=Nm(),this.mutatedKeys=Nm(),this.Gu=jv(t),this.Qu=new kk(this.Gu)}return E(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new xk,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Rv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||c&&n.Gu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ed()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new Ik(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new xk,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Nm(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Fk(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Uk(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=Nm();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return Ik.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),qk=E((function e(t,n,r){I(this,e),this.query=t,this.targetId=n,this.view=r})),Bk=E((function e(t){I(this,e),this.key=t,this.na=!1})),zk=function(){function e(t,n,r,i,a,o){I(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new km((function(e){return Pv(e)}),Dv),this.ra=new Map,this.oa=new Set,this.ua=new Hp(pp.comparator),this.aa=new Map,this.ca=new Zb,this.ha={},this.la=new Map,this.fa=$g.yn(),this.onlineState="Unknown",this.da=void 0}return E(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Wk(e,t){return Qk.apply(this,arguments)}function Qk(){return Qk=k(b().mark((function e(t,n){var r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Mx(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Fb(r.localStore,Nv(n));case 8:return s=e.sent,r.isPrimaryClient&&jw(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Kk(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Qk.apply(this,arguments)}function Kk(e,t,n,r){return Gk.apply(this,arguments)}function Gk(){return Gk=k(b().mark((function e(t,n,r,i){var a,o,s,u,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=k(b().mark((function e(t,n,r,i){var a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Bb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(dx(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Bb(t.localStore,n,!0);case 3:return a=e.sent,o=new Vk(n,a._i),s=o.Wu(a.documents),u=Om.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),dx(t,r,c.Xu),l=new qk(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Gk.apply(this,arguments)}function Hk(e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sd(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Dv(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Vb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Mw(r.remoteStore,i.targetId),fx(r,i.targetId)})).catch(ib);case 9:e.next=14;break;case 11:return fx(r,i.targetId),e.next=14,Vb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Yk.apply(this,arguments)}function Jk(e,t,n){return Xk.apply(this,arguments)}function Xk(){return Xk=k(b().mark((function e(t,n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ux(t),e.prev=1,e.next=4,function(e,t){var n,r=Sd(e),i=Qd.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Nm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,s=[],u=T(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=om(c,n.get(c.key));null!=l&&s.push(new lm(c.key,l,Mp(l.value.mapValue),tm.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Hp(Bd)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,mx(i,a.changes);case 9:return e.next=11,$w(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wk(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Xk.apply(this,arguments)}function Zk(e,t){return $k.apply(this,arguments)}function $k(){return $k=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),e.prev=1,e.next=4,jb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(Td(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?Td(n.na):e.removedDocuments.size>0&&(Td(n.na),n.na=!1))})),e.next=8,mx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ib(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),$k.apply(this,arguments)}function ex(e,t,n){var r=Sd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Sd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Pk(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function tx(e,t,n){return nx.apply(this,arguments)}function nx(){return nx=k(b().mark((function e(t,n,r){var i,a,o,s,u,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Sd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Hp(pp.comparator)).insert(o,Up.newNoDocument(o,Kd.min())),u=Nm().add(o),c=new Pm(Kd.min(),new Map,new Xp(Bd),s,u),e.next=9,Zk(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),vx(i),e.next=16;break;case 14:return e.next=16,Vb(i.localStore,n,!1).then((function(){return fx(i,n,r)})).catch(ib);case 16:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),i=n.batch.batchId,e.prev=1,e.next=4,Rb(r.localStore,n);case 4:return a=e.sent,lx(r,i,null),cx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,mx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ib(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ix.apply(this,arguments)}function ax(e,t,n){return ox.apply(this,arguments)}function ox(){return ox=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sd(t),e.prev=1,e.next=4,function(e,t){var n=Sd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Td(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,lx(i,n,r),cx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,mx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ib(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ox.apply(this,arguments)}function sx(e,t){return ux.apply(this,arguments)}function ux(){return ux=k(b().mark((function e(t,n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bw((r=Sd(t)).remoteStore)||kd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Sd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wk(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),ux.apply(this,arguments)}function cx(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function lx(e,t,n){var r=Sd(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function fx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||hx(e,t)}))}function hx(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Mw(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),vx(e))}function dx(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Uk?(e.ca.addReference(a.key,t),px(e,a)):a instanceof Fk?(kd("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||hx(e,a.key)):Ed()}}catch(o){i.e(o)}finally{i.f()}}function px(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(kd("SyncEngine","New document in limbo: "+n),e.oa.add(r),vx(e))}function vx(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new pp(Xd.fromString(t)),r=e.fa.next();e.aa.set(r,new Bk(n)),e.ua=e.ua.insert(n,r),jw(e.remoteStore,new ug(Nv(_v(n.path)),r,2,Fd.A))}}function mx(e,t,n){return yx.apply(this,arguments)}function yx(){return yx=k(b().mark((function e(t,n,r){var i,a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Sd(t),a=[],o=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){s.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ab.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=k(b().mark((function e(t,n){var r,i,a,o,s,u,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Gy.forEach(n,(function(t){return Gy.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Gy.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Zy(e.t0)){e.next=10;break}throw e.t0;case 10:kd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function gx(e,t){return bx.apply(this,arguments)}function bx(){return bx=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Sd(t)).currentUser.isEqual(n)){e.next=11;break}return kd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Pb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new Nd(Ad.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,mx(r,i.di);case 11:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}function wx(e,t){var n=Sd(e),r=n.aa.get(t);if(r&&r.na)return Nm().add(r.key);var i=Nm(),a=n.ra.get(t);if(!a)return i;var o,s=T(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function kx(e,t){return xx.apply(this,arguments)}function xx(){return xx=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),e.next=3,Bb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&dx(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(e,t){return _x.apply(this,arguments)}function _x(){return _x=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),e.abrupt("return",Wb(r.localStore,n).then((function(e){return mx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function Ex(e,t,n,r){return Tx.apply(this,arguments)}function Tx(){return Tx=k(b().mark((function e(t,n,r,i){var a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Sd(t),e.next=3,function(e,t){var n=Sd(e),r=Sd(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Gy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,$w(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(lx(a,n,i||null),cx(a,n),function(e,t){Sd(Sd(e).Bs)._n(t)}(a.localStore,n)):Ed();case 11:return e.next=13,mx(a,o);case 13:e.next=16;break;case 15:kd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Sx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=k(b().mark((function e(t,n){var r,i,a,o,s,u,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mx(r=Sd(t)),Ux(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Nx(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,vk(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(s=o.n()).done;)u=s.value,jw(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return fx(r,t),Vb(r.localStore,t,!0)})),Mw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Nx(r,c);case 21:return function(e){var t=Sd(e);t.aa.forEach((function(e,n){Mw(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Hp(pp.comparator)}(r),r.da=!1,e.next=25,vk(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Nx(e,t,n){return Cx.apply(this,arguments)}function Cx(){return Cx=k(b().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Sd(t),a=[],o=[],s=T(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Fb(i.localStore,Nv(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,kx(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,zb(i.localStore,c);case 36:return y=e.sent,e.next=39,Fb(i.localStore,y);case 39:return l=e.sent,e.next=42,Kk(i,Dx(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Cx.apply(this,arguments)}function Dx(e){return Iv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Px(e){var t=Sd(e);return Sd(Sd(t.localStore).persistence).Fs()}function Ox(e,t,n,r){return Rx.apply(this,arguments)}function Rx(){return Rx=k(b().mark((function e(t,n,r,i){var a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Sd(t)).da){e.next=3;break}return e.abrupt("return",void kd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Wb(a.localStore,Lv(o[0]));case 10:return s=e.sent,u=Pm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,mx(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Vb(a.localStore,n,!0);case 17:return fx(a,n,i),e.abrupt("break",20);case 19:Ed();case 20:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Lx(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=k(b().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Mx(t)).da){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return kd("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,zb(i.localStore,s);case 12:return u=e.sent,e.next=15,Fb(i.localStore,u);case 15:return c=e.sent,e.next=18,Kk(i,Dx(u),c.targetId,!1);case 18:jw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Vb(i.localStore,t,!1).then((function(){Mw(i.remoteStore,t),fx(i,t)})).catch(ib);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),jx.apply(this,arguments)}function Mx(e){var t=Sd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tx.bind(null,t),t.sa.zo=Ck.bind(null,t.eventManager),t.sa.wa=Dk.bind(null,t.eventManager),t}function Ux(e){var t=Sd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ax.bind(null,t),t}function Fx(e,t,n){var r=Sd(e);(function(){var e=k(b().mark((function e(t,n,r){var i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Sd(e),r=Gm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Mk(i)),a=new jk(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,mx(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Sd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Id("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Vx=function(){function e(){I(this,e),this.synchronizeTabs=!1}return E(e,[{key:"initialize",value:function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=_w(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return Db(this.persistence,new Nb,e.initialUser,this.M)}},{key:"ya",value:function(e){return new iw(ow.Yi,this.M)}},{key:"ga",value:function(e){return new mw}},{key:"terminate",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qx=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return E(n,[{key:"initialize",value:function(){var e=k(b().mark((function e(t){var r=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(C(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,Ux(this.Ta.syncEngine);case 6:return e.next=8,$w(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return Db(this.persistence,new Nb,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new ub(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=Tb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qg.withCacheSize(this.cacheSizeBytes):Qg.DEFAULT;return new Ib(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xw(),Iw(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new mw}}]),n}(Vx),Bx=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return E(n,[{key:"initialize",value:function(){var e=k(b().mark((function e(t){var r,i=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(C(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof vw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:Ex.bind(null,r),Br:Ox.bind(null,r),Lr:Lx.bind(null,r),Fs:Px.bind(null,r),Fr:Ix.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sx(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=xw();if(!vw.vt(t))throw new Nd(Ad.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Tb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(qx),zx=function(){function e(){I(this,e)}return E(e,[{key:"initialize",value:function(){var e=k(b().mark((function e(t,n){var r=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ex(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gx.bind(null,this.syncEngine),e.next=12,vk(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Ek}},{key:"createDatastore",value:function(e){var t,n=_w(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new kw(t));return function(e,t,n,r){return new Nw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ex(o.syncEngine,e,0)},a=gw.vt()?new gw:new yw,new Dw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new zk(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sd(t),kd("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Rw(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Wx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return k(b().mark((function r(){var i;return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Qx=function(){function e(t){I(this,e),this.observer=t,this.muted=!1}return E(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Kx=function(){function e(t,n){var r=this;I(this,e),this.Ra=t,this.M=n,this.metadata=new Cd,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return E(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=k(b().mark((function e(){var t,n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new Rk(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=k(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=k(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gx=function(){function e(t){I(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return E(e,[{key:"lookup",value:function(){var e=k(b().mark((function e(t){var n,r=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Nd(Ad.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=k(b().mark((function e(t,n){var r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),i=ey(r.M)+"/documents",a={documents:n.map((function(e){return Jm(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=iy(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Td(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new mm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=k(b().mark((function e(){var t,n=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=pp.fromPath(t);n.mutations.push(new ym(r,n.precondition(r)))})),e.next=7,function(){var e=k(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sd(t),i=ey(r.M)+"/documents",a={writes:n.map((function(e){return ay(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ed();t=Kd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Nd(Ad.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tm.updateTime(t):tm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Kd.min()))throw new Nd(Ad.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tm.updateTime(t)}return tm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Hx=function(){function e(t,n,r,i,a){I(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new Ew(this.asyncQueue,"transaction_retry")}return E(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(k(b().mark((function t(){var n,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Gx(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!fp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!bm(t)}return!1}}]),e}(),Yx=function(){function e(t,n,r,i){var a=this;I(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yd.UNAUTHENTICATED,this.clientId=qd.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return kd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return E(e,[{key:"getConfiguration",value:function(){var e=k(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Nd(Ad.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Cd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(k(b().mark((function n(){var r;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wk(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Jx(e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),kd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Pb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Zx(e,t){return $x.apply(this,arguments)}function $x(){return $x=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,eI(t);case 3:return r=e.sent,kd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return dk(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return dk(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function eI(e){return tI.apply(this,arguments)}function tI(){return tI=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return kd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Jx(t,new Vx);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e){return rI.apply(this,arguments)}function rI(){return rI=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return kd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Zx(t,new zx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e){return eI(e).then((function(e){return e.persistence}))}function aI(e){return eI(e).then((function(e){return e.localStore}))}function oI(e){return nI(e).then((function(e){return e.remoteStore}))}function sI(e){return nI(e).then((function(e){return e.syncEngine}))}function uI(e){return cI.apply(this,arguments)}function cI(){return cI=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Wk.bind(null,n.syncEngine),r.onUnlisten=Hk.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function i(){return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Qx({next:function(a){t.enqueueAndForget((function(){return Ak(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Nd(Ad.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Nd(Ad.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Ok(_v(n.path),a,{includeMetadataChanges:!0,ku:!0});return Tk(e,o)},i.next=3,uI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function fI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function i(){return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Qx({next:function(n){t.enqueueAndForget((function(){return Ak(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Nd(Ad.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ok(n,a,{includeMetadataChanges:!0,ku:!0});return Tk(e,o)},i.next=3,uI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var hI=new Map;function dI(e,t,n){if(!n)throw new Nd(Ad.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pI(e,t,n,r){if(!0===t&&!0===r)throw new Nd(Ad.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function vI(e){if(!pp.isDocumentKey(e))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mI(e){if(pp.isDocumentKey(e))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ed()}function gI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nd(Ad.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yI(e);throw new Nd(Ad.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function bI(e,t){if(t<=0)throw new Nd(Ad.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var wI=function(){function e(t){var n;if(I(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Nd(Ad.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nd(Ad.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,pI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return E(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),kI=function(){function e(t,n,r){I(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wI({}),this._settingsFrozen=!1,t instanceof lp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nd(Ad.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lp(e.options.projectId)}(t))}return E(e,[{key:"app",get:function(){if(!this._app)throw new Nd(Ad.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Nd(Ad.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Pd;switch(e.type){case"gapi":var t=e.client;return Td(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new jd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Nd(Ad.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=hI.get(e);t&&(kd("ComponentProvider","Removing Datastore"),hI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function xI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=gI(e,kI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Id("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=yd.MOCK_USER;else{o=B(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Nd(Ad.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new yd(u)}e._authCredentials=new Od(new Dd(o,s))}}var II=function(){function e(t,n,r){I(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return E(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new EI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_I=function(){function e(t,n,r){I(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return E(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),EI=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,e,r,_v(i)))._path=i,a.type="collection",a}return E(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new II(this.firestore,null,new pp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(_I);function TI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),dI("collection","path",t),e instanceof kI){var a=Xd.fromString.apply(Xd,[t].concat(r));return mI(a),new EI(e,null,a)}if(!(e instanceof II||e instanceof EI))throw new Nd(Ad.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xd.fromString.apply(Xd,[t].concat(r)));return mI(o),new EI(e.firestore,null,o)}function SI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),1===arguments.length&&(t=qd.R()),dI("doc","path",t),e instanceof kI){var a=Xd.fromString.apply(Xd,[t].concat(r));return vI(a),new II(e,null,new pp(a))}if(!(e instanceof II||e instanceof EI))throw new Nd(Ad.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xd.fromString.apply(Xd,[t].concat(r)));return vI(o),new II(e.firestore,e instanceof EI?e.converter:null,new pp(o))}function AI(e,t){return e=ce(e),t=ce(t),(e instanceof II||e instanceof EI)&&(t instanceof II||t instanceof EI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function NI(e,t){return e=ce(e),t=ce(t),e instanceof _I&&t instanceof _I&&e.firestore===t.firestore&&Dv(e._query,t._query)&&e.converter===t.converter}var CI=function(){function e(){var t=this;I(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Ew(this,"async_queue_retry"),this.Qa=function(){var e=Iw();e&&kd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=Iw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return E(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=Iw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new Cd;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=k(b().mark((function e(){var t=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Zy(e.t0)){e.next=12;break}throw e.t0;case 12:kd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=bk.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&Ed()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=T(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function DI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var PI=function(){function e(){I(this,e),this._progressObserver={},this._taskCompletionResolver=new Cd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return E(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),OI=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new CI,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return E(n,[{key:"_terminate",value:function(){return this._firestoreClient||LI(this),this._firestoreClient.terminate()}}]),n}(kI);function RI(e){return e._firestoreClient||LI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function LI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new cp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Yx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function jI(e,t,n){var r=new Cd;return e.asyncQueue.enqueue(k(b().mark((function i(){return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Jx(e,n);case 3:return i.next=5,Zx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ad.FAILED_PRECONDITION||e.code===Ad.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function MI(e){return function(e){return e.asyncQueue.enqueue(k(b().mark((function t(){var n,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iI(e);case 2:return n=t.sent,t.next=5,oI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Sd(e);return t.wu.delete(0),Pw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(RI(e=gI(e,OI)))}function UI(e){return function(e){return e.asyncQueue.enqueue(k(b().mark((function t(){var n,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iI(e);case 2:return n=t.sent,t.next=5,oI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Sd(t)).wu.add(0),e.next=4,Rw(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(RI(e=gI(e,OI)))}function FI(e,t){var n=RI(e=gI(e,OI)),r=new PI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Kx(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wx(e,t);if(e instanceof ArrayBuffer)return Wx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,_w(t));e.asyncQueue.enqueueAndForget(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Fx,t.next=3,sI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function VI(e,t){return function(e,t){return e.asyncQueue.enqueue(k(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Sd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,aI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(RI(e=gI(e,OI)),t).then((function(t){return t?new _I(e,null,t.query):null}))}function qI(e){if(e._initialized||e._terminated)throw new Nd(Ad.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var BI=function(){function e(){I(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $d(n)}return E(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var zI=function(){function e(t){I(this,e),this._byteString=t}return E(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(tp.fromBase64String(t))}catch(t){throw new Nd(Ad.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(tp.fromUint8Array(t))}}]),e}(),WI=E((function e(t){I(this,e),this._methodName=t})),QI=function(){function e(t,n){if(I(this,e),!isFinite(t)||t<-90||t>90)throw new Nd(Ad.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Nd(Ad.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return E(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Bd(this._lat,e._lat)||Bd(this._long,e._long)}}]),e}(),KI=/^__.*__$/,GI=function(){function e(t,n,r){I(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new lm(e,this.data,this.fieldMask,t,this.fieldTransforms):new cm(e,this.data,t,this.fieldTransforms)}}]),e}(),HI=function(){function e(t,n,r){I(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return new lm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function YI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ed()}}var JI=function(){function e(t,n,r,i,a,o){I(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return E(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return m_(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(YI(this.ec)&&KI.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),XI=function(){function e(t,n,r){I(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||_w(t)}return E(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new JI({ec:e,methodName:t,hc:n,path:$d.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function ZI(e){var t=e._freezeSettings(),n=_w(e._databaseId);return new XI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $I(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);h_("Data must be an object, but it was:",o,r);var s,u,c=l_(r,o);if(a.merge)s=new ep(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=d_(t,d,n);if(!o.contains(p))throw new Nd(Ad.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));y_(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new ep(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new GI(new jp(c),s,u)}var e_=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(WI);function t_(e,t,n){return new JI({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var n_=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){return new $v(e.path,new Qv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(WI),r_=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e)).fc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=t_(this,e,!0),n=this.fc.map((function(e){return c_(e,t)})),r=new Kv(n);return new $v(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WI),i_=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e)).fc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=t_(this,e,!0),n=this.fc.map((function(e){return c_(e,t)})),r=new Hv(n);return new $v(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WI),a_=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e)).dc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=new Jv(e.M,Vv(e.M,this.dc));return new $v(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WI);function o_(e,t,n,r){var i=e.lc(1,t,n);h_("Data must be an object, but it was:",i,r);var a=[],o=jp.empty();Hd(r,(function(e,r){var s=v_(t,e,n);r=ce(r);var u=i.oc(s);if(r instanceof e_)a.push(s);else{var c=c_(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new ep(a);return new HI(o,s,i.fieldTransforms)}function s_(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[d_(t,r,n)],u=[i];if(a.length%2!=0)throw new Nd(Ad.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(d_(t,a[c])),u.push(a[c+1]);for(var l=[],f=jp.empty(),h=s.length-1;h>=0;--h)if(!y_(l,s[h])){var d=s[h],p=u[h];p=ce(p);var v=o.oc(d);if(p instanceof e_)l.push(d);else{var m=c_(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ep(l);return new HI(f,y,o.fieldTransforms)}function u_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return c_(n,e.lc(r?4:3,t))}function c_(e,t){if(f_(e=ce(e)))return h_("Unsupported field value:",t,e),l_(e,t);if(e instanceof WI)return function(e,t){if(!YI(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=c_(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ce(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Vv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Qd.fromDate(e);return{timestampValue:Wm(t.M,n)}}if(e instanceof Qd){var r=new Qd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wm(t.M,r)}}if(e instanceof QI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zI)return{bytesValue:Qm(t.M,e._byteString)};if(e instanceof II){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Hm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(yI(e)))}(e,t)}function l_(e,t){var n={};return Yd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hd(e,(function(e,r){var i=c_(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function f_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qd||e instanceof QI||e instanceof zI||e instanceof II||e instanceof WI)}function h_(e,t,n){if(!f_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=yI(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function d_(e,t,n){if((t=ce(t))instanceof BI)return t._internalPath;if("string"==typeof t)return v_(e,t);throw m_("Field path arguments must be of type string or ",e,!1,void 0,n)}var p_=new RegExp("[~\\*/\\[\\]]");function v_(e,t,n){if(t.search(p_)>=0)throw m_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return R(BI,fe(t.split(".")))._internalPath}catch(r){throw m_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function m_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Nd(Ad.INVALID_ARGUMENT,s+e+u)}function y_(e,t){return e.some((function(e){return e.isEqual(t)}))}var g_=function(){function e(t,n,r,i,a){I(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return E(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new II(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new b_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(w_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),b_=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){return Ft(C(n.prototype),"data",this).call(this)}}]),n}(g_);function w_(e,t){return"string"==typeof t?v_(e,t):t instanceof BI?t._internalPath:t._delegate._internalPath}var k_=function(){function e(t,n){I(this,e),this.hasPendingWrites=t,this.fromCache=n}return E(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),x_=function(e){N(n,e);var t=O(n);function n(e,r,i,a,o,s){var u;return I(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return E(n,[{key:"exists",value:function(){return Ft(C(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new I_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(w_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(g_),I_=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(C(n.prototype),"data",this).call(this,e)}}]),n}(x_),__=function(){function e(t,n,r,i){I(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new k_(i.hasPendingWrites,i.fromCache),this.query=r}return E(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new I_(n._firestore,n._userDataWriter,r.key,r,new k_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Nd(Ad.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new I_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new k_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new I_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new k_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:E_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function E_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ed()}}function T_(e,t){return e instanceof x_&&t instanceof x_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof __&&t instanceof __&&e._firestore===t._firestore&&NI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function S_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Nd(Ad.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var A_=E((function e(){I(this,e)}));function N_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var C_=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return E(n,[{key:"_apply",value:function(e){var t=ZI(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){q_(o,a);var u,c=[],l=T(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(V_(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=V_(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||q_(o,a),s=u_(n,"where",o,"in"===a||"not-in"===a);var h=uv.create(i,a,s);return function(e,t){if(t.S()){var n=Tv(e);if(null!==n&&!n.isEqual(t.field))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ev(e);null!==r&&B_(e,t.field,r)}var i=function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Nd(Ad.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Nd(Ad.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new _I(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(A_);var D_=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return E(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gv(t,n);return function(e,t){if(null===Ev(e)){var n=Tv(e);null!==n&&B_(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new _I(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new xv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(A_);var P_=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return E(n,[{key:"_apply",value:function(e){return new _I(e.firestore,e.converter,Cv(e._query,this.yc,this.Ic))}}]),n}(A_);var O_=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return E(n,[{key:"_apply",value:function(e){var t=F_(e,this.type,this.Tc,this.Ec);return new _I(e.firestore,e.converter,function(e,t){return new xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(A_);function R_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new O_("startAt",t,!0)}function L_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new O_("startAfter",t,!1)}var j_=function(e){N(n,e);var t=O(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return E(n,[{key:"_apply",value:function(e){var t=F_(e,this.type,this.Tc,this.Ec);return new _I(e.firestore,e.converter,function(e,t){return new xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(A_);function M_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new j_("endBefore",t,!1)}function U_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new j_("endAt",t,!0)}function F_(e,t,n,r){if(n[0]=ce(n[0]),n[0]instanceof g_)return function(e,t,n,r,i){if(!r)throw new Nd(Ad.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=T(Av(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(_p(t,r.key));else{var c=r.data.field(u.field);if(op(c))throw new Nd(Ad.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new yv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ZI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Nd(Ad.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Sv(e)&&-1!==c.indexOf("/"))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Xd.fromString(c));if(!pp.isDocumentKey(l))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new pp(l);s.push(_p(t,f))}else{var h=u_(n,r,c);s.push(h)}}return new yv(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function V_(e,t,n){if("string"==typeof(n=ce(n))){if(""===n)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sv(t)&&-1!==n.indexOf("/"))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Xd.fromString(n));if(!pp.isDocumentKey(r))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return _p(e,new pp(r))}if(n instanceof II)return _p(e,n._key);throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yI(n),"."))}function q_(e,t){if(!Array.isArray(e)||0===e.length)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function B_(e,t,n){if(!n.isEqual(t))throw new Nd(Ad.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var z_={maxAttempts:5},W_=function(){function e(){I(this,e)}return E(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ip(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ap(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ed()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Hd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new QI(ip(e.latitude),ip(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=sp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(up(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=rp(e);return new Qd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Xd.fromString(e);Td(gy(n));var r=new lp(n.get(1),n.get(3)),i=new pp(n.popFirst(5));return r.isEqual(t)||xd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Q_(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var K_=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new zI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new II(this.firestore,null,t)}}]),n}(W_),G_=function(){function e(t,n){I(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ZI(t)}return E(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=H_(e,this._firestore),i=Q_(r.converter,t,n),a=$I(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,tm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=H_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ce(t))||t instanceof BI?s_(this._dataReader,"WriteBatch.update",i._key,t,n,o):o_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,tm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=H_(e,this._firestore);return this._mutations=this._mutations.concat(new mm(t._key,tm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Nd(Ad.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function H_(e,t){if((e=ce(e)).firestore!==t)throw new Nd(Ad.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Y_=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new zI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new II(this.firestore,null,t)}}]),n}(W_);function J_(e){e=gI(e,II);var t=gI(e.firestore,OI),n=RI(t),r=new Y_(t);return function(e,t){var n=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function r(){return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=k(b().mark((function e(t,n,r){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Sd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Nd(Ad.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wk(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new x_(t,r,e._key,n,new k_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function X_(e){e=gI(e,_I);var t=gI(e.firestore,OI),n=RI(t),r=new Y_(t);return function(e,t){var n=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function r(){return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=k(b().mark((function e(t,n,r){var i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bb(t,n,!0);case 3:i=e.sent,a=new Vk(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=wk(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new __(t,r,e,n)}))}function Z_(e,t,n){e=gI(e,II);var r=gI(e.firestore,OI),i=Q_(e.converter,t,n);return nE(r,[$I(ZI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,tm.none())])}function $_(e,t,n){e=gI(e,II);for(var r=gI(e.firestore,OI),i=ZI(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return nE(r,[("string"==typeof(t=ce(t))||t instanceof BI?s_(i,"updateDoc",e._key,t,n,o):o_(i,"updateDoc",e._key,t)).toMutation(e._key,tm.exists(!0))])}function eE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ce(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||DI(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(DI(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof II)l=gI(e.firestore,OI),f=_v(e._key.path),c={next:function(t){n[u]&&n[u](rE(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=gI(e,_I);l=gI(p.firestore,OI),f=p._query;var v=new Y_(l);c={next:function(e){n[u]&&n[u](new __(l,v,p,e))},error:n[u+1],complete:n[u+2]},S_(e._query)}return function(e,t,n,r){var i=new Qx(r),a=new Ok(t,i,n);return e.asyncQueue.enqueueAndForget(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Tk,t.next=3,uI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ak,t.next=3,uI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(RI(l),f,h,c)}function tE(e,t){return function(e,t){var n=new Qx(t);return e.asyncQueue.enqueueAndForget(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Sd(e).bu.add(t),t.next()},t.next=3,uI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(k(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Sd(e).bu.delete(t)},t.next=3,uI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(RI(e=gI(e,OI)),DI(t)?t:{next:t})}function nE(e,t){return function(e,t){var n=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function r(){return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Jk,r.next=3,sI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(RI(e),t)}function rE(e,t,n){var r=n.docs.get(t._key),i=new Y_(e);return new x_(e,i,t._key,r,new k_(n.hasPendingWrites,n.fromCache),t.converter)}var iE=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r))._firestore=e,i}return E(n,[{key:"get",value:function(e){var t=this,r=H_(e,this._firestore),i=new Y_(this._firestore);return Ft(C(n.prototype),"get",this).call(this,e).then((function(e){return new x_(t._firestore,i,r._key,e._document,new k_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){I(this,e),this._firestore=t,this._transaction=n,this._dataReader=ZI(t)}return E(e,[{key:"get",value:function(e){var t=this,n=H_(e,this._firestore),r=new K_(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ed();var i=e[0];if(i.isFoundDocument())return new g_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new g_(t._firestore,r,n._key,null,n.converter);throw Ed()}))}},{key:"set",value:function(e,t,n){var r=H_(e,this._firestore),i=Q_(r.converter,t,n),a=$I(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=H_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ce(t))||t instanceof BI?s_(this._dataReader,"Transaction.update",i._key,t,n,o):o_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=H_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function aE(e,t,n){e=gI(e,OI);var r=Object.assign(Object.assign({},z_),n);return function(e){if(e.maxAttempts<1)throw new Nd(Ad.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function i(){var a;return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return nI(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Hx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(RI(e),(function(n){return t(new iE(e,n))}),r)}function oE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new r_("arrayUnion",t)}function sE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new i_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gd=e}(st),et(new he("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new OI(i,new Rd(e.getProvider("auth-internal")),new Ud(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),dt(md,"3.4.9",e),dt(md,"3.4.9","esm2017")}();function uE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Nd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cE(){if("undefined"===typeof Uint8Array)throw new Nd("unimplemented","Uint8Arrays are not available in this environment.")}function lE(){if("undefined"==typeof atob)throw new Nd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var fE=function(){function e(t){I(this,e),this._delegate=t}return E(e,[{key:"toBase64",value:function(){return lE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return cE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return lE(),new e(zI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return cE(),new e(zI.fromUint8Array(t))}}]),e}();function hE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var dE=function(){function e(){I(this,e)}return E(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){qI(e=gI(e,OI));var n=RI(e),r=e._freezeSettings(),i=new zx;return jI(n,i,new qx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){qI(e=gI(e,OI));var t=RI(e),n=e._freezeSettings(),r=new zx;return jI(t,r,new Bx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Nd(Ad.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Cd;return e._queue.enqueueAndForgetEvenWhileRestricted(k(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yy.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Tb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),pE=function(){function e(t,n,r){var i=this;I(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof lp||(this._appCompat=t)}return E(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Id("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return MI(this._delegate)}},{key:"disableNetwork",value:function(){return UI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&pI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Cd;return e.asyncQueue.enqueueAndForget(k(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=sx,n.next=3,sI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(RI(e=gI(e,OI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return tE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Nd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new AE(this,TI(this._delegate,e))}catch(t){throw wE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new bE(this,SI(this._delegate,e))}catch(t){throw wE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new EE(this,function(e,t){if(e=gI(e,kI),dI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Nd(Ad.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new _I(e,null,function(e){return new xv(Xd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return aE(this._delegate,(function(n){return e(new mE(t,n))}))}},{key:"batch",value:function(){var e=this;return RI(this._delegate),new yE(new G_(this._delegate,(function(t){return nE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return FI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return VI(this._delegate,e).then((function(e){return e?new EE(t,e):null}))}}]),e}(),vE=function(e){N(n,e);var t=O(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new fE(new zI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return bE.forKey(t,this.firestore,null)}}]),n}(W_);var mE=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new vE(t)}return E(e,[{key:"get",value:function(e){var t=this,n=NE(e);return this._delegate.get(n).then((function(e){return new IE(t._firestore,new x_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=NE(e);return n?(uE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=NE(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=NE(e);return this._delegate.delete(t),this}}]),e}(),yE=function(){function e(t){I(this,e),this._delegate=t}return E(e,[{key:"set",value:function(e,t,n){var r=NE(e);return n?(uE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=NE(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=NE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),gE=function(){function e(t,n,r){I(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return E(e,[{key:"fromFirestore",value:function(e,t){var n=new I_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _E(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new vE(t),n),i.set(n,a)),a}}]),e}();gE.INSTANCES=new WeakMap;var bE=function(){function e(t,n){I(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vE(t)}return E(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new AE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new AE(this.firestore,TI(this._delegate,e))}catch(t){throw wE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ce(e))instanceof II&&AI(this._delegate,e)}},{key:"set",value:function(e,t){t=uE("DocumentReference.set",t);try{return t?Z_(this._delegate,e,t):Z_(this._delegate,e)}catch(n){throw wE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$_(this._delegate,e):$_.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw wE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return nE(gI(e.firestore,OI),[new mm(e._key,tm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=kE(n),a=xE(n,(function(t){return new IE(e.firestore,new x_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return eE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?J_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gI(e,II);var t=gI(e.firestore,OI);return lI(RI(t),e._key,{source:"server"}).then((function(n){return rE(t,e,n)}))}(this._delegate):function(e){e=gI(e,II);var t=gI(e.firestore,OI);return lI(RI(t),e._key).then((function(n){return rE(t,e,n)}))}(this._delegate),t.then((function(e){return new IE(n.firestore,new x_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Nd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new II(n._delegate,r,new pp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new II(n._delegate,r,t))}}]),e}();function wE(e,t,n){return e.message=e.message.replace(t,n),e}function kE(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!hE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function xE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=hE(e[0])?e[0]:hE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var IE=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"ref",get:function(){return new bE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return T_(this._delegate,e._delegate)}}]),e}(),_E=function(e){N(n,e);var t=O(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ed()}(void 0!==t),t}}]),n}(IE),EE=function(){function e(t,n){I(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vE(t)}return E(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,N_(this._delegate,function(e,t,n){var r=t,i=w_("where",e);return new C_(i,r,n)}(t,n,r)))}catch(i){throw wE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,N_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=w_("orderBy",e);return new D_(n,t)}(t,n)))}catch(r){throw wE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,N_(this._delegate,function(e){return bI("limit",e),new P_("limit",e,"F")}(t)))}catch(n){throw wE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,N_(this._delegate,function(e){return bI("limitToLast",e),new P_("limitToLast",e,"L")}(t)))}catch(n){throw wE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,N_(this._delegate,R_.apply(void 0,arguments)))}catch(t){throw wE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,N_(this._delegate,L_.apply(void 0,arguments)))}catch(t){throw wE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,N_(this._delegate,M_.apply(void 0,arguments)))}catch(t){throw wE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,N_(this._delegate,U_.apply(void 0,arguments)))}catch(t){throw wE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return NI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?X_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gI(e,_I);var t=gI(e.firestore,OI),n=RI(t),r=new Y_(t);return fI(n,e._query,{source:"server"}).then((function(n){return new __(t,r,e,n)}))}(this._delegate):function(e){e=gI(e,_I);var t=gI(e.firestore,OI),n=RI(t),r=new Y_(t);return S_(e._query),fI(n,e._query).then((function(n){return new __(t,r,e,n)}))}(this._delegate),t.then((function(e){return new SE(n.firestore,new __(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=kE(n),a=xE(n,(function(t){return new SE(e.firestore,new __(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return eE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),TE=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new _E(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),SE=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"query",get:function(){return new EE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new _E(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new TE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new _E(n._firestore,r))}))}},{key:"isEqual",value:function(e){return T_(this._delegate,e._delegate)}}]),e}(),AE=function(e){N(n,e);var t=O(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return E(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new bE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new bE(this.firestore,void 0===e?SI(this._delegate):SI(this._delegate,e))}catch(t){throw wE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=gI(e.firestore,OI),r=SI(e),i=Q_(e.converter,t);return nE(n,[$I(ZI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,tm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new bE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return AI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(gE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(EE);function NE(e){return gI(e,II)}var CE=function(){function e(){I(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=R(BI,n)}return E(e,[{key:"isEqual",value:function(e){return(e=ce(e))instanceof BI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($d.keyField().canonicalString())}}]),e}(),DE=function(){function e(t){I(this,e),this._delegate=t}return E(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new n_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new e_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=oE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=sE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new a_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),PE={Firestore:pE,GeoPoint:QI,Timestamp:Qd,Blob:fE,Transaction:mE,WriteBatch:yE,DocumentReference:bE,DocumentSnapshot:IE,Query:EE,QueryDocumentSnapshot:_E,QuerySnapshot:SE,CollectionReference:AE,FieldPath:CE,FieldValue:DE,setLogLevel:function(e){!function(e){bd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new he("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},PE)))}(e,(function(e,t){return new pE(e,t,new dE)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Mt);var OE,RE=function(e,t){var n=function(e){var t=Mt.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return n||Mt.initializeApp(e,t)};"pam"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using pjordan config"),OE=RE({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using scott config"),OE=RE({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),OE=RE({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var LE=OE,jE=(LE.auth(),LE.firestore()),ME=n(576),UE=n.n(ME),FE=n(8807),VE="assessment",qE="assessment-option",BE="assessment-with-options",zE="decision",WE="decision-option",QE="intervention",KE="phase",GE="required-action",HE="sub-phase",YE=Object.freeze({PHASE:KE,SUB_PHASE:HE,ASSESS:VE,AWO:BE,ASSESS_OPTION:qE,ASSESSO:qE,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:zE,DECISION_OPTION:WE,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:GE,REQURED:GE,INTERV:QE,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),JE=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),XE=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"})),ZE=(Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),Object.freeze({NONE:"",MIN:"minimal",OPT:"optional",REQ:"required",CONTRA:"contraindicated",UNN:"unnecessary",IR:"irrelevant"})),$E=n(1461);function eT(e,t){if(null==e)return{};var n,r,i=(0,$E.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tT,nT,rT=function(e,t){return e.reduce((function(e,n){return Ee(Ee({},e),{},x({},n[t],(e[n[t]]||[]).concat(n)))}),{})},iT=["id","name","schemaVersion","checklist","interventions","interventionPrompts","interventionPromptAnswers","interventionMenuCategories","interventionMenuItems","medications","hierarchy","phaseData"],aT=["subPhases","items"],oT=["options"],sT=["items"],uT=["options"],cT=["distPrompts","prompts"],lT=["options"],fT=["answers"],hT=["items"],dT=function(){function e(t){I(this,e);var n=t.id,r=t.name,i=t.schemaVersion,a=t.checklist,o=t.interventions,s=t.interventionPrompts,u=t.interventionPromptAnswers,c=t.interventionMenuCategories,l=t.interventionMenuItems,f=t.medications;t.hierarchy,t.phaseData,eT(t,iT);this.id=n,this.name=r,this.schemaVersion=i,this._checklist=a,this._interventions=o,this._interventionPrompts=s,this._interventionPromptAnswers=u,this._interventionMenuCategories=c,this._interventionMenuItems=l,this._medications=f,this.checkListMetaData=this.genCheckListMetaData(),this.uniqueIDs=this.genUniqueIDs(),this.uniqueLabels=this.genUniqueLabels()}return E(e,[{key:"genUniqueIDs",value:function(){var e=this._interventions.map((function(e){return e.id}));return e=(e=(e=(e=(e=(e=e.concat(this._interventionPrompts.map((function(e){return e.id})))).concat(this._interventionPromptAnswers.map((function(e){return e.id})))).concat(this._interventionMenuCategories.map((function(e){return e.id})))).concat(this._interventionMenuItems.map((function(e){return e.id})))).concat(this._medications.map((function(e){return e.id})))).concat(this._checklist.map((function(e){return e.id})))}},{key:"genUniqueLabels",value:function(){var e=this._interventions.map((function(e){return e.label}));return e=e.concat(this._checklist.map((function(e){return e.label})))}},{key:"genCheckListMetaData",value:function(){var e=fe(this._checklist).map((function(e){return delete e.promptID,delete e.relation,delete e.verboseLabel,void 0===e.phase&&(e.phase=null),void 0===e.subPhase&&(e.subPhase=null),e})),t=e.filter((function(e){return e.type===YE.PHASE})),n=e.filter((function(e){return e.type===YE.SUB_PHASE})),r=e.filter((function(e){return e.type===YE.DECISION_OPTION})),i=e.filter((function(e){return!t.includes(e)&&!n.includes(e)&&!r.includes(e)})),a=rT(n,"phase");t.forEach((function(e){e.id in a&&(e.subPhases=a[e.id].map((function(e){return e.id})))}));var o=rT(r,"parentID");i.forEach((function(e){e.type===YE.DECISION&&(e.options=o[e.id].map((function(e){return e.id})))}));var s={};i.forEach((function(e){var t=e.subPhase?e.subPhase:e.phase;t===e.parentID?s[e.id]=1:s[e.id]=s[e.parentID]+1,e.type===YE.NESTED_CHECKLIST&&(e.type=YE.CL_HEADING),e.parentID=t,e.depth=s[e.id]}));var u=rT(i,"subPhase"),c=fe(u.null),l=rT(c,"phase");return t.forEach((function(e){e.id in l&&(e.items=l[e.id].map((function(e){return e.id})))})),delete u.null,n.forEach((function(e){return e.items=u[e.id].map((function(e){return e.id}))})),e}},{key:"genHierarchy",value:function(){var e=fe(this._checklist).map((function(e){return delete e.promptID,delete e.relation,delete e.verboseLabel,e})),t=e.filter((function(e){return e.type===YE.PHASE})),n=e.filter((function(e){return e.type===YE.SUB_PHASE})),r=e.filter((function(e){return e.type===YE.DECISION_OPTION})),i=e.filter((function(e){return!t.includes(e)&&!n.includes(e)}));i.forEach((function(e){void 0===e.subPhase&&(e.subPhase=null)}));var a=rT(n,"phase");t.forEach((function(e){e.id in a&&(e.subPhases=a[e.id].map((function(e){return e.id})))}));var o=rT(r,"parentID");i.forEach((function(e){e.type===YE.DECISION&&(e.options=o[e.id].map((function(e){return e.id})))}));var s={};i.forEach((function(e){var t=e.subPhase?e.subPhase:e.phase;t===e.parentID?s[e.id]=1:s[e.id]=s[e.parentID]+1,e.type===YE.NESTED_CHECKLIST&&(e.type=YE.CL_HEADING),e.parentID=t,e.depth=s[e.id]}));var u=rT(i,"subPhase"),c=fe(u.null),l=rT(c,"phase");t.forEach((function(e){e.id in l&&(e.items=l[e.id].map((function(e){return e.id})))})),delete u.null,n.forEach((function(e){return e.items=u[e.id].map((function(e){return e.id}))}));var f=[];return t.forEach((function(e){var t=e.subPhases,a=e.items,o=eT(e,aT);void 0!==a?(o.items=a.map((function(e){var t=i.find((function(t){return t.id===e})),n=t.options,a=eT(t,oT);return void 0!==n&&(a.options=n.map((function(e){return r.find((function(t){return t.id===e}))}))),a})),f.push(o)):(o.subPhases=t.map((function(e){var t=n.find((function(t){return t.id===e})),a=t.items,o=eT(t,sT);return o.items=a.map((function(e){var t=i.find((function(t){return t.id===e})),n=t.options,a=eT(t,uT);return void 0!==n&&(a.options=n.map((function(e){return r.find((function(t){return t.id===e}))}))),a})),o})),f.push(o))})),f}},{key:"getChecklistItem",value:function(e){return this._checklist.find((function(t){return t.id===e}))}},{key:"getInterventionForm",value:function(e){return this.getIntervention(e,!0)}},{key:"getIntervention",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._interventions.find((function(t){return t.id===e}));if(!r)return{};var i=r.distPrompts,a=r.prompts,o=eT(r,cT);return n?(o.distPrompts=i.map((function(e){return t.getPrompt(e,!0)})),o.prompts=a.map((function(e){return t.getPrompt(e,!0)})),o):(o.distPrompts=i,o.prompts=a,o)}},{key:"getDecisionWithOptions",value:function(e){var t=this,n=this.getChecklistItem(e);if(!n)return{};var r=n.options,i=eT(n,lT);return i.options=r.map((function(e){return t.getChecklistItem(e)})),i}},{key:"getPrompt",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._interventionPrompts.find((function(t){return t.id===e}));if(!r)return{};var i=r.answers,a=eT(r,fT);return a.answers=n?i.map((function(e){return t.getAnswer(e)})):i,a}},{key:"getAnswer",value:function(e){return this._interventionPromptAnswers.find((function(t){return t.id===e}))}},{key:"getInterventionMenus",value:function(){var e=this;return this._interventionMenuCategories.map((function(t){var n=t.items,r=eT(t,hT);return r.items=n.map((function(t){return e._interventionMenuItems.find((function(e){return e.id===t}))})),r}))}}]),e}(),pT=[{id:"intv-open-airway-method-head-tilt",system:"airway",label:"Head tilt chin lift"},{id:"intv-open-airway-method-modified-jaw-thrust",system:"airway",label:"Modified jaw thrust"},{id:"intv-airway-patency-technique-suction-airway",system:"airway",label:"Suction airway",prompts:["prompt-airway-patency-suction-device"]},{id:"intv-manual-finger-sweep",system:"airway",label:"Manual (finger sweep)"},{id:"intv-magill-forceps-assisted",system:"airway",label:"Magill forceps assisted"},{id:"intv-slat",system:"airway",label:"SLAT"},{id:"intv-heimlich-maneuver",system:"airway",label:"Heimlich maneuver"},{id:"intv-back-blows-and-chest-thrusts",system:"airway",label:"Back blows and chest thrusts"},{id:"intv-oropharyngeal-airway",system:"airway",label:"Oropharyngeal airway (OPA)"},{id:"intv-nasopharyngeal-airway",system:"airway",label:"Nasopharyngeal airway (NPA)"},{id:"intv-advanced-airway-adjunct",system:"airway",label:"Insert advanced airway adjunct",prompts:["prompt-advanced-airway-adjunct-type","prompt-advanced-airway-tube-size"]},{id:"intv-orotracheal-intubation",system:"airway",label:"Orotracheal intubation",prompts:["prompt-orotracheal-intubation-tube-insertion-depth"]},{id:"intv-nasotracheal-intubation",system:"airway",label:"Nasotracheal intubation",prompts:["prompt-nasotracheal-intubation-tube-size"]},{id:"intv-rapid-sequence-intubation",system:"airway",label:"Rapid sequence intubation (RSI)"},{id:"intv-sedation-assisted-intubation",system:"airway",label:"Sedation-assisted intubation",prompts:[]},{id:"intv-needle-cricothyrotomy",system:"airway",label:"Needle cricothyrotomy"},{id:"intv-surgical-cricothyrotomy",system:"airway",label:"Surgical cricothyrotomy"},{id:"intv-supplemental-oxygen-device-nasal-cannula",system:"breathing",label:"Nasal cannula",prompts:["prompt-nasal-cannula-o2-flow-rate","prompt-nasal-cannula-target-saturation"]},{id:"intv-supplemental-oxygen-device-non-rebreather-mask",system:"breathing",label:"Non-rebreather mask",prompts:["prompt-non-rebreather-mask-flow-rate","prompt-non-rebreather-mask-target-saturation"]},{id:"intv-ventilation-technique-bag-valve-mask",system:"breathing",label:"Bag-valve mask",prompts:["prompt-bvm-ventilation-rate","prompt-bvm-flow-rate","prompt-bvm-target-saturation"]},{id:"intv-control-severe-bleeding-technique-direct-pressure",system:"bleeding",label:"Apply direct pressure",distPrompts:["prompt-wound-location"]},{id:"intv-control-severe-bleeding-technique-tourniquet",system:"bleeding",label:"Apply tourniquet",distPrompts:["prompt-wound-location"],prompts:["prompt-tourniquet-placement"]},{id:"intv-control-severe-bleeding-technique-2nd-tourniquet",system:"bleeding",label:"Apply second tourniquet",distPrompts:["prompt-wound-location"],prompts:["prompt-2nd-tourniquet-placement"]},{id:"intv-control-severe-bleeding-technique-pack-wound-with-gauze",system:"bleeding",label:"Pack wound with gauze or hemostatic gauze",distPrompts:["prompt-wound-location"]},{id:"intv-control-severe-bleeding-technique-pressure-bandage",system:"bleeding",label:"Pressure dressing",distPrompts:["prompt-wound-location"]},{id:"intv-control-severe-bleeding-technique-load-and-go",system:"bleeding",label:"Load and go (if uncontrolled)"},{id:"intv-control-shock-technique-keep-patient-warm",system:"shock",label:"Keep patient warm (e.g., apply blankets)"},{id:"intv-control-shock-technique-administer-high-concentration-o2",system:"shock",label:"Administer high concentration of oxygen"},{id:"intv-control-shock-technique-place-patient-supine-position",system:"shock",label:"Place or maintain patient in supine position"},{id:"intv-control-shock-technique-administer-iv-boluses",system:"shock",label:"IV fluid resuscitation",prompts:[]},{id:"intv-occlusive-dressing",system:"breathing",label:"Occlusive dressing",prompts:["prompt-occlusive-dressing-injury-type","prompt-occlusive-dressing-method"]},{id:"intv-pleural-decompression",system:"breathing",label:"Needle decompression",prompts:["prompt-pleural-decompression-injury-type","prompt-pleural-decompression-needle-placement-side-of-the-body","prompt-pleural-decompression-needle-placement-anatomical-landmark","prompt-pleural-decompression-needle-size","prompt-pleural-decompression-needle-length"]},{id:"intv-spinal-immobilization-technique-manual-c-spine",label:"Manual c-spine stabilization"},{id:"intv-spinal-immobilization-technique-cervical-collar",label:"Cervical collar"},{id:"intv-spinal-immobilization-technique-transfer-to-device",label:"Transfer patient to immobilization device",prompts:[]},{id:"intv-spinal-immobilization-technique-attach-cid",label:"Attach cervical immobilization device (CID)"},{id:"intv-transfers-patient-method-walk-patient",label:"Walk patient to ambulance"},{id:"intv-transfers-patient-method-place-directly-on-stretcher",label:"Place directly on stretcher"},{id:"intv-place-immobilized-patient-on-stretcher",label:"Place immobilized patient on stretcher"},{id:"intv-transport",label:"Transport",prompts:["prompt-transport-facility-choice","prompt-transport-method","prompt-transport-lights-siren-decision"]},{id:"intv-apply-sterile-dressings",label:"Apply sterile dressings",distPrompts:["prompt-wound-locations"]},{id:"intv-splint-fractures",system:"bleeding",label:"Splint fractures"},{id:"intv-sterile-dressing-soft-tissue",label:"Apply sterile dressing over soft tissue",distPrompts:["prompt-wound-location"]},{id:"intv-retrieve-amputated-body-part",label:"Retrieve avulsed/amputated part",distPrompts:["prompt-wound-location"]},{id:"intv-wrap-body-part-in-saline-soaked-gauze",label:"Wrap part in gauze soaked in saline",distPrompts:["prompt-wound-location"]},{id:"intv-place-body-part-in-bag",label:"Place part in bag",distPrompts:["prompt-wound-location"]},{id:"intv-keep-body-part-cool",label:"Keep cool but do not pack directly on ice",distPrompts:["prompt-wound-location"]},{id:"intv-transport-body-part-to-receiving-facility",label:"Transport part to receiving facility",distPrompts:["prompt-wound-location"]},{id:"intv-prepare-and-administer-pain-nausea-vomiting-medications",label:"Prepare and administer medications"},{id:"intv-prepare-and-administer-sedative",label:"Prepare and administer medications"}],vT=[{id:"prompt-wound-location",type:YE.DIST_PROMPT,selectionType:JE.ONE,label:"Where is the wound located?",abbrLabel:"Wound location?",answers:["answer-wound-location-head","answer-wound-location-neck","answer-wound-location-chest","answer-wound-location-abdomen-pelvis","answer-wound-location-posterior","answer-wound-location-genitalia","answer-wound-location-left-lower-extremity","answer-wound-location-right-lower-extremity","answer-wound-location-left-upper-extremity","answer-wound-location-right-upper-extremity","answer-wound-location-other"]},{id:"prompt-wound-locations",type:YE.DIST_PROMPT,selectionType:JE.OOM,label:"Where are the wound(s) located?",abbrLabel:"Wound location(s)?",answers:["answer-wound-locations-head","answer-wound-locations-neck","answer-wound-locations-chest","answer-wound-locations-abdomen-pelvis","answer-wound-locations-posterior","answer-wound-locations-genitalia","answer-wound-locations-left-lower-extremity","answer-wound-locations-right-lower-extremity","answer-wound-locations-left-upper-extremity","answer-wound-locations-right-upper-extremity","answer-wound-locations-other"]},{id:"prompt-airway-patency-suction-device",interventionID:"intv-airway-patency-technique-suction-airway",type:YE.PROMPT,selectionType:JE.ONE,label:"What kind of suction catheter will you use?",abbrLabel:"Suction catheter type?",answers:["answer-airway-patency-suction-yankauer","answer-airway-patency-suction-long-multiuse","answer-airway-patency-suction-other"]},{id:"prompt-advanced-airway-adjunct-type",interventionID:"intv-advanced-airway-adjunct",type:YE.PROMPT,selectionType:JE.ONE,label:"What type of advanced airway adjunct would you use?",abbrLabel:"Which advanced airway?",answers:["answer-alternative-rescue-airway-type-ett","answer-alternative-rescue-airway-type-combitube","answer-alternative-rescue-airway-type-lta","answer-alternative-rescue-airway-type-lma","answer-alternative-rescue-airway-type-igel","answer-alternative-rescue-airway-type-other"]},{id:"prompt-advanced-airway-tube-size",interventionID:"intv-advanced-airway-adjunct",type:YE.PROMPT,selectionType:"one",label:"What tube size for advanced airway?",abbrLabel:"What size?",answers:["answer-alternative-airway-tube-size-7","answer-alternative-airway-tube-size-8","answer-alternative-airway-tube-size-age-div-4-plus-4","answer-alternative-airway-tube-size--age-div-4-plus-4-minus-5","answer-alternative-airway-tube-size-37f","answer-alternative-airway-tube-size-41f","answer-alternative-airway-tube-size-0","answer-alternative-airway-tube-size-1","answer-alternative-airway-tube-size-1-5","answer-alternative-airway-tube-size-2","answer-alternative-airway-tube-size-2-5","answer-alternative-airway-tube-size-3","answer-alternative-airway-tube-size-4","answer-alternative-airway-tube-size-5","answer-alternative-airway-tube-size-6","answer-alternative-airway-tube-size-other"]},{id:"prompt-orotracheal-intubation-tube-insertion-depth",interventionID:"intv-orotracheal-intubation",type:YE.PROMPT,selectionType:JE.ONE,label:"At what depth would you insert the tube?",abbrLabel:"Tube insertion depth?",answers:["answer-orotracheal-intubation-tube-insertion-depth-21cm","answer-orotracheal-intubation-tube-insertion-depth-23cm","answer-orotracheal-intubation-tube-insertion-depth-3-times-tube-size","answer-orotracheal-intubation-tube-insertion-depth-other"]},{id:"prompt-nasotracheal-intubation-tube-size",interventionID:"intv-nasotracheal-intubation",type:YE.PROMPT,selectionType:JE.ONE,label:"What tube size would you use?",abbrLabel:"Tube size?",answers:["answer-nasotracheal-intubation-tube-size-6-to-6-5","answer-nasotracheal-intubation-tube-size-7-to-7-5","answer-nasotracheal-intubation-tube-size-age-div-4+4-minus1","answer-nasotracheal-intubation-tube-size-age-div-4+4-minus0-5","answer-nasotracheal-intubation-tube-size-0-5-1cm-less-than-oro-size","answer-nasotracheal-intubation-tube-size-other"]},{id:"prompt-nasal-cannula-flow-rate",interventionID:"intv-supplemental-oxygen-device-nasal-cannula",type:YE.PROMPT,selectionType:JE.ONE,label:"What oxygen flow rate would you administer?",abbrLabel:"Oxygen flow rate?",answers:["answer-nasal-cannula-flow-rate-1-6-lpm","answer-nasal-cannula-flow-rate-other"]},{id:"prompt-nasal-cannula-target-saturation",interventionID:"intv-supplemental-oxygen-device-nasal-cannula",type:YE.PROMPT,selectionType:JE.ONE,label:"What is your target oxygen saturation range?",abbrLabel:"Target O2 saturation?",answers:["answer-nasal-cannula-target-saturation-gt-90-pct","answer-nasal-cannula-target-saturation-other"]},{id:"prompt-non-rebreather-mask-flow-rate",interventionID:"intv-supplemental-oxygen-device-non-rebreather-mask",type:YE.PROMPT,selectionType:JE.ONE,label:"What oxygen flow rate would you administer?",abbrLabel:"Oxygen flow rate?",answers:["answer-non-rebreather-mask-flow-rate-10-15-liters-min","answer-non-rebreather-mask-flow-rate-other"]},{id:"prompt-non-rebreather-mask-target-saturation",interventionID:"intv-supplemental-oxygen-device-non-rebreather-mask",type:YE.PROMPT,selectionType:JE.ONE,label:"What is your target oxygen saturation range?",abbrLabel:"Target O2 saturation?",answers:["answer-non-rebreather-mask-target-saturation-gt-90-pct","answer-non-rebreather-mask-target-saturation-other"]},{id:"prompt-bvm-ventilation-rate",interventionID:"intv-ventilation-technique-bag-valve-mask",type:YE.PROMPT,selectionType:JE.ONE,label:"At what rate will you ventilate the patient?",abbrLabel:"",answers:["answer-bvm-ventilation-rate-10-12-bpm","answer-bvm-ventilation-rate-other"]},{id:"prompt-bvm-flow-rate",interventionID:"intv-ventilation-technique-bag-valve-mask",type:YE.PROMPT,selectionType:JE.ONE,label:"What flow rate would you administer?",abbrLabel:"Flow rate?",answers:["answer-bvm-flow-rate-15-ltm-or-gt","answer-bvm-flow-rate-other"]},{id:"prompt-bvm-target-saturation",interventionID:"intv-ventilation-technique-bag-valve-mask",type:YE.PROMPT,selectionType:JE.ONE,label:"What is your target oxygen saturation range?",abbrLabel:"Target O2 saturation?",answers:["answer-bvm-target-saturation-rate-gt-90-pct","answer-bvm-target-saturation-rate-other"]},{id:"prompt-tourniquet-placement",interventionID:"intv-control-severe-bleeding-technique-tourniquet",type:YE.PROMPT,selectionType:JE.ONE,label:"Where would you place the tourniquet?",abbrLabel:"Tourniquet location?",answers:["answer-tourniquet-placement-close-to-core-far-from-wound","answer-tourniquet-placement-other"]},{id:"prompt-2nd-tourniquet-placement",interventionID:"intv-control-severe-bleeding-technique-2nd-tourniquet",type:YE.PROMPT,selectionType:JE.ONE,label:"Where would you place the second tourniquet?",abbrLabel:"Tourniquet location?",answers:["answer-2nd-tourniquet-placement-adjacent-to-initial-tourniquet","answer-2nd-tourniquet-placement-other"]},{id:"prompt-occlusive-dressing-injury-type",interventionID:"intv-occlusive-dressing",type:YE.PROMPT,selectionType:JE.ONE,label:"What type of injury are you trying to manage?",abbrLabel:"For what type of injury?",answers:["answer-occulsivive-dressing-injury-type-open-pneumothorax","answer-occulsivive-dressing-injury-type-other"]},{id:"prompt-occlusive-dressing-method",interventionID:"intv-occlusive-dressing",type:YE.PROMPT,selectionType:JE.ONE,label:"How would you create a release valve on an occlusive dressing?",abbrLabel:"How would you create a release valve?",answers:["answer-occulsive-dressing-method-leave-one-side-untaped","answer-occulsive-dressing-method-leave-dressing-with-one-way-valve","answer-occulsive-dressing-method-other"]},{id:"prompt-pleural-decompression-injury-type",interventionID:"intv-pleural-decompression",type:YE.PROMPT,selectionType:JE.ONE,label:"What type of injury are you trying to manage?",abbrLabel:"For what type of injury?",answers:["answer-pleural-decompression-injury-type-tension-pneumothorax","answer-pleural-decompression-injury-type-open-pneumothorax","answer-pleural-decompression-injury-type-other"]},{id:"prompt-pleural-decompression-needle-placement-side-of-the-body",interventionID:"intv-pleural-decompression",type:YE.PROMPT,selectionType:JE.ONE,label:"On which side of the body would you place the needle?",abbrLabel:"Which side would you place the needle?",answers:["answer-pleural-decompression-needle-placement-side-of-the-body-right","answer-pleural-decompression-needle-placement-side-of-the-body-left"]},{id:"prompt-pleural-decompression-needle-placement-anatomical-landmark",interventionID:"intv-pleural-decompression",type:YE.PROMPT,selectionType:JE.ONE,label:"At what anatomical landmark?",abbrLabel:"At what anatomical landmark?",answers:["answer-pleural-decompression-needle-placement-anatomical-landmark-2nd-or-3rd-intercostal-space-mid-clavicular","answer-pleural-decompression-needle-placement-anatomical-landmark-4th-or-5th-intercostal-space-mid-axillary","answer-pleural-decompression-needle-placement-anatomical-landmark-other"]},{id:"prompt-pleural-decompression-needle-size",interventionID:"intv-pleural-decompression",type:YE.PROMPT,selectionType:JE.ONE,label:"What size needle do you want to use?",abbrLabel:"Needle size?",answers:["answer-pleural-decompression-needle-size-large-bore","answer-pleural-decompression-needle-size-other"]},{id:"prompt-pleural-decompression-needle-length",interventionID:"intv-pleural-decompression",type:YE.PROMPT,selectionType:JE.ONE,label:"How long a needle would you use?",abbrLabel:"Needle length?",answers:["answer-pleural-decompression-needle-length-2-inches-or-longer","answer-pleural-decompression-needle-length-other"]},{id:"prompt-transport-facility-choice",interventionID:"intv-transport",type:YE.PROMPT,selectionType:JE.ONE,label:"What type of care facility will you transport the patient to?",abbrLabel:"Type of receiving facility",answers:["answer-transport-facility-choice-level-1-or-2-trauma-center","answer-transport-facility-choice-level-3-or-4-trauma-center","answer-transport-facility-choice-closest","answer-transport-facility-choice-other"]},{id:"prompt-transport-method",interventionID:"intv-transport",type:YE.PROMPT,selectionType:JE.ONE,label:"Would you transport this patient by air or ground ambulance?",abbrLabel:"Air or ground ambulance?",answers:["answer-transport-method-ambulance","answer-transport-method-helicopter"]},{id:"prompt-transport-lights-siren-decision",interventionID:"intv-transport",type:YE.PROMPT,selectionType:JE.ONE,label:"Would you use lights and sirens with this patient?",abbrLabel:"Lights and sirens?",answers:["answer-transport-lights-sirens-yes","answer-transport-lights-sirens-no"]},{id:"prompt-splint-type",interventionID:"intv-splint-fractures",type:YE.PROMPT,selectionType:JE.ONE,label:"What type of splint would you use?",abbrLabel:"Type of splint?",answers:["answer-splint-type-board","answer-splint-type-moldable","answer-splint-type-traction","answer-splint-type-pelvic-binder","answer-splint-type-other"]}],mT=[{id:"answer-wound-location-head",label:"Wound located at head",abbrLabel:"Head",promptID:"prompt-wound-location"},{id:"answer-wound-location-neck",label:"Wound located at neck",abbrLabel:"Neck",promptID:"prompt-wound-location"},{id:"answer-wound-location-chest",label:"Wound located at chest",abbrLabel:"Chest",promptID:"prompt-wound-location"},{id:"answer-wound-location-abdomen-pelvis",label:"Wound located at abdomen/pelvis",abbrLabel:"Abdomen/Pelvis",promptID:"prompt-wound-location"},{id:"answer-wound-location-posterior",label:"Wound located at posterior thorax, lumbar, or buttocks",abbrLabel:"Posterior",promptID:"prompt-wound-location"},{id:"answer-wound-location-genitalia",label:"Wound located at genitalia",abbrLabel:"Genitalia",promptID:"prompt-wound-location"},{id:"answer-wound-location-left-lower-extremity",label:"Wound located at left lower extremity",abbrLabel:"Left lower extremity",promptID:"prompt-wound-location"},{id:"answer-wound-location-right-lower-extremity",label:"Wound located at right lower extremity",abbrLabel:"Right lower extremity",promptID:"prompt-wound-location"},{id:"answer-wound-location-left-upper-extremity",label:"Wound located at left upper extremity",abbrLabel:"Left upper extremity",promptID:"prompt-wound-location"},{id:"answer-wound-location-right-upper-extremity",label:"Wound located at right upper extremity",abbrLabel:"Right upper-extremity",promptID:"prompt-wound-location"},{id:"answer-wound-location-other",label:"Other wound location",abbrLabel:"Other",promptID:"prompt-wound-location"},{id:"answer-wound-locations-head",label:"Wound located at head",abbrLabel:"Head",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-neck",label:"Wound located at neck",abbrLabel:"Neck",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-chest",label:"Wound located at chest",abbrLabel:"Chest",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-abdomen-pelvis",label:"Wound located at abdomen/pelvis",abbrLabel:"Abdomen/Pelvis",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-posterior",label:"Wound located at posterior thorax, lumbar, or buttocks",abbrLabel:"Posterior",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-genitalia",label:"Wound located at genitalia",abbrLabel:"Genitalia",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-left-lower-extremity",label:"Wound located at left lower extremity",abbrLabel:"Left lower extremity",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-right-lower-extremity",label:"Wound located at right lower extremity",abbrLabel:"Right lower extremity",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-left-upper-extremity",label:"Wound located at left upper extremity",abbrLabel:"Left upper extremity",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-right-upper-extremity",label:"Wound located at right upper extremity",abbrLabel:"Right upper-extremity",promptID:"prompt-wound-locations"},{id:"answer-wound-locations-other",label:"Other wound location",abbrLabel:"Other",promptID:"prompt-wound-locations"},{id:"answer-airway-patency-suction-yankauer",label:"Yankauer",promptID:"prompt-airway-patency-suction-device"},{id:"answer-airway-patency-suction-long-multiuse",label:"Long, multiuse",promptID:"prompt-airway-patency-suction-device"},{id:"answer-airway-patency-suction-other",label:"Other",promptID:"prompt-airway-patency-suction-device"},{id:"answer-alternative-rescue-airway-type-ett",label:"Endotracheal tube (ETT)",promptID:"prompt-advanced-airway-adjunct-type"},{id:"answer-alternative-rescue-airway-type-combitube",label:"Combitube",promptID:"prompt-advanced-airway-adjunct-type"},{id:"answer-alternative-rescue-airway-type-lta",label:"Laryngeal tube airway (LTA; King tube)",promptID:"prompt-advanced-airway-adjunct-type"},{id:"answer-alternative-rescue-airway-type-lma",label:"Laryngeal mask airway (LMA)",promptID:"prompt-advanced-airway-adjunct-type"},{id:"answer-alternative-rescue-airway-type-igel",label:"Igel",promptID:"prompt-advanced-airway-adjunct-type"},{id:"answer-alternative-rescue-airway-type-other",label:"Other",promptID:"prompt-advanced-airway-adjunct-type"},{id:"answer-alternative-airway-tube-size-7",promptID:"prompt-advanced-airway-tube-size",label:"7.0"},{id:"answer-alternative-airway-tube-size-8",promptID:"prompt-advanced-airway-tube-size",label:"8.0"},{id:"answer-alternative-airway-tube-size-age-div-4-plus-4",promptID:"prompt-advanced-airway-tube-size",label:"((age/4 + 4))"},{id:"answer-alternative-airway-tube-size--age-div-4-plus-4-minus-5",promptID:"prompt-advanced-airway-tube-size",label:"((age/4 + 4) - 5"},{id:"answer-alternative-airway-tube-size-37f",promptID:"prompt-advanced-airway-tube-size",label:"37F"},{id:"answer-alternative-airway-tube-size-41f",promptID:"prompt-advanced-airway-tube-size",label:"41F"},{id:"answer-alternative-airway-tube-size-0",promptID:"prompt-advanced-airway-tube-size",label:"0"},{id:"answer-alternative-airway-tube-size-1",promptID:"prompt-advanced-airway-tube-size",label:"1"},{id:"answer-alternative-airway-tube-size-1-5",promptID:"prompt-advanced-airway-tube-size",label:"1.5"},{id:"answer-alternative-airway-tube-size-2",promptID:"prompt-advanced-airway-tube-size",label:"2"},{id:"answer-alternative-airway-tube-size-2-5",promptID:"prompt-advanced-airway-tube-size",label:"2.5"},{id:"answer-alternative-airway-tube-size-3",promptID:"prompt-advanced-airway-tube-size",label:"3"},{id:"answer-alternative-airway-tube-size-4",promptID:"prompt-advanced-airway-tube-size",label:"4"},{id:"answer-alternative-airway-tube-size-5",promptID:"prompt-advanced-airway-tube-size",label:"5"},{id:"answer-alternative-airway-tube-size-6",promptID:"prompt-advanced-airway-tube-size",label:"6"},{id:"answer-alternative-airway-tube-size-other",promptID:"prompt-advanced-airway-tube-size",label:"Other"},{id:"answer-orotracheal-intubation-tube-insertion-depth-21cm",promptID:"prompt-orotracheal-intubation-tube-insertion-depth",label:"21cm"},{id:"answer-orotracheal-intubation-tube-insertion-depth-23cm",promptID:"prompt-orotracheal-intubation-tube-insertion-depth",label:"23cm"},{id:"answer-orotracheal-intubation-tube-insertion-depth-3-times-tube-size",promptID:"prompt-orotracheal-intubation-tube-insertion-depth",label:"3 x tube size"},{id:"answer-orotracheal-intubation-tube-insertion-depth-other",promptID:"prompt-orotracheal-intubation-tube-insertion-depth",label:"Other"},{id:"answer-nasotracheal-intubation-tube-size-6-to-6-5",promptID:"prompt-nasotracheal-intubation-tube-size",label:"6.0 - 6.5"},{id:"answer-nasotracheal-intubation-tube-size-7-to-7-5",promptID:"prompt-nasotracheal-intubation-tube-size",label:"7.0 - 7.5"},{id:"answer-nasotracheal-intubation-tube-size-age-div-4+4-minus1",promptID:"prompt-nasotracheal-intubation-tube-size",label:"(age/4 - 4)-1"},{id:"answer-nasotracheal-intubation-tube-size-age-div-4+4-minus0-5",promptID:"prompt-nasotracheal-intubation-tube-size",label:"(age/4 -4) - 0.5"},{id:"answer-nasotracheal-intubation-tube-size-0-5-1cm-less-than-oro-size",promptID:"prompt-nasotracheal-intubation-tube-size",label:".5 - 1cm less then size for orotracheal tube size"},{id:"answer-nasotracheal-intubation-tube-size-other",promptID:"prompt-nasotracheal-intubation-tube-size",label:"Other"},{id:"answer-nasal-cannula-flow-rate-1-6-lpm",promptID:"prompt-nasal-cannula-flow-rate",label:"Nasal cannula flow rate 1-6 liters/min",abbrLabel:"1-6 liters/min"},{id:"answer-nasal-cannula-flow-rate-other",promptID:"prompt-nasal-cannula-flow-rate",label:"Nasal cannula flow rate other",abbrLabel:"Other"},{id:"answer-nasal-cannula-target-saturation-gt-90-pct",promptID:"prompt-nasal-cannula-target-saturation",label:"Nasal cannula target saturation: 90% or greater",abbrLabel:"90% or greater"},{id:"answer-nasal-cannula-target-saturation-other",promptID:"prompt-nasal-cannula-target-saturation",label:"Nasal cannula target saturation: other",abbrLabel:"Other"},{id:"answer-non-rebreather-mask-flow-rate-10-15-liters-min",promptID:"prompt-non-rebreather-mask-flow-rate",label:"Non-rebreather mask flow rate 10-15 L/min",abbrLabel:"10-15 L/min"},{id:"answer-non-rebreather-mask-flow-rate-other",promptID:"prompt-non-rebreather-mask-flow-rate",label:"Non-rebreather mask flow rate other",abbrLabel:"Other"},{id:"answer-non-rebreather-mask-target-saturation-gt-90-pct",promptID:"prompt-non-rebreather-mask-target-saturation",label:"Non-rebreather mask target O2 saturation: 90% or greater",abbrLabel:"90% or greater"},{id:"answer-non-rebreather-mask-target-saturation-other",promptID:"prompt-non-rebreather-mask-target-saturation",label:"Non-rebreather mask target O2 saturation: other",abbrLabel:"Other"},{id:"answer-bvm-ventilation-rate-10-12-bpm",promptID:"prompt-bvm-ventilation-rate",label:"BVM ventilation rate: 10-12 BPM",abbrLabel:"10-12 breaths/minute"},{id:"answer-bvm-ventilation-rate-other",promptID:"prompt-bvm-ventilation-rate",label:"BVM ventilation rate: other",abbrLabel:"Other"},{id:"answer-bvm-flow-rate-15-ltm-or-gt",promptID:"prompt-bvm-flow-rate",label:"BVM flow rate: 15 liters/min or greater",abbrLabel:"15 liters/min or greater"},{id:"answer-bvm-flow-rate-other",promptID:"prompt-bvm-flow-rate",label:"BVM flow rate: other",abbrLabel:"Other"},{id:"answer-bvm-target-saturation-rate-gt-90-pct",promptID:"prompt-bvm-target-saturation",label:"BVM target O2 saturation rate 90% or greater",abbrLabel:"90% or greater"},{id:"answer-bvm-target-saturation-rate-other",promptID:"prompt-bvm-target-saturation",label:"BVM target O2 saturation rate other",abbrLabel:"Other"},{id:"answer-tourniquet-placement-close-to-core-far-from-wound",promptID:"prompt-tourniquet-placement",label:"Tourniquet placement as far from wound and close to the core as possible",abbrLabel:"As far from wound and close to the core as possible"},{id:"answer-tourniquet-placement-other",promptID:"prompt-tourniquet-placement",label:"Tourniquet placement other",abbrLabel:"Other"},{id:"answer-2nd-tourniquet-placement-adjacent-to-initial-tourniquet",promptID:"prompt-2nd-tourniquet-placement",label:"Second tourniquet location: adjacent to initial tourniquet",abbrLabel:"Adjacent to initial tourniquet"},{id:"answer-2nd-tourniquet-placement-other",promptID:"prompt-2nd-tourniquet-placement",label:"Second tourniquet location: other",abbrLabel:"Other"},{id:"answer-occulsivive-dressing-injury-type-open-pneumothorax",promptID:"prompt-occlusive-dressing-injury-type",label:"Occlusive dressing injury type: Open pnuemothorax (sucking chest wound)",abbrLabel:"Open pnuemothorax (sucking chest wound)"},{id:"answer-occulsivive-dressing-injury-type-other",promptID:"prompt-occlusive-dressing-injury-type",label:"Occlusive dressing injury type: other",abbrLabel:"Other"},{id:"answer-occulsive-dressing-method-leave-one-side-untaped",promptID:"prompt-occlusive-dressing-method",label:"Occlusive dressing method: Leave one side untaped",abbrLabel:"Leave one side untaped"},{id:"answer-occulsive-dressing-method-leave-dressing-with-one-way-valve",promptID:"prompt-occlusive-dressing-method",label:"Occlusive dressing method: Dressing with one-way valve (e.g. Hyfin chest seal, Asherman chest seal)",abbrLabel:"Dressing with one-way valve (e.g. Hyfin chest seal, Asherman chest seal)"},{id:"answer-occulsive-dressing-method-other",promptID:"prompt-occlusive-dressing-method",label:"Occlusive dressing method: other",abbrLabel:"Other"},{id:"answer-pleural-decompression-injury-type-tension-pneumothorax",promptID:"prompt-pleural-decompression-injury-type",label:"Pleural decompression injury type: tension pneumothorax",abbrLabel:"Tension pneumothorax"},{id:"answer-pleural-decompression-injury-type-open-pneumothorax",promptID:"prompt-pleural-decompression-injury-type",label:"Pleural decompression injury type: Open pnuemothorax (sucking chest wound)",abbrLabel:"Open pnuemothorax (sucking chest wound)"},{id:"answer-pleural-decompression-injury-type-other",promptID:"prompt-pleural-decompression-injury-type",label:"Pleural decompression injury type: other",abbrLabel:"Other"},{id:"answer-pleural-decompression-needle-placement-side-of-the-body-right",promptID:"prompt-pleural-decompression-needle-placement-side-of-the-body",label:"Pleural Decompression needle placement: right side",abbrLabel:"Right"},{id:"answer-pleural-decompression-needle-placement-side-of-the-body-left",promptID:"prompt-pleural-decompression-needle-placement-side-of-the-body",label:"Pleural Decompression needle placement: left side",abbrLabel:"Left"},{id:"answer-pleural-decompression-needle-placement-anatomical-landmark-2nd-or-3rd-intercostal-space-mid-clavicular",promptID:"prompt-pleural-decompression-needle-placement-anatomical-landmark",label:"Pleural decompression anatomical landmark: Second or third intercostal space mid-clavicular line",abbrLabel:"Second or third intercostal space mid-clavicular line"},{id:"answer-pleural-decompression-needle-placement-anatomical-landmark-4th-or-5th-intercostal-space-mid-axillary",promptID:"prompt-pleural-decompression-needle-placement-anatomical-landmark",label:"Pleural decompression anatomical landmark: Fourth or fifth intercostal space mid-axillary line",abbrLabel:"Fourth or fifth intercostal space mid-axillary line"},{id:"answer-pleural-decompression-needle-placement-anatomical-landmark-other",promptID:"prompt-pleural-decompression-needle-placement-anatomical-landmark",label:"Pleural decompression anatomical landmark: other",abbrLabel:"Other"},{id:"answer-pleural-decompression-needle-size-large-bore",promptID:"prompt-pleural-decompression-needle-size",label:"Pleural decompression needle size: Large bore (14 or 16 gauge)",abbrLabel:"Large bore (14 or 16 gauge)"},{id:"answer-pleural-decompression-needle-size-other",promptID:"prompt-pleural-decompression-needle-size",label:"Pleural decompression needle size: other",abbrLabel:"Other"},{id:"answer-pleural-decompression-needle-length-2-inches-or-longer",promptID:"prompt-pleural-decompression-needle-length",label:"Pleural Decompression needle size: 2 inches or more",abbrLabel:"2 inches or more"},{id:"answer-pleural-decompression-needle-length-other",promptID:"prompt-pleural-decompression-needle-length",label:"Pleural Decompression needle size: other",abbrLabel:"Other"},{id:"answer-transport-facility-choice-level-1-or-2-trauma-center",promptID:"prompt-transport-facility-choice",label:"Receiving facility type: Closest level 1 or 2 trauma center",abbrLabel:"Closest level 1 or 2 trauma center"},{id:"answer-transport-facility-choice-level-3-or-4-trauma-center",promptID:"prompt-transport-facility-choice",label:"Receiving facility type: Closet level 3 or 4 trauma center",abbrLabel:"Closet level 3 or 4 trauma center"},{id:"answer-transport-facility-choice-closest",promptID:"prompt-transport-facility-choice",label:"Receiving facility type: Closest receiving facility",abbrLabel:"Closest receiving facility"},{id:"answer-transport-facility-choice-other",promptID:"prompt-transport-facility-choice",label:"Receiving facility type: other",abbrLabel:"Other"},{id:"answer-transport-method-ambulance",promptID:"prompt-transport-method",label:"Ambulance",abbrLabel:"Ambulance"},{id:"answer-transport-method-helicopter",promptID:"prompt-transport-method",label:"Helicopter",abbrLabel:"Helicopter"},{id:"answer-transport-lights-sirens-yes",promptID:"prompt-transport-lights-siren-decision",label:"Use lights and sirens",abbrLabel:"Yes"},{id:"answer-transport-lights-sirens-no",promptID:"prompt-transport-lights-siren-decision",label:"Do not use lights and sirens",abbrLabel:"No"},{id:"answer-splint-type-board",promptID:"prompt-splint-type",label:"Splint type: Board splint",abbrLabel:"Board splint"},{id:"answer-splint-type-moldable",promptID:"prompt-splint-type",label:"Splint type: Moldable splint",abbrLabel:"Moldable splint"},{id:"answer-splint-type-traction",promptID:"prompt-splint-type",label:"Splint type: Traction splint",abbrLabel:"Traction splint"},{id:"answer-splint-type-pelvic-binder",promptID:"prompt-splint-type",label:"Splint type: Pelvic binder",abbrLabel:"Pelvic binder"},{id:"answer-splint-type-other",promptID:"prompt-splint-type",label:"Splint type: Other",abbrLabel:"Other"}],yT=[{id:"intv-cat-manual-c-spine-stabilization",label:"Manual c-spine stabilization",items:["menu-item-spinal-immobilization-technique-manual-c-spine"]},{id:"intv-cat-airway",label:"Airway",items:["heading-bls","heading-open-airway","menu-item-open-airway-method-head-tilt","menu-item-open-airway-method-modified-jaw-thrust","heading-establish-patency","menu-item-airway-patency-technique-suction-airway","heading-remove-foreign-body-obstructions","menu-item-manual-finger-sweep","menu-item-magill-forceps-assisted","menu-item-slat","menu-item-heimlich-maneuver","menu-item-back-blows-and-chest-thrusts","heading-insert-adjunct","menu-item-oropharyngeal-airway","menu-item-nasopharyngeal-airway","heading-als","heading-intubation","menu-item-advanced-airway-adjunct","menu-item-orotracheal-intubation","menu-item-nasotracheal-intubation","heading-medication-facilitated-intubation","menu-item-rapid-sequence-intubation","menu-item-sedation-assisted-intubation","heading-crico","menu-item-needle-cricothyrotomy","menu-item-surgical-cricothyrotomy"]},{id:"intv-cat-manage-oxygenation-and-ventilation",label:"Manage oxygenation and ventilation",items:["menu-item-supplemental-oxygen-device-nasal-cannula","menu-item-supplemental-oxygen-device-non-rebreather-mask","menu-item-ventilation-technique-bag-valve-mask"]},{id:"intv-cat-circulation-management",label:"Circulation management",items:["heading-severe-external-bleeding","menu-item-control-severe-bleeding-technique-direct-pressure","menu-item-control-severe-bleeding-technique-tourniquet","menu-item-control-severe-bleeding-technique-2nd-tourniquet","menu-item-control-severe-bleeding-technique-pack-wound-with-gauze","menu-item-control-severe-bleeding-technique-pressure-bandage","menu-item-control-severe-bleeding-technique-load-and-go","heading-manage-internal-bleeding","menu-item-splint-fractures","heading-manage-shock","menu-item-control-shock-technique-keep-patient-warm","menu-item-control-shock-technique-administer-high-concentration-o2","menu-item-control-shock-technique-place-patient-supine-position","menu-item-control-shock-technique-administer-iv-boluses"]},{id:"intv-cat-manage-thoracic-trauma",label:"Manage thoracic trauma",items:["menu-item-occlusive-dressing","menu-item-pleural-decompression"]},{id:"intv-cat-spinal-motion-restriction",label:"Spinal motion restriction",items:["menu-item-spinal-immobilization-technique-manual-c-spine2","menu-item-spinal-immobilization-technique-cervical-collar","menu-item-spinal-immobilization-technique-transfer-to-device","menu-item-spinal-immobilization-technique-attach-cid"]},{id:"intv-cat-extrication-and-transport",label:"Extrication and transport",items:["heading-transfer","menu-item-transfers-patient-method-walk-patient","menu-item-transfers-patient-method-place-directly-on-stretcher","menu-item-place-immobilized-patient-on-stretcher","heading-transport","menu-item-transport"]},{id:"intv-cat-manage-wounds-and-specific-injuries",label:"Manage wounds and specific injuries",items:["menu-item-apply-sterile-dressings","menu-item-splint-fractures2","heading-amputation","menu-item-sterile-dressing-soft-tissue","menu-item-retrieve-amputated-body-part","menu-item-wrap-body-part-in-saline-soaked-gauze","menu-item-place-body-part-in-bag","menu-item-keep-body-part-cool","menu-item-transport-body-part-to-receiving-facility"]},{id:"intv-cat-manage-pain-nausea-vomiting",label:"Manage pain, nausea, vomiting",items:["menu-item-prepare-and-administer-pain-nausea-vomiting-medications"]},{id:"intv-cat-sedate-agitated-or-combatitive-patient",label:"Sedate agitated or combatitive patient",items:["menu-item-prepare-and-administer-sedative"]}],gT=[{depth:1,type:"heading",id:"heading-als",label:"ALS",intvCategoryID:"intv-cat-airway"},{depth:1,type:"heading",id:"heading-amputation",label:"Manage amputation",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:1,type:"heading",id:"heading-bls",label:"BLS",intvCategoryID:"intv-cat-airway"},{depth:2,type:"heading",id:"heading-crico",label:"Cricothyrotomy",intvCategoryID:"intv-cat-airway"},{depth:2,type:"heading",id:"heading-establish-patency",label:"Establish patency",intvCategoryID:"intv-cat-airway"},{depth:2,type:"heading",id:"heading-insert-adjunct",label:"Insert adjunct",intvCategoryID:"intv-cat-airway"},{depth:2,type:"heading",id:"heading-intubation",label:"Intubation",intvCategoryID:"intv-cat-airway"},{depth:1,type:"heading",id:"heading-manage-internal-bleeding",label:"Manage suspected internal bleeding",intvCategoryID:"intv-cat-circulation-management"},{depth:1,type:"heading",id:"heading-manage-shock",label:"Manage hemorrhagic shock",intvCategoryID:"intv-cat-circulation-management"},{depth:3,type:"heading",id:"heading-medication-facilitated-intubation",label:"Medication Facilitated Intubation",intvCategoryID:"intv-cat-airway"},{depth:2,type:"heading",id:"heading-open-airway",label:"Open airway",intvCategoryID:"intv-cat-airway"},{depth:3,type:"heading",id:"heading-remove-foreign-body-obstructions",label:"Remove foreign body obstructions",intvCategoryID:"intv-cat-airway"},{depth:1,type:"heading",id:"heading-severe-external-bleeding",label:"Manage severe external bleeding",intvCategoryID:"intv-cat-circulation-management"},{depth:1,type:"heading",id:"heading-transfer",label:"Transfer patient to EMS vehicle",intvCategoryID:"intv-cat-extrication-and-transport"},{depth:1,type:"heading",id:"heading-transport",label:"Transport to care facility",intvCategoryID:"intv-cat-extrication-and-transport"},{depth:3,type:"intervention",id:"menu-item-advanced-airway-adjunct",interventionID:"intv-advanced-airway-adjunct",intvCategoryID:"intv-cat-airway"},{depth:3,type:"intervention",id:"menu-item-airway-patency-technique-suction-airway",interventionID:"intv-airway-patency-technique-suction-airway",intvCategoryID:"intv-cat-airway"},{depth:1,type:"intervention",id:"menu-item-apply-sterile-dressings",interventionID:"intv-apply-sterile-dressings",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:4,type:"intervention",id:"menu-item-back-blows-and-chest-thrusts",interventionID:"intv-back-blows-and-chest-thrusts",intvCategoryID:"intv-cat-airway"},{depth:2,type:"intervention",id:"menu-item-control-severe-bleeding-technique-direct-pressure",interventionID:"intv-control-severe-bleeding-technique-direct-pressure",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-severe-bleeding-technique-tourniquet",interventionID:"intv-control-severe-bleeding-technique-tourniquet",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-severe-bleeding-technique-2nd-tourniquet",interventionID:"intv-control-severe-bleeding-technique-2nd-tourniquet",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-severe-bleeding-technique-pack-wound-with-gauze",interventionID:"intv-control-severe-bleeding-technique-pack-wound-with-gauze",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-severe-bleeding-technique-pressure-bandage",interventionID:"intv-control-severe-bleeding-technique-pressure-bandage",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-severe-bleeding-technique-load-and-go",interventionID:"intv-control-severe-bleeding-technique-load-and-go",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-shock-technique-keep-patient-warm",interventionID:"intv-control-shock-technique-keep-patient-warm",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-shock-technique-administer-high-concentration-o2",interventionID:"intv-control-shock-technique-administer-high-concentration-o2",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-shock-technique-place-patient-supine-position",interventionID:"intv-control-shock-technique-place-patient-supine-position",intvCategoryID:"intv-cat-circulation-management"},{depth:2,type:"intervention",id:"menu-item-control-shock-technique-administer-iv-boluses",interventionID:"intv-control-shock-technique-administer-iv-boluses",intvCategoryID:"intv-cat-circulation-management"},{depth:4,type:"intervention",id:"menu-item-heimlich-maneuver",interventionID:"intv-heimlich-maneuver",intvCategoryID:"intv-cat-airway"},{depth:2,type:"intervention",id:"menu-item-keep-body-part-cool",interventionID:"intv-keep-body-part-cool",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:4,type:"intervention",id:"menu-item-magill-forceps-assisted",interventionID:"intv-magill-forceps-assisted",intvCategoryID:"intv-cat-airway"},{depth:4,type:"intervention",id:"menu-item-manual-finger-sweep",interventionID:"intv-manual-finger-sweep",intvCategoryID:"intv-cat-airway"},{depth:3,type:"intervention",id:"menu-item-nasopharyngeal-airway",interventionID:"intv-nasopharyngeal-airway",intvCategoryID:"intv-cat-airway"},(tT={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},x(tT,"interventionID","intv-nasotracheal-intubation"),x(tT,"interventionID","intv-nasotracheal-intubation"),x(tT,"intvCategoryID","intv-cat-airway"),tT),{depth:3,type:"intervention",id:"menu-item-needle-cricothyrotomy",interventionID:"intv-needle-cricothyrotomy",intvCategoryID:"intv-cat-airway"},{depth:1,type:"intervention",id:"menu-item-occlusive-dressing",interventionID:"intv-occlusive-dressing",intvCategoryID:"intv-cat-manage-thoracic-trauma"},{depth:3,type:"intervention",id:"menu-item-open-airway-method-head-tilt",interventionID:"intv-open-airway-method-head-tilt",intvCategoryID:"intv-cat-airway"},{depth:3,type:"intervention",id:"menu-item-open-airway-method-modified-jaw-thrust",interventionID:"intv-open-airway-method-modified-jaw-thrust",intvCategoryID:"intv-cat-airway"},{depth:3,type:"intervention",id:"menu-item-oropharyngeal-airway",interventionID:"intv-oropharyngeal-airway",intvCategoryID:"intv-cat-airway"},{depth:3,type:"intervention",id:"menu-item-orotracheal-intubation",interventionID:"intv-orotracheal-intubation",intvCategoryID:"intv-cat-airway"},{depth:2,type:"intervention",id:"menu-item-place-body-part-in-bag",interventionID:"intv-place-body-part-in-bag",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:2,type:"intervention",id:"menu-item-place-immobilized-patient-on-stretcher",interventionID:"intv-place-immobilized-patient-on-stretcher",intvCategoryID:"intv-cat-extrication-and-transport"},{depth:1,type:"intervention",id:"menu-item-pleural-decompression",interventionID:"intv-pleural-decompression",intvCategoryID:"intv-cat-manage-thoracic-trauma"},{depth:1,type:"intervention",id:"menu-item-prepare-and-administer-pain-nausea-vomiting-medications",interventionID:"intv-prepare-and-administer-pain-nausea-vomiting-medications",intvCategoryID:"intv-cat-manage-pain-nausea-vomiting"},{depth:1,type:"intervention",id:"menu-item-prepare-and-administer-sedative",interventionID:"intv-prepare-and-administer-sedative",intvCategoryID:"intv-cat-sedate-agitated-or-combatitive-patient"},(nT={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},x(nT,"interventionID","intv-rapid-sequence-intubation"),x(nT,"interventionID","intv-rapid-sequence-intubation"),x(nT,"intvCategoryID","intv-cat-airway"),nT),{depth:2,type:"intervention",id:"menu-item-retrieve-amputated-body-part",interventionID:"intv-retrieve-amputated-body-part",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:4,type:"intervention",id:"menu-item-sedation-assisted-intubation",interventionID:"intv-sedation-assisted-intubation",intvCategoryID:"intv-cat-airway"},{depth:4,type:"intervention",id:"menu-item-slat",interventionID:"intv-slat",intvCategoryID:"intv-cat-airway"},{depth:1,type:"intervention",id:"menu-item-spinal-immobilization-technique-attach-cid",interventionID:"intv-spinal-immobilization-technique-attach-cid",intvCategoryID:"intv-cat-spinal-motion-restriction"},{depth:1,type:"intervention",id:"menu-item-spinal-immobilization-technique-cervical-collar",interventionID:"intv-spinal-immobilization-technique-cervical-collar",intvCategoryID:"intv-cat-spinal-motion-restriction"},{depth:1,type:"intervention",id:"menu-item-spinal-immobilization-technique-manual-c-spine",interventionID:"intv-spinal-immobilization-technique-manual-c-spine",intvCategoryID:"intv-cat-manual-c-spine-stabilization"},{depth:1,type:"intervention",id:"menu-item-spinal-immobilization-technique-manual-c-spine2",interventionID:"intv-spinal-immobilization-technique-manual-c-spine",intvCategoryID:"intv-cat-spinal-motion-restriction"},{depth:1,type:"intervention",id:"menu-item-spinal-immobilization-technique-transfer-to-device",interventionID:"intv-spinal-immobilization-technique-transfer-to-device",intvCategoryID:"intv-cat-spinal-motion-restriction"},{depth:2,type:"intervention",id:"menu-item-splint-fractures",interventionID:"intv-splint-fractures",intvCategoryID:"intv-cat-circulation-management"},{depth:1,type:"intervention",id:"menu-item-splint-fractures2",interventionID:"intv-splint-fractures",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:2,type:"intervention",id:"menu-item-sterile-dressing-soft-tissue",interventionID:"intv-sterile-dressing-soft-tissue",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:1,type:"intervention",id:"menu-item-supplemental-oxygen-device-nasal-cannula",interventionID:"intv-supplemental-oxygen-device-nasal-cannula",intvCategoryID:"intv-cat-manage-oxygenation-and-ventilation"},{depth:1,type:"intervention",id:"menu-item-supplemental-oxygen-device-non-rebreather-mask",interventionID:"intv-supplemental-oxygen-device-non-rebreather-mask",intvCategoryID:"intv-cat-manage-oxygenation-and-ventilation"},{depth:3,type:"intervention",id:"menu-item-surgical-cricothyrotomy",interventionID:"intv-surgical-cricothyrotomy",intvCategoryID:"intv-cat-airway"},{depth:2,type:"intervention",id:"menu-item-transfers-patient-method-walk-patient",interventionID:"intv-transfers-patient-method-walk-patient",intvCategoryID:"intv-cat-extrication-and-transport"},{depth:2,type:"intervention",id:"menu-item-transfers-patient-method-place-directly-on-stretcher",interventionID:"intv-transfers-patient-method-place-directly-on-stretcher",intvCategoryID:"intv-cat-extrication-and-transport"},{depth:2,type:"intervention",id:"menu-item-transport",interventionID:"intv-transport",intvCategoryID:"intv-cat-extrication-and-transport"},{depth:2,type:"intervention",id:"menu-item-transport-body-part-to-receiving-facility",interventionID:"intv-transport-body-part-to-receiving-facility",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"},{depth:1,type:"intervention",id:"menu-item-ventilation-technique-bag-valve-mask",interventionID:"intv-ventilation-technique-bag-valve-mask",intvCategoryID:"intv-cat-manage-oxygenation-and-ventilation"},{depth:2,type:"intervention",id:"menu-item-wrap-body-part-in-saline-soaked-gauze",interventionID:"intv-wrap-body-part-in-saline-soaked-gauze",intvCategoryID:"intv-cat-manage-wounds-and-specific-injuries"}],bT=function(e,t){return e.collection("scenarios").doc(t).get().then((function(e){return e.data()}))},wT=function(e){var t=[];if(e.interventions||(t.push("loading intvs from file"),e.interventions=pT.map((function(e){var t=Ee({},e);return e.abbrLabel||(t.abbrLabel=e.label),e.distPrompts||(t.distPrompts=[]),e.prompts||(t.prompts=[]),t}))),!e.interventionPrompts){var n=[],r=vT.map((function(e){var t=Ee({},e);return e.interventionID&&(pT.find((function(t){return t.id===e.interventionID}))||console.log("loadIntvPrompts(".concat(e.id,") ").concat(e.interventionID," not found"))),e.abbrLabel||(t.abbrLabel=""),e.feedback||(t.feedback=t.label),e.answers||(t.answers=[]),t}));r.forEach((function(t){t.type===YE.PROMPT&&void 0===e.interventions.find((function(e){return e.id===t.interventionID}))&&n.push("bad interventionID ".concat(t.interventionID))}));var i="loading intv prompts from file...";n.length>0?(t.push(i),n.forEach((function(e){return t.push(e)}))):(i+="no errors found",t.push(i)),e.interventionPrompts=r}if(!e.interventionPromptAnswers){var a=[],o=function(){var e=mT.map((function(e){e.abbrLabel||(e.abbrLabel="");var t=vT.find((function(t){return t.id===e.promptID}));return t||console.log("loadIntvPromptAnswers(".concat(e.id,") ").concat(e.promptID," not found")),e}));return e}();o.forEach((function(t){void 0===e.interventionPrompts.find((function(e){return e.id===t.promptID}))&&a.push("bad promptID ".concat(t.promptID))}));var s="loading intv prompt answers from file...";a.length>0?(t.push(s),a.forEach((function(e){return t.push(e)}))):(s+="no errors found",t.push(s)),e.interventionPromptAnswers=o}if(e.interventionMenuCategories||(t.push("loading intv menu categories from file"),e.interventionMenuCategories=yT),!e.interventionMenuItems){var u=[],c=gT.map((function(t){if(e.interventionMenuCategories.find((function(e){return e.id===t.intvCategoryID}))){if(t.type===YE.INTERV){var n=e.interventions.find((function(e){return e.id===t.interventionID}));n?t.label=n.label:u.push("bad interventionID ".concat(t.interventionID))}return t}u.push("bad intvCategoryID ".concat(t.intvCategoryID))})),l="loading intv menu items from file...";u.length>0?(t.push(l),u.forEach((function(e){return t.push(e)}))):(l+="no errors found",t.push(l)),e.interventionMenuItems=c}return t.length>0?t.forEach((function(e){return console.log(e)})):console.log("all data loaded from db. files not needed"),e},kT=function(){var e=k(b().mark((function e(t,n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IT(t,n,r);case 2:return i=e.sent,e.abrupt("return",new dT(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),xT=function(e,t){return e.collection("scenario-types").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,wT(t)})).catch((function(e){return console.log(e),e}))},IT=function(e,t,n){return e.collection("scenario-types").where("name","==",t).where("schemaVersion","==",n).limit(1).get().then((function(e){if(1===e.size)return wT(e.docs[0].data());throw new Error("document not found")}))},_T=function(){var e=k(b().mark((function e(t,n,r,i,a){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).where(i,"==",r).where("schemaVersion","==",a).get();case 2:return o=e.sent,e.abrupt("return",o.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),ET=function(){var e=k(b().mark((function e(t,n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.id?t.collection(n).doc(r.id):t.collection(n).doc(),r.id=i.id,e.next=4,i.set(r);case 4:return e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),TT=function(){var e=k(b().mark((function e(t,n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).doc(r).get();case 2:return i=e.sent,e.abrupt("return",i.data());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ST=function(){var e=k(b().mark((function e(t,n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).doc(r).delete();case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),AT=function(){var e=k(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).get();case 2:return i=e.sent,e.abrupt("return",null===(r=i.docs)||void 0===r?void 0:r.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),NT="scenario-types",CT=function(e){var n=u((0,t.useState)(null),2),r=n[0],i=n[1];(0,t.useEffect)((function(){k(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jE.collection(NT).get();case 2:t=e.sent,n=[],t.forEach((function(e){var t=e.data();n.push({id:e.id,name:t.name,schemaVersion:t.schemaVersion})})),i(n);case 6:case"end":return e.stop()}}),e)})))()}),[]);var a=function(){var e=k(b().mark((function e(t){var n,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!window.confirm("Are you sure you want to permanently this item? This cannot be undone!")){e.next=9;break}return e.next=4,ST(jE,NT,n);case 4:(a=r.slice()).splice(a.indexOf(t),1),i(a),e.next=10;break;case 9:console.log("Delete of ".concat(t.name," cancelled."));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?(0,p.jsxs)("div",{className:"db-list",children:[(0,p.jsx)("h2",{children:"Scenario Types"}),(0,p.jsx)(c.Link,{to:"/scenario-type",className:"new-bttn db-list-item",children:(0,p.jsx)("h2",{children:"New Scenario Type"})}),r.map((function(e){return(0,p.jsxs)("div",{className:"db-list-item",children:[(0,p.jsx)("h2",{children:e.name}),(0,p.jsxs)("div",{className:"list-button-wrapper",children:[(0,p.jsx)(c.Link,{to:"/scenario-type/".concat(e.id),className:"action-bttn",children:"Edit"}),(0,p.jsx)("button",{type:"button",className:"action-bttn delete-bttn",onClick:function(){return a(e)},children:"Delete"})]})]},e.id)}))]}):(0,p.jsx)("div",{children:"Loading..."})},DT="scenario-types",PT=function(){var e=u((0,t.useState)(""),2),n=e[0],r=e[1],i=u((0,t.useState)(null),2),a=i[0],o=i[1],s=(0,l.k6)(),c=function(){var e=k(b().mark((function e(t){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==n){e.next=4;break}return o("Please enter a name for this class code"),e.abrupt("return");case 4:return e.next=6,_T(jE,DT,n,"name","V2");case 6:if(e.sent){e.next=10;break}return o("Class code must be unique"),e.abrupt("return");case 10:return o(null),r=jE.collection(DT).doc(),e.next=14,r.set({id:r.id,name:n,schemaVersion:"V2",checklist:[],medications:[]});case 14:s.push("/scenario-type/".concat(r.id));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:"Create Scenario Type"}),(0,p.jsxs)("label",{children:["Title",(0,p.jsx)("input",{type:"text",value:n,onChange:function(e){r(e.target.value)}})]}),(0,p.jsx)("button",{type:"button",onClick:c,children:"Submit"}),(0,p.jsx)("div",{className:a?"":"hidden",children:a})]})},OT=t.createContext({scenarioType:void 0,uniqueIDs:void 0,uniqueLabels:void 0,intvs:{add:void 0,update:void 0,remove:void 0,getSorted:void 0},intvPrompts:{add:void 0,update:void 0,remove:void 0},intvPromptAnswers:{add:void 0,update:void 0,remove:void 0},intvMenuCategories:{add:void 0,update:void 0,remove:void 0,reorder:void 0},intvMenuItems:{add:void 0,update:void 0,remove:void 0},saveCheckList:void 0,saveMedications:void 0,saveInterventions:void 0}),RT=function(){return(0,t.useContext)(OT)},LT=t.createContext({hier:void 0,uniqueIDs:void 0,uniqueLabels:void 0,setLabelsUpdated:void 0,data:void 0,setData:void 0,saveData:void 0,getRec:void 0,updateRec:void 0,deleteRec:void 0,insertRec:void 0,genID:void 0,moveUp:void 0,moveDown:void 0,showModal:void 0,hideModal:void 0,getType:void 0}),jT=function(){return(0,t.useContext)(LT)},MT=function(e,t,n){return{id:e,type:YE.ANSWER,promptID:n,label:t,abbrLabel:""}},UT=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a={id:e,label:t,type:n,intvCategoryID:r,depth:1};return i&&(a.interventionID=i),a},FT=n(5667),VT=n.n(FT),qT={newID:"",newLabel:"",newType:""},BT=function(e){var n=e.index,r=e.phase,i=e.subPhase,a=e.parentID,o=u((0,t.useState)(qT),2),s=o[0],c=o[1],l=u((0,t.useState)(""),2),f=l[0],h=l[1],d=jT(),v=d.uniqueIDs,m=d.uniqueLabels,y=d.insertRec,g=function(e){var t=e.target,n=t.id,r=t.value;c((function(e){return Object.assign({},e,x({},n,r))}))};return(0,p.jsxs)("div",{className:"add-item",children:["Add CheckList Item:",(0,p.jsx)("b",{children:" ID: "})," ",(0,p.jsx)("input",{type:"text",id:"newID",value:s.newID,size:25,autoComplete:"off",onChange:g}),(0,p.jsx)("b",{children:" Label: "})," ",(0,p.jsx)("input",{type:"text",id:"newLabel",value:s.newLabel,size:60,autoComplete:"off",onChange:g}),(0,p.jsx)("b",{children:" Type: "}),(0,p.jsxs)("select",{id:"newType",value:s.newType,onChange:g,children:[(0,p.jsx)("option",{value:"",children:"----- Select Type ----------"}),(0,p.jsx)("option",{value:YE.ASSESS,children:"Assessment"}),(0,p.jsx)("option",{value:YE.AWO,children:"Assessment w/options"}),(0,p.jsx)("option",{value:YE.DECISION,children:"Decision"}),(0,p.jsx)("option",{value:YE.NESTED_CHECKLIST,children:"Nested Checklist"}),(0,p.jsx)("option",{value:YE.REQUIRED,children:"Required Action"}),(0,p.jsx)("option",{value:YE.CL_PROMPT,children:"Prompt"})]}),(0,p.jsx)("button",{className:"add-btn",onClick:function(e){if(e.preventDefault(),""===s.newID)h("Please enter an ID");else if(""===s.newLabel)h("Please enter a Label");else if(""===s.newType)h("Please select a type");else if(v.includes(s.newID))h("ID must be unique");else if(m.includes(s.newLabel))h("Label must be unique");else{var t=function(e,t,n,r,i,a){return{id:e,type:t,label:n,abbrLabel:"",feedback:"",phase:r,subPhase:i,parentID:a}}(s.newID,s.newType,s.newLabel,r,i,a);y(t,n),c(qT),h("")}},children:"+"}),(0,p.jsx)("div",{className:VT()({hidden:""===f}),children:f})]})},zT={newID:"",newLabel:""},WT=function(e){var n=e.index,r=e.phase,i=u((0,t.useState)(zT),2),a=i[0],o=i[1],s=u((0,t.useState)(""),2),c=s[0],l=s[1],f=jT(),h=f.uniqueIDs,d=f.uniqueLabels,v=f.insertRec,m=function(e){var t=e.target,n=t.id,r=t.value;o((function(e){return Object.assign({},e,x({},n,r))}))};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"add-item",children:["Add new Sub-Section:",(0,p.jsx)("b",{children:" ID: "})," ",(0,p.jsx)("input",{type:"text",id:"newID",value:a.newID,autoComplete:"off",onChange:m}),(0,p.jsx)("b",{children:" Label: "})," ",(0,p.jsx)("input",{type:"text",id:"newLabel",value:a.newLabel,autoComplete:"off",onChange:m}),(0,p.jsx)("button",{className:"add-btn",onClick:function(e){if(e.preventDefault(),""===a.newID)l("Please enter an ID");else if(""===a.newLabel)l("Please enter a label");else if(h.includes(a.newID))l("ID must be unique");else if(d.includes(a.newLabel))l("Label must be unique");else{var t={id:a.newID,type:YE.SUB_PHASE,label:a.newLabel,phase:r,parentID:r};v(t,n),o(zT),l("")}},children:"+"})]}),(0,p.jsx)("div",{className:""===c&&"hidden",children:c})]})},QT=function(e){var t=e.crumbs,n=void 0===t?[]:t;return(0,p.jsx)("nav",{className:"breadcrumbs",children:n.map((function(e,t,n){return(0,p.jsx)("span",{children:t===n.length-1?(0,p.jsxs)("span",{className:"breadcrumb",children:[" ",e.label," "]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.Link,{className:"breadcrumb",to:e.href,children:[" ",e.label," "]})," \xa0 > \xa0 "]})},t)}))})},KT=function(e){var t=e.rec,n=jT(),r=n.moveUp,i=n.moveDown;return(0,p.jsxs)("span",{children:[(0,p.jsx)("button",{type:"button",className:"swap-btn",disabled:!t._ctx.prevBlock,onClick:function(){r(t._ctx.prevBlock,t._ctx)},children:"\u2191"}),(0,p.jsx)("button",{type:"button",className:"swap-btn",disabled:!t._ctx.nextBlock,onClick:function(){i(t._ctx,t._ctx.nextBlock)},children:"\u2193"})]})},GT=function(e){var t=e.rec,n=jT().deleteRec;return(0,p.jsx)("button",{type:"button",className:"delete-btn",onClick:function(e){e.preventDefault(),window.confirm("Are you sure you wish to delete ".concat(t.label," (and all of it's children?"))&&n(t)},children:"X"})},HT=function(e){var t=e.rec,n=e.fld,r=e.label,i=void 0===r?null:r,a=e.size,o=void 0===a?20:a;return i?(0,p.jsxs)("label",{children:[" ",i,":",(0,p.jsx)("input",{type:"text",value:t[n],size:o,readOnly:!0,disabled:!0})]}):(0,p.jsx)("input",{type:"text",value:t[n],size:o,readOnly:!0,disabled:!0})},YT=function(e){var n=e.rec,r=e.fld,i=e.label,a=void 0===i?null:i,o=e.unique,s=void 0!==o&&o,c=e.size,l=void 0===c?20:c,f=jT(),h=f.uniqueLabels,d=f.setLabelsUpdated,v=f.updateRec,m=f.genID,y=u((0,t.useState)(null),2),g=y[0],b=y[1],w=function(e){b(null)},k=function(e){var t=e.target,i=t.id,a=t.name,o=t.defaultValue,u=t.value;if(o!==u)if(console.log("id: ".concat(i," name: ").concat(a," defaultValue ").concat(o," value: ").concat(u)),console.log(h),console.log("includes ".concat(u,"? ").concat(h.includes(u))),s&&"label"===r&&h.includes(u))b("label is not unique");else{b(null);var c=Object.assign({},n,x({},r,u));console.log(c),v(c),d(!0)}};return(0,p.jsxs)(p.Fragment,{children:[!!a&&(0,p.jsxs)("label",{children:[" ",a,": "]}),function(e){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"text",id:m(e,r),name:r,size:l,className:VT()({"has-error":!!g}),defaultValue:e[r],onChange:w,onBlur:k}),!!g&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{})," ",(0,p.jsx)("span",{className:"error-message",children:g})]})]})}(n)]})},JT=function(e){var n=e.ctx,r=e.hasAbbrLabel,i=void 0===r||r,a=e.hasFeedback,o=void 0===a||a,s=(e.hasPromptID,e.asTable),c=void 0!==s&&s,l=u((0,t.useState)(null),2),f=l[0],h=l[1],d=jT().getRec;return(0,t.useEffect)((function(){n&&h(d(n))}),[n,d]),!f&&c?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"7",children:"loading..."})}):f?c?(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)(KT,{rec:f})}),(0,p.jsx)("td",{children:f.type}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:f,fld:"id",size:"18"})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:f,fld:"label",size:"45",unique:!0})}),(0,p.jsx)("td",{children:i&&(0,p.jsx)(YT,{rec:f,fld:"abbrLabel",size:"20"})}),(0,p.jsx)("td",{children:o&&(0,p.jsx)(YT,{rec:f,fld:"feedback",size:"20"})}),(0,p.jsx)("td",{children:(0,p.jsx)(GT,{rec:f})}),(0,p.jsx)("td",{})]}):(0,p.jsxs)("div",{children:[(0,p.jsx)(KT,{rec:f}),(0,p.jsxs)("span",{children:[(0,p.jsx)("b",{children:f.type}),(0,p.jsx)(HT,{rec:f,fld:"id",label:"ID",size:"30"}),(0,p.jsx)(YT,{rec:f,fld:"label",label:"Label",size:"50",unique:!0}),i&&(0,p.jsx)(YT,{rec:f,fld:"abbrLabel",size:"30",label:"Abbr. Label"}),o&&(0,p.jsx)(YT,{rec:f,fld:"feedback",size:"30",label:"Feedback"}),(0,p.jsx)(GT,{rec:f})]})]}):(0,p.jsx)("div",{children:"Loading..."})},XT=function(e){var n=e.index,r=e.phase,i=e.subPhase,a=void 0===i?null:i,o=e.parentID,s=e.childType,c=u((0,t.useState)(""),2),l=c[0],f=c[1],h=u((0,t.useState)(""),2),d=h[0],v=h[1],m=jT(),y=m.uniqueIDs,g=m.uniqueLabels,b=m.insertRec,w=function(e){var t=e.target.name,n=e.target.value;switch(t){case"newID":f(n);break;case"newLabel":v(n);break;default:console.log("unknown field name",t)}};return(0,p.jsxs)("div",{className:"add-item",children:["Add new option:",(0,p.jsx)("b",{children:" ID: "})," ",(0,p.jsx)("input",{type:"text",name:"newID",value:l,onChange:w}),(0,p.jsx)("b",{children:" Label: "}),(0,p.jsx)("input",{type:"text",name:"newLabel",value:d,onChange:w}),(0,p.jsx)("button",{className:"add-btn",onClick:function(e){(e.preventDefault(),console.log(g),""!==l)?""!==d?y.includes(l)?console.log("id must be unique"):g.includes(d)?console.log("label must be unique"):(b({id:l,type:s,label:d,phase:r,subPhase:a,parentID:o},n),f(""),v("")):console.log("Please enter a label"):console.log("Please enter an ID")},children:"+"})]})},ZT=function(e){var n=e.ctx,r=e.childType,i=e.asTable,a=void 0!==i&&i,o=u((0,t.useState)(null),2),s=o[0],c=o[1],l=jT().getRec;return(0,t.useEffect)((function(){n&&c(l(n))}),[n,l]),!s&&a?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"7",children:"Loading..."})}):s?a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)(KT,{rec:s})}),(0,p.jsxs)("td",{children:[s.type,"  "]}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:s,fld:"id",size:"18"})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:s,fld:"label",size:"45",unique:!0})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:s,fld:"abbrLabel",size:"20"})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:s,fld:"feedback",size:"20"})}),(0,p.jsx)("td",{children:(0,p.jsx)(GT,{rec:s})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{}),(0,p.jsx)("td",{colSpan:"6",children:(0,p.jsxs)("fieldset",{className:"top-level",children:[(0,p.jsx)("legend",{children:"Options"}),n.options?(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"Type"}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{children:"Abbr. Label"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:n.options.map((function(e,t){return(0,p.jsx)(JT,{ctx:e,hasPromptID:!0,hasFeedback:!1,asTable:!0},e.id)}))})]}):(0,p.jsx)("p",{children:"There aren't currently any options"}),(0,p.jsx)(XT,{index:s._ctx.lastIndex+1,phase:s.phase,subPhase:s.subPhase,childType:r,parentID:s.id})]})})]})]}):(0,p.jsxs)("div",{className:"item-with-options",children:[(0,p.jsx)(KT,{rec:s}),(0,p.jsxs)("span",{children:[(0,p.jsx)("b",{children:s.type}),(0,p.jsx)(HT,{rec:s,fld:"id",label:"ID"}),(0,p.jsx)(YT,{rec:s,fld:"label",label:"Label",unique:!0}),(0,p.jsx)(YT,{rec:s,fld:"abbrLabel",label:"Abbr. Label"}),(0,p.jsx)(GT,{rec:s})]}),(0,p.jsxs)("fieldset",{children:[(0,p.jsx)("legend",{children:"Options"}),n.options?n.options.map((function(e,t){return(0,p.jsx)(JT,{ctx:e,hasPromptID:!0},e.id)})):(0,p.jsx)("p",{children:"There currently aren't any options"}),(0,p.jsx)(XT,{index:s._ctx.lastIndex+1,phase:s.phase,subPhase:s.subPhase,childType:r,parentID:s.id})]})]}):(0,p.jsx)("div",{children:"loading..."})},$T=function(e){var n=e.ctx,r=e.asTable,i=void 0===r||r,a=u((0,t.useState)(null),2),o=a[0],s=a[1],c=jT().getRec;return(0,t.useEffect)((function(){n&&s(c(n))}),[n,c]),i?o?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)(KT,{rec:o})}),(0,p.jsx)("td",{children:o.type}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:o,fld:"id",size:18})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:o,fld:"label",size:45,unique:!0})}),(0,p.jsx)("td",{}),(0,p.jsx)("td",{}),(0,p.jsx)("td",{children:(0,p.jsx)(GT,{rec:o})})]}),(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:7,children:(0,p.jsxs)("fieldset",{children:[(0,p.jsx)("legend",{children:"Checklist items"}),n.items?(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:1,style:{width:"5%"}}),(0,p.jsx)("col",{span:1,style:{width:"10%"}}),(0,p.jsx)("col",{span:1,style:{width:"20%"}}),(0,p.jsx)("col",{span:1,style:{width:"20%"}}),(0,p.jsx)("col",{span:1,style:{width:"20%"}}),(0,p.jsx)("col",{span:1,style:{width:"20%"}}),(0,p.jsx)("col",{span:1,style:{width:"5%"}})]}),(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"Type"}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{children:"Abbr. Label"}),(0,p.jsx)("th",{children:"Feedback"})]})}),(0,p.jsx)("tbody",{children:n.items.map((function(e,t){return(0,p.jsx)(eS,{ctx:e,index:t,asTable:!0},e.id)}))})]}):(0,p.jsx)("p",{children:"There currently aren't any checklist items."}),(0,p.jsx)("hr",{}),(0,p.jsx)(BT,{index:n.lastIndex+1,phase:o.phase,subPhase:o.subPhase,parentID:o.id})]})})})]}):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"7"})}):o?(0,p.jsxs)("div",{className:"nested-checklist",children:[(0,p.jsx)(KT,{rec:o}),(0,p.jsxs)("span",{children:[(0,p.jsx)("b",{children:o.type}),(0,p.jsx)(HT,{rec:o,fld:"id",label:"ID"}),(0,p.jsx)(YT,{rec:o,fld:"label",label:"label",unique:!0}),(0,p.jsx)(GT,{rec:o})]}),(0,p.jsxs)("fieldset",{children:[(0,p.jsx)("legend",{children:"Checklist items"}),n.items?n.items.map((function(e,t){return(0,p.jsx)(eS,{ctx:e,index:t},e.id)})):(0,p.jsx)("p",{children:"There currently aren't any checklist items"}),(0,p.jsx)(BT,{index:n.lastIndex+1,phase:o.phase,subPhase:o.subPhase,parentID:o.id})]})]}):(0,p.jsx)("div",{children:"Loading..."})},eS=function(e){var t=e.ctx,n=(e.n,e.of,e.asTable),r=void 0!==n&&n;switch(t.type){case YE.ASSESS:case YE.REQUIRED:return(0,p.jsx)(JT,{ctx:t,asTable:r});case YE.CL_PROMPT:return(0,p.jsx)(JT,{ctx:t,hasAbbrLabel:!1,asTable:r});case YE.NESTED_CHECKLIST:return(0,p.jsx)($T,{ctx:t,asTable:r});case YE.DECISION:return(0,p.jsx)(ZT,{ctx:t,childType:YE.DECISION_OPTION,asTable:r});case YE.AWO:return(0,p.jsx)(ZT,{ctx:t,childType:YE.ASSESS_OPTION,asTable:r});default:return(0,p.jsx)("pre",{children:JSON.stringify(t)})}},tS=function(){var e=jT().showModal;return(0,p.jsx)("div",{className:"save-button-wrapper",children:(0,p.jsx)("button",{className:"save-btn",type:"button",onClick:function(){return e()},children:"Save Changes"})})},nS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/checklist")},rS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/checklist/phase/").concat(e.phaseIdx)},iS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/checklist/phase/").concat(e.phaseIdx,"/subphase/").concat(e.subPhaseIdx)},aS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions/distinguishing-prompts/").concat(e.distPromptID)},oS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions/distinguishing-prompts")},sS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions/menu/").concat(e)},uS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions/menu")},cS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions/").concat(e.interventionID,"/prompt/").concat(e.promptID)},lS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions/").concat(e.interventionID)},fS=function(e){return"/scenario-type/".concat(e.scenarioTypeID,"/interventions")},hS=function(e){return{href:nS(e),label:"Sections"}},dS=function(e,t){return{href:rS(e),label:t}},pS=function(e,t){return{href:iS(e),label:t}},vS=function(e){return{href:fS(e),label:"Interventions"}},mS=function(e,t){return{href:lS(e),label:t}},yS=function(e,t){return{href:cS(e),label:t}},gS=function(e){return{href:oS(e),label:"Distinguishing Prompts"}},bS=function(e,t){return{href:aS(e),label:t}},wS=function(e){return{href:uS(e),label:"Intervention Menu Categories"}},kS=function(e,t){return{href:sS(e),label:t}},xS=function(e){return"/scenario/".concat(e.scenarioId,"/problems")},IS=function(e){return"/scenario/".concat(e.scenarioId,"/problems/").concat(e.probID)},_S=function(e){return"/scenario/".concat(e.scenarioId,"/problems/").concat(e.probID,"/solutions/").concat(e.solID)},ES=function(e){return{href:xS(e),label:"Problems"}},TS=function(e,t){return{href:IS(e),label:t}},SS=function(e,t){return{href:_S(e),label:t}},AS="/scenario-type/:scenarioTypeID/interventions",NS="/scenario-type/:scenarioTypeID/interventions/:interventionID",CS="/scenario-type/:scenarioTypeID/interventions/:interventionID/prompt/:promptID",DS="/scenario-type/:scenarioTypeID/interventions/menu",PS="/scenario-type/:scenarioTypeID/interventions/menu/:intvMenuCategoryID",OS="/scenario-type/:scenarioTypeID/interventions/distinguishing-prompts",RS="/scenario-type/:scenarioTypeID/interventions/distinguishing-prompts/:distPromptID",LS=function(e){var n=(0,l.UO)(),r=n.phaseIdx,i=(0,l.TH)(),a=jT(),o=a.hier,s=a.getRec,f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(null),2),m=v[0],y=v[1];(0,t.useEffect)((function(){void 0!==r&&o&&d(o[r])}),[r,o,s]),(0,t.useEffect)((function(){h&&y(s(h))}),[h,s]);var g=function(e,t){var n=s(e);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("td",{children:(0,p.jsx)(KT,{rec:n})}),(0,p.jsx)("td",{children:(0,p.jsx)(c.Link,{to:"".concat(i.pathname,"/subphase/").concat(t),children:"edit"})}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:n,fld:"id",size:"40"})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:n,fld:"label",size:"80",unique:!0})}),(0,p.jsx)("td",{children:(0,p.jsx)(GT,{rec:n})})]})};return m?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(QT,{crumbs:[hS(n),dS(n,m.label)]}),(0,p.jsx)(tS,{}),(0,p.jsx)("b",{children:"Section"}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"15%"}}),(0,p.jsx)("col",{span:"1",style:{width:"85%"}})]}),(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{fontWeight:"bold",paddingRight:"10px",textAlign:"right"},children:"ID"}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:m,fld:"id"})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{fontWeight:"bold",paddingRight:"10px",textAlign:"right"},children:"Label"}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:m,fld:"label",unique:!0})})]})]})]}),function(e){return e._ctx.subPhases?(0,p.jsxs)("fieldset",{className:"top-level",children:[(0,p.jsx)("legend",{children:"Sub-Sections"}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"5%"}}),(0,p.jsx)("col",{span:"1",style:{width:"5%"}}),(0,p.jsx)("col",{span:"1",style:{width:"40%"}}),(0,p.jsx)("col",{span:"1",style:{width:"45%"}}),(0,p.jsx)("col",{span:"1",style:{width:"5%"}})]}),(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:e._ctx.subPhases.map((function(e,t){return(0,p.jsx)("tr",{children:g(e,t)},e.id)}))})]}),(0,p.jsx)("hr",{}),(0,p.jsx)(WT,{index:e._ctx.lastIndex+1,phase:e._ctx.id,parentID:e._ctx.id})]}):e._ctx.items?(0,p.jsxs)("fieldset",{className:"top-level",children:[(0,p.jsx)("legend",{children:"Checklist Items"}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"5%"}}),(0,p.jsx)("col",{span:"1",style:{width:"10%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"5%"}})]}),(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"Type"}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{children:"Abbr. Label"}),(0,p.jsx)("th",{children:"Feedback"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:e._ctx.items.map((function(e,t){return(0,p.jsx)(eS,{ctx:e,asTable:!0},e.id)}))})]}),(0,p.jsx)("hr",{}),(0,p.jsx)(BT,{index:e._ctx.lastIndex+1,phase:e._ctx.id,parentID:e._ctx.id})]}):(0,p.jsxs)("fieldset",{className:"top-level",children:[(0,p.jsxs)("p",{children:["A section can have ",(0,p.jsx)("i",{children:"either"})," Checklist Items ",(0,p.jsx)("i",{children:"or"})," sub-sections, ",(0,p.jsx)("b",{children:"not both"}),". Decide which you'd like to add."]}),(0,p.jsx)("hr",{}),(0,p.jsx)(BT,{index:e._ctx.lastIndex+1,phase:e._ctx.id,parentID:e._ctx.id}),(0,p.jsx)(WT,{index:e._ctx.lastIndex+1,phase:e._ctx.id,parentID:e._ctx.id})]})}(m),(0,p.jsx)(tS,{})]}):(0,p.jsx)("div",{children:"loading..."})},jS={newID:"",newLabel:""},MS=function(){var e=(0,l.UO)(),n=RT().scenarioType,r=jT(),i=r.getRec,a=r.uniqueIDs,o=r.uniqueLabels,s=r.insertRec,f=r.hier,h=u((0,t.useState)(jS),2),d=h[0],v=h[1],m=u((0,t.useState)(""),2),y=m[0],g=m[1],b=function(e){var t=e.target,n=t.id,r=t.value;v((function(e){return Object.assign({},e,x({},n,r))}))},w=function(e,t){var r=i(e);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("td",{children:(0,p.jsx)(KT,{rec:r})}),(0,p.jsx)("td",{children:(0,p.jsx)(c.Link,{to:"/scenario-type/".concat(n.id,"/checklist/phase/").concat(t),children:"edit"})}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:r,fld:"id",size:"40"})}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:r,fld:"label",size:"80",unique:!0})}),(0,p.jsx)("td",{children:(0,p.jsx)(GT,{rec:r})})]})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(QT,{crumbs:[hS(e)]}),(0,p.jsx)(tS,{}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"5%"}}),(0,p.jsx)("col",{span:"1",style:{width:"5%"}}),(0,p.jsx)("col",{span:"1",style:{width:"40%"}}),(0,p.jsx)("col",{span:"1",style:{width:"45%"}}),(0,p.jsx)("col",{span:"1",style:{width:"5%"}})]}),(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:f.map((function(e,t){return(0,p.jsx)("tr",{children:w(e,t)},e.id)}))})]}),(0,p.jsx)("hr",{}),(0,p.jsxs)("div",{children:["Add new Section: \xa0",(0,p.jsx)("b",{children:"ID: "})," ",(0,p.jsx)("input",{type:"text",id:"newID",value:d.newID,autoComplete:"off",onChange:b}),(0,p.jsx)("b",{children:" Label: "})," ",(0,p.jsx)("input",{type:"text",id:"newLabel",value:d.newLabel,autoComplete:"off",onChange:b}),(0,p.jsx)("button",{type:"button",className:"add-btn",onClick:function(e){if(e.preventDefault(),""===d.newID)g("Please enter an ID");else if(""===d.newLabel)g("Please enter a label");else if(a.includes(d.newID))g("id is not unique");else if(o.includes(d.newLabel))g("label is not unique");else{g("");var t={id:d.newID,type:YE.PHASE,label:d.newLabel},n=f[f.length-1].lastIndex+1;s(t,n),v(jS)}},children:" + "})]}),(0,p.jsx)("div",{className:""===y&&"hidden",children:y}),(0,p.jsx)(tS,{})]})},US=function(e){var n=(0,l.UO)(),r=n.phaseIdx,i=n.subPhaseIdx,a=jT(),o=a.hier,s=a.getRec,c=u((0,t.useState)(null),2),f=c[0],h=c[1],d=u((0,t.useState)(null),2),v=d[0],m=d[1],y=u((0,t.useState)(null),2),g=y[0],b=y[1];return(0,t.useEffect)((function(){var e=o[r];h(s(e));var t=o[r].subPhases[i];m(t)}),[s,r,i,o]),(0,t.useEffect)((function(){v&&b(s(v))}),[v,s]),g?(0,p.jsxs)("div",{className:"sub-phase",children:[(0,p.jsx)(QT,{crumbs:[hS(n),dS(n,f.label),pS(n,g.label)]}),(0,p.jsx)(tS,{}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"SubSection"}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"15%"}}),(0,p.jsx)("col",{span:"1",style:{width:"85%"}})]}),(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{fontWeight:"bold",paddingRight:"10px",textAlign:"right"},children:"ID"}),(0,p.jsx)("td",{children:(0,p.jsx)(HT,{rec:g,fld:"id"})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{fontWeight:"bold",paddingRight:"10px",textAlign:"right"},children:"Label"}),(0,p.jsx)("td",{children:(0,p.jsx)(YT,{rec:g,fld:"label",unique:!0})})]})]})]}),(0,p.jsxs)("fieldset",{className:"top-level",children:[(0,p.jsx)("legend",{children:"CheckList Items"}),v.items?(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"5%"}}),(0,p.jsx)("col",{span:"1",style:{width:"10%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"5%"}})]}),(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"Type"}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{children:"Abbr Label"}),(0,p.jsx)("th",{children:"Feedback"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:v.items.map((function(e,t){return(0,p.jsx)(eS,{ctx:e,index:t,asTable:!0},e.id)}))})]}):(0,p.jsx)("div",{children:"No checklist items yet."}),(0,p.jsx)("hr",{}),(0,p.jsx)(BT,{index:g._ctx.lastIndex+1,phase:g.phase,subPhase:g._ctx.id,parentID:g._ctx.id})]})]}),(0,p.jsx)(tS,{})]}):(0,p.jsx)("div",{children:"loading..."})},FS=function(e){var t=e.title,n=e.isOpen,r=e.close,i=e.children,a=e.closeButton,o=void 0===a||a;return(0,p.jsx)("div",{className:VT()("modal",n?"":"hidden"),children:(0,p.jsxs)("div",{className:"modal-dialog",children:[(0,p.jsxs)("div",{className:"modal-header",children:[!!o&&(0,p.jsx)("button",{className:"close-button",onClick:function(){return r()},children:"\xd7"}),(0,p.jsxs)("div",{className:"modal-title",children:[t," "]})]}),(0,p.jsx)("div",{className:"modal-body",children:i})]})})};FS.defaultProps={__TYPE:"MODAL"};var VS=FS,qS=function(e){var t=e.additions,n=e.deletions,r=e.isOpen,i=RT().saveCheckList,a=jT(),o=a.data,s=a.hideModal,u=a.getType,c=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,i(o);case 3:e.sent?console.log("changes saved successfully"):console.log("an error occured while saving"),s();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t){return 0===t.length?(0,p.jsx)("div",{}):(0,p.jsxs)("div",{className:"changed-ids",children:[e," items",(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"20%"}}),(0,p.jsx)("col",{span:"1",style:{width:"40%"}}),(0,p.jsx)("col",{span:"1",style:{width:"40%"}})]}),(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Type"}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"})]})}),(0,p.jsx)("tbody",{children:t.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:u(e)}),(0,p.jsx)("td",{children:e.id}),(0,p.jsx)("td",{children:e.label})]},e.id)}))})]})]})};return(0,p.jsxs)(VS,{title:"Save Changes",isOpen:r,close:s,closeButton:!1,children:[(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"Warning:"})," your additions and deletions to the checklist are being tracked. Saving to the database will reset the tracking of additions and deletions."]}),(0,p.jsxs)("p",{children:["If you wish to make ",(0,p.jsx)("b",{children:"more changes"}),', click on the "Continue editing" button']}),(0,p.jsxs)("div",{children:["If you're ",(0,p.jsx)("b",{children:"done editing"}),":",(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:"copy the list of additions and deletions"}),(0,p.jsx)("li",{children:"paste into an email"}),(0,p.jsx)("li",{children:"send it to the appropriate people"}),(0,p.jsx)("li",{children:'click on the "I\'m done" button'})]})]}),function(e,t){return 0===e.length&&0===t.length?(0,p.jsx)("div",{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("hr",{}),(0,p.jsxs)("div",{className:"modifications",children:[l("Added",e),l("Deleted",t)]})]})}(t,n),(0,p.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),s()},children:"Continue editing"}),(0,p.jsx)("button",{type:"button",onClick:c,children:"I'm Done"})]})},BS=[YE.PHASE,YE.SUB_PHASE,YE.NESTED_CHECKLIST],zS=function(e,t){if(0===t)return null;var n=e[t-1];return{index:n.index,lastIndex:n.lastIndex}},WS=function(e,t){if(t===e.length-1)return null;var n=e[t+1];return{index:n.index,lastIndex:n.lastIndex}},QS=function e(t){return"items"in t?(t.items=t.items.map((function(t){return e(t)})),t.lastIndex=t.items[t.items.length-1].lastIndex):"options"in t?(t.options=t.options.map((function(t){return e(t)})),t.lastIndex=t.options[t.options.length-1].lastIndex):t.lastIndex=t.index,t},KS=function e(t,n,r){return"items"in t?t.items=t.items.map((function(t,n,r){return e(t,n,r)})):"options"in t&&(t.options=t.options.map((function(t,n,r){return e(t,n,r)}))),t.prevBlock=zS(r,n),t.nextBlock=WS(r,n),t},GS=function(){var e=RT().scenarioType,n=(0,l.$B)().path,r=u((0,t.useState)(e.checklist),2),i=r[0],a=r[1],o=u((0,t.useState)(null),2),s=o[0],h=o[1],d=u((0,t.useState)(null),2),v=d[0],m=d[1],y=u((0,t.useState)({}),2),g=y[0],b=y[1],w=u((0,t.useState)(!0),2),k=w[0],I=w[1],_=u((0,t.useState)(!0),2),E=_[0],T=_[1],S=u((0,t.useState)(null),2),A=S[0],N=S[1],C=u((0,t.useState)(!1),2),D=C[0],P=C[1],O=(0,t.useCallback)((function(){for(var e={},t=function t(n){if(n.index in e){var r=e[n.index];return delete e[n.index],r.items&&r.items.forEach((function(e,n){r.items[n]=t(e)})),r}return n},n=i.map((function(e,t){return Object.assign({},e,{index:t})})),r=n.filter((function(e){return"parentID"in e})),a=function(){var t=u(s[o],2),r=t[0],i=t[1],a=n.find((function(e){return e.id===r})),c={id:a.id,type:a.type,index:a.index},l=i.map((function(e){return{id:e.id,index:e.index,type:e.type}}));switch(a.type){case YE.PHASE:l[0].type===YE.SUB_PHASE?c.subPhases=l:c.items=l,e[a.index]=c;break;case YE.SUB_PHASE:case YE.NESTED_CHECKLIST:c.items=l,e[a.index]=c;break;case YE.DECISION:case YE.AWO:c.options=l,e[a.index]=c;break;default:console.log("unexpected parent type: ".concat(a.type," childtype: ").concat(i[0].type))}},o=0,s=Object.entries(function(e,t){return e.reduce((function(e,n){return Ee(Ee({},e),{},x({},n[t],(e[n[t]]||[]).concat(n)))}),{})}(r,"parentID"));o<s.length;o++)a();n.filter((function(e){return BS.includes(e.type)})).forEach((function(t){t.index in e||(e[t.index]=t)}));var c=Object.entries(e).filter((function(e,t){var n=u(e,2);n[0];return n[1].type===YE.PHASE})).map((function(e){var t=u(e,2);t[0];return t[1]}));return c.forEach((function(e,n){var r,i;null===(r=e.items)||void 0===r||r.forEach((function(n,r){e.items[r]=t(n)})),null===(i=e.subPhases)||void 0===i||i.forEach((function(n,r){e.subPhases[r]=t(n)}))})),c.forEach((function(e,t){e.items?(e.items.map((function(e){return QS(e)})),e.lastIndex=e.items[e.items.length-1].lastIndex):e.subPhases?(e.subPhases=e.subPhases.map((function(e){return e.items?(e.items=e.items.map((function(e){return QS(e)})),e.lastIndex=e.items[e.items.length-1].lastIndex):e.lastIndex=e.index,e})),e.lastIndex=e.subPhases[e.subPhases.length-1].lastIndex):e.lastIndex=e.index})),c.forEach((function(e,t,n){e.items?e.items.map((function(e,t,n){return KS(e,t,n)})):e.subPhases&&(e.subPhases=e.subPhases.map((function(e,t,n){return e.items&&(e.items=e.items.map((function(e,t,n){return KS(e,t,n)}))),e.prevBlock=zS(n,t),e.nextBlock=WS(n,t),e}))),e.prevBlock=zS(n,t),e.nextBlock=WS(n,t)})),c}),[i]);(0,t.useEffect)((function(){i&&(k&&(N(O()),h(i.map((function(e){return e.id}))),I(!1)),E&&(m(i.map((function(e){return e.label}))),T(!1)))}),[i,k,E,O]);return A?(0,p.jsx)("div",{children:(0,p.jsx)(c.HashRouter,{children:(0,p.jsx)(LT.Provider,{value:{hier:A,uniqueIDs:s,uniqueLabels:v,setLabelsUpdated:T,data:i,getRec:function(e){return Object.assign({},i[e.index],{_ctx:e})},insertRec:function(e,t){var n=fe(i);n.splice(t,0,e),g[e.id]&&"deleted"===g[e.id].status?b((function(t){var n=Object.assign({},t);return delete n[e.id],n})):b((function(t){var n=Object.assign({},e,{status:"added"});return Object.assign({},t,x({},e.id,n))})),a(n),I(!0),T(!0)},updateRec:function(e){var t=e._ctx.index;delete e._ctx,a([].concat(fe(i.slice(0,t)),[e],fe(i.slice(t+1))))},deleteRec:function(e){var t=fe(i),n=e._ctx.index,r=e._ctx.lastIndex-n+1;t.splice(n,r).forEach((function(e){if(g[e.id]&&"added"===g[e.id].status)b((function(t){var n=Object.assign({},t);return delete n[e.id],n}));else{var t=Object.assign({},e,{status:"deleted"});b((function(n){return Object.assign({},n,x({},e.id,t))}))}})),a(t),I(!0),T(!0)},setData:a,genID:function(e,t){return"row-".concat(e._ctx.index,"-").concat(t)},moveUp:function(e,t){var n=fe(i),r=t.index,o=t.lastIndex?t.lastIndex-(r-1):1,s=n.splice(r,o);n.splice.apply(n,[e.index,0].concat(fe(s))),a(n),I(!0)},moveDown:function(e,t){var n=fe(i),r=e.index,o=e.lastIndex?e.lastIndex-(r-1):1,s=t.lastIndex?t.lastIndex-(o-1):t.index-(o-1),u=n.splice(r,o);n.splice.apply(n,[s,0].concat(fe(u))),a(n),I(!0)},showModal:function(){return P(!0)},hideModal:function(){return P(!1)},getType:function(e){var t=e.type,n=t;switch(t){case"phase":n="Section";break;case"sub-phase":n="Sub-Section"}return n}},children:(0,p.jsxs)("div",{className:"checklist-editor",children:[(0,p.jsxs)(l.rs,{children:[(0,p.jsx)(f.StaffRoute,{path:"".concat(n,"/phase/:phaseIdx/subphase/:subPhaseIdx"),component:US}),(0,p.jsx)(f.StaffRoute,{path:"".concat(n,"/phase/:phaseIdx"),component:LS}),(0,p.jsx)(f.StaffRoute,{path:"/scenario-type/:scenarioTypeID/checklist",component:MS})]}),(0,p.jsx)(qS,{additions:Object.values(g).filter((function(e){return"added"===e.status})),deletions:Object.values(g).filter((function(e){return"deleted"===e.status})),isOpen:D})]})})})}):(0,p.jsx)("div",{children:"loading..."})};var HS=function(){return(0,p.jsxs)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 352.054 352.054",children:[(0,p.jsxs)("g",{children:[(0,p.jsx)("polygon",{points:"144.206,186.634 30,300.84 30,238.059 0,238.059 0,352.054 113.995,352.054 113.995,322.054 51.212,322.054  165.419,207.847 \t"}),(0,p.jsx)("polygon",{points:"238.059,0 238.059,30 300.84,30 186.633,144.208 207.846,165.42 322.054,51.213 322.054,113.995 352.054,113.995  352.054,0 \t"})]}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{})]})},YS=function(){return(0,p.jsxs)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 339.411 339.411",children:[(0,p.jsxs)("g",{children:[(0,p.jsx)("polygon",{points:"339.411,21.213 318.198,0 226.274,91.924 176.022,41.672 176.022,163.596 297.946,163.596 247.487,113.137 \t"}),(0,p.jsx)("polygon",{points:"163.595,176.022 41.672,176.022 91.924,226.275 0,318.198 21.213,339.411 113.137,247.488 163.596,297.947 \t"})]}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{}),(0,p.jsx)("g",{})]})},JS=JSON.parse('["active bleeding (internal or external)","alcohol/drug use","altered mental status","central nervous system (CNS) depression","chronic heart failure","chronic lung disease","gastrointestinal bleeding","geriatric","head injury","hemophilia","hepatic issues or failure","hypersensitivity/allergy","hypertension","hypotension","hypovolemia","infant/toddler","intoxication","intracranial mass or bleeding","pediatric","peptic ulcers","pregnancy","recent dosage","renal issues or failure","respiratory depression","SBP > 70-90 with uncontrolled bleeding","suspected bowel obstruction","suspected pneumothorax","vascular bleeding","active seizing","septic shock","stroke","acute stroke"]');function XS(e){var n=e.med,r=u((0,t.useState)(!1),2),i=r[0],a=r[1],o=function(e){e.target.checked?n.contraindications.push(e.target.name):n.contraindications.splice(n.contraindications.indexOf(e.target.name),1)};return(0,p.jsxs)("div",{className:"contraindications",children:[(0,p.jsx)("div",{className:"dropdown",onClick:function(){return a((function(e){return!e}))},children:"Contraindications \u2b9f"}),(0,p.jsx)("div",{className:"checklist ".concat(i?"":"hidden"),children:JS.map((function(e,t){return(0,p.jsx)("div",{className:"contraindication",children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",onChange:o,"data-type":"generic","data-index":t,"data-key":"contraindications",name:e,defaultChecked:n.contraindications.includes(e)}),e]})},e)}))})]})}function ZS(e){var n=e.med,r=u((0,t.useState)(!1),2),i=r[0],a=r[1],o=function(e){e.target.checked?n.indications.push(e.target.name):n.indications.splice(n.indications.indexOf(e.target.name),1)};return(0,p.jsxs)("div",{className:"indications",children:[(0,p.jsx)("div",{className:"dropdown",onClick:function(){return a((function(e){return!e}))},children:"Indications \u2b9f"}),(0,p.jsx)("div",{className:"checklist ".concat(i?"":"hidden"),children:["Analgesic","Sedated Intubation ","Hypotension","Sedation","Nausea/vomiting","Fever","Neurogenic shock","Fluid refractory hypotension","Suspected kidney stone","Dehydration","Acidosis","Crush injury","Compartment syndrome","Hyperkalemia"].map((function(e,t){return(0,p.jsx)("div",{className:"indication",children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",onChange:o,"data-type":"generic","data-index":t,"data-key":"indications",name:e,defaultChecked:n.indications.includes(e)}),e]})},e)}))})]})}var $S=function(e){var n,r=e.med,i=e.index,a=u(e.medState,2),o=a[0],s=a[1],c=u((0,t.useState)(r),2),l=c[0],f=c[1],h=u((0,t.useState)(!1),2),d=h[0],v=h[1],m=u((0,t.useState)(!1),2),y=m[0],g=m[1],b=function(e){var t=Ee({},l),n=e.target,r=n.dataset.type,i=e.target.checked,a=n.name.split("-")[0];i?t[r][a].push(n.value):t[r][a].splice(t[r][a].indexOf(n.value),1),f(t)},w=function(e){var t=Ee({},l),n=e.target,r=n.dataset.type;"generic"===r?(t[n.name]=n.value,f(t)):t[r][n.name]=n.value};return(0,p.jsxs)("div",{className:"medication",children:[(0,p.jsxs)("div",{className:"main-area",children:[(0,p.jsx)("button",{type:"button",className:"delete-bttn",onClick:function(){window.confirm("Are you sure you want to delete this medication?")&&(o.splice(i,1),s(o.slice()))},children:"\u2715"}),(0,p.jsx)("h3",{children:null!==(n=l.label)&&void 0!==n?n:"New Medication"}),(0,p.jsx)("input",{type:"text",className:"id",id:"".concat(l.id,"-id"),placeholder:"ID",name:"id",onChange:w,"data-type":"generic",defaultValue:r.id}),(0,p.jsx)("input",{type:"text",className:"label",id:"".concat(l.id,"-label"),placeholder:"Label",name:"label",onChange:w,"data-type":"generic",defaultValue:r.label}),(0,p.jsx)("button",{type:"button",className:"expand-bttn ".concat(d?"expanded":""),onClick:function(){return v(!d)},onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)},children:!d&&y||d&&!y?(0,p.jsx)(HS,{}):(0,p.jsx)(YS,{})})]}),(0,p.jsxs)("div",{className:"expanded-area ".concat(d?"expanded":"collapsed"),children:[(0,p.jsxs)("div",{className:"generic-data",children:[(0,p.jsx)(XS,{med:r}),(0,p.jsx)(ZS,{med:r})]}),(0,p.jsxs)("div",{className:"headings",children:[(0,p.jsx)("p",{}),(0,p.jsx)("p",{children:"Initial Dosage"}),(0,p.jsx)("p",{children:"Repeat Dosage"}),(0,p.jsx)("p",{children:"Max/Dosage"}),(0,p.jsx)("p",{children:"Max Total Dosage"}),(0,p.jsx)("p",{children:"Repeat Interval (minutes)"}),(0,p.jsx)("p",{children:"Contraindicated?"}),(0,p.jsx)("p",{children:"Repeatable?"})]}),(0,p.jsxs)("div",{className:"adult-data",children:[(0,p.jsxs)("div",{className:"basic-info",children:[(0,p.jsx)("p",{children:"Adult:"}),(0,p.jsx)(x,{isAdult:!0,group:r.adult})]}),(0,p.jsxs)("div",{className:"administration-routes",children:[(0,p.jsx)("p",{children:"Routes:"}),(0,p.jsx)(k,{route:"IV/IO",isadult:!0}),(0,p.jsx)(k,{route:"IM",isadult:!0}),(0,p.jsx)(k,{route:"IN",isadult:!0}),(0,p.jsx)(k,{route:"PO",isadult:!0}),(0,p.jsx)(k,{route:"Inhalation",isadult:!0})]})]}),(0,p.jsxs)("div",{className:"pediatric-data",children:[(0,p.jsxs)("div",{className:"basic-info",children:[(0,p.jsx)("p",{children:"Pediatric:"}),(0,p.jsx)(x,{isAdult:!1,group:r.pediatric})]}),(0,p.jsxs)("div",{className:"administration-routes",children:[(0,p.jsx)("p",{children:"Routes:"}),(0,p.jsx)(k,{route:"IV/IO",isadult:!1}),(0,p.jsx)(k,{route:"IM",isadult:!1}),(0,p.jsx)(k,{route:"IN",isadult:!1}),(0,p.jsx)(k,{route:"PO",isadult:!1}),(0,p.jsx)(k,{route:"Inhalation",isadult:!1})]})]})]})]});function k(e){var t=e.route,n=e.isadult?"adult":"pediatric";return(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",id:"".concat(l.id,"-route-").concat(t,"-").concat(n),onChange:b,"data-type":n,name:"routes-".concat(n),value:t,defaultChecked:r[n].routes.includes(t)}),t]})}function x(e){var t=e.group,n=e.isAdult?"adult":"pediatric";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"text",name:"initialDosage",id:"".concat(l.id,"-initialDosage-").concat(n),placeholder:"Initial Dosage","data-type":n,onChange:w,defaultValue:t.initialDosage}),(0,p.jsx)("input",{type:"text",name:"repeatDosage",id:"".concat(l.id,"-repeatDosage-").concat(n),placeholder:"Repeat Dosage","data-type":n,onChange:w,defaultValue:t.repeatDosage}),(0,p.jsx)("input",{type:"text",name:"maxDosage",id:"".concat(l.id,"-max/Dosage-").concat(n),placeholder:"Max/Dosage","data-type":n,onChange:w,defaultValue:t.maxDosage}),(0,p.jsx)("input",{type:"text",name:"maxTotalDosage",id:"".concat(l.id,"-maxTotalDosage-").concat(n),placeholder:"Max Total Dosage","data-type":n,onChange:w,defaultValue:t.maxTotalDosage}),(0,p.jsx)("input",{type:"number",name:"repeatInterval",id:"".concat(l.id,"-repeatInterval-").concat(n),placeholder:"Interval (minutes)","data-type":n,onChange:w,defaultValue:t.repeatInterval}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(l.id,"-contraindicated-").concat(n),name:"contraindicated","data-type":n,onChange:b,defaultChecked:t.contraindicated}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(l.id,"-repeatable-").concat(n),name:"repeatable","data-type":n,onChange:b,defaultChecked:t.repeatable})]})}},eA=function(e){var t=e.clickHandler;return(0,p.jsx)("button",{type:"button",className:"save-btn",onClick:t,children:"Save Changes"})},tA=function(e){return JSON.parse(JSON.stringify(e))},nA=function(){var e=RT(),n=e.scenarioType,r=e.saveMedications,i=u((0,t.useState)(n.medications),2),a=i[0],o=i[1],s=(0,t.useRef)();!function(e){(0,t.useEffect)((function(){window.onkeydown=function(t){(function(e){return"BODY"===e.target.nodeName})(t)&&"~"===t.key&&e()}}),[e])}((function(){return console.log(a)}));var c=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,r(f());case 3:e.sent?(console.log("changes saved successfully"),alert("Changes saved.")):console.log("an error occured while saving");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l={contraindicated:!1,repeatable:!1,routes:[],initialDosage:"",repeatDosage:"",maxDosage:"",maxTotalDosage:"",repeatInterval:""},f=function(){var e=a.slice();return e.sort((function(e,t){return e.id.localeCompare(t.id)})),o(e),e};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(eA,{clickHandler:c}),(0,p.jsx)("button",{type:"button",onClick:f,children:"Sort A to Z"})]}),(0,p.jsxs)("div",{className:"medications-form",ref:s,children:[a&&a.map((function(e,t){return(0,p.jsx)($S,{med:e,index:t,medState:[a,o]},e.id||t)})),(0,p.jsx)("button",{type:"button",onClick:function(){return o([].concat(fe(a),[{id:"",label:"",contraindications:[],indications:[],adult:tA(l),pediatric:tA(l)}]))},children:"New Medication"})]}),(0,p.jsx)("div",{children:(0,p.jsx)(eA,{clickHandler:c})})]})},rA=function(e){var t=e.label,n=void 0===t?"Save Changes":t,r=e.haveChanges,i=void 0!==r&&r,a=e.clickHandler;return(0,p.jsx)("div",{className:"save-button-wrapper",children:(0,p.jsx)("button",{className:"save-btn",type:"button",disabled:!i,onClick:a,children:n})})},iA=function(){var e=RT().saveInterventions,t=function(){var t=k(b().mark((function t(n){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e();case 3:!0===(r=t.sent)?alert("Interventions save successfully"):alert(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,p.jsx)(rA,{haveChanges:!0,clickHandler:t})},aA=function(e){var t=e.breadcrumbs,n=void 0===t?[]:t,r=e.children;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(QT,{crumbs:n}),(0,p.jsx)(iA,{}),r,(0,p.jsx)(iA,{})]})},oA=function(e){var t=e.item,n=e.onDelete;return(0,p.jsx)("button",{type:"button",className:"delete-btn",onClick:function(){return n(t)},children:"X"})},sA=function(e){var t=e.rec,n=e.fld,r=e.indentAttr;return(0,p.jsx)("span",{style:{paddingLeft:"".concat(20*t[r],"px")},children:t[n.name]})},uA=function(e){var t=e.entity,n=e.fld;return(0,p.jsx)("input",{type:"checkbox",checked:t[n.name],onChange:function(e){var r=e.target.checked;n.changeHandler?n.changeHandler(t.id,n.name,r):console.log("defaultChangeHandler",n.name,r)}})},cA=function(e){var t=e.entity,n=e.fld;return(0,p.jsxs)("select",{value:t[n.name],onChange:function(e){var r=e.target.value;n.changeHandler?n.changeHandler(t.id,n.name,r):console.log("defaultChangeHandler",n.name,r)},children:[(0,p.jsx)("option",{value:""}),n.options.map((function(e){var t=u(e,2),n=t[0],r=t[1];return(0,p.jsx)("option",{value:n,children:r},n)}))]})},lA=function(e){var t=e.entity,n=e.fld;return(0,p.jsx)("textarea",{cols:n.cols?n.cols:40,rows:n.rows?n.rows:2,value:t[n.name],onChange:function(e){var r=e.target.value;n.changeHandler?n.changeHandler(t.id,n.name,r):console.log("defaultChangeHandler",n.name,r)}})},fA=function(e){var t=e.entity,n=e.fld,r=e.indentAttr,i=void 0===r?null:r;return(0,p.jsx)("input",{type:"text",size:n.size?n.size:40,value:t[n.name],onChange:function(e){var r=e.target.value;n.changeHandler?n.changeHandler(t.id,n.name,r):console.log("defaultChangeHandler",n.name,r)},style:{marginLeft:i?"".concat(20*t[i],"px"):"0"}})},hA=function(e){return console.log("noop",e)},dA=function(e){var t=e.n,n=e.of,r=e.depth,i=void 0===r?1:r,a=e.onMoveUp,o=void 0===a?hA:a,s=e.onMoveDown,u=void 0===s?hA:s,c=e.allowChangeIndent,l=void 0!==c&&c,f=e.onMoveLeft,h=void 0===f?hA:f,d=e.onMoveRight,v=void 0===d?hA:d;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{disabled:0===t,onClick:function(){return o(t)},className:"swap-btn",children:"^"}),(0,p.jsx)("button",{disabled:t===n,onClick:function(){return u(t)},className:"swap-btn",children:"v"}),l&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{disabled:1===i,className:"swap-btn",onClick:function(){return h(t)},children:"<"}),(0,p.jsx)("button",{className:"swap-btn",onClick:function(){return v(t)},children:">"})]})]})},pA=function(e){var t=e.entity,n=e.fld;return(0,p.jsx)("span",{children:n.valueGetter(t)})},vA=function(e){var n=e.entity,r=e.fld,i=u((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){var e=r.valueGetter(n,r);e&&o(e)}),[n,r]),a?(0,p.jsx)(cA,{entity:n,fld:Ee(Ee({},r),{},{options:a.answers.map((function(e){return[e.id,e.abbrLabel]}))})}):(0,p.jsx)("span",{children:"No distinguishing prompts"})},mA=function(e){return console.log("noop",e)},yA=function(e){var n=e.heading,r=e.records,i=void 0===r?[]:r,a=e.fields,o=void 0===a?[{name:"id",label:"ID",colWidthPct:46,widget:null},{name:"label",label:"Label",colWidthPct:54,widget:null}]:a,s=e.keyField,l=void 0===s||s,f=e.allowChangeOrder,h=void 0===f||f,d=e.onMoveUp,v=void 0===d?mA:d,m=e.onMoveDown,y=void 0===m?mA:m,g=e.allowChangeIndent,b=void 0!==g&&g,w=e.changeIndentAttr,k=void 0===w?null:w,x=e.onMoveLeft,I=void 0===x?mA:x,_=e.onMoveRight,E=void 0===_?mA:_,T=e.editLink,S=void 0===T||T,A=e.editBaseURL,N=e.allowDelete,C=void 0===N||N,D=e.onDelete,P=void 0===D?mA:D,O=e.children,R=u((0,t.useState)(null),2),L=R[0],j=R[1],M=function(e,t){switch(t.widget){case"smallText":return(0,p.jsx)("span",{style:{fontSize:"smaller"},children:e[t.name]});case"text":return(0,p.jsx)(fA,{entity:e,fld:t,indentAttr:k});case"indentedText":return(0,p.jsx)(sA,{rec:e,fld:t,indentAttr:k});case"select":return(0,p.jsx)(cA,{entity:e,fld:t});case"computedField":return(0,p.jsx)(pA,{entity:e,fld:t});case"textArea":return(0,p.jsx)(lA,{entity:e,fld:t});case"checkbox":return(0,p.jsx)(uA,{entity:e,fld:t});case"computedSelect":return(0,p.jsx)(vA,{entity:e,fld:t});default:return e[t.name]}};return(0,t.useEffect)((function(){j(null)}),[n]),(0,t.useEffect)((function(){if(!L){var e=0,t=0,n=0;h&&(e=3,b&&(e=6)),S&&(t=4),C&&(n=1);var r=100-(e+t+n),i=o.length,a=o.filter((function(e){return void 0!==e.colWidthPct})).map((function(e){return e.colWidthPct})),s=a.length,u=0;s>0&&(u=a.reduce((function(e,t){return e+t}),0));var c=[];e>0&&c.push({label:"",width:"".concat(e,"%")}),t>0&&c.push({label:"",width:"".concat(t,"%")});var l=0;if(s<i)l=(100-u)/(i-s);o.forEach((function(e){var t=e.label,n=e.colWidthPct;void 0===n&&(n=l);var i=.01*r*n;c.push({label:t,width:"".concat(i,"%")})})),n>0&&c.push({label:"",width:"".concat(n,"%")}),j(c)}}),[L,h,b,S,C,o]),L?(0,p.jsx)("div",{className:"inline-editor",children:(0,p.jsxs)("fieldset",{children:[(0,p.jsx)("legend",{children:n}),0===i.length?(0,p.jsxs)("p",{children:["There currently aren't any ",n.toLowerCase()]}):(0,p.jsxs)("table",{children:[(0,p.jsx)("colgroup",{children:L.map((function(e,t){return(0,p.jsx)("col",{span:"1",style:{width:e.width}},t)}))}),(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:L.map((function(e,t){return(0,p.jsxs)("th",{children:[" ",e.label," "]},t)}))})}),(0,p.jsx)("tbody",{children:i.map((function(e,t,n){return(0,p.jsxs)("tr",{children:[h&&(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(dA,{n:t,of:n.length-1,depth:e[k]?e[k]:1,allowChangeIndent:b,onMoveUp:v,onMoveDown:y,onMoveLeft:I,onMoveRight:E})}),S&&(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(c.NavLink,{to:"".concat(A,"/").concat(e.id),children:"edit"})}),o.map((function(t){return(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:M(e,t)},t.name)})),C&&(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(oA,{item:e,onDelete:P})})]},l?e.id:t)}))})]}),O]})}):(0,p.jsx)("div",{children:"loading..."})},gA=function(e){var t=e.addHandler;return(0,p.jsx)("button",{className:"add-btn",onClick:t,children:"+"})},bA=function(e){var t=e.value,n=e.errMsg,r=void 0===n?"":n,i=e.onChange,a=e.size,o=void 0===a?40:a;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"text",size:o,autoComplete:"off",value:t,onChange:i,style:{backgroundColor:""===r?"white":"pink"}}),(0,p.jsx)("br",{}),(0,p.jsxs)("span",{style:{color:"red"},children:[" ",r," "]})]})},wA=function(e){var n=e.entitiesDesc,r=e.addHandler,i=e.uniqueIDs,a=void 0===i?[]:i,o=e.uniqueLabels,s=void 0===o?[]:o,c=u((0,t.useState)(!1),2),l=c[0],f=c[1],h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)(null),2),y=m[0],g=m[1],b=u((0,t.useState)(""),2),w=b[0],k=b[1],x=u((0,t.useState)(""),2),I=x[0],_=x[1],E=u((0,t.useState)(""),2),T=E[0],S=E[1],A=u((0,t.useState)(""),2),N=A[0],C=A[1];return(0,t.useEffect)((function(){d||(v(n[0].type),g(n[0].name),f(n[0].labelsUnique))}),[n,d]),(0,p.jsx)("div",{className:"add-entity",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsxs)("b",{children:["Add ",y]})}),(0,p.jsx)("td",{children:(0,p.jsx)(bA,{value:w,errMsg:I,onChange:function(e){var t=e.target.value;k(t),_(a.includes(t)?"Not Unique":"")}})}),(0,p.jsx)("td",{children:(0,p.jsx)(bA,{value:T,errMsg:N,onChange:function(e){var t=e.target.value;S(t),l&&C(s.includes(t)?"Not Unique":"")}})}),(0,p.jsx)("td",{children:(0,p.jsx)(gA,{addHandler:function(e){""!==I||""!==N?alert("Please correct errors before submitting"):(r(d,w,T),k(""),_(""),S(""),C(""))}})})]})})]})})},kA=function(){var e=(0,l.UO)(),n=(0,l.$B)().url,r=RT(),i=r.scenarioType,a=r.intvPrompts,o=r.intvPromptAnswers,s=r.uniqueIDs,c=r.uniqueLabels,f=u((0,t.useState)(null),2),h=f[0],d=f[1];return(0,t.useEffect)((function(){d(i.interventionPrompts.filter((function(e){return e.type===YE.DIST_PROMPT})))}),[i.interventionPrompts]),h?(0,p.jsx)(aA,{breadcrumbs:[gS(e)],children:(0,p.jsx)(yA,{heading:"Distiguishing Prompts",records:h,fields:[{name:"id",label:"ID",colWidthPct:48,widget:null},{name:"label",label:"Label",colWidthPct:52,widget:null}],allowChangeOrder:!1,editLink:!0,editBaseURL:n,onDelete:function(e){var t=i.interventionPromptAnswers.filter((function(t){return t.promptID===e.id})),n="Are you sure you wish to delete the prompt ".concat(e.label," and all of of it's children?\n");t.length>0&&(n+="\nAnswers:\n",n+=t.map((function(e){return e.label})).join("\n")),window.confirm(n)?(t.forEach((function(e){return o.remove(e.id)})),a.remove(e.id)):alert("deletion aborted")},children:(0,p.jsx)(wA,{entitiesDesc:[{type:"distinguishingPrompt",name:"Distinguishing Prompt",labelsUnique:!0}],addHandler:function(e,t,n){a.add(function(e,t){return{id:e,type:YE.DIST_PROMPT,label:t,abbrLabel:"",selectionType:JE.ONE,answers:[]}}(t,n))},uniqueIDs:s,uniqueLabels:c})})}):(0,p.jsx)("div",{children:"loading..."})},xA=function(e){var t=e.heading,n=e.entity,r=e.fields,i=function(e,t){switch(t.widget){case"text":return(0,p.jsx)(fA,{entity:e,fld:t});case"select":return(0,p.jsx)(cA,{entity:e,fld:t});case"checkbox":return(0,p.jsx)(uA,{entity:e,fld:t});case"textArea":return(0,p.jsx)(lA,{entity:e,fld:t});default:return e[t.name]}};return(0,p.jsxs)("div",{className:"details-editor",children:[!!t&&(0,p.jsx)("h3",{children:t}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"15%"}}),(0,p.jsx)("col",{span:"1",style:{width:"85%"}})]}),(0,p.jsx)("tbody",{children:r.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{fontWeight:"bold",paddingRight:"10px",textAlign:"right"},children:e.label}),(0,p.jsx)("td",{children:i(n,e)})]},e.name)}))})]})]})},IA=function(e,t){return e.concat(t)},_A=function(e,t){var n=fe(e);return n[e.findIndex((function(e){return e.id===t.id}))]=t,n},EA=function(e,t){var n=fe(e),r=e.findIndex((function(e){return e.id===t}));return n.splice(r,1),n},TA=function(e,t){var n=fe(e),r=n.splice(t,1)[0];return n.splice(t-1,0,r),n},SA=function(e,t){var n=fe(e),r=n.splice(t,1)[0];return n.splice(t+1,0,r),n},AA=function(){var e=(0,l.UO)(),n=e.distPromptID,r=RT(),i=r.scenarioType,a=r.intvPrompts,o=r.intvPromptAnswers,s=r.uniqueIDs,c=r.uniqueLabels,f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(!1),2),m=v[0],y=v[1],g=u((0,t.useState)([]),2),b=g[0],w=g[1],k=u((0,t.useState)(!1),2),I=k[0],_=k[1],E=function(e,t,n){d((function(e){return Ee(Ee({},e),{},x({},t,n))})),y(!0)},T=function(e,t,n){var r=Ee(Ee({},b.find((function(t){return t.id===e}))),{},x({},t,n));o.update(r),_(!0)};return(0,t.useEffect)((function(){if(n){var e=i.interventionPrompts.find((function(e){return e.id===n}));e?(d(e),_(!0)):alert("prompt lookup for ".concat(n," failed"))}}),[i.interventionPrompts,n]),(0,t.useEffect)((function(){if(I){var e=[],t=i.interventionPromptAnswers.filter((function(e){return e.promptID===h.id}));h.answers.forEach((function(n){var r=t.find((function(e){return e.id===n}));r&&e.push(r)})),w(e),_(!1)}}),[h,I,i.interventionPromptAnswers]),(0,t.useEffect)((function(){m&&(a.update(h),y(!1))}),[m,h,a]),h?(0,p.jsxs)(aA,{breadcrumbs:[gS(e),bS(e,h.label)],children:[(0,p.jsx)(xA,{entity:h,fields:[{name:"id",label:"ID",widget:null},{name:"label",label:"Label",widget:"text",size:80,changeHandler:E},{name:"abbrLabel",label:"Abbr. Label",widget:"text",size:80,changeHandler:E},{name:"selectionType",label:"Selection Type",widget:"select",options:[[JE.ONE,"One"],[JE.OOM,"One-or-more"],[JE.NONE,"None"]],changeHandler:E}]}),(0,p.jsx)(yA,{heading:"Answers",records:b,fields:[{name:"id",label:"ID",colWidthPct:40,widget:null},{name:"label",label:"Label",colWidthPct:37,widget:"text",size:55,changeHandler:T},{name:"abbrLabel",label:"Abbr. Label",colWidthPct:23,widget:"text",size:34,changeHandler:T}],allowChangeOrder:!0,allowChangeIndent:!1,onMoveUp:function(e){E(h.id,"answers",TA(h.answers,e)),_(!0)},onMoveDown:function(e){E(h.id,"answers",SA(h.answers,e)),_(!0)},editLink:!1,onDelete:function(e){E(h.id,"answers",h.answers.filter((function(t){return t!==e.id}))),o.remove(e.id),_(!0)},children:(0,p.jsx)(wA,{entitiesDesc:[{type:"interventionPromptAnswer",name:"Answer",labelUnique:!0}],addHandler:function(e,t,n){var r=MT(t,n,h.id);o.add(r),E(h.id,"answers",h.answers.concat(r.id)),_(!0)},uniqueIDs:s,uniqueLabels:c})})]}):(0,p.jsx)("div",{children:"loading..."})},NA=function(e){return"label-".concat(e)},CA=function(e){var n=e.entityDesc,r=e.choices,i=void 0===r?[]:r,a=e.addHandler,o=e.genIDs,s=void 0!==o&&o,c=e.idGenerator,l=void 0===c?NA:c,f=e.uniqueIDs,h=void 0===f?[]:f,d=u((0,t.useState)(null),2),v=d[0],m=d[1],y=u((0,t.useState)(null),2),g=y[0],b=y[1],w=u((0,t.useState)(""),2),k=w[0],x=w[1],I=u((0,t.useState)(""),2),_=I[0],E=I[1],T=u((0,t.useState)(""),2),S=T[0],A=T[1],N=u((0,t.useState)(""),2),C=N[0],D=N[1];return(0,t.useEffect)((function(){v||(m(n.type),b(n.name))}),[n,v]),(0,p.jsx)("div",{className:"add-entity",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:n.name}),s&&(0,p.jsx)("th",{children:"ID (auto-gen cross-listed will be dups, append number)"})]})}),(0,p.jsx)("tbody",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsxs)("b",{children:["Add ",g]})}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("select",{value:k,onChange:function(e){var t=e.target.value;if(s){var n=l(t);A(n),D(h.includes(n)?"Not unique":"")}x(t)},children:[(0,p.jsx)("option",{value:""}),i.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.label},e.id)}))]}),(0,p.jsx)("br",{}),(0,p.jsx)("span",{className:"err-msg",children:_})]}),s&&(0,p.jsx)("td",{children:(0,p.jsx)(bA,{value:S,errMsg:C,size:60,onChange:function(e){var t=e.target.value;A(t),D(h.includes(t)?"Not unique":"")}})}),(0,p.jsx)("td",{children:(0,p.jsx)(gA,{addHandler:function(e){""!==k?(a(v,S,k),x(""),E(""),A(""),D("")):E("Please select a/an ".concat(g))}})})]})})]})})},DA=function(e,t){var n=[];return t.forEach((function(r){var i=e.find((function(e){return e.id===r}));i?n.push(i):(console.log("sortRelatedRecsByForeignKeyFldOrder() id ".concat(r," not found")),console.log(e,t))})),n},PA=function(){var e=RT(),n=e.scenarioType,r=e.intvs,i=e.intvPrompts,a=e.intvPromptAnswers,o=e.uniqueIDs,s=e.uniqueLabels,c=(0,l.UO)(),f=c.interventionID,h=(0,l.$B)().url,d=u((0,t.useState)(null),2),v=d[0],m=d[1],y=u((0,t.useState)(!1),2),g=y[0],b=y[1],w=u((0,t.useState)([]),2),k=w[0],I=w[1],_=u((0,t.useState)(!1),2),E=_[0],T=_[1],S=u((0,t.useState)([]),2),A=S[0],N=S[1],C=u((0,t.useState)(!1),2),D=C[0],P=C[1],O=function(e,t,n){m((function(e){return Ee(Ee({},e),{},x({},t,n))})),b(!0)};return(0,t.useEffect)((function(){if(f&&!v){var e=n.interventions.find((function(e){return e.id===f}));e?(m(e),v||(T(!0),P(!0))):alert("intervention ".concat(f," lookup failed!"))}}),[f,v,n.interventions]),(0,t.useEffect)((function(){if(E){var e=n.interventionPrompts.filter((function(e){return v.distPrompts.includes(e.id)}));I(DA(e,v.distPrompts)),T(!1)}if(D){var t=n.interventionPrompts.filter((function(e){return e.interventionID===v.id}));N(DA(t,v.prompts)),P(!1)}}),[v,E,D,n.interventionPrompts]),(0,t.useEffect)((function(){v&&g&&(r.update(v),b(!1))}),[v,r,g]),v?(0,p.jsxs)(aA,{breadcrumbs:[vS(c),mS(c,v.label)],children:[(0,p.jsx)(xA,{heading:"Intervention",entity:v,fields:[{name:"id",label:"ID",widget:null},{name:"label",label:"Label",widget:null},{name:"abbrLabel",label:"Abbr. Label",widget:"text",changeHandler:O},{name:"system",label:"System",widget:"select",options:[[XE.AW,"Airway"],[XE.BR,"Breathing"],[XE.BL,"Bleeding"],[XE.SH,"Shock"]],changeHandler:O}]}),(0,p.jsx)(yA,{heading:"Distinguishing Prompts",records:k,fields:[{name:"id",label:"ID",colWidthPct:40,widget:"smallText"},{name:"label",label:"Label",colWidthPct:60,widget:null}],allowChangeOrder:!0,allowChangeIndent:!1,onMoveUp:function(e){O(v.id,"distPrompts",TA(v.distPrompts,e)),T(!0)},onMoveDown:function(e){O(v.id,"distPrompts",SA(v.distPrompts,e)),T(!0)},editLink:!1,allowDelete:!0,onDelete:function(e){O(v.id,"distPrompts",v.distPrompts.filter((function(t){return t!==e.id}))),T(!0)},children:(0,p.jsx)(CA,{entityDesc:{type:YE.DIST_PROMPT,name:"Distinguishing Prompt"},choices:n.interventionPrompts.filter((function(e){return e.type===YE.DIST_PROMPT})),addHandler:function(e,t,n){O(v.id,"distPrompts",v.distPrompts.concat(n)),T(!0)},uniqueIDs:o})}),(0,p.jsx)(yA,{heading:"Prompts",records:A,fields:[{name:"id",label:"ID",colWidthPct:40,widget:"smallText"},{name:"label",label:"Label",colWidthPct:60,widget:null}],allowChangeOrder:!0,allowChangeIndent:!1,onMoveUp:function(e){O(v.id,"prompts",TA(v.prompts,e)),P(!0)},onMoveDown:function(e){O(v.id,"prompts",SA(v.prompts,e)),P(!0)},editLink:!0,editBaseURL:"".concat(h,"/prompt"),allowDelete:!0,onDelete:function(e){var t=n.interventionPromptAnswers.filter((function(t){return t.promptID===e.id})),r='Are you sure you wish to delete the prompt "'.concat(e.label,"\" and it's children?");t.length>0&&(r+="\nAnswers\n",r+=t.map((function(e){return e.label})).join("\n")),window.confirm(r)?(t.forEach((function(e){return a.remove(e.id)})),i.remove(e.id),O(v.id,"prompts",v.prompts.filter((function(t){return t!==e.id}))),P(!0)):console.log("deletion aborted")},children:(0,p.jsx)(wA,{entitiesDesc:[{type:YE.PROMPT,name:"Prompt",labelsUnique:!0}],addHandler:function(e,t,n){i.add(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:YE.PROMPT,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:JE.ONE;return{id:e,type:r,interventionID:n,label:t,abbrLabel:"",feedback:"",selectionType:i,answers:[]}}(t,n,v.id)),O(v.id,"prompts",v.prompts.concat(t)),P(!0)},uniqueIDs:o,uniqueLabels:s})})]}):(0,p.jsx)("div",{children:"Loading..."})},OA=function(){var e=(0,l.UO)(),n=e.interventionID,r=e.promptID,i=(0,l.$B)().url,a=RT(),o=a.scenarioType,s=a.intvPrompts,c=a.intvPromptAnswers,f=a.uniqueIDs,h=a.uniqueLabels,d=u((0,t.useState)(null),2),v=d[0],m=d[1],y=u((0,t.useState)(null),2),g=y[0],b=y[1],w=u((0,t.useState)(!1),2),k=w[0],I=w[1],_=u((0,t.useState)([]),2),E=_[0],T=_[1],S=u((0,t.useState)(!1),2),A=S[0],N=S[1],C=function(e,t,n){b((function(e){return Ee(Ee({},e),{},x({},t,n))})),I(!0)},D=function(e,t,n){var r=Ee({},E.find((function(t){return t.id===e})));r[t]=n,c.update(r),N(!0)};return(0,t.useEffect)((function(){if(n&&r){var e=o.interventions.find((function(e){return e.id===n}));if(e){m(e);var t=o.interventionPrompts.find((function(e){return e.id===r}));t?(b(t),N(!0)):alert("prompt lookup for ".concat(r," failed"))}else alert("intervention lookup for ".concat(n," failed"))}}),[n,r,o.interventions,o.interventionPrompts]),(0,t.useEffect)((function(){if(A){var e=[],t=o.interventionPromptAnswers.filter((function(e){return e.promptID===g.id}));g.answers.forEach((function(n){var r=t.find((function(e){return e.id===n}));r&&e.push(r)})),T(e),N(!1)}}),[g,A,o.interventionPromptAnswers]),(0,t.useEffect)((function(){k&&(s.update(g),I(!1))}),[k,g,s]),g?(0,p.jsxs)(aA,{breadcrumbs:[vS(e),mS(e,v.label),yS(e,g.label)],children:[(0,p.jsx)(xA,{entity:g,fields:[{name:"id",label:"ID",widget:null},{name:"label",label:"Label",widget:"text",size:80,changeHandler:C},{name:"abbrLabel",label:"Abbr. Label",widget:"text",size:80,changeHandler:C},{name:"feedback",label:"Feedback",widget:"text",size:80,changeHandler:C},{name:"selectionType",label:"Selection Type",widget:"select",options:[[JE.ONE,"One"],[JE.OOM,"One-or-more"],[JE.NONE,"None"]],changeHandler:C}]}),(0,p.jsx)(yA,{heading:"Answers",records:E,fields:[{name:"id",label:"ID",colWidthPct:40,widget:null},{name:"label",label:"Label",colWidthPct:37,widget:"text",size:60,changeHandler:D},{name:"abbrLabel",label:"Abbr. Label",colWidthPct:23,widget:"text",size:34,changeHandler:D}],allowChangeOrder:!0,onMoveUp:function(e){C(g.id,"answers",TA(g.answers,e)),N(!0)},onMoveDown:function(e){C(g.id,"answers",SA(g.answers,e)),N(!0)},editLink:!1,editBaseURL:i,onDelete:function(e){C(g.id,"answers",g.answers.filter((function(t){return t!==e.id}))),c.remove(e.id),N(!0)},children:(0,p.jsx)(wA,{entitiesDesc:[{type:YE.ANSWER,name:"Answer",labelUnique:!0}],addHandler:function(e,t,n){c.add(MT(t,n,g.id)),C(g.id,"answers",g.answers.concat(t)),N(!0)},uniqueIDs:f,uniqueLabels:h})})]}):(0,p.jsx)("div",{children:"loading..."})},RA=["items"],LA=function(){var e=(0,l.UO)(),n=(0,l.$B)().url,r=RT(),i=r.scenarioType,a=r.intvs,o=r.intvPrompts,s=r.intvPromptAnswers,c=r.intvMenuItems,f=r.intvMenuCategories,h=r.uniqueIDs,d=r.uniqueLabels,v=u((0,t.useState)(null),2),m=v[0],y=v[1];return(0,t.useEffect)((function(){y(a.getSorted())}),[i.interventions,a]),m?(0,p.jsx)(aA,{breadcrumbs:[vS(e)],children:(0,p.jsx)(yA,{heading:"Interventions",records:m,fields:[{name:"id",label:"ID",colWidthPct:44,widget:"smallText"},{name:"label",label:"Label",colWidthPct:48,widget:null},{name:"system",label:"System",colWidthPct:8,widget:"smallText"}],allowChangeOrder:!1,editLink:!0,editBaseURL:n,onDelete:function(e){var t=i.interventionPrompts.filter((function(t){return t.interventionID===e.id})),n=t.map((function(e){return e.id})),r=i.interventionPromptAnswers.filter((function(e){return n.includes(e.promptID)})),u=i.interventionMenuItems.filter((function(t){return t.interventionID===e.id})),l=u.map((function(e){return e.id})),h=Array.from(new Set(u.map((function(e){return i.interventionMenuCategories.find((function(t){return t.id===e.intvCategoryID}))})))),d='Are you sure you wish to delete the intervention "'.concat(e.label,"\" and all of it's children?");t.length>0&&(d+="\nPrompts:\n",d+=t.map((function(e){return"\t".concat(e.label)})).join("\n"),d+="\nAnswers:\n",d+=r.map((function(e){return"\t".concat(e.label)})).join("\n")),u.length>0&&(d+="\nIntervention menu items:\n",h.forEach((function(e){d+="\t".concat(e.label,":\n"),e.items.forEach((function(e){u.forEach((function(t){t.id===e&&(d+="\t\t".concat(t.id,"\n"))}))}))}))),window.confirm(d)?(r.forEach((function(e){return s.remove(e.id)})),t.forEach((function(e){return o.remove(e.id)})),u.forEach((function(e){return c.remove(e.id)})),h.forEach((function(e){var t=e.items,n=eT(e,RA),r=t.filter((function(e){return!l.includes(e)}));n.items=r,f.update(n)})),a.remove(e.id)):alert("deletion aborted")},children:(0,p.jsx)(wA,{entitiesDesc:[{type:"intervention",name:"Intervention",labelsUnique:!0}],addHandler:function(e,t,n){a.add(function(e,t){return{id:e,type:YE.INTERV,label:t,abbrLabel:t,distPrompts:[],prompts:[]}}(t,n))},uniqueIDs:h,uniqueLabels:d})})}):(0,p.jsx)("div",{children:"sorting interventions"})},jA=function(){var e=(0,l.UO)(),t=(0,l.$B)().url,n=RT(),r=n.scenarioType,i=n.intvMenuCategories,a=n.intvMenuItems,o=n.uniqueIDs,s=n.uniqueLabels;return(0,p.jsx)(aA,{breadcrumbs:[wS(e)],children:(0,p.jsx)(yA,{heading:"Intervention Menu Categories",records:r.interventionMenuCategories,allowChangeOrder:!0,onMoveUp:function(e){return i.reorder(TA(r.interventionMenuCategories,e))},onMoveDown:function(e){return i.reorder(SA(r.interventionMenuCategories,e))},editLink:!0,editBaseURL:t,onDelete:function(e){console.log("onDelete(".concat(JSON.stringify(e),")"));var t=r.interventionMenuItems.filter((function(t){return t.intvCategoryID===e.id})),n="Are you sure you wish to delete menu category ".concat(e.label," and it's children?\n");t.length>0&&(n+="\nMenu Items:\n",n+=t.map((function(e){return e.label})).join("\n")),window.confirm(n)&&(t.forEach((function(e){return a.remove(e.id)})),i.remove(e.id))},children:(0,p.jsx)(wA,{entitiesDesc:[{type:"interventioMenuCategory",name:"Intervention Menu Category",labelsUnique:!1}],addHandler:function(e,t,n){return i.add(function(e,t){return{id:e,label:t,items:[]}}(t,n))},uniqueIDs:o,uniqueLabels:s})})})},MA=function(){var e=(0,l.UO)(),n=e.intvMenuCategoryID,r=RT(),i=r.scenarioType,a=r.intvs,o=r.intvMenuCategories,s=r.intvMenuItems,c=r.uniqueIDs,f=r.uniqueLabels,h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)(!1),2),y=m[0],g=m[1],b=u((0,t.useState)(null),2),w=b[0],k=b[1],I=u((0,t.useState)(!1),2),_=I[0],E=I[1],T=function(e,t,n){v((function(e){return Ee(Ee({},e),{},x({},t,n))})),g(!0)},S=function(e){s.add(e),T(d.id,"items",d.items.concat(e.id)),E(!0)},A=function(e){var t=i.interventions.find((function(t){return t.id===e}));return t?t.abbrLabel:'intervention: "'.concat(e,'" not found')};return(0,t.useEffect)((function(){void 0!==n&&(v(i.interventionMenuCategories.find((function(e){return e.id===n}))),E(!0))}),[n,i.interventionMenuCategories]),(0,t.useEffect)((function(){if(_){var e=[],t=i.interventionMenuItems.filter((function(e){return e.intvCategoryID===d.id}));d.items.forEach((function(n){var r=t.find((function(e){return e.id===n}));r?e.push(r):console.log("".concat(d.label," menu item ").concat(n," not found"))})),k(e),E(!1)}}),[d,_,i.interventionMenuItems]),(0,t.useEffect)((function(){y&&(o.update(d),g(!1))}),[d,y,o]),w?(0,p.jsxs)(aA,{breadcrumbs:[wS(e),kS(e,d.label)],children:[(0,p.jsx)(xA,{entity:d,fields:[{name:"id",label:"ID",widget:null},{name:"label",label:"Label",widget:"text",changeHandler:T}]}),(0,p.jsxs)(yA,{heading:"Menu Items",records:w,fields:[{name:"id",label:"ID",colWidthPct:35,widget:"smallText"},{name:"type",label:"Type",colWidthPct:10,widget:"smallText"},{name:"label",label:"Label",colWidthPct:55,widget:"text",changeHandler:function(e,t,n){var r=Ee({},i.interventionMenuItems.find((function(t){return t.id===e})));r[t]=n,s.update(r)}}],allowChangeOrder:!0,onMoveUp:function(e){T(d.id,"items",TA(d.items,e)),E(!0)},onMoveDown:function(e){T(d.id,"items",SA(d.items,e)),E(!0)},allowChangeIndent:!0,changeIndentAttr:"depth",onMoveLeft:function(e){var t=Ee({},w[e]);t.depth-=1,s.update(t),E(!0)},onMoveRight:function(e){var t=Ee({},w[e]);t.depth+=1,s.update(t),E(!0)},editLink:!1,onDelete:function(e){s.remove(e.id),T(d.id,"items",d.items.filter((function(t){return t!==e.id}))),E(!0)},children:[(0,p.jsx)(wA,{entitiesDesc:[{type:"heading",name:"Heading"}],addHandler:function(e,t,n){S(UT(t,n,"heading",d.id))},uniqueIDs:c,uniqueLabels:f}),(0,p.jsx)(CA,{entityDesc:{type:"intervention",name:"Intervention"},choices:a.getSorted(),addHandler:function(e,t,n){S(UT(t,A(n),YE.INTERV,d.id,n))},genIDs:!0,idGenerator:function(e){return e.replace("intv-","menu-item-")},uniqueIDs:c})]})]}):(0,p.jsx)("div",{children:"Loading..."})},UA=function(){var e=(0,l.$B)().url;return(0,p.jsxs)("div",{className:"interventions-editor",children:[(0,p.jsxs)("nav",{id:"tab-selector",children:[(0,p.jsx)(c.NavLink,{to:"".concat(e),className:"tab-button",activeClassName:"active-tab",children:"Interventions List"}),(0,p.jsx)(c.NavLink,{to:"".concat(e,"/distinguishing-prompts"),className:"tab-button",activeClassName:"active-tab",children:"Distinguishing Prompts"}),(0,p.jsx)(c.NavLink,{to:"".concat(e,"/menu"),className:"tab-button",activeClassName:"active-tab",children:"Interventions Menu"})]}),(0,p.jsxs)(l.rs,{children:[(0,p.jsx)(l.AW,{path:RS,component:AA}),(0,p.jsx)(l.AW,{path:OS,component:kA}),(0,p.jsx)(l.AW,{path:PS,component:MA}),(0,p.jsx)(l.AW,{path:DS,component:jA}),(0,p.jsx)(l.AW,{path:CS,component:OA}),(0,p.jsx)(l.AW,{path:NS,component:PA}),(0,p.jsx)(l.AW,{path:AS,component:LA}),(0,p.jsx)(l.AW,{children:(0,p.jsx)("div",{children:"click on a tab above"})})]})]})},FA="scenario-types",VA=function(e){var n=(0,l.UO)().scenarioTypeID,r=u((0,t.useState)(null),2),i=r[0],a=r[1],o=u((0,t.useState)(null),2),s=o[0],f=o[1],h=u((0,t.useState)(null),2),v=h[0],m=h[1],y=(0,l.$B)().path,g=d().setTitle,b=function(e,t){return a((function(n){return Ee(Ee({},n),{},x({},e,t))}))},w={add:function(e){return b("interventions",IA(i.interventions,e))},update:function(e){return b("interventions",_A(i.interventions,e))},remove:function(e){return b("interventions",EA(i.interventions,e))},getSorted:function(){var e=function(e,t){return e.label.localeCompare(t.label)},t=[];return[XE.AW,XE.BR,XE.BL,XE.SH,void 0].forEach((function(n){t=t.concat(i.interventions.filter((function(e){return e.system===n})).sort(e))})),t}},k={add:function(e){return b("interventionPrompts",IA(i.interventionPrompts,e))},update:function(e){return b("interventionPrompts",_A(i.interventionPrompts,e))},remove:function(e){return b("interventionPrompts",EA(i.interventionPrompts,e))}},I={add:function(e){return b("interventionPromptAnswers",IA(i.interventionPromptAnswers,e))},update:function(e){return b("interventionPromptAnswers",_A(i.interventionPromptAnswers,e))},remove:function(e){return b("interventionPromptAnswers",EA(i.interventionPromptAnswers,e))}},_={add:function(e){return b("interventionMenuCategories",IA(i.interventionMenuCategories,e))},update:function(e){return b("interventionMenuCategories",_A(i.interventionMenuCategories,e))},remove:function(e){return b("interventionMenuCategories",EA(i.interventionMenuCategories,e))},reorder:function(e){return b("interventionMenuCategories",e)}},E={add:function(e){return b("interventionMenuItems",IA(i.interventionMenuItems,e))},update:function(e){return b("interventionMenuItems",_A(i.interventionMenuItems,e))},remove:function(e){return b("interventionMenuItems",EA(i.interventionMenuItems,e))}};return(0,t.useEffect)((function(){n&&xT(jE,n).then((function(e){a(e),g("Scenario Type: ".concat(e.name))}))}),[n,g]),(0,t.useEffect)((function(){if(i){var e=i.interventions.map((function(e){return e.id}));e=(e=(e=(e=(e=(e=e.concat(i.interventionPrompts.map((function(e){return e.id})))).concat(i.interventionPromptAnswers.map((function(e){return e.id})))).concat(i.interventionMenuCategories.map((function(e){return e.id})))).concat(i.interventionMenuItems.map((function(e){return e.id})))).concat(i.medications.map((function(e){return e.id})))).concat(i.checklist.map((function(e){return e.id}))),f(e);var t=i.interventions.map((function(e){return e.label}));t=t.concat(i.checklist.map((function(e){return e.label}))),m(t)}}),[i]),i?(window.scenarioType=i,(0,p.jsxs)("div",{className:"scenario-type-editor",children:[(0,p.jsxs)("nav",{id:"tab-selector",children:[(0,p.jsx)(c.NavLink,{to:"/scenario-type/".concat(n,"/checklist"),className:"tab-button",activeClassName:"active-tab",children:"Checklist"}),(0,p.jsx)(c.NavLink,{to:"/scenario-type/".concat(n,"/medications"),className:"tab-button",activeClassName:"active-tab",children:"Medications"}),(0,p.jsx)(c.NavLink,{to:"/scenario-type/".concat(n,"/interventions"),className:"tab-button",activeClassName:"active-tab",children:"Interventions"})]}),(0,p.jsx)(OT.Provider,{value:{scenarioType:i,uniqueIDs:s,uniqueLabels:v,intvs:w,intvPrompts:k,intvPromptAnswers:I,intvMenuCategories:_,intvMenuItems:E,saveCheckList:function(e){var t=JSON.parse(JSON.stringify(e));return a((function(e){return Ee(Ee({},e),{},{checklist:t})})),jE.collection(FA).doc(n).update({checklist:t}).then((function(){return!0})).catch((function(e){return alert("an error occured saving scenario-type changes"),console.log(e),!1}))},saveMedications:function(e){return a((function(t){return Ee(Ee({},t),{},{medications:e})})),jE.collection(FA).doc(n).update({medications:e}).then((function(){return!0})).catch((function(e){return console.log(e),!1}))},saveInterventions:function(){return jE.collection(FA).doc(n).update({interventions:i.interventions,interventionPrompts:i.interventionPrompts,interventionPromptAnswers:i.interventionPromptAnswers,interventionMenuCategories:i.interventionMenuCategories,interventionMenuItems:i.interventionMenuItems}).then((function(){return!0})).catch((function(e){return console.log(e),!1}))}},children:(0,p.jsxs)(l.rs,{children:[(0,p.jsx)(l.AW,{path:"".concat(y,"/checklist"),component:GS}),(0,p.jsx)(l.AW,{path:"".concat(y,"/medications"),component:nA}),(0,p.jsx)(l.AW,{path:"".concat(y,"/interventions"),component:UA}),(0,p.jsx)(l.AW,{exact:!0,path:y,children:(0,p.jsx)("div",{children:"Click on one of the tabs above to make changes."})})]})})]})):(0,p.jsx)("div",{children:"Loading..."})},qA="scenarios",BA=function(e){var t=e.item,n=e.remove,r=e.index;return(0,p.jsxs)("div",{className:"db-list-item",children:[(0,p.jsx)("h1",{id:"title",children:t.name}),(0,p.jsx)("h1",{className:"hint-text",children:t.scenarioType}),(0,p.jsxs)("div",{className:"list-button-wrapper",children:[(0,p.jsx)(c.Link,{to:"/scenario/".concat(t.id),className:"action-bttn",children:"Edit"}),(0,p.jsx)(c.Link,{to:"/scenario/".concat(t.id,"/clone"),className:"action-bttn",children:"Use as Template"}),(0,p.jsx)(c.Link,{to:"/scenario/".concat(t.id,"/publish"),className:"action-bttn",children:"Publish"}),(0,p.jsx)("button",{type:"button",className:"action-bttn delete-bttn",onClick:function(){return n(r)},children:"Delete"})]})]})},zA=function(){var e=u((0,t.useState)(),2),n=e[0],r=e[1];function i(e){return a.apply(this,arguments)}function a(){return a=k(b().mark((function e(t){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n[t].id,!window.confirm("Are you sure you want to delete this scenario? This cannot be undone!")){e.next=9;break}return e.next=4,ST(jE,qA,i);case 4:(a=n.slice()).splice(t,1),r(a),e.next=10;break;case 9:console.log("Delete of ".concat(i," cancelled."));case 10:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return(0,t.useEffect)((function(){jE.collection(qA).orderBy("name").get().then((function(e){var t=[];e.docs.forEach((function(e){var n=e.data(),r={id:e.id,name:n.name,scenarioType:n.scenarioType,scenarioVersion:n.scenarioVersion};t.push(r)})),r(t)})).catch((function(e){return console.log(e)}))}),[]),(0,p.jsxs)("div",{className:"db-list",children:[(0,p.jsx)("h1",{children:"Scenario List"}),(0,p.jsx)(c.Link,{to:"/scenario/",className:"new-bttn db-list-item",children:(0,p.jsx)("h1",{children:"New Scenario"})}),n?n.map((function(e,t){return e&&(0,p.jsx)(BA,{item:e,remove:i,index:t},"".concat(e.name,"-list"))})):(0,p.jsx)("p",{children:"Loading..."})]})},WA=[YE.ASSESS,YE.ASSESS_OPTION],QA=[YE.AWO,YE.DECISION],KA={initialDosage:"",route:"",contraindications:[]};function GA(e,t){var n=UE().cloneDeep(e);return Object.keys(e).forEach((function(r){"object"===typeof e[r]&&null!==e[r]||r in t&&null!==t[r]&&(n[r]=t[r])})),n}var HA=["BP","P","R","Skin","Spo2","ETCO2","GCS","Glucose","Pain","Temp"],YA={initial:"",good:"",bad:""};var JA=function(e,t){var n=[],r=[],i=t._checklist,a=t._medications,o=t._interventions,s=t._interventionPrompts,c=t._interventionPromptAnswers,l=i.filter((function(e){return WA.includes(e.type)})),f=i.filter((function(e){return QA.includes(e.type)})),h=function(e,t,n){var r={id:null,name:null,scenarioType:"trauma",schemaVersion:null,info:{instructorInformation:"",dispatchInfo:"",maxTime:20,sceneAssessment:"",patientInformation:{moulage:"",position:"",actions:"",age:0,weight:0,gender:""}},SAMPLE:{S:"",A:"",M:"",P:"",L:"",E:""},OPQRST:{O:"",P:"",Q:"",R:"",S:"",T:""},vitalSigns:{},assessmentFindings:{},checkListCorrectness:{},correctMedicationDosages:{},problems:[],solutions:[],actions:[],interventionVariantAnswers:{}};return HA.forEach((function(e){r.vitalSigns[e]=UE().cloneDeep(YA)})),e.forEach((function(e){r.assessmentFindings[e.id]=""})),t.forEach((function(e){r.checkListCorrectness[e.id]=null})),n.forEach((function(e){r.correctMedicationDosages[e.id]=UE().cloneDeep(KA)})),r}(l,f,a);return h.schemaVersion=t.schemaVersion,e.id&&(h.id=e.id),e.name&&(h.name=e.name),e.info&&(h.info=GA(h.info,e.info),e.info.patientInformation&&(h.info.patientInformation=GA(h.info.patientInformation,e.info.patientInformation))),e.SAMPLE&&(h.SAMPLE=GA(h.SAMPLE,e.SAMPLE)),e.OPQRST&&(h.OPQRST=GA(h.OPQRST,e.OPQRST)),e.vitalSigns&&Object.keys(h.vitalSigns).forEach((function(t){t in e.vitalSigns&&(h.vitalSigns[t]=GA(h.vitalSigns[t],e.vitalSigns[t]))})),e.assessmentFindings&&(h.assessmentFindings=GA(h.assessmentFindings,e.assessmentFindings),Object.keys(e.assessmentFindings).forEach((function(e){l.find((function(t){return t.id===e}))||r.push(e)})),l.forEach((function(t){t.id in e.assessmentFindings||n.push(t)}))),e.checkListCorrectness&&(h.checkListCorrectness=GA(h.checkListCorrectness,e.checkListCorrectness),Object.keys(e.checkListCorrectness).forEach((function(e){f.find((function(t){return t.id===e}))||r.push(e)})),f.forEach((function(t){t.id in e.checkListCorrectness||n.push(t)}))),e.correctMedicationDosages&&a.forEach((function(t){t.id in e.correctMedicationDosages&&(h.correctMedicationDosages[t.id]=GA(h.correctMedicationDosages[t.id],e.correctMedicationDosages[t.id]))})),void 0!==e.actions&&void 0!==e.solutions&&(e.problems.forEach((function(e,t){e.assessments.forEach((function(e){void 0===e.feedback&&(e.feedback=""),void 0===i[e.assessmentID]&&r.push(e.assessmentID)})),h.problems.push(e)})),e.solutions.forEach((function(e,t){void 0===e.strictActionOrdering&&(e.strictActionOrdering=!1),h.solutions.push(e)})),e.actions.forEach((function(e,t){0===Object.keys(e.interventionVariant).length||Object.entries(e.interventionVariant).forEach((function(t){var n=u(t,2),r=n[0],i=n[1],a=s.find((function(e){return e.id===r}));if(a){var o=typeof i;a.selectionType===JE.OOM&&"string"===o&&(e.interventionVariant[r]=[i])}else;})),h.actions.push(e),o.find((function(t){return t.id===e.interventionID}))||r.push(e.interventionID)}))),void 0===e.interventionVariantAnswers&&(e.interventionVariantAnswers={}),Object.entries(e.interventionVariantAnswers).forEach((function(t){var n=u(t,2),i=n[0],a=n[1];o.find((function(e){return e.id===i}))?(i in h.interventionVariantAnswers||(h.interventionVariantAnswers[i]={}),Object.entries(a).forEach((function(t){var n=u(t,2),a=n[0],o=(n[1],JSON.parse(a)),l=!0;if(Object.entries(o).forEach((function(e){var t=u(e,2),n=t[0],i=t[1];s.find((function(e){return e.id===n}))?c.find((function(e){return e.id===i}))||r.push(i):(l=!1,r.push(n))})),l){h.interventionVariantAnswers[i][a]={};var f=new Set(s.filter((function(e){return e.interventionID===i})).map((function(e){return e.id})));Object.entries(e.interventionVariantAnswers[i][a]).forEach((function(e){var t=u(e,2),n=t[0],o=t[1];if(f.delete(n),s.find((function(e){return e.id===n}))){var l=!0;if("string"===typeof o)c.find((function(e){return e.id===o}))||(l=!1,r.push(o));else o.forEach((function(e){c.find((function(t){return t.id===e}))||(l=!1,r.push(e))}));l&&(h.interventionVariantAnswers[i][a][n]=o)}else r.push(n)})),f.size>0&&Array.from(f).forEach((function(e){h.interventionVariantAnswers[i][a][e]=[]}))}}))):r.push(i)})),console.log("additions",n),console.log("deletions",r),h},XA=n(562),ZA=n.n(XA);function $A(e,t){return eN.apply(this,arguments)}function eN(){return(eN=k(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==n.name){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,_T(jE,"scenarios",t,n.schemaVersion);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tN(e,t){if(UE().isString(e)&&UE().isString(t))return UE().eq(e.trim(),t.trim())}var nN=function(e,t,n){var r=ZA().get(e,t);return r&&""!==r?e:(console.debug("set ".concat(t,' to defaultValue: "').concat(n)),ZA().set(e,t,n))},rN=function(e,t){var n=ZA().get(e,t);if(UE().isString(n)){var r=n.trim();if(r!==n)return console.debug("trimmed string value of ".concat(t)),ZA().set(e,t,r)}return e};function iN(e){return JSON.parse(JSON.stringify(e))}var aN=function(e){var n=e.scenario,r=e.isTemplate,i=u((0,t.useState)(!0),2),a=i[0],o=i[1],s=u((0,t.useState)(null),2),c=s[0],f=s[1],h=(0,t.useRef)(null),d=(0,l.k6)(),v=function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.name,t.target.value),e.next=3,_T(jE,"scenarios",t.target.value,"name","V2");case 3:n=e.sent,console.log(n),o(n),f(n?t.target.value:null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=k(b().mark((function e(t){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c){e.next=4;break}return console.log("scenarioName is null"),e.abrupt("return");case 4:return(r=iN(n)).name=c,i=jE.collection("scenarios").doc(),r.id=i.id,e.next=10,ET(jE,"scenarios",r);case 10:d.push("/scenario/".concat(r.id));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)("div",{className:"scenario-form-wrapper",children:(0,p.jsx)("form",{className:"scenario-form",ref:h,onSubmit:m,children:(0,p.jsxs)("div",{className:"info-wrapper",children:[r?(0,p.jsx)("h3",{children:"Please provide a new name for your cloned scenario"}):(0,p.jsx)("h3",{children:"Please give your new scenario a name"}),(0,p.jsx)("input",{type:"text",name:"scenario-name",required:!0,autoComplete:"off",onChange:v}),(0,p.jsx)("br",{}),(0,p.jsx)("span",{className:VT()("error",{hidden:a}),children:"Scenario name is not unique"}),(0,p.jsx)("br",{}),(0,p.jsx)("button",{type:"submit",children:"Submit"})]})})})},oN=function(){var e=u((0,t.useState)(null),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kT(jE,"trauma","V2");case 2:t=e.sent,r(JA({},t));case 4:case"end":return e.stop()}}),e)})))()}),[]),(0,p.jsx)(aN,{scenario:n,isClone:!1})},sN=t.createContext({scenario:void 0,updateScenarioFld:void 0,problems:void 0,solutions:void 0,actions:void 0,uniqueIDs:void 0,uniqueLabels:void 0,saveScenario:void 0,scenarioType:void 0}),uN=function(){return(0,t.useContext)(sN)},cN=function(e){var t=e.label,n=e.haveChanges,r=e.saveHandler,i=e.children;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(rA,{label:t,haveChanges:n,clickHandler:r}),(0,p.jsx)("div",{className:"scenario-form-wrapper",children:(0,p.jsx)("div",{className:"scenario-form",children:i})}),(0,p.jsx)(rA,{label:t,haveChanges:n,clickHandler:r})]})},lN="patientInformation",fN=function(){var e=(0,l.UO)().scenarioId,n=uN(),r=n.scenario,i=n.updateScenarioFld,a=n.saveScenario,o=u((0,t.useState)(null),2),s=o[0],c=o[1],f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(!1),2),m=v[0],y=v[1],g=u((0,t.useState)(!1),2),w=g[0],x=g[1],I=u((0,t.useState)(!1),2),_=I[0],E=I[1],T=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$A(s.name,r);case 2:if(e.sent){e.next=6;break}alert("scenario name is not unique"),e.next=7;break;case 6:E(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){c(ZA().set(s,e,t)),y(!0)},A=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$A(s.name,r);case 2:if(e.sent){e.next=4;break}alert("scenario name is not unique");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=e.target,n=t.id,r=t.value;S(n,r)},C=function(e){var t=e.target,n=t.id,r=t.value,i=parseInt(r,10);S(n,i)};return(0,t.useEffect)((function(){if(!s){var e={name:r.name,info:r.info};c(e),d(e)}}),[e,r,s]),(0,t.useEffect)((function(){m&&(y(!1),x(!UE().isEqualWith(s,h,tN)))}),[m,s,h]),(0,t.useEffect)((function(){if(_){E(!1),i("name",s.name),i("info",s.info),d(s),x(!1);var t=function(){var t=k(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ee,t.t1=Ee,t.t2={},t.next=5,bT(jE,e);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.t6={name:s.name,info:s.info},n=(0,t.t0)(t.t4,t.t5,t.t6),t.next=12,a(n);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[_,e,s,i,a]),s?(0,p.jsx)(cN,{label:"Save changes to Info",haveChanges:w,saveHandler:T,children:(0,p.jsxs)("div",{id:"basic-info",className:"info-wrapper",children:[(0,p.jsx)("h1",{children:"Basic Information:"}),(0,p.jsxs)("label",{children:["Scenario Name:",(0,p.jsx)("input",{id:"name",type:"text",value:ZA().get(s,"name"),onChange:N,onBlur:A})]}),(0,p.jsxs)("label",{children:["Instructor Info:",(0,p.jsx)("textarea",{id:"info.instructorInformation",value:ZA().get(s,"info.instructorInformation"),onChange:N})]}),(0,p.jsxs)("label",{children:["Dispatch Info:",(0,p.jsx)("textarea",{id:"info.dispatchInfo",value:ZA().get(s,"info.dispatchInfo"),onChange:N})]}),(0,p.jsxs)("label",{children:["Scene assessment:",(0,p.jsx)("textarea",{id:"info.sceneAssessment",value:ZA().get(s,"info.sceneAssessment"),onChange:N})]}),(0,p.jsxs)("label",{children:["Maximum time for scenario:",(0,p.jsx)("input",{id:"info.maxTime",type:"number",placeholder:"minutes",value:ZA().get(s,"info.maxTime"),onChange:C})]}),(0,p.jsx)("h1",{children:"Patient Info:"}),(0,p.jsxs)("div",{id:"pt-info",children:[(0,p.jsxs)("label",{children:["Moulage:",(0,p.jsx)("input",{type:"text",id:"info.".concat(lN,".moulage"),value:ZA().get(s,"info.patientInformation.moulage"),onChange:N})]}),(0,p.jsxs)("label",{children:["Position:",(0,p.jsx)("input",{type:"text",id:"info.".concat(lN,".position"),value:ZA().get(s,"info.patientInformation.position"),onChange:N})]}),(0,p.jsxs)("label",{children:["Actions:",(0,p.jsx)("input",{type:"text",id:"info.".concat(lN,".actions"),value:ZA().get(s,"info.patientInformation.actions"),onChange:N})]}),(0,p.jsxs)("label",{children:["Age:",(0,p.jsx)("input",{type:"number",id:"info.".concat(lN,".age"),value:ZA().get(s,"info.patientInformation.age"),onChange:C})]}),(0,p.jsxs)("label",{children:["Weight (kg):",(0,p.jsx)("input",{type:"number",id:"info.".concat(lN,".weight"),value:ZA().get(s,"info.patientInformation.weight"),onChange:C})]}),(0,p.jsxs)("label",{children:["Gender:",(0,p.jsx)("input",{type:"text",id:"info.".concat(lN,".gender"),value:ZA().get(s,"info.patientInformation.gender"),onChange:N})]})]})]})}):(0,p.jsx)("div",{children:"loading..."})},hN=["BP","P","R","Skin","Spo2","ETCO2","GCS","Glucose","Pain","Temp"],dN=["initial","good","bad"],pN=["S","A","M","P","L","E"],vN=["O","P","Q","R","S","T"],mN=function(){var e=(0,l.UO)().scenarioId,n=uN(),r=n.scenario,i=n.updateScenarioFld,a=n.saveScenario,o=u((0,t.useState)(null),2),s=o[0],c=o[1],f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(!1),2),m=v[0],y=v[1],g=u((0,t.useState)(!1),2),w=g[0],x=g[1],I=u((0,t.useState)(!1),2),_=I[0],E=I[1],T=function(e){var t=e.target;!function(e,t){c(ZA().set(s,e,t)),x(!0)}(t.id,t.value)};return(0,t.useEffect)((function(){if(!s){var e={vitalSigns:r.vitalSigns,SAMPLE:r.SAMPLE,OPQRST:r.OPQRST};d(e),c(e)}}),[e,r,s]),(0,t.useEffect)((function(){if(w){var e=!UE().isEqualWith(h,s,tN);y(e),console.log("state has changes",e),x(!1)}}),[w,h,s]),(0,t.useEffect)((function(){if(_){E(!1),i("vitalSigns",s.vitalSigns),i("SAMPLE",s.SAMPLE),i("OPQRST",s.OPQRST),d(s),y(!1);var t=function(){var t=k(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ee,t.t1=Ee,t.t2={},t.next=5,bT(jE,e);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.t6={vitalSigns:s.vitalSigns,SAMPLE:s.SAMPLE,OPQRST:s.OPQRST},n=(0,t.t0)(t.t4,t.t5,t.t6),t.next=12,a(n);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[_,a,i,s,e]),s?(0,p.jsxs)(cN,{label:"Save changes to Patient Status",haveChanges:m,saveHandler:function(e){!function(){var e=Ee({},s);hN.forEach((function(t){dN.forEach((function(n){var r="vitalSigns.".concat(t,".").concat(n);e=nN(e,r,"Unable to assess"),e=rN(e,r)}))})),pN.forEach((function(t){var n="SAMPLE.".concat(t);e=nN(e,n,"unknown"),e=rN(e,n)})),vN.forEach((function(t){var n="OPQRST.".concat(t);e=nN(e,n,"unable to assess"),e=rN(e,n)})),UE().isEqual(s,e)||(console.log("some fields were cleaned. updating state"),c(e))}(),E(!0)},children:[(0,p.jsxs)("div",{className:"info-box vitals",children:[(0,p.jsx)("h2",{children:"Vital Signs"}),(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Vital"}),(0,p.jsx)("th",{children:"Initial Value"}),(0,p.jsx)("th",{children:"Good Reassessment Value"}),(0,p.jsx)("th",{children:"Bad Reassessment Value"})]})}),(0,p.jsx)("tbody",{children:hN.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e}),dN.map((function(t){return(0,p.jsx)("td",{children:(0,p.jsx)("input",{id:"vitalSigns.".concat(e,".").concat(t),type:"text",value:ZA().get(s,"vitalSigns.".concat(e,".").concat(t)),onChange:T})},"".concat(e,"-").concat(t))}))]},e)}))})]})]}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)("div",{style:{flex:1,width:"100%"},children:(0,p.jsxs)("div",{className:"info-wrapper",style:{width:"100%"},children:[(0,p.jsx)("h2",{children:"SAMPLE"}),(0,p.jsx)("table",{style:{width:"100%"},children:(0,p.jsx)("tbody",{children:pN.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e}),(0,p.jsx)("td",{children:(0,p.jsx)("input",{id:"SAMPLE.".concat(e),type:"text",size:"80",value:ZA().get(s,"SAMPLE.".concat(e)),onChange:T})})]},"SAMPLE-".concat(e))}))})})]})}),(0,p.jsx)("div",{style:{flex:1},children:(0,p.jsxs)("div",{className:"info-wrapper",children:[(0,p.jsx)("h2",{children:"OPQRST"}),(0,p.jsx)("table",{children:(0,p.jsx)("tbody",{children:vN.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e}),(0,p.jsx)("td",{children:(0,p.jsx)("input",{id:"OPQRST.".concat(e),type:"text",size:"80",value:ZA().get(s,"OPQRST.".concat(e)),onChange:T})})]},"OPQRST-".concat(e))}))})})]})})]})]}):(0,p.jsx)("div",{children:"loading..."})},yN=function(e){var t=e.depth;return e.subPhase&&(t+=1),"".concat(20*t,"px")},gN=function(e){var t=e.item,n=e.scenario,r=e.changeHandler;switch(t.type){case YE.PHASE:return(0,p.jsx)("h2",{className:"list-item header-item",children:t.label});case YE.SUB_PHASE:return(0,p.jsx)("h3",{className:"list-item header-item",style:{paddingLeft:"20px"},children:t.label});case YE.CL_HEADING:return(0,p.jsx)("h4",{className:"list-item header-item",style:{paddingLeft:"".concat(yN(t))},children:t.label});default:return(0,p.jsxs)("label",{style:{paddingLeft:"".concat(yN(t))},children:[t.abbrLabel,": \xa0",(0,p.jsx)("input",{type:"text",id:"assessmentFindings.".concat(t.id),size:"80",value:ZA().get(n,"assessmentFindings.".concat(t.id)),onChange:r})]})}},bN=[YE.AWO,YE.CL_PROMPT,YE.DECISION,YE.DECISION_OPTION,YE.REQURED],wN=function(){var e=(0,l.UO)().scenarioId,n=uN(),r=n.scenario,i=n.saveScenario,a=n.updateScenarioFld,o=n.scenarioType,s=u((0,t.useState)(null),2),c=s[0],f=s[1],h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)(null),2),y=m[0],g=m[1],w=u((0,t.useState)(!1),2),x=w[0],I=w[1],_=u((0,t.useState)(!1),2),E=_[0],T=_[1],S=u((0,t.useState)(!1),2),A=S[0],N=S[1],C=function(e){!function(){var e=Ee({},d);Object.keys(d.assessmentFindings).forEach((function(t){var n="assessmentFindings.".concat(t);e=nN(e,n,"unremarkable"),e=rN(e,n)})),UE().isEqual(d,e)||v(e)}(),N(!0)},D=function(e){var t=e.target,n=t.id,r=t.value;v(ZA().set(d,n,r)),I(!0)};return(0,t.useEffect)((function(){if(!c){var e=o.checkListMetaData.filter((function(e){return!bN.includes(e.type)}));f(e);var t={assessmentFindings:r.assessmentFindings};v(t),g(t)}}),[e,c,r,o]),(0,t.useEffect)((function(){x&&(I(!1),UE().isEqualWith(d,y,tN)||T(!0))}),[x,d,y]),(0,t.useEffect)((function(){if(A){N(!1),a("assessmentFindings",d.assessmentFindings),g(d),T(!1);var t=function(){var t=k(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ee,t.t1=Ee,t.t2={},t.next=5,bT(jE,e);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.t6={assessmentFindings:d.assessmentFindings},n=(0,t.t0)(t.t4,t.t5,t.t6),t.next=12,i(n);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[A,d,y,e,i,a]),c?(0,p.jsxs)("div",{className:"scenario-form-wrapper",children:[(0,p.jsx)(rA,{label:"Save changes to Findings",haveChanges:E,clickHandler:C}),(0,p.jsx)("div",{className:"scenario-form",children:(0,p.jsxs)("div",{id:"scenario-steps",children:[(0,p.jsx)("h1",{children:"Assessment step findings"}),c.map((function(e){return(0,p.jsx)(gN,{item:e,scenario:d,changeHandler:D},e.id)}))]})}),(0,p.jsx)(rA,{label:"Save changes to Findings",haveChanges:E,clickHandler:C})]}):(0,p.jsx)("div",{children:"Loading..."})},kN=function(e){return e.abbrLabel&&""!==e.abbrLabel?e.abbrLabel:e.label},xN=function(){var e=(0,l.UO)().scenarioId,n=uN(),r=n.scenario,i=n.saveScenario,a=n.updateScenarioFld,o=n.scenarioType,s=u((0,t.useState)(null),2),c=s[0],f=s[1],h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)(null),2),y=m[0],g=m[1],w=u((0,t.useState)(!1),2),I=w[0],_=w[1],E=u((0,t.useState)(!1),2),T=E[0],S=E[1],A=u((0,t.useState)(null),2),N=A[0],C=A[1],D=u((0,t.useState)(!1),2),P=D[0],O=D[1],R=function(e){var t=e.target,n=t.name,r=t.value;f((function(e){return Ee(Ee({},e),{},x({},n,r))})),S(!0)};return(0,t.useEffect)((function(){if(!y){var e=r.checkListCorrectness;f(e),v(e);var t=[],n={};Object.entries(e).forEach((function(e){var r=u(e,2),i=r[0];r[1];t.push(o.getDecisionWithOptions(i)),n[i]=!1})),g(t),C(n)}}),[e,y,r.checkListCorrectness,o]),(0,t.useEffect)((function(){T&&(S(!1),UE().isEqual(c,d)||_(!0))}),[T,c,d]),(0,t.useEffect)((function(){if(P){O(!1),_(!1),a("checkListCorrectness",c);var t=function(){var t=k(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ee,t.t1=Ee,t.t2={},t.next=5,bT(jE,e);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.t6={checkListCorrectness:c},n=(0,t.t0)(t.t4,t.t5,t.t6),t.next=12,i(n);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[P,e,c,a,i]),c?(0,p.jsx)(cN,{label:"Save changes to Checklist Correctness",haveChanges:I,saveHandler:function(e){(function(){var e=!1,t={};return Object.entries(c).forEach((function(n){var r=u(n,2),i=r[0];r[1]?t[i]=!1:(e=!0,t[i]=!0)})),e&&C(t),!e})()&&O(!0)},children:(0,p.jsx)("div",{id:"checklist-options",className:"info-wrapper",children:y.map((function(e){return(0,p.jsxs)("div",{style:{paddingBottom:"20px"},children:[(0,p.jsx)("i",{children:kN(e)}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{className:VT()("error",{hidden:!N[e.id]}),children:"Please select an option"}),e.options.map((function(t){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"radio",name:e.id,value:t.id,checked:c[e.id]===t.id,onChange:R}),kN(t)]}),(0,p.jsx)("br",{})]},t.id)}))]},e.id)}))})}):(0,p.jsx)("div",{children:"Loading..."})};function IN(e){var n=e.parent,r=e.med,i=e.update,a=u((0,t.useState)(!1),2),o=a[0],s=a[1],c=u((0,t.useState)([]),2),l=c[0],f=c[1];(0,t.useEffect)((function(){f(JS.filter((function(e){return r.contraindications.includes(e)})))}),[r.contraindications]);return(0,p.jsxs)("div",{className:"contraindications",children:[(0,p.jsx)("div",{className:"dropdown",onClick:function(){return s((function(e){return!e}))},children:"Contraindications \u2b9f"}),(0,p.jsx)("div",{className:"checklist ".concat(o?"":"hidden"),children:l.map((function(e){return(0,p.jsx)("div",{className:"contraindication",children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",onChange:i,value:e,name:"contraindications",defaultChecked:n.contraindications.includes(e)}),e]})},e)}))})]})}var _N=function(e){e.active;var n=uN(),r=n.scenario,i=n.saveScenario,a=n.scenarioType,o=(0,t.useRef)(null),s=r.info.patientInformation.age>=14,u=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,i(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)("div",{className:"scenario-form-wrapper",children:(0,p.jsxs)("form",{className:VT()("scenario-form",{"scenario-view-hidden":!1}),ref:o,children:[(0,p.jsx)("button",{className:"save-changes",type:"submit",onClick:u,children:"Save Changes"}),(0,p.jsxs)("div",{className:"info-wrapper",id:"medications",children:[(0,p.jsx)("h1",{children:"Medication Dosages"}),(0,p.jsx)("div",{className:"meds-wrapper",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Medication"}),(0,p.jsx)("th",{children:"Administrative Route"}),(0,p.jsx)("th",{children:"Initial Dosage"}),(0,p.jsx)("th",{children:"Contraindications"})]})}),(0,p.jsx)("tbody",{children:a._medications.map((function(e){return(0,p.jsx)(EN,{med:e,isAdult:s,scenario:r},e.id)}))})]})})]}),(0,p.jsx)("button",{className:"save-changes",type:"submit",onClick:u,children:"Save Changes"})]})})},EN=function(e){var t=e.scenario,n=e.med,r=e.isAdult,i=t.correctMedicationDosages[n.id],a=r?"adult":"pediatric";i.route||(i.route=""),i.contraindications||(i.contraindications=[]);return(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:n.label}),(0,p.jsx)("td",{children:(0,p.jsx)("div",{className:"route-dropdown",children:(0,p.jsxs)("select",{id:"correctMedicationDosages-".concat(n.id,"-route"),defaultValue:i.route,onChange:function(e){console.log(e.target.value),i.route=e.target.value},children:[(0,p.jsx)("option",{hidden:!0,children:"-- Select Route --"}),n[a].routes.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))]})})}),(0,p.jsxs)("td",{children:[(0,p.jsx)("p",{className:"value-hint",children:n[a].initialDosage||"None Set"}),(0,p.jsx)("input",{type:"text",id:"correctMedicationDosages-".concat(n.id,"-initialDosage"),defaultValue:i.initialDosage,name:"initialDosage",onChange:function(e){i[e.target.name]=e.target.value}})]}),(0,p.jsx)("td",{align:"center",children:(0,p.jsx)(IN,{med:n,parent:i,update:function(e){var t=e.target.name,n=e.target.value;e.target.checked?i[t].push(n):i[t].splice(i[t].indexOf(n),1)}})})]},"".concat(n.id,"-row"))},TN=function(e){var t=e.name,n=e.options,r=e.getter,i=e.setter,a=function(e){var t=e.target.value;i(t)};return(0,p.jsx)("ul",{style:{marginLeft:"5px",marginBottom:"10px",listStyle:"none"},children:n.map((function(e,n){return(0,p.jsx)("li",{children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"radio",name:t,value:e.value,checked:e.value===r(),onChange:a}),"\xa0 ",e.label]})},n)}))})},SN=function(e){var t=e.intv,n=e.variant,r=e.prompt,i=e.stateGetter,a=e.stateSetter;return(0,p.jsxs)("div",{style:{marginLeft:"10px"},children:[(0,p.jsx)("i",{children:r.label}),(0,p.jsx)(TN,{name:"".concat(t.id,".").concat(n,".").concat(r.id),options:r.answers.map((function(e){return{value:e.id,label:(t=e,t.abbrLabel?t.abbrLabel:t.label)};var t})),getter:function(){return i(t.id,n,r.id)},setter:function(e){return a(t.id,n,r.id,e)}})]})},AN=function(e){var n=e.intvID,r=e.variantJSON,i=e.intvLabel,a=e.variantDesc,o=e.contexts,s=e.intvGetter,c=e.promptValueGetter,l=e.promptValueSetter,f=u((0,t.useState)(null),2),h=f[0],d=f[1];return(0,t.useEffect)((function(){h||d(s(n))}),[n,h,s]),h?(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Intervention: "})," ",i,""===a?" ":": ".concat(a," "),(0,p.jsx)("b",{children:" Used By: "})," ",o]}),(0,p.jsx)("ul",{children:h.prompts.map((function(e){return(0,p.jsx)("li",{children:(0,p.jsx)(SN,{intv:h,variant:r,prompt:e,stateGetter:c,stateSetter:l})},e.id)}))})]}):(0,p.jsx)("div",{children:"calculating"})},NN=function(){var e=(0,l.UO)().scenarioId,n=uN(),r=n.scenario,i=n.scenarioType,a=n.updateScenarioFld,o=n.saveScenario,s=u((0,t.useState)(null),2),c=s[0],f=s[1],h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)(),2),y=m[0],g=m[1],w=u((0,t.useState)(!1),2),x=w[0],I=w[1],_=function(){var t=k(b().mark((function t(n){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a("interventionVariantAnswers",y),t.next=3,bT(jE,e);case 3:return(r=t.sent).interventionVariantAnswers=y,t.next=7,o(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(e){return c.find((function(t){return t.id===e}))},T=function(e,t,n){return y[e][t][n]},S=function(e,t,n,r){var i="".concat(e,".").concat(t,".").concat(n);g(ZA().set(y,i,r))};(0,t.useEffect)((function(){if(!c){var e=Array.from(new Set(r.actions.filter((function(e){return e.protocolRelationship!==ZE.CONTRA})).map((function(e){return e.interventionID})))).filter((function(e){var t=i.getIntervention(e);return void 0!==t.prompts&&t.prompts.length>0}));f(e.map((function(e){return i.getInterventionForm(e)})))}}),[c,r.actions,i]),(0,t.useEffect)((function(){if(c&&!d){var e=c.map((function(e){return e.id})),t=r.actions.filter((function(t){return e.includes(t.interventionID)})).map((function(e){return Object.assign({},e,{interventionVariant:(t=e.interventionVariant,FE(t))});var t})),n=rT(t,"interventionID"),a=[];Object.entries(n).forEach((function(e){var t=u(e,2),n=t[0],o=t[1],s=rT(o,"interventionVariant");Object.entries(s).forEach((function(e){var t=u(e,2),o=t[0],s=t[1],l=JSON.parse(o),f="";Object.entries(l).forEach((function(e){var t=u(e,2),n=t[0],r=t[1],a=i.getPrompt(n).abbrLabel,o=i.getAnswer(r).abbrLabel;f+=" ".concat(a," ").concat(o)}));var h=s.map((function(e){var t=r.problems.find((function(t){return t.id===e.problemID})),n=r.solutions.find((function(t){return t.id===e.solutionID}));return"".concat(t.label," - ").concat(n.label)})).join(", ");a.push({intvID:n,variantJSON:o,intvLabel:c.find((function(e){return e.id===n})).label,variantDesc:f,contexts:h})}))})),v(a)}}),[e,c,d,r.problems,r.solutions,r.actions,i]);return(0,t.useEffect)((function(){if(d&&!y){var e=r.interventionVariantAnswers,t={};d.forEach((function(n){var r=n.intvID,i=n.variantJSON;r in t||(t[r]={}),t[r][i]={},c.find((function(e){return e.id===r})).prompts.forEach((function(n){e[r]&&e[r][i]&&e[r][i][n.id]?t[r][i][n.id]=e[r][i][n.id]:t[r][i][n.id]=function(e){return e.selectionType===JE.ONE?"":[]}(n)}))})),g(t)}}),[y,r,c,d]),(0,t.useEffect)((function(){if(y){var e=!0;Object.keys(y).forEach((function(t){Object.keys(y[t]).forEach((function(n){Object.entries(y[t][n]).forEach((function(t){var n=u(t,2),r=(n[0],n[1]);(""===r||"object"===typeof r&&0===r.length)&&(e=!1)}))}))})),I(e)}}),[y]),y?(0,p.jsx)(cN,{label:"Save Changes to Intervention Answers",haveChanges:x,saveHandler:_,children:(0,p.jsx)("div",{id:"intv-answers",className:"info-wrapper",children:d.map((function(e,t){return(0,p.jsx)("div",{style:{marginBottom:"20px"},children:(0,p.jsx)(AN,Ee({intvGetter:E,promptValueGetter:T,promptValueSetter:S},e))},t)}))})}):(0,p.jsx)("div",{children:"loading..."})},CN=function(e){var t=e.breadcrumbs,n=void 0===t?[]:t,r=e.children,i=(0,l.UO)().scenarioId,a=uN(),o=a.scenario,s=a.saveScenario,u=function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(jE,i);case 2:return(n=e.sent).problems=o.problems,n.solutions=o.solutions,n.actions=o.actions,e.next=8,s(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(QT,{crumbs:n}),(0,p.jsx)(rA,{label:"Save changes to Problems and Solutions",haveChanges:!0,clickHandler:u}),r,(0,p.jsx)(rA,{label:"Save changes to Problems and Solutions",haveChanges:!0,clickHandler:u})]})},DN=["widget"],PN=function(e){var t=e.entity,n=e.fld,r=n.widget,i=eT(n,DN);return(0,p.jsx)(r,Ee({entity:t},i))},ON=function(e){var t=e.entity,n=e.name,r=e.changeHandler;return(0,p.jsx)("input",{type:"checkbox",checked:t[n],onChange:function(e){var i=e.target.checked;r(t.id,n,i)}})},RN=function(e){var t=e.entity,n=e.name,r=e.options,i=void 0===r?[]:r,a=e.valueAttr,o=void 0===a?"id":a,s=e.labelAttr,u=void 0===s?"label":s,c=e.changeHandler;return(0,p.jsxs)("select",{value:t[n],onChange:function(e){var r=e.target.value;c(t.id,n,r)},children:[(0,p.jsx)("option",{value:""}),i.map((function(e){return(0,p.jsx)("option",{value:e[o],children:e[u]},e[o])}))]})},LN=function(e){var n=e.entity,r=e.name,i=e.valueGetter,a=void 0===i?null:i,o=e.textSize,s=void 0===o?"medium":o,c=e.indentAttr,l=void 0===c?null:c,f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(null),2),m=v[0],y=v[1];return(0,t.useEffect)((function(){if(!h){var e=a?a(n,r):n[r];e?(d(e),y(null)):(d(""),y("item no longer exists"))}}),[n,r,h,a]),h?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{style:{fontSize:s,paddingLeft:l?"".concat(20*n[l],"px"):0},children:h}),(0,p.jsx)("br",{}),(0,p.jsx)("span",{className:VT()("err-msg",{hidden:!m}),children:m})]}):(0,p.jsx)("span",{})},jN=function(e){var t=e.entity,n=e.name,r=e.cols,i=void 0===r?"40":r,a=e.rows,o=void 0===a?"1":a,s=e.changeHandler,u=e.valueGetter,c=void 0===u?null:u;return(0,p.jsx)("textarea",{cols:i,rows:o,value:c?c(t,n):t[n],onChange:function(e){var r=e.target.value;s(t.id,n,r)}})},MN=function(e){var t=e.entity,n=e.name,r=e.size,i=void 0===r?"40":r,a=e.changeHandler,o=e.valueGetter,s=void 0===o?null:o,u=e.indentAttr,c=void 0===u?null:u;return(0,p.jsx)("input",{type:"text",size:i,value:s?s(t,n):t[n],onChange:function(e){var r=e.target.value;a(t.id,n,r)},style:{paddingLeft:c?"".concat(20*t[c],"px"):0}})},UN=function(e){var t=e.heading,n=e.record,r=e.fields;return(0,p.jsxs)("div",{className:"details-editor",children:[!!t&&(0,p.jsxs)("h2",{children:[t," "]}),(0,p.jsxs)("table",{children:[(0,p.jsxs)("colgroup",{children:[(0,p.jsx)("col",{span:"1",style:{width:"15%"}}),(0,p.jsx)("col",{span:"1",style:{width:"85%"}})]}),(0,p.jsx)("tbody",{children:r.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{fontWeight:"bold",paddingRight:"10px",textAlign:"right"},children:e.label}),(0,p.jsx)("td",{children:(0,p.jsx)(PN,{entity:n,fld:e})})]},e.name)}))})]})]})},FN=function(e){return console.log("noop",e)},VN=function(e){var n=e.heading,r=e.records,i=e.fields,a=e.keyField,o=void 0===a||a,s=e.allowChangeOrder,l=void 0!==s&&s,f=e.onMoveUp,h=void 0===f?FN:f,d=e.onMoveDown,v=void 0===d?FN:d,m=e.allowChangeIndent,y=void 0!==m&&m,g=e.changeIndentAttr,b=void 0===g?null:g,w=e.onMoveLeft,k=void 0===w?FN:w,x=e.onMoveRight,I=void 0===x?FN:x,_=e.editLink,E=void 0===_||_,T=e.editBaseURL,S=e.allowDelete,A=void 0===S||S,N=e.onDelete,C=void 0===N?FN:N,D=e.children,P=u((0,t.useState)(null),2),O=P[0],R=P[1];return(0,t.useEffect)((function(){R(null)}),[n]),(0,t.useEffect)((function(){if(!O){var e=0,t=0,n=0;l&&(e=3,y&&(e=6)),E&&(t=4),A&&(n=1);var r=100-(e+t+n),a=i.length,o=i.filter((function(e){return void 0!==e.colWidthPct})).map((function(e){return e.colWidthPct})),s=o.length,u=0;s>0&&(u=o.reduce((function(e,t){return e+t}),0));var c=[];e>0&&c.push({label:"",width:"".concat(e,"%")}),t>0&&c.push({label:"",width:"".concat(t,"%")});var f=0;if(s<a)f=(100-u)/(a-s);i.forEach((function(e){var t=e.label,n=e.colWidthPct;void 0===n&&(n=f);var i=.01*r*n;c.push({label:t,width:"".concat(i,"%")})})),n>0&&c.push({label:"",width:"".concat(n,"%")}),R(c)}}),[O,l,y,E,A,i]),O?(0,p.jsx)("div",{className:"inline-editor",children:(0,p.jsxs)("fieldset",{children:[(0,p.jsx)("legend",{children:n}),0===r.length?(0,p.jsxs)("p",{children:["There currently aren't any ",n.toLowerCase()]}):(0,p.jsxs)("table",{children:[(0,p.jsx)("colgroup",{children:O.map((function(e,t){return(0,p.jsx)("col",{span:"1",style:{width:e.width}},t)}))}),(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:O.map((function(e,t){return(0,p.jsxs)("th",{children:[" ",e.label," "]},t)}))})}),(0,p.jsx)("tbody",{children:r.map((function(e,t,n){return(0,p.jsxs)("tr",{children:[l&&(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(dA,{n:t,of:n.length-1,depth:e[b]?e[b]:1,allowChangeIndent:y,onMoveUp:h,onMoveDown:v,onMoveLeft:k,onMoveRight:I})}),E&&(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(c.NavLink,{to:"".concat(T,"/").concat(e.id),children:"edit"})}),i.map((function(t){return(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(PN,{entity:e,fld:t})},t.name)})),A&&(0,p.jsx)("td",{style:{borderBottom:"1px solid black"},children:(0,p.jsx)(oA,{item:e,onDelete:C})})]},o?e.id:t)}))})]}),D]})}):(0,p.jsx)("div",{children:"loading..."})},qN=function(e){var n=e.model,r=e.addHandler,i=e.uniqueIDs,a=void 0===i?[]:i,o=e.uniqueLabels,s=void 0===o?[]:o,c=e.idGenerator,l=void 0===c?null:c,f=u((0,t.useState)(!1),2),h=f[0],d=f[1],v=u((0,t.useState)(null),2),m=v[0],y=v[1],g=u((0,t.useState)(null),2),b=g[0],w=g[1],k=u((0,t.useState)(""),2),x=k[0],I=k[1],_=u((0,t.useState)(""),2),E=_[0],T=_[1],S=u((0,t.useState)(""),2),A=S[0],N=S[1],C=u((0,t.useState)(!1),2),D=C[0],P=C[1];return(0,t.useEffect)((function(){m&&m===n.type||(y(n.type),d(n.labelsUnique),T(""),w(""))}),[n,m]),(0,t.useEffect)((function(){D&&(P(!1),""!==x||""!==A?alert("Please correct errors before submitting"):(r(m,b,E),w(""),I(""),T(""),N("")))}),[D,r,m,b,E,x,A]),(0,p.jsx)("div",{className:"add-entity",children:(0,p.jsxs)("table",{style:{width:"100%"},children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),!l&&(0,p.jsx)("th",{children:"ID"}),(0,p.jsx)("th",{children:"Label"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsxs)("b",{children:["Add ",n.name]})}),!l&&(0,p.jsx)("td",{children:(0,p.jsx)(bA,{value:b,errMsg:x,onChange:function(e){var t=e.target.value;w(t),I(a.includes(t)?"Not Unique":"")}})}),(0,p.jsx)("td",{children:(0,p.jsx)(bA,{value:E,size:"80",errMsg:A,onChange:function(e){var t=e.target.value;T(t),l&&w(l()),h&&N(s.includes(t)?"Not Unique":"")}})}),(0,p.jsx)("td",{children:(0,p.jsx)(gA,{addHandler:function(e){""===b&&I("Please enter an ID"),""===E&&N("Please enter a label"),P(!0)}})})]})})]})})},BN=function(e){var t=e.listName,n=(e.currValue,e.choices),r=e.changeHandler;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"text",list:t,size:"120",onChange:r}),(0,p.jsx)("datalist",{id:t,children:n.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.label},e.id)}))})]})},zN=function(e){var t=e.currValue,n=e.choices,r=e.changeHandler;return(0,p.jsxs)("select",{value:t,onChange:r,children:[(0,p.jsx)("option",{value:""}),n.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.label},e.id)}))]})},WN=function(e){var n=e.model,r=e.choices,i=void 0===r?[]:r,a=e.search,o=void 0!==a&&a,s=e.addHandler,c=u((0,t.useState)(""),2),l=c[0],f=c[1],h=u((0,t.useState)(""),2),d=h[0],v=h[1],m=u((0,t.useState)(null),2),y=m[0],g=m[1],b=function(e){return f(e.target.value)};return(0,t.useEffect)((function(){y||g("".concat(n.type,"-list"))}),[n,y]),(0,p.jsx)("div",{className:"add-entity",children:(0,p.jsx)("table",{style:{width:"100%"},children:(0,p.jsx)("tbody",{children:(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[" ",(0,p.jsxs)("b",{children:["Add ",n.name]})," "]}),(0,p.jsxs)("td",{children:[o?(0,p.jsx)(BN,{listName:y,currValue:l,choices:i,changeHandler:b}):(0,p.jsx)(zN,{currValue:l,choices:i,changeHandler:b}),(0,p.jsx)("br",{}),(0,p.jsxs)("span",{className:"err-msg",children:[" ",d," "]})]}),(0,p.jsxs)("td",{children:[" ",(0,p.jsx)(gA,{addHandler:function(e){""!==l?(s(n.type,"",l),f(""),v("")):v("Please make a selection.")}})," "]})]})})})})},QN=/^problem-(\d+)$/,KN=function(){var e=(0,l.UO)(),t=(0,l.$B)().url,n=uN(),r=n.scenario,i=n.problems,a=n.solutions,o=n.actions,s=n.uniqueIDs,u=n.uniqueLabels,c=n.updateScenarioFld,f=function(e,t,n){console.log(e,t,n);var a=Ee(Ee({},r.problems.find((function(t){return t.id===e}))),{},x({},t,n));i.update(a)};return(0,p.jsx)(CN,{breadcrumbs:[ES(e)],children:(0,p.jsx)(VN,{heading:"Problems",records:r.problems,fields:[{name:"label",label:"Label",colWidthPct:94,widget:MN,size:120,changeHandler:f},{name:"lifeThreat",label:"Is Life Threat",colWidthPct:6,widget:ON,changeHandler:f}],editLink:!0,editBaseURL:t,allowChangeOrder:!0,onMoveUp:function(e){c("problems",TA(r.problems,e))},onMoveDown:function(e){c("problems",SA(r.problems,e))},onDelete:function(e){var t,n=r.problems.find((function(t){return t.id===e.id})),s='Are you sure you wish to delete problem "'.concat(n.label,'"'),u=r.solutions.filter((function(t){return t.problemID===e.id})),c=r.actions.filter((function(t){return t.problemID===e.id})),l=(t="solutionID",c.reduce((function(e,n){return Ee(Ee({},e),{},x({},n[t],(e[n[t]]||[]).concat(n)))}),{}));u.length>0&&(s+=" and all of it's children?\n",s+="Solutions:\n------------------\n",u.forEach((function(e){s+="\t".concat(e.label,"\n"),s+="\tActions:\n",l[e.id].forEach((function(e){s+="\t\t".concat(e.interventionID,"\n")}))}))),window.confirm(s)&&(c.forEach((function(e){return o.remove(e.id)})),u.forEach((function(e){return a.remove(e.id)})),i.remove(n.id))},children:(0,p.jsx)(qN,{model:{type:"problem",name:"Problem",labelsUnique:!1},addHandler:function(e,t,n){var r=function(e,t){return{id:e,label:t,lifeThreat:!1,assessments:[],vitals:[],notes:[],solutions:[]}}(t,n);i.add(r)},uniqueIDs:s,uniqueLabels:u,idGenerator:function(){var e=1,t=UE().max(r.problems.map((function(e){return parseInt(e.id.match(QN)[1],10)})));t&&(e=t+1);var n="problem-".concat(e);return console.log(n),n}})})})},GN=["BP","P","R","Skin","Sp02","ETCO2","GCS","Glucose","Pain","Temp"].map((function(e){return{id:e,label:e}})),HN=["initial","good","bad"].map((function(e){return{id:e,label:e}})),YN=/^problem-\d+-assessment-(\d+)$/,JN=/^problem-\d+-note-(\d+)$/,XN=/^problem-\d+-solution-(\d+)$/,ZN=function(){var e=(0,l.UO)(),n=e.probID,r=(0,l.$B)().url,i=uN(),a=i.scenario,o=i.scenarioType,s=i.problems,c=i.solutions,f=i.uniqueIDs,h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)(null),2),y=m[0],g=m[1],b=u((0,t.useState)(!1),2),w=b[0],k=b[1],I=u((0,t.useState)(!1),2),_=I[0],E=I[1],T=function(e,t,r){var i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=1;(i=a?UE().max(e.map((function(e){return parseInt(e.id.match(t)[1],10)}))):UE().max(e.map((function(e){return parseInt(e.match(t)[1],10)}))))&&(o=i+1);var s="".concat(n,"-").concat(r,"-").concat(o);return s},S=function(e,t,n){v((function(e){return Ee(Ee({},e),{},x({},t,n))})),E(!0)},A=function(e,t,n){var r=a.solutions.find((function(t){return t.id===e}));r?(c.update(Ee(Ee({},r),{},x({},t,n))),k(!0)):console.log("solution ".concat(e," not found"))};return(0,t.useEffect)((function(){var e=a.problems.find((function(e){return e.id===n}));e?(e.assessments.forEach((function(e){void 0===e.feedback&&(e.feedback="")})),v(e),k(!0)):console.log("problem: ".concat(n," not found"))}),[n,a.problems]),(0,t.useEffect)((function(){if(w){var e=a.solutions.filter((function(e){return d.solutions.includes(e.id)})),t=[];d.solutions.forEach((function(n){var r=e.find((function(e){return e.id===n}));r?t.push(r):console.log("solution ".concat(n," not found in matches. race condition??"))})),g(t),k(!1)}}),[w,a,d]),(0,t.useEffect)((function(){_&&(s.update(d),E(!1))}),[_,s,d]),y?(0,p.jsxs)(CN,{breadcrumbs:[ES(e),TS(e,d.label)],children:[(0,p.jsx)(UN,{heading:"Problem",record:d,fields:[{name:"id",label:"ID",widget:LN},{name:"label",label:"Label",widget:MN,changeHandler:S},{name:"lifeThreat",label:"Life Threat",widget:ON,changeHandler:S}]}),(0,p.jsx)(VN,{heading:"Assessments",records:d.assessments,fields:[{name:"assessmentID",label:"Assessment ID",colWidthPct:20,widget:LN,textSize:"smaller"},{name:"label",label:"Assessment Label",colWidthPct:40,widget:LN,valueGetter:function(e,t){var n=o.getChecklistItem(e.assessmentID);return n?n.abbrLabel:null}},{name:"feedback",label:"Feedback",colWidthPct:40,widget:MN,size:60,changeHandler:function(e,t,n){var r=Ee(Ee({},d.assessments.find((function(t){return t.id===e}))),{},x({},t,n));S(0,"assessments",_A(d.assessments,r))}}],editLink:!1,onDelete:function(e){return S(0,"assessments",EA(d.assessments,e.id))},children:(0,p.jsx)(WN,{model:{type:YE.ASSESS,name:"Assessment",labelsUnique:!1},search:!0,choices:o.checkListMetaData.filter((function(e){return e.type===YE.ASSESS})),addHandler:function(e,t,n){var r={id:T(d.assessments,YN,"assessment"),assessmentID:n,feedback:""};S(0,"assessments",IA(d.assessments,r))}})}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,p.jsx)("div",{style:{flex:"1 1 auto"},children:(0,p.jsx)(VN,{heading:"Vitals",records:d.vitals,fields:[{name:"id",label:"ID",colWidthPct:40,widget:LN,textSize:"small"},{name:"variant",label:"Variant",colWidthPct:60,widget:RN,options:HN,changeHandler:function(e,t,n){var r=Ee(Ee({},d.vitals.find((function(t){return t.id===e}))),{},x({},t,n));S(0,"vitals",_A(d.vitals,r))}}],allowChangeOrder:!1,editLink:!1,onDelete:function(e){return S(0,"vitals",EA(d.vitals,e.id))},children:(0,p.jsx)(WN,{model:{type:"vitals",name:"Vital sign",labelsUnique:!1},choices:GN,addHandler:function(e,t,n){var r={id:n,variant:""};S(0,"vitals",IA(d.vitals,r))},uniqueIDs:[]})})}),(0,p.jsx)("div",{style:{flex:"1 1 auto"},children:(0,p.jsx)(VN,{heading:"Notes",records:d.notes,fields:[{name:"label",label:"Label",colWidthPct:100,widget:jN,cols:100,rows:2,changeHandler:function(e,t,n){var r=Ee(Ee({},d.notes.find((function(t){return t.id===e}))),{},x({},t,n));S(0,"notes",_A(d.notes,r))}}],allowChangeOrder:!1,editLink:!1,onDelete:function(e){return S(0,"notes",EA(d.notes,e.id))},children:(0,p.jsx)(qN,{model:{type:"note",name:"Note",labelsUnique:!1},addHandler:function(e,t,n){var r={id:t,label:n};S(0,"notes",IA(d.notes,r))},uniqueIDs:f,uniqueLabels:[],idGenerator:function(){return T(d.notes,JN,"note")}})})})]}),(0,p.jsx)(VN,{heading:"Solutions",records:y,fields:[{name:"label",label:"Label",colWidthPct:25,widget:MN,changeHandler:A},{name:"protocols",label:"Protocols",colWidthPct:25,widget:MN,changeHandler:A},{name:"minimalWhy",label:"Minimal Why",colWidthPct:50,widget:jN,cols:70,rows:2,changeHandler:A}],allowChangeOrder:!0,editLink:!0,editBaseURL:"".concat(r,"/solutions"),onDelete:function(e){c.remove(e.id),S(0,"solutions",d.solutions.filter((function(t){return t!==e.id})))},children:(0,p.jsx)(qN,{model:{type:"solution",name:"Solution",labelsUnique:!1},addHandler:function(e,t,r){c.add(function(e,t,n){return{id:e,label:t,problemID:n,actions:[],protocols:"",minimalWhy:""}}(t,r,n)),S(0,"solutions",d.solutions.concat(t))},uniqueIDs:f,uniqueLabels:[],idGenerator:function(){return T(d.solutions,XN,"solution",!1)}})})]}):(0,p.jsx)("div",{children:"Loading..."})},$N=[ZE.REQ,ZE.CONTRA,ZE.IR,ZE.UNN].map((function(e){return{id:e,label:e}})),eC=function(e){var n=e.entity,r=e.name,i=e.changeHandler,a=uN(),o=a.scenario,s=a.scenarioType,c=a.actions,l=u((0,t.useState)(null),2),f=l[0],h=l[1];return(0,t.useEffect)((function(){if(!f){var e=s._checklist.filter((function(e){return e.type===YE.PHASE}));if(!e.map((function(e){return e.id})).includes(n.phase)){var t=Ee(Ee({},o.actions.find((function(e){return e.solutionID===n.solutionID}))),{},{phase:"",subPhase:""});c.update(t)}h(e)}}),[n,o.actions,s._checklist,c,f]),f?(0,p.jsx)(RN,{entity:n,name:r,options:f,changeHandler:i}):(0,p.jsx)("span",{})},tC=function(e){var n=e.entity,r=e.name,i=e.changeHandler,a=uN(),o=a.scenario,s=a.scenarioType,c=a.actions,l=u((0,t.useState)(null),2),f=l[0],h=l[1],d=u((0,t.useState)(!1),2),v=d[0],m=d[1];return(0,t.useEffect)((function(){m(!0)}),[n.phase]),(0,t.useEffect)((function(){if(v){if(""===n.phase)h(null);else{var e=s._checklist.filter((function(e){return e.type===YE.SUB_PHASE&&e.phase===n.phase}));if(h(e),!e.map((function(e){return e.id})).includes(n.subPhase)){var t=Ee(Ee({},o.actions.find((function(e){return e.solutionID===n.solutionID&&e.id===n.id}))),{},{subPhase:""});c.update(t)}}m(!1)}}),[v,n,s._checklist,o.actions,c]),f?(0,p.jsx)(RN,{entity:n,name:r,options:f,changeHandler:i}):(0,p.jsx)("span",{})},nC=function(e){var t=e.id,n=e.multiple,r=void 0!==n&&n,i=e.options,a=e.getValue,o=e.setValue;return(0,p.jsx)("select",{id:t,multiple:r,value:a(t),onChange:function(e){var t,n=e.target,i=n.id,a=n.value,s=n.options;t=r?Array.from(s).filter((function(e){return!!e.selected})).map((function(e){return e.value})):a,console.log(t),o(i,t)},children:i.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.abbrLabel},e.id)}))})},rC=function(e){var t=e.prompt,n=e.getValue,r=e.setValue;return(0,p.jsxs)("div",{children:[(0,p.jsx)("i",{children:t.label}),(0,p.jsx)("br",{}),(0,p.jsx)(nC,{id:t.id,multiple:t.selectionType===JE.OOM,options:t.answers,getValue:n,setValue:r})]})},iC=function(e){var n=e.entity,r=e.name,i=e.changeHandler,a=uN().scenarioType,o=u((0,t.useState)(null),2),s=o[0],c=o[1],l=u((0,t.useState)(null),2),f=l[0],h=l[1],d=function(e){return f[e]},v=function(e,t){var a=Ee(Ee({},f),{},x({},e,t));h(a),i(n.id,r,a)};return(0,t.useEffect)((function(){if(!s){var e=a.getIntervention(n.interventionID,!0).distPrompts,t=n[r];if(t)h(t);else{var o={};e.forEach((function(e){o[e.id]=""})),h(o),i(n.id,r,o)}c(e)}}),[n,r,a,s,i]),s&&0!==s.length?(0,p.jsx)(p.Fragment,{children:s.map((function(e){return(0,p.jsx)(rC,{prompt:e,getValue:d,setValue:v},e.id)}))}):(0,p.jsx)("span",{})},aC=function(){var e=(0,l.UO)(),n=e.probID,r=e.solID,i=uN(),a=i.scenario,o=i.scenarioType,s=i.solutions,c=i.actions,f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(null),2),m=v[0],y=v[1],g=u((0,t.useState)(!1),2),b=g[0],w=g[1],k=u((0,t.useState)(null),2),I=k[0],_=k[1],E=u((0,t.useState)(!1),2),T=E[0],S=E[1],A=function(e,t,n){y((function(e){return Ee(Ee({},e),{},x({},t,n))})),w(!0)},N=function e(t,n,r){"phase"===n&&e(t,"subPhase","");var i=Ee(Ee({},a.actions.find((function(e){return e.id===t}))),{},x({},n,r));c.update(i),S(!0)};return(0,t.useEffect)((function(){var e=a.problems.find((function(e){return e.id===n}));d(e);var t=a.solutions.find((function(e){return e.id===r}));t?(y(Ee({},t)),S(!0)):console.log("solution ".concat(r," not found"))}),[n,r,a.problems,a.solutions]),(0,t.useEffect)((function(){b&&(s.update(m),w(!1))}),[b,m,s]),(0,t.useEffect)((function(){if(T){var e=a.actions.filter((function(e){return m.actions.includes(e.id)})),t=[];m.actions.forEach((function(n){var r=e.find((function(e){return e.id===n}));r?t.push(r):console.log("action ".concat(n," not found. race condtion?"))})),_(t),S(!1)}}),[T,m,a]),I?(0,p.jsxs)(CN,{breadcrumbs:[ES(e),TS(e,h.label),SS(e,m.label)],children:[(0,p.jsx)(UN,{heading:"Solution",record:m,fields:[{name:"id",label:"ID",widget:LN,textSize:"small"},{name:"label",label:"Label",widget:MN,changeHandler:A},{name:"protocols",label:"Protocols",widget:MN,changeHandler:A},{name:"minimalWhy",label:"Minimal Why",widget:jN,changeHandler:A},{name:"strictActionOrdering",label:"Strict Action Ordering",widget:ON,changeHandler:A}]}),(0,p.jsx)(VN,{heading:"Actions",records:I,fields:[{name:"interventionID",label:"Intervention ID",colWidthPct:6,widget:LN,textSize:"xx-small"},{name:"label",label:"Intervention",colWidthPct:17,widget:LN,valueGetter:function(e,t){return o.getIntervention(e.interventionID).label}},{name:"interventionVariant",label:"Intervention Variant",colWidthPct:23,widget:iC,changeHandler:N},{name:"phase",label:"Phase",colWidthPct:5,widget:eC,changeHandler:N},{name:"subPhase",label:"SubPhase",colWidthPct:7,widget:tC,changeHandler:N},{name:"protocolRelationship",label:"Protocol Relationship",colWidthPct:12,widget:RN,options:$N,changeHandler:N},{name:"why",label:"Why",colWidthPct:20,widget:jN,cols:30,rows:3,changeHandler:N},{name:"contributesToSolution",label:"Contrib. to solution",colWidthPct:5,widget:ON,changeHandler:N}],allowChangeOrder:!0,onMoveUp:function(e){A(0,"actions",TA(m.actions,e)),S(!0)},onMoveDown:function(e){A(0,"actions",SA(m.actions,e)),S(!0)},editLink:!1,onDelete:function(e){c.remove(e.id);var t=m.actions.find((function(t){return t===e.id})),n=fe(m.actions);n.splice(t,1),A(0,"actions",n)},children:(0,p.jsx)(WN,{model:{type:YE.INTERV,name:"Intervention"},choices:o._interventions,search:!0,addHandler:function(e,t,i){var a,o,s,u=(a=i,s=n,{id:"".concat(o=r,"-action-").concat(a),interventionID:a,interventionVariant:{},solutionID:o,problemID:s,phase:"",why:"",protocolRelationship:"",contributesToSolution:!1});c.add(u),A(0,"actions",m.actions.concat(u.id))}})})]}):(0,p.jsx)("div",{children:"loading..."})},oC=function(){var e=(0,l.UO)().scenarioId,n=d().setTitle,r=u((0,t.useState)(null),2),i=r[0],a=r[1],o=u((0,t.useState)(null),2),s=o[0],f=o[1],h=u((0,t.useState)(null),2),v=h[0],m=h[1],y=function(e,t){a((function(n){return Ee(Ee({},n),{},x({},e,t))}))},g={add:function(e){return y("problems",IA(i.problems,e))},update:function(e){return y("problems",_A(i.problems,e))},remove:function(e){return y("problems",EA(i.problems,e))}},w={add:function(e){return y("solutions",IA(i.solutions,e))},update:function(e){return y("solutions",_A(i.solutions,e))},remove:function(e){return y("solutions",EA(i.solutions,e))}},I={add:function(e){return y("actions",IA(i.actions,e))},update:function(e){return y("actions",_A(i.actions,e))},remove:function(e){return y("actions",EA(i.actions,e))}},_=function(){var e=k(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(t)),e.next=3,ET(jE,"scenarios",n);case 3:alert("changes saved");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=(0,t.useCallback)((function(){var t=function(){var t=k(b().mark((function t(){var r,i,o;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,TT(jE,"scenarios",e);case 2:return r=t.sent,t.next=5,kT(jE,r.scenarioType,r.schemaVersion);case 5:i=t.sent,o=JA(r,i),n("Scenario: ".concat(o.name)),f(i),a(o);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e,n]);return(0,t.useEffect)((function(){i&&i.id===e||E()}),[e,n,i,E]),(0,t.useEffect)((function(){if(i){var e=fe(s.uniqueIDs);e=e.concat(i.problems.map((function(e){return e.id}))),i.problems.forEach((function(t){e=e.concat(t.notes.map((function(e){return e.id})))})),e=e.concat(i.solutions.map((function(e){return e.id}))),m(e)}}),[s,i]),i&&s?(window.scenario=i,window.scenarioType=s,(0,p.jsxs)("div",{className:"scenario-editor",children:[(0,p.jsxs)("nav",{id:"tab-selector",children:[(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/basic-info"),className:"tab-button",activeClassName:"active-tab",children:"Info"}),(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/patient-status"),className:"tab-button",activeClassName:"active-tab",children:"Patient Status"}),(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/assessment-findings"),className:"tab-button",activeClassName:"active-tab",children:"Assessment Findings"}),(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/checklist-correctness"),className:"tab-button",activeClassName:"active-tab",children:"Checklist Correctness"}),(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/medications"),className:"tab-button",activeClassName:"active-tab",children:"Medications"}),(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/problems"),className:"tab-button",activeClassName:"active-tab",children:"Problems"}),(0,p.jsx)(c.NavLink,{to:"/scenario/".concat(e,"/intervention-answers"),className:"tab-button",activeClassName:"active-tab",children:"Intervention Answers"})]}),(0,p.jsx)(sN.Provider,{value:{scenario:i,updateScenarioFld:y,problems:g,solutions:w,actions:I,uniqueIDs:v,uniqueLabels:s.uniqueLabels,saveScenario:_,scenarioType:s},children:(0,p.jsxs)(l.rs,{children:[(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/basic-info",component:fN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/patient-status",component:mN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/assessment-findings",component:wN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/checklist-correctness",component:xN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/medications",component:_N}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/problems/:probID/solutions/:solID",component:aC}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/problems/:probID",component:ZN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/problems",component:KN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId/intervention-answers",component:NN}),(0,p.jsx)(l.AW,{path:"/scenario/:scenarioId",component:fN})]})})]})):(0,p.jsx)("div",{children:"Loading..."})},sC=function(e){var n=e.match.params.scenarioId,r=u((0,t.useState)(null),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){k(b().mark((function e(){var t,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jE.collection("scenarios").doc(n).get();case 2:return t=e.sent,r=t.data(),e.next=6,kT(jE,r.scenarioType,r.schemaVersion);case 6:i=e.sent,delete r.id,delete r.name,a(JA(r,i));case 10:case"end":return e.stop()}}),e)})))()}),[n]),(0,p.jsx)("div",{children:i?(0,p.jsx)(aN,{scenario:i,isTemplate:!0}):(0,p.jsx)("div",{children:"loading..."})})},uC=function(e){return JSON.parse(JSON.stringify(e))},cC=function(e,t){var n=uC(e);return n.checkListMetaData=uC(t._checklist),n.medications=uC(t._medications),n.interventions=uC(t._interventions),n.interventionPrompts=uC(t._interventionPrompts),n.interventionPromptAnswers=uC(t._interventionPromptAnswers),n.interventionMenuCategories=uC(t._interventionMenuCategories),n.interventionMenuItems=uC(t._interventionMenuItems),n},lC=function(e){var n=e.match.params.scenarioId,r=(0,l.k6)(),i=u((0,t.useState)(""),2),a=i[0],o=i[1],s=u((0,t.useState)(null),2),c=s[0],f=s[1],h=u((0,t.useState)(null),2),d=h[0],v=h[1],m=u((0,t.useState)([]),2),y=m[0],g=m[1],w=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ST(jE,"published-scenarios",t).then(_(d.name));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=k(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==a){e.next=5;break}f("Please provide a name to publish this version of the scenario data as."),e.next=9;break;case 5:return f(null),e.next=8,I(a);case 8:o("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=k(b().mark((function e(t){var n,i,a=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,delete(i=Object.assign({},d,{version:t,datePublished:(new Date).toLocaleString()})).id,n&&(i.id=n),e.next=6,ET(jE,"published-scenarios",i);case 6:return e.next=8,_(i.name);case 8:alert("scenario data published as ".concat(t)),r.push("/scenarios");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=k(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,jE.collection("published-scenarios").where("name","==",t).where("schemaVersion","==","V2").get();case 3:(r=e.sent).size>0&&(n=r.docs.map((function(e){var t=e.data();return{id:t.id,name:t.name,datePublished:t.datePublished,version:t.version}}))),g(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){k(b().mark((function e(){var t,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TT(jE,"scenarios",n);case 2:return t=e.sent,e.next=5,kT(jE,t.scenarioType,t.schemaVersion);case 5:r=e.sent,i=JA(t,r),a=cC(i,r),console.log(a),v(a),_(t.name);case 11:case"end":return e.stop()}}),e)})))()}),[n]),d?(0,p.jsxs)("div",{children:[(0,p.jsxs)("h1",{children:['Publish Scenario: "',d.name,'" (type: "',d.scenarioType,'") ']}),(0,p.jsx)("h4",{children:"First verify that the following pieces of information is ready for publication:"}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:"findings for assessment steps are specified"}),(0,p.jsxs)("li",{children:["problems and solutions are specified: ",(0,p.jsx)("b",{children:(!!d.problems).toString()})]}),(0,p.jsx)("li",{children:"answers to intervention prompts are specified"}),(0,p.jsx)("li",{children:"medication-related info is specified"})]}),(0,p.jsx)("h4",{children:"Published versions of this scenario:"}),(0,p.jsxs)("table",{style:{width:"80%"},children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Version"}),(0,p.jsx)("th",{children:"Date Published"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:y.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.version}),(0,p.jsx)("td",{children:e.datePublished}),(0,p.jsxs)("td",{children:[(0,p.jsx)("button",{onClick:function(){return function(e){var t=y.find((function(t){return t.version===e}));window.confirm('Are you sure you wish to replace the data currently published as "'.concat(e,'"?'))&&I(e,t.id)}(e.version)},children:" Republish using this name "}),(0,p.jsx)("button",{onClick:function(){return w(e.id)},children:"Unpublish"})]})]},e.version)}))})]}),(0,p.jsxs)("label",{children:[" Publish using name:",(0,p.jsx)("input",{type:"text",placeholder:"Name for this version",value:a,onChange:function(e){o(e.target.value)}})]}),(0,p.jsx)("button",{onClick:x,children:"Publish"}),(0,p.jsx)("div",{className:VT()({hidden:!c}),children:c})]}):(0,p.jsx)("div",{children:"Loading..."})},fC="class-codes",hC=function(){var e=u((0,t.useState)(null),2),n=e[0],r=e[1];(0,t.useEffect)((function(){AT(jE,fC).then((function(e){r(e)})).catch((function(e){console.log(e)}))}),[]);var i=function(){var e=k(b().mark((function e(t){var i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.id,!window.confirm("Are you sure you want to permanently this item? This cannot be undone!")){e.next=9;break}return e.next=4,ST(jE,fC,i);case 4:(a=n.slice()).splice(a.indexOf(t),1),r(a),e.next=10;break;case 9:console.log("Delete of ".concat(t.title," cancelled."));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?(0,p.jsxs)("div",{className:"db-list",children:[(0,p.jsx)("h1",{children:"Class Codes"}),(0,p.jsx)(c.Link,{to:"/class-code/",className:"new-bttn db-list-item",children:(0,p.jsx)("h2",{children:"New Class Code"})}),n.map((function(e){return(0,p.jsxs)("div",{className:"db-list-item",children:[(0,p.jsx)("h2",{children:e.name}),(0,p.jsxs)("div",{className:"list-button-wrapper",children:[(0,p.jsx)(c.Link,{to:"/class-code/".concat(e.id),className:"action-bttn",children:"Edit"}),(0,p.jsx)("button",{type:"button",className:"action-bttn delete-bttn",onClick:function(){return i(e)},children:"Delete"})]})]},e.id)}))]}):(0,p.jsx)("div",{children:"Loading..."})},dC=function(){var e=u((0,t.useState)(""),2),n=e[0],r=e[1],i=u((0,t.useState)(null),2),a=i[0],o=i[1],s=(0,l.k6)(),c=function(){var e=k(b().mark((function e(t){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==n){e.next=4;break}return o("Please enter a name for this class code"),e.abrupt("return");case 4:return e.next=6,_T(jE,"class_codes",n,"name","V2");case 6:if(e.sent){e.next=10;break}return o("Class code must be unique"),e.abrupt("return");case 10:return o(null),r=jE.collection("class-codes").doc(),e.next=14,r.set({id:r.id,name:n,assignments:[],orderRequired:!1,schemaVersion:"V2"});case 14:s.push("/class-codes/".concat(r.id));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:"Create Class Code"}),(0,p.jsxs)("label",{children:["Title",(0,p.jsx)("input",{type:"text",value:n,onChange:function(e){r(e.target.value)}})]}),(0,p.jsx)("button",{type:"button",onClick:c,children:"Submit"}),(0,p.jsx)("div",{className:a?"":"hidden",children:a})]})},pC="class-codes",vC=function(e){var t=e.allowChangeOrder,n=void 0===t||t,r=e.n,i=e.of,a=e.moveUpHandler,o=e.moveDownHandler,s=e.removeHandler;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{className:n?"":"hidden",disabled:0===r,onClick:function(){return a(r)},children:"\u2191"}),(0,p.jsx)("button",{className:n?"":"hidden",disabled:i===r,onClick:function(){return o(r)},children:"\u2193"}),(0,p.jsx)("button",{onClick:function(){return s(r)},children:" X "})]})},mC=function(e){var n=e.match.params.classCode,r=u((0,t.useState)(null),2),i=r[0],a=r[1],o=u((0,t.useState)(null),2),s=o[0],c=o[1],f=u((0,t.useState)(null),2),h=f[0],d=f[1],v=u((0,t.useState)(null),2),m=v[0],y=v[1],g=(0,l.k6)(),w=function(e){d([].concat(fe(h.slice(0,e)),fe(h.slice(e+1))))},I=function(e,t){var n=h.slice();n[e]=h[t],n[t]=h[e],d(n)},_=function(e){return I(e,e-1)},E=function(e){return I(e,e+1)},T=function(e){var t=e.target.type,n=e.target.name,r="checkbox"===t?e.target.checked:e.target.value.trim();c((function(e){return Object.assign({},e,x({},n,r))}))},S=function(e,t){var n,r=e.target.value.trim(),i=(n=t,h.findIndex((function(e){return e.name===n})));-1!==i&&function(e,t){d([].concat(fe(h.slice(0,e)),[t],fe(h.slice(e+1))))}(i,Object.assign({},h[i],{publishedScenarioID:r}))},A=function(){var e=k(b().mark((function e(t){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==s.name){e.next=6;break}return y("Please specify a name for this class code"),e.abrupt("return");case 6:if(_T(jE,pC,s.name,"name","V2")){e.next=9;break}return y("class code name must be unique"),e.abrupt("return");case 9:if(h.forEach((function(e){""===e.publishedScenarioID&&y("please select which version of ".concat(e.name," you wish to use"))})),!m){e.next=12;break}return e.abrupt("return");case 12:return r={id:n,name:s.name,orderRequired:s.orderRequired,assignments:h},e.next=15,ET(jE,pC,r);case 15:alert("Assignments updated ".concat(s.name)),g.push("/class-codes-list/");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){k(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,jE.collection("published-scenarios").get();case 3:e.sent.forEach((function(e){var n=e.data(),r=n.id,i=n.name,a=n.datePublished,o=n.version;i in t||(t[i]=[]),t[i].push({id:r,datePublished:a,version:o})})),a(t);case 6:case"end":return e.stop()}}),e)})))()}),[]),(0,t.useEffect)((function(){k(b().mark((function e(){var t,r,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=9;break}return e.next=3,jE.collection(pC).doc(n).get();case 3:t=e.sent,r=t.data(),c({name:r.name,orderRequired:r.orderRequired}),a=(a=r.assignments.filter((function(e){return Object.keys(i).includes(e.name)}))).map((function(e){var t=Object.assign({},e);return delete t.order,t.id&&(t.publishedScenarioID=t.id,delete t.id),i[e.name].map((function(e){return e.id})).includes(e.publishedScenarioID)||(t.publishedScenarioID=""),t})),d(a);case 9:case"end":return e.stop()}}),e)})))()}),[n,i]),(0,t.useEffect)((function(){h&&console.log(h)}),[h]),h?(0,p.jsxs)("div",{className:"scenario-assignment",children:[(0,p.jsx)("h1",{children:"Class Code"}),(0,p.jsxs)("label",{className:"assignment-title",children:["Name:",(0,p.jsx)("input",{type:"text",name:"name",value:s.name,onChange:T})]}),(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Scenario"}),(0,p.jsx)("th",{children:"Version"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:h.map((function(e,t){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.name}),(0,p.jsx)("td",{children:(0,p.jsxs)("select",{value:e.publishedScenarioID,onChange:function(t){return S(t,e.name)},children:[(0,p.jsx)("option",{value:"",children:" - - -"}),(n=e.name,i[n]).map((function(e){return(0,p.jsxs)("option",{value:e.id,children:[e.version," (",e.datePublished,") "]},e.id)}))]})}),(0,p.jsx)("td",{children:(0,p.jsx)(vC,{n:t,of:h.length-1,allowChangeOrder:s.orderRequired,moveUpHandler:_,moveDownHandler:E,removeHandler:w})})]},e.name);var n}))})]}),(0,p.jsxs)("div",{children:["Add Scenario: ",(0,p.jsxs)("select",{onChange:function(e){return t=e.target.value,void d([].concat(fe(h),[{publishedScenarioID:"",name:t}]));var t},children:[(0,p.jsx)("option",{value:"",children:"---"}),function(){var e=Object.keys(i),t=h.map((function(e){return e.name}));return e.filter((function(e){return!t.includes(e)}))}().map((function(e){return(0,p.jsx)("option",{children:e},e)}))]})]}),(0,p.jsxs)("label",{className:"required-bttn",children:["Order required:",(0,p.jsx)("input",{type:"checkbox",name:"orderRequired",checked:s.orderRequired,onChange:T})]}),(0,p.jsx)("button",{type:"button",onClick:A,children:"Submit"})]}):(0,p.jsx)("div",{children:"Loading..."})},yC=function(){var e=u((0,t.useState)(""),2),n=e[0],r=e[1];return(0,p.jsx)(f.AuthProvider,{children:(0,p.jsx)(c.HashRouter,{children:(0,p.jsxs)(h.Provider,{value:{title:n,setTitle:r},children:[(0,p.jsx)(m,{}),(0,p.jsxs)(l.rs,{children:[(0,p.jsx)(f.StaffRoute,{exact:!0,path:"/scenario-types",authFlowLayout:v,component:CT}),(0,p.jsx)(f.StaffRoute,{path:"/scenario-type/:scenarioTypeID",authFlowLayout:v,component:VA}),(0,p.jsx)(f.StaffRoute,{exact:!0,path:"/scenario-type",authFlowLayout:v,component:PT}),(0,p.jsx)(f.StaffRoute,{exact:!0,path:"/scenarios",authFlowLayout:v,component:zA}),(0,p.jsx)(f.StaffRoute,{exact:!0,path:"/scenario/",authFlowLayout:v,component:oN}),(0,p.jsx)(f.StaffRoute,{path:"/scenario/:scenarioId/clone",authFlowLayout:v,component:sC}),(0,p.jsx)(f.StaffRoute,{path:"/scenario/:scenarioId/publish",authFlowLayout:v,component:lC}),(0,p.jsx)(f.StaffRoute,{path:"/scenario/:scenarioId",authFlowLayout:v,component:oC}),(0,p.jsx)(f.StaffRoute,{exact:!0,path:"/class-codes/",authFlowLayout:v,component:hC}),(0,p.jsx)(f.StaffRoute,{exact:!0,path:"/class-code/",authFlowLayout:v,component:dC}),(0,p.jsx)(f.StaffRoute,{path:"/class-code/:classCode",authFlowLayout:v,component:mC}),(0,p.jsx)(l.AW,{component:y})]})]})})})};r.render((0,p.jsx)(t.StrictMode,{children:(0,p.jsx)(yC,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.c090f414.js.map